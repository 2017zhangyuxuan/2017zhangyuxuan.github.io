<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>å¥‡æ€ªçš„forkç»“æœ</title>
    <link href="/2022/04/02/2022-04/2022-04-02%20%E5%A5%87%E6%80%AA%E7%9A%84fork%E7%BB%93%E6%9E%9C/"/>
    <url>/2022/04/02/2022-04/2022-04-02%20%E5%A5%87%E6%80%AA%E7%9A%84fork%E7%BB%93%E6%9E%9C/</url>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a class="markdownIt-Anchor" href="#å‰è¨€"></a> å‰è¨€</h1><p>æœ€è¿‘åœ¨ä¸Šæ“ä½œç³»ç»Ÿçš„ç›¸å…³è¯¾ç¨‹ï¼Œæ°å¥½å­¦åˆ°äº†forkå‡½æ•°ã€‚è¿™ä¹ˆä¸ºäº†å¼•å…¥é—®é¢˜ï¼Œç®€å•æµ‹è¯•ä¸€ä¸‹ï¼Œè¯·é—®ä¸‹é¢çš„ä»£ç ä¼šè¾“å‡ºä»€ä¹ˆï¼Ÿ</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs C"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;unistd.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdlib.h&gt;</span></span><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>     fork();<br>     fork();<br>     fork();<br>     <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Hello World\n&quot;</span>);<br>     <span class="hljs-built_in">exit</span>(<span class="hljs-number">0</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202204031058600.jpg" alt="" /></p><h1 id="å¥‡å¦™çš„è¿‡ç¨‹"><a class="markdownIt-Anchor" href="#å¥‡å¦™çš„è¿‡ç¨‹"></a> å¥‡å¦™çš„è¿‡ç¨‹</h1><p>ç›¸ä¿¡èªæ˜çš„å°ä¼™ä¼´ï¼Œé©¬ä¸Šå°±èƒ½å›ç­”ï¼Œâ€œä¼šè¾“å‡º8è¡Œ Hello Worldâ€ã€‚åŸå› ä¹Ÿå¾ˆç®€å•ï¼Œå› ä¸ºæ¯æ¬¡æ‰§è¡Œå®Œforkå‡½æ•°éƒ½ä¼šç”Ÿæˆä¸€ä¸ªè·Ÿçˆ¶è¿›ç¨‹ä¸€æ ·çš„å­è¿›ç¨‹ï¼Œæ‰€ä»¥ç¬¬ä¸€æ¬¡æ‰§è¡Œå®Œforkï¼Œæ€»å…±æœ‰2ä¸ªè¿›ç¨‹ï¼Œç¬¬äºŒæ¬¡æ‰§è¡Œå®Œforkå°±ä¼šæœ‰4ä¸ªï¼Œç¬¬ä¸‰æ¬¡æ‰§è¡Œå®Œå°±ä¼šæœ‰8ä¸ªï¼Œæ‰€ä»¥æœ€åæ¯ä¸ªè¿›ç¨‹éƒ½ä¼šè¾“å‡ºä¸€è¡ŒHello Worldã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ç¨å¾®æ”¹å˜ä»£ç ï¼Œå˜æˆä¸‹é¢è¿™æ ·å­ï¼Œé‚£ä¹ˆè¿™æ¬¡è¾“å‡ºç»“æœä¼šæ€ä¹ˆæ ·å‘¢ï¼Ÿ</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs C"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;unistd.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdlib.h&gt;</span></span><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>     <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Hello World\n&quot;</span>);<br>     fork();<br>     fork();<br>     fork();<br>     <span class="hljs-built_in">exit</span>(<span class="hljs-number">0</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™ä¸ä¹Ÿè¿˜æ˜¯å¾ˆç®€å•å—ï¼Œç»“æœåªæ˜¯è¾“å‡ºä¸€è¡Œâ€œHello Worldâ€ï¼Œå› ä¸ºæ‰“å°æ“ä½œåœ¨forkæ“ä½œå‰ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥çš„å­è¿›ç¨‹éƒ½ä¸ä¼šå†æ‰§è¡Œæ‰“å°è¾“å‡ºçš„æ“ä½œäº†ã€‚ä¸€å¼€å§‹æˆ‘ä¹Ÿæ˜¯è¿™ä¹ˆæƒ³çš„ï¼Œä½†æ˜¯VScodeä¸Šçš„è¾“å‡ºç»“æœå´ä»¤äººå¤§åƒä¸€æƒŠï¼Œè¿™æ€ä¹ˆè¿˜æ˜¯è¾“å‡º8è¡Œå•Šï¼Ÿ</p><p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202204022126863.png" alt="VScodeè¾“å‡ºç»“æœ" /></p><center><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202204031059494.jpg" alt="" style="zoom: 50%;" /></center></br><p>è¿™çœŸè®©äººæœ‰äº›æ‘¸ä¸ç€å¤´è„‘ï¼Œç„¶åæˆ‘åˆè¯•äº†è¯•åœ¨å‘½ä»¤è¡Œä¸‹ç›´æ¥ç¼–è¯‘æ‰§è¡Œï¼Œå‘ç°è¿™æ¬¡å¾—åˆ°çš„ç»“æœç¬¦åˆé¢„æœŸï¼Œè¿™æ›´åŠ ä»¤äººç–‘æƒ‘äº†ã€‚æ‰€ä»¥æˆ‘åˆå»è¯•äº†è¯•åœ¨Clionä¸‹æ‰§è¡Œè¿™æ®µä»£ç ï¼Œå‘ç°è¾“å‡ºçš„ç»“æœä¹Ÿæ˜¯ç¬¦åˆé¢„æœŸçš„ã€‚</p><p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202204022128750.png" alt="å‘½ä»¤è¡Œä¸‹ç¼–è¯‘æ‰§è¡Œ" /></p><p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202204022130779.png" alt="Clionæ‰§è¡Œç»“æœ" /></p><p>é‚£ä¹ˆåœ¨å¤šæ–¹å¯¹æ¯”ä¹‹ä¸‹ï¼Œåªèƒ½æ˜¯è®¤ä¸ºæ˜¯VScodeå‡ºäº†é—®é¢˜ã€‚å½“æ—¶æˆ‘è¿˜è®¤ä¸ºæ˜¯VScodeé‡ŒCode Runnerè¿™ä¸ªæ’ä»¶çš„é—®é¢˜ï¼Œæ‰€ä»¥åœ¨Stack Overflowä¸Šæé—®äº†<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="stackoverflowä¸Š æé—®forkçš„å¥‡æ€ªè¾“å‡ºç»“æœ">[1]</span></a></sup>ï¼Œéšåå¾—åˆ°äº†å¤§ç‰›çš„è§£ç­”ã€‚</p><p>ç®€å•æ¥è¯´printfæ˜¯æœ‰ä¸€ä¸ªbufferçš„ï¼Œä¹Ÿå°±æ˜¯è¯´å¹¶ä¸æ˜¯æ‰§è¡Œå®Œprintfè¯­å¥ï¼Œå°±ä¼šç«‹å³è¾“å‡ºæ˜¾ç¤ºåˆ°ç»ˆç«¯å±å¹•ï¼ˆæ ‡å‡†è¾“å‡ºstdoutï¼‰ä¸Šï¼Œåªæœ‰bufferæ»¡äº†ï¼Œæˆ–è€…æ˜¾ç¤ºè°ƒç”¨åˆ·æ–°ï¼Œæˆ–æ˜¯è¾“å…¥å›è½¦ç¬¦ â€˜\nâ€™ ï¼Œæ‰ä¼šç«‹å³å°†ç¼“å†²åŒºçš„å†…å®¹è¾“å‡ºåˆ°å±å¹•ä¸Šã€‚</p><p>ä½†æ˜¯å¯¹äºVScodeæ¥è¯´ï¼Œç¨‹åºä»£ç å¹¶ä¸æ˜¯ç›´æ¥è¿è¡Œåœ¨ç»ˆç«¯shellé‡Œçš„ï¼Œæ ‡å‡†è¾“å‡ºstdoutä¼šç»‘å®šåˆ°IDEè‡ªèº«çš„ä¸€ä¸ªGUIï¼ˆå›¾å½¢ç”¨æˆ·ç•Œé¢ï¼‰ã€‚æ­¤æ—¶ï¼Œåªæœ‰å½“ç¼“å†²åŒºæ»¡äº†ï¼Œæˆ–è€…æ˜¯æ‰‹åŠ¨åˆ·æ–°ç¼“å†²åŒºçš„æ—¶å€™ï¼Œæ‰ä¼šç«‹åˆ»è¾“å‡ºåˆ°GUIç•Œé¢ä¸Šï¼Œä¹Ÿå°±æ˜¯è¯´ç¼“å†²åŒºæ¥æ”¶åˆ°äº†â€™\nâ€™å›è½¦ç¬¦ä¹Ÿä¸ä¼šç«‹å³è¾“å‡ºã€‚ä¸‹å›¾æ˜¯æˆ‘çš„ç†è§£ï¼Œå¯èƒ½ä¸å¤ªå‡†ç¡®ï¼Œä¸è¿‡å¤§ä½“ä¸Šè¿™ä¹ˆè§£é‡Šèƒ½å¤Ÿè¯´å¾—é€šã€‚</p><p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202204031034635.jpeg" alt="ä¸ªäººå›¾è§£ï¼ˆå¯èƒ½ä¸å¤ªå‡†ç¡®ï¼‰" /></p><p>å› æ­¤å°±æœ‰äº†è¾“å‡º8è¡Œçš„å¥‡æ€ªå½¢è±¡ï¼Œå› ä¸ºæ¯ä¸ªå­è¿›ç¨‹éƒ½ç»§æ‰¿äº†ç¼“å†²åŒºé‡Œçš„å†…å®¹ï¼Œç›´åˆ°æœ€åç¨‹åºé€€å‡ºæ—¶åˆ·æ–°ç¼“å†²åŒºï¼Œå› æ­¤æœ€åæ¯ä¸ªç¨‹åºéƒ½è¾“å‡ºä¸€è¡Œã€‚</p><p>ç„¶ååœ¨å°è¯•ä¸‹æ·»åŠ <code>fflush</code>æ‰‹åŠ¨åˆ·æ–°ç¼“å†²åŒºï¼Œè¾“å‡ºæœç„¶å˜æˆäº†åªæœ‰ä¸€è¡Œï¼ŒéªŒè¯äº†ä¹‹å‰çš„æƒ³æ³•ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs C"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;unistd.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdlib.h&gt;</span></span><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>     <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Hello World\n&quot;</span>);<br>     fflush(<span class="hljs-built_in">stdout</span>);<br>     fork();<br>     fork();<br>     fork();<br>     <span class="hljs-built_in">exit</span>(<span class="hljs-number">0</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202204031041593.png" alt="æ·»åŠ fflushåè¾“å‡ºç»“æœ" /></p><center><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202204031102883.jpg" alt="" style="zoom: 50%;" /></center><h1 id="å°ç»“"><a class="markdownIt-Anchor" href="#å°ç»“"></a> å°ç»“</h1><p>è‡³æ­¤ï¼Œæœ‰å…³forkä¹‹åå¥‡æ€ªçš„è¾“å‡ºç»“æœç»ˆäºæ°´è½çŸ³å‡ºï¼Œå…¶ä¸­æ¶‰åŠåˆ°çš„ä¸€ä¸ªå…³é”®ç‚¹å°±æ˜¯printfæˆ–è€…è¯´stdoutæ˜¯æœ‰ç¼“å†²åŒºçš„ï¼Œå¹¶ä¸æ˜¯æ‰§è¡Œå®Œè¯¥å‡½æ•°è¯­å¥å°±ä¼šç«‹åˆ»è¾“å‡ºåˆ°å±å¹•ä¸Šï¼Œè¿™ä¸€ä¸ªçŸ¥è¯†ç‚¹å…¶å®ä»¥å‰ä¹Ÿäº†è§£è¿‡ï¼Œä½†æ˜¯æ²¡æœ‰é‡è§†ï¼Œæˆ–è€…è¯´æ²¡æœ‰è¿›ä¸€æ­¥äº†è§£åº•å±‚å®ç°ï¼ŒåªçŸ¥é“ä¸ªæ¦‚å¿µï¼Œæ‰€ä»¥çœŸæ­£é‡åˆ°é—®é¢˜æ—¶ï¼Œè¿˜æ˜¯ä¸èƒ½æƒ³åˆ°è¿™ä¸€ç‚¹ã€‚</p><p>æ‰€ä»¥è¿˜æ˜¯è¦çœ‹æºç å•Šï¼Œæºç ä¹‹å‰ï¼Œäº†æ— ç§˜å¯†ã€‚ä½†å°´å°¬çš„æ˜¯ï¼Œæˆ‘åœ¨IDEé‡Œæƒ³çœ‹å¯¹åº”åº“å‡½æ•°çš„æºä»£ç å®ç°æ—¶ï¼Œæ€»æ˜¯è·³è½¬ä¸åˆ°å¯¹åº”çš„å®ç°ï¼Œåªæœ‰ä¸€äº›å£°æ˜ï¼Œè¿™å°±å¾ˆå°´å°¬ã€‚ä¸‹è½½äº†gccç¼–è¯‘å™¨æºç ï¼Œä½†ä¸æ˜¯å¾ˆäº†è§£ç›®å½•ç»“æ„ï¼Œæ‰¾äº†åŠå¤©ä¹Ÿè¿˜æ˜¯æ²¡æœ‰æ‰¾åˆ°å¯¹åº”å®ç°ã€‚ä¸çŸ¥é“æœ‰æ²¡æœ‰äººè·Ÿæˆ‘æœ‰ç±»ä¼¼çš„è‹¦æ¼ï¼Œæ­£å¥½ç­‰ä¸‹æ¬¡è§£å†³äº†ï¼Œåˆå¯ä»¥æ°´ä¸€ç¯‡åšæ–‡äº† ğŸ˜ƒã€‚</p><section class="footnotes"><h1>å¤‡æ³¨/å‚è€ƒ</h1><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a href="https://stackoverflow.com/questions/71691584/why-are-the-results-performed-using-code-runner-in-vscode-different-from-the-res">stackoverflowä¸Š æé—®forkçš„å¥‡æ€ªè¾“å‡ºç»“æœ</a><a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a href="https://blog.csdn.net/LG1259156776/article/details/52935741">printfç¼“å†²åŒºå°ç»“</a><a href="#fnref:2" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºçŸ¥è¯†</category>
      
      <category>ä»£ç è¿·æƒ‘è¡Œä¸ºå¤§èµ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>C++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€è®¾è®¡æ¨¡å¼ã€‘æŠ½è±¡å·¥å‚æ¨¡å¼</title>
    <link href="/2022/04/02/2022-04/2022-04-02%E3%80%90%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E3%80%91%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/"/>
    <url>/2022/04/02/2022-04/2022-04-02%E3%80%90%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E3%80%91%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/</url>
    
    <content type="html"><![CDATA[<h1 id="abstract-factory-æŠ½è±¡å·¥å‚å¯¹è±¡åˆ›å»ºå‹æ¨¡å¼"><a class="markdownIt-Anchor" href="#abstract-factory-æŠ½è±¡å·¥å‚å¯¹è±¡åˆ›å»ºå‹æ¨¡å¼"></a> Abstract Factory æŠ½è±¡å·¥å‚â€”â€”å¯¹è±¡åˆ›å»ºå‹æ¨¡å¼</h1><h2 id="1-æ„å›¾"><a class="markdownIt-Anchor" href="#1-æ„å›¾"></a> 1. æ„å›¾</h2><p>æä¾›ä¸€ä¸ªæ¥å£ä»¥åˆ›å»ºä¸€ç³»åˆ—ç›¸å…³æˆ–ç›¸äº’ä¾èµ–çš„å¯¹è±¡ï¼Œè€Œæ— éœ€æŒ‡å®šå®ƒä»¬å…·ä½“çš„ç±»ã€‚</p><h2 id="2-åŠ¨æœº"><a class="markdownIt-Anchor" href="#2-åŠ¨æœº"></a> 2. åŠ¨æœº</h2><p>è€ƒè™‘ä¸€ä¸ªæ”¯æŒå¤šç§è§†æ„Ÿï¼ˆlook-and-feelï¼‰æ ‡å‡†çš„ç”¨æˆ·ç•Œé¢å·¥å…·åŒ…ï¼Œä¸åŒçš„è§†æ„Ÿé£æ ¼ä¸ºè¯¸å¦‚æ»šåŠ¨æ¡ã€çª—å£å’ŒæŒ‰é’®ç­‰ç”¨æˆ·ç•Œé¢â€œçª—å£ç»„ä»¶â€å®šä¹‰ä¸åŒçš„å¤–è§‚å’Œè¡Œä¸ºã€‚ä¸ºä¿è¯è§†æ„Ÿé£æ ¼æ ‡å‡†ä¹‹é—´çš„å¯ç§»æ¤æ€§ï¼Œä¸€ä¸ªåº”ç”¨ä¸åº”è¯¥ä¸ºä¸€ä¸ªç‰¹å®šçš„è§†æ„Ÿå¤–è§‚ç¡¬ç¼–ç å®ƒçš„çª—å£ç»„ä»¶ã€‚åœ¨æ•´ä¸ªåº”ç”¨å®ä¾‹åŒ–ç‰¹å®šè§†æ„Ÿé£æ ¼çš„çª—å£ç»„ä»¶ç±»å°†ä½¿å¾—ä»¥åå¾ˆéš¾æ”¹å˜è§†æ„Ÿé£æ ¼ã€‚</p><p>ä¸ºè§£å†³è¿™ä¸€é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªæŠ½è±¡çš„WidgetFactoryç±»ï¼Œè¿™ä¸ªç±»å£°æ˜äº†ä¸€ä¸ªæ°¸å®‰é‡Œåˆ›å»ºæ¯ä¸€ç±»åŸºæœ¬çª—å£ç»„ä»¶çš„æ¥å£ã€‚æ¯ä¸€ç±»çª—å£ç»„ä»¶éƒ½æœ‰ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œè€Œå…·ä½“å­ç±»åˆ™å®ç°äº†çª—å£ç»„ä»¶çš„ç‰¹å®šè§†æ„Ÿé£æ ¼ã€‚</p><h2 id="3-é€‚ç”¨æ€§"><a class="markdownIt-Anchor" href="#3-é€‚ç”¨æ€§"></a> 3. é€‚ç”¨æ€§</h2><p>åœ¨ä»¥ä¸‹æƒ…å†µä¸‹ä½¿ç”¨Abstract Factory</p><ul><li>ä¸€ä¸ªç³»ç»Ÿè¦ç‹¬ç«‹äºå®ƒçš„äº§å“çš„åˆ›å»ºã€ç»„åˆå’Œè¡¨ç¤ºã€‚</li><li>ä¸€ä¸ªç³»ç»Ÿè¦ç”±å¤šä¸ªäº§å“ç³»åˆ—ä¸­çš„ä¸€ä¸ªæ¥é…ç½®ã€‚</li><li>è¦å¼ºè°ƒä¸€ç³»åˆ—ç›¸å…³çš„äº§å“å¯¹è±¡çš„è®¾è®¡ä»¥ä¾¿è¿›è¡Œè”åˆä½¿ç”¨ã€‚</li><li>æä¾›ä¸€ä¸ªäº§å“ç±»åº“ï¼Œä½†åªæƒ³æ˜¾ç¤ºå®ƒä»¬çš„æ¥å£è€Œä¸æ˜¯å®ç°ã€‚</li></ul><h2 id="4-ç»“æ„"><a class="markdownIt-Anchor" href="#4-ç»“æ„"></a> 4. ç»“æ„</h2><p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202204021937446.jpeg" alt="UMLç±»å›¾ç¤ºæ„" /></p><h2 id="5-å‚ä¸è€…"><a class="markdownIt-Anchor" href="#5-å‚ä¸è€…"></a> 5. å‚ä¸è€…</h2><ul><li>AbstractFactory<ul><li>å£°æ˜ä¸€ä¸ªåˆ›å»ºæŠ½è±¡äº§å“å¯¹è±¡çš„æ“ä½œæ¥å£</li></ul></li><li>ConcreteFactory<ul><li>å®ç°åˆ›å»ºå…·ä½“äº§å“å¯¹è±¡çš„æ“ä½œ</li></ul></li><li>AbstractProduct<ul><li>ä¸ºä¸€ç±»äº§å“å¯¹è±¡å£°æ˜ä¸€ä¸ªæ¥å£</li></ul></li><li>ConcreteProduct<ul><li>å®šä¹‰ä¸€ä¸ªå°†è¢«ç›¸åº”çš„å…·ä½“å·¥å‚åˆ›å»ºçš„äº§å“å¯¹è±¡</li><li>å®ç°AbstracProductæ¥å£</li></ul></li><li>Client<ul><li>ä»…ä½¿ç”¨ç”±AbstractFactory å’Œ AbstractProductç±»å£°æ˜çš„æ¥å£</li></ul></li></ul><h2 id="6-åä½œ"><a class="markdownIt-Anchor" href="#6-åä½œ"></a> 6. åä½œ</h2><p>é€šå¸¸åœ¨è¿è¡Œæ—¶åˆ›å»ºä¸€ä¸ªConcreteFactoryç±»çš„å®ä¾‹ã€‚è¿™ä¸€å…·ä½“çš„å·¥å‚åˆ›å»ºå…·æœ‰ç‰¹å®šå®ç°çš„äº§å“å¯¹è±¡ã€‚ä¸ºåˆ›å»ºä¸åŒçš„äº§å“å¯¹è±¡ï¼Œå®¢æˆ·åº”ä½¿ç”¨ä¸åŒçš„å…·ä½“å·¥å‚ã€‚</p><p>AbstractFactoryå°†äº§å“å¯¹è±¡çš„åˆ›å»ºå»¶è¿Ÿåˆ°å®ƒçš„ConcreteFactoryå­ç±»ã€‚</p><h2 id="7-æ•ˆæœ"><a class="markdownIt-Anchor" href="#7-æ•ˆæœ"></a> 7. æ•ˆæœ</h2><p>AbstractFactoryæ¨¡å¼æœ‰ä¸€ä¸‹ä¼˜ç‚¹å’Œç¼ºç‚¹ï¼š</p><ul><li>ä¼˜ç‚¹ï¼šå®ƒåˆ†ç¦»äº†å…·ä½“çš„ç±»ã€‚</li><li>ä¼˜ç‚¹ï¼šå®ƒä½¿å¾—æ˜“äºäº¤æ¢äº§å“ç³»åˆ—ã€‚ä¸€ä¸ªå…·ä½“å·¥å‚ç±»åœ¨ä¸€ä¸ªåº”ç”¨ä¸­ä»…å‡ºç°ä¸€æ¬¡â€”â€”åœ¨å®ƒåˆå§‹åŒ–çš„æ—¶å€™ã€‚è¿™ä½¿å¾—æ”¹å˜ä¸€ä¸ªåº”ç”¨çš„å…·ä½“å·¥å‚å˜å¾—å¾ˆå®¹æ˜“ã€‚</li><li>ä¼˜ç‚¹ï¼šå®ƒæœ‰åˆ©äºäº§å“çš„ä¸€è‡´æ€§ã€‚å½“ä¸€ä¸ªç³»åˆ—ä¸­çš„äº§å“å¯¹è±¡è¢«è®¾è®¡æˆä¸€èµ·å·¥ä½œæ—¶ï¼Œä¸€ä¸ªåº”ç”¨ä¸€æ¬¡åªèƒ½ä½¿ç”¨åŒä¸€ä¸ªç³»åˆ—ä¸­çš„å¯¹è±¡ï¼Œè¿™ä¸€ç‚¹å¾ˆé‡è¦ã€‚</li><li>ç¼ºç‚¹ï¼šéš¾ä»¥æ”¯æŒæ–°ç§ç±»çš„äº§å“ï¼Œä¹Ÿå°±æ˜¯éš¾ä»¥æ‰©å±•æŠ½è±¡å·¥å‚ä»¥ç”Ÿäº§æ–°ç§ç±»çš„äº§å“ã€‚è¿™æ˜¯å› ä¸ºAbstractFactoryæ¥å£ç¡®å®šäº†å¯ä»¥è¢«åˆ›å»ºçš„äº§å“é›†åˆã€‚æ”¯æŒæ–°ç§ç±»çš„äº§å“å°±éœ€è¦æ‰©å±•è¯¥å·¥å‚æ¥å£ï¼Œè¿™å°†æ¶‰åŠAbstractFactoryç±»åŠå…¶æ‰€æœ‰å­ç±»çš„æ”¹å˜ã€‚</li></ul><h2 id="8-ç¤ºä¾‹ä»£ç "><a class="markdownIt-Anchor" href="#8-ç¤ºä¾‹ä»£ç "></a> 8. ç¤ºä¾‹ä»£ç </h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">// AbstractFactory.h</span><br><span class="hljs-comment">// Created by å¼ å®‡è½© on 2022/4/2.</span><br><span class="hljs-comment">// Copyright (c) 2022 zhangyuxuan. All rights reserved.</span><br><span class="hljs-comment">// </span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-meta-keyword">ifndef</span> CREATIONPATTERNDESIGN_ABSTRACTFACTORY_H</span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> CREATIONPATTERNDESIGN_ABSTRACTFACTORY_H</span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-comment">/** </span><br><span class="hljs-comment"> * @brief å®šä¹‰ä¸€ä¸ªç”Ÿäº§ç»„ä»¶çš„æŠ½è±¡å·¥å‚ WidgetFactoryï¼Œæ´¾ç”Ÿå‡º Mac å’Œ Linux ä¸¤ç§é£æ ¼çš„å…·ä½“æŠ½è±¡å·¥å‚å®ç°ç±»ï¼›</span><br><span class="hljs-comment"> * æŠ½è±¡çš„äº§å“ç±»å¯¹åº”æœ‰ Window çª—å£ç»„ä»¶å’Œ ScrollBar æ»šåŠ¨æ¡ç»„ä»¶</span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">test_abstract_factory</span><span class="hljs-params">()</span></span>;<br><br><span class="hljs-comment">// æŠ½è±¡äº§å“ç±»ï¼Œçª—å£</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Window</span> &#123;</span><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">show</span><span class="hljs-params">()</span> </span>&#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;è¿™æ˜¯ä¸€ä¸ªæ™®é€šçª—å£&quot;</span> &lt;&lt; endl;<br>    &#125;<br>&#125;;<br><br><span class="hljs-comment">// å…·ä½“äº§å“ç±»ï¼Œå¯¹åº”äº Mac é£æ ¼ç³»åˆ—</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MacWindow</span> :</span> <span class="hljs-keyword">public</span> Window&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">show</span><span class="hljs-params">()</span> </span>&#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;è¿™æ˜¯ä¸€ä¸ª mac é£æ ¼çš„çª—å£&quot;</span> &lt;&lt; endl;<br>    &#125;<br>&#125;;<br><br><span class="hljs-comment">// å…·ä½“äº§å“ç±»ï¼Œå¯¹åº”äº Linux é£æ ¼ç³»åˆ—</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LinuxWindow</span> :</span> <span class="hljs-keyword">public</span> Window&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">show</span><span class="hljs-params">()</span> </span>&#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;è¿™æ˜¯ä¸€ä¸ª Linux é£æ ¼çš„çª—å£&quot;</span> &lt;&lt; endl;<br>    &#125;<br>&#125;;<br><br><span class="hljs-comment">// æŠ½è±¡äº§å“ç±»ï¼Œæ»šåŠ¨æ¡</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ScrollBar</span> &#123;</span><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">scroll</span><span class="hljs-params">()</span> </span>&#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;è¿™æ˜¯ä¸€ä¸ªæ™®é€šæ»šåŠ¨æ¡&quot;</span> &lt;&lt; endl;<br>    &#125;<br>&#125;;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MacScrollBar</span> :</span> <span class="hljs-keyword">public</span> ScrollBar &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">scroll</span><span class="hljs-params">()</span> </span>&#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;è¿™æ˜¯ Mac é£æ ¼çš„æ»šåŠ¨æ¡&quot;</span> &lt;&lt; endl;<br>    &#125;<br>&#125;;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LinuxScrollBar</span> :</span> <span class="hljs-keyword">public</span> ScrollBar &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">scroll</span><span class="hljs-params">()</span> </span>&#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;è¿™æ˜¯ Linux é£æ ¼çš„æ»šåŠ¨æ¡&quot;</span> &lt;&lt; endl;<br>    &#125;<br>&#125;;<br><br><span class="hljs-comment">// æŠ½è±¡å·¥å‚ç±» AbstractFactory</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">WidgetFactory</span> &#123;</span><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> std::shared_ptr&lt;ScrollBar&gt; <span class="hljs-title">create_scrollbar</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> std::shared_ptr&lt;Window&gt; <span class="hljs-title">create_window</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;<br>&#125;;<br><br><span class="hljs-comment">// å…·ä½“å·¥å‚ç±»ï¼Œç”¨äºç”Ÿäº§ Mac é£æ ¼ç³»åˆ—çš„ç»„ä»¶</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MacWidgetFactory</span> :</span> <span class="hljs-keyword">public</span> WidgetFactory &#123;<br><span class="hljs-keyword">public</span> :<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> std::shared_ptr&lt;ScrollBar&gt; <span class="hljs-title">create_scrollbar</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> make_shared&lt;MacScrollBar&gt;();<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> std::shared_ptr&lt;Window&gt; <span class="hljs-title">create_window</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> make_shared&lt;MacWindow&gt;();<br>    &#125;<br>&#125;;<br><br><span class="hljs-comment">// å…·ä½“å·¥å‚ç±»ï¼Œç”¨äºç”Ÿäº§ Linux é£æ ¼ç³»åˆ—çš„ç»„ä»¶</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LinuxWidgetFactory</span> :</span> <span class="hljs-keyword">public</span> WidgetFactory &#123;<br><span class="hljs-keyword">public</span> :<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> std::shared_ptr&lt;ScrollBar&gt; <span class="hljs-title">create_scrollbar</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> make_shared&lt;LinuxScrollBar&gt;();<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> std::shared_ptr&lt;Window&gt; <span class="hljs-title">create_window</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> make_shared&lt;LinuxWindow&gt;();<br>    &#125;<br>&#125;;<br><br><span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span> <span class="hljs-comment">//CREATIONPATTERNDESIGN_ABSTRACTFACTORY_H</span></span><br></code></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">// AbstractFactory.cpp</span><br><span class="hljs-comment">// Created by å¼ å®‡è½© on 2022/4/2.</span><br><span class="hljs-comment">// Copyright (c) 2022 zhangyuxuan. All rights reserved.</span><br><span class="hljs-comment">// </span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&quot;AbstractFactory.h&quot;</span></span><br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">test_abstract_factory</span><span class="hljs-params">()</span> </span>&#123;<br>    cout &lt;&lt; <span class="hljs-string">&quot;â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”å¼€å§‹æµ‹è¯•æŠ½è±¡å·¥å‚æ¨¡å¼â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”&quot;</span> &lt;&lt; endl;<br><br>    shared_ptr&lt;WidgetFactory&gt; wf = make_shared&lt;MacWidgetFactory&gt;();<br>    shared_ptr&lt;ScrollBar&gt; sb = wf-&gt;<span class="hljs-built_in">create_scrollbar</span>();<br>    shared_ptr&lt;Window&gt; window = wf-&gt;<span class="hljs-built_in">create_window</span>();<br>    sb-&gt;<span class="hljs-built_in">scroll</span>();<br>    window-&gt;<span class="hljs-built_in">show</span>();<br><br>    wf = make_shared&lt;LinuxWidgetFactory&gt;();<br>    sb = wf-&gt;<span class="hljs-built_in">create_scrollbar</span>();<br>    window = wf-&gt;<span class="hljs-built_in">create_window</span>();<br>    sb-&gt;<span class="hljs-built_in">scroll</span>();<br>    window-&gt;<span class="hljs-built_in">show</span>();<br><br>    cout &lt;&lt; <span class="hljs-string">&quot;â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”ç»“æŸæµ‹è¯•æŠ½è±¡å·¥å‚æ¨¡å¼â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”&quot;</span> &lt;&lt; endl;<br>    cout &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="9-ç›¸å…³æ¨¡å¼"><a class="markdownIt-Anchor" href="#9-ç›¸å…³æ¨¡å¼"></a> 9. ç›¸å…³æ¨¡å¼</h2><p>AbstractFactoryç±»é€šå¸¸ç”¨å·¥å‚æ–¹æ³•ï¼ˆFactory Methodï¼‰æ¥å®ç°ï¼Œä½†å®ƒä»¬ä¹Ÿå¯ä»¥ç”¨Prototypeå®ç°ã€‚</p><p>ä¸€ä¸ªå…·ä½“çš„å·¥å‚é€šå¸¸æ˜¯ä¸€ä¸ªå•ä¾‹ï¼ˆSingletonï¼‰ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºçŸ¥è¯†</category>
      
      <category>ç¼–ç¨‹æŠ€å·§</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è®¾è®¡æ¨¡å¼</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€è®¾è®¡æ¨¡å¼ã€‘äº«å…ƒæ¨¡å¼ä¸ç­–ç•¥æ¨¡å¼</title>
    <link href="/2022/03/26/2022-03/2022-03-26%20%E3%80%90%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E3%80%91%E4%BA%AB%E5%85%83%E5%92%8C%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F/"/>
    <url>/2022/03/26/2022-03/2022-03-26%20%E3%80%90%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E3%80%91%E4%BA%AB%E5%85%83%E5%92%8C%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F/</url>
    
    <content type="html"><![CDATA[<h1 id="flyweightäº«å…ƒæ¨¡å¼"><a class="markdownIt-Anchor" href="#flyweightäº«å…ƒæ¨¡å¼"></a> Flyweightï¼ˆäº«å…ƒï¼‰æ¨¡å¼</h1><h2 id="1-æ„å›¾"><a class="markdownIt-Anchor" href="#1-æ„å›¾"></a> 1. æ„å›¾</h2><p>è¿ç”¨å…±äº«æŠ€æœ¯æœ‰æ•ˆåœ°æ”¯æŒå¤§é‡ç»†ç²’åº¦çš„å¯¹è±¡</p><h2 id="2-åŠ¨æœº"><a class="markdownIt-Anchor" href="#2-åŠ¨æœº"></a> 2. åŠ¨æœº</h2><p>Flyweightæ¨¡å¼æè¿°äº†å¦‚ä½•å…±äº«å¯¹è±¡ï¼Œä½¿å¾—å¯ä»¥ç»†ç²’åº¦åœ°ä½¿ç”¨å®ƒä»¬è€Œä¸éœ€è¦é«˜æ˜‚çš„ä»£ä»·ã€‚</p><p>Flyweightæ˜¯ä¸€ä¸ªå…±äº«å¯¹è±¡ï¼Œä»–å¯ä»¥åŒæ—¶åœ¨å¤šä¸ªåœºæ™¯ï¼ˆcontextï¼‰ä¸­ä½¿ç”¨ï¼Œå¹¶ä¸”åœ¨æ¯ä¸ªåœºæ™¯ä¸­flyweightéƒ½å¯ä»¥ä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„å¯¹è±¡â€”â€”è¿™ä¸€ç‚¹ä¸éå…±äº«å¯¹è±¡çš„å®ä¾‹æ²¡æœ‰åŒºåˆ«ã€‚flyweightä¸èƒ½å¯¹å®ƒæ‰€è¿è¡Œçš„åœºæ™¯åšå‡ºä»»ä½•å‡è®¾ï¼Œè¿™é‡Œå…³é”®çš„æ¦‚å¿µæ˜¯<strong>å†…éƒ¨çŠ¶æ€</strong>ä¸<strong>å¤–éƒ¨çŠ¶æ€</strong>ä¹‹é—´çš„åŒºåˆ«ã€‚å†…éƒ¨çŠ¶æ€å­˜å‚¨äºflyweightä¸­ï¼Œå®ƒåŒ…å«äº†ç‹¬ç«‹äºflyweightåœºæ™¯çš„ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯ä½¿å¾—flyweightå¯ä»¥è¢«å…±äº«ã€‚è€Œå¤–éƒ¨çŠ¶æ€å–å†³äºflyweightåœºæ™¯ï¼Œå¹¶æ ¹æ®åœºæ™¯è€Œå˜åŒ–ï¼Œå› æ­¤ä¸å¯å…±äº«ã€‚ç”¨æˆ·å¯¹è±¡è´Ÿè´£åœ¨å¿…è¦çš„æ—¶å€™å°†å¤–éƒ¨çŠ¶æ€ä¼ é€’ç»™flyweightã€‚</p><p>Flyweightæ¨¡å¼å¯¹é‚£äº›é€šå¸¸ç”±äºæ•°é‡å¤ªå¤§è€Œéš¾ä»¥ç”¨å¯¹è±¡æ¥è¡¨ç¤ºçš„æ¦‚å¿µæˆ–å®ä½“è¿›è¡Œå»ºæ¨¡ã€‚</p><h2 id="3-é€‚ç”¨æ€§"><a class="markdownIt-Anchor" href="#3-é€‚ç”¨æ€§"></a> 3. é€‚ç”¨æ€§</h2><p>Flyweightæ¨¡å¼çš„æœ‰æ•ˆæ€§å¾ˆå¤§ç¨‹åº¦ä¸Šå–å†³äºå¦‚ä½•ä½¿ç”¨å®ƒä»¥åŠåœ¨ä½•å¤„ä½¿ç”¨å®ƒã€‚å½“ä¸€ä¸‹æƒ…å†µæˆç«‹æ—¶ï¼Œä½¿ç”¨Flyweightæ¨¡å¼ï¼š</p><ul><li>ä¸€ä¸ªåº”ç”¨ä½¿ç”¨äº†å¤§é‡çš„å¯¹è±¡ã€‚</li><li>å®Œå…¨ç”±äºä½¿ç”¨å¤§é‡çš„å¯¹è±¡é€ æˆå¾ˆå¤§çš„å­˜å‚¨å¼€é”€ã€‚</li><li>å¯¹è±¡çš„å¤§å¤šæ•°çŠ¶æ€éƒ½å¯å˜ä¸ºå¤–éƒ¨çŠ¶æ€ã€‚</li><li>å¦‚æœåˆ é™¤å¯¹è±¡çš„å¤–éƒ¨çŠ¶æ€ï¼Œé‚£ä¹ˆå¯ä»¥ç”¨ç›¸å¯¹è¾ƒå°‘çš„å…±äº«å¯¹è±¡å–ä»£å¾ˆå¯¹ç»„å¯¹è±¡</li><li>åº”ç”¨ç¨‹åºä¸ä¾èµ–äºå¯¹è±¡æ ‡è¯†ã€‚ç”±äºFlyweightå¯¹è±¡å¯ä»¥è¢«å…±äº«ï¼Œå› æ­¤æ¦‚å¿µä¸Šæ˜æ˜¾æœ‰åˆ«çš„å¯¹è±¡ï¼Œæ ‡è¯†æµ‹è¯•å°†è¿”å›çœŸå€¼ã€‚</li></ul><h2 id="4-ç»“æ„"><a class="markdownIt-Anchor" href="#4-ç»“æ„"></a> 4. ç»“æ„</h2><p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202203281441718.jpeg" alt="ç»“æ„ç¤ºæ„å›¾" /></p><p>ä¸‹é¢å¯¹è±¡å›¾è¯´æ˜äº†å¦‚ä½•å…±äº«flyweight</p><p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202203281441858.jpeg" alt="å¯¹è±¡å›¾" /></p><h2 id="5-å‚ä¸è€…"><a class="markdownIt-Anchor" href="#5-å‚ä¸è€…"></a> 5. å‚ä¸è€…</h2><ul><li>Flyweightï¼ˆGlyphï¼‰<ul><li>æè¿°ä¸€ä¸ªæ¥å£ï¼Œé€šè¿‡è¿™ä¸ªæ¥å£flyweghtå¯ä»¥æ¥å—å¹¶ä½œç”¨äºå¤–éƒ¨çŠ¶æ€</li></ul></li><li>ConcreteFlyweightï¼ˆcharacterï¼‰<ul><li>å®ç°Flyweightæ¥å£ï¼Œå¹¶ä¸ºå†…éƒ¨çŠ¶æ€ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰å¢åŠ å­˜å‚¨ç©ºé—´ã€‚ConcreteFlyweightå¯¹è±¡å¿…é¡»æ˜¯å¯å…±äº«çš„ã€‚å®ƒæ‰€å­˜å‚¨çš„çŠ¶æ€å¿…é¡»æ˜¯å†…éƒ¨çš„ã€‚å³å®ƒå¿…é¡»ç‹¬ç«‹äºConcreteFlyweight å¯¹è±¡çš„åœºæ™¯ã€‚</li></ul></li><li>UnsharedConcreteFlyweightï¼ˆRowã€Columnï¼‰<ul><li>å¹¶éæ‰€æœ‰çš„Flyweightå­ç±»éƒ½éœ€è¦è¢«å…±äº«ã€‚Flyweightæ¥å£ä½¿å…±äº«æˆä¸ºå¯èƒ½ï¼Œä½†å®ƒå¹¶ä¸å¼ºåˆ¶å…±äº«ã€‚åœ¨flyweightå¯¹è±¡ç»“æ„çš„æŸäº›å±‚æ¬¡ï¼ŒUnsharedConcreteFlyweightå¯¹è±¡é€šå¸¸å°†ConcreteFlyweightå¯¹è±¡ä½œä¸ºå­èŠ‚ç‚¹ã€‚</li></ul></li><li>FlyweightFactory<ul><li>åˆ›å»ºå¹¶ç®¡ç†Flyweightå¯¹è±¡</li><li>ç¡®ä¿åˆç†åœ°å…±äº«Flyweightã€‚å½“ç”¨æˆ·è¯·æ±‚ä¸€ä¸ªflyweightæ—¶ï¼ŒFlyweightFactoryå¯¹è±¡æä¾›ä¸€ä¸ªå·²åˆ›å»ºçš„å®ä¾‹æˆ–åˆ›å»ºä¸€ä¸ªï¼ˆå¦‚æœä¸å­˜åœ¨çš„è¯ï¼‰</li></ul></li><li>Client<ul><li>ç»´æŒä¸€ä¸ªå¯¹Flyweightçš„å¼•ç”¨</li><li>è®¡ç®—æˆ–å­˜å‚¨ä¸€ä¸ªï¼ˆæˆ–å¤šä¸ªï¼‰flyweightçš„å¤–éƒ¨çŠ¶æ€</li></ul></li></ul><h2 id="6-åä½œ"><a class="markdownIt-Anchor" href="#6-åä½œ"></a> 6. åä½œ</h2><ul><li>flyweightæ‰§è¡Œæ—¶æ‰€éœ€çš„çŠ¶æ€å¿…å®šæ˜¯å†…éƒ¨çš„æˆ–å¤–éƒ¨çš„ã€‚å†…éƒ¨çŠ¶æ€å­˜å‚¨äºConcreteFlyweightå¯¹è±¡ä¸­ï¼Œè€Œå¤–éƒ¨çŠ¶æ€åˆ™æ˜¯ç”±Clientå¯¹è±¡å­˜å‚¨æˆ–è®¡ç®—ã€‚å½“ç”¨æˆ·è°ƒç”¨flyweightå¯¹è±¡çš„æ“ä½œæ—¶ï¼Œå°†è¯¥çŠ¶æ€ä¼ é€’ç»™å®ƒã€‚</li><li>ç”¨æˆ·ä¸åº”è¯¥ç›´æ¥å¯¹ConcreteFlyweightç±»è¿›è¡Œå®ä¾‹åŒ–ï¼Œè€Œåªèƒ½ä»FlyweightFactoryå¯¹è±¡å¾—åˆ°ConcreteFlyweightå¯¹è±¡ã€‚è¿™å¯ä»¥ä¿è¯å¯¹å®ƒä»¬é€‚å½“åœ°è¿›è¡Œå…±äº«ã€‚</li></ul><h2 id="7-å®ç°"><a class="markdownIt-Anchor" href="#7-å®ç°"></a> 7. å®ç°</h2><p>åœ¨å®ç°Flyweightæ¨¡å¼æ—¶ï¼Œåº”æ³¨æ„ä¸€ä¸‹å‡ ç‚¹ï¼š</p><p>â‘  åˆ é™¤å¤–éƒ¨çŠ¶æ€ã€‚è¯¥æ¨¡å¼çš„å¯ç”¨æ€§åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå–å†³äºæ˜¯å¦å®¹æ˜“è¯†åˆ«å¤–éƒ¨çŠ¶æ€å¹¶å°†å®ƒä»å…±äº«å¯¹è±¡ä¸­åˆ é™¤ã€‚</p><p>â‘¡ ç®¡ç†å…±äº«å¯¹è±¡ã€‚ å› ä¸ºå¯¹è±¡æ˜¯å…±äº«çš„ï¼Œç”¨æˆ·ä¸èƒ½ç›´æ¥å¯¹å®ƒè¿›è¡Œå®ä¾‹åŒ–ï¼Œæ‰€ä»¥FlyweightFactoryæ¥å¸®åŠ©ç”¨æˆ·æŸ¥æ‰¾æŸä¸ªç‰¹å®šçš„flyweightå¯¹è±¡ã€‚å…±äº«è¿˜æ„å‘³ç€æŸç§å½¢å¼çš„å¼•ç”¨è®¡æ•°å’Œåƒåœ¾å›æ”¶ï¼Œè¿™æ ·å½“ä¸€ä¸ªflyweightä¸å†ä½¿ç”¨æ—¶ï¼Œå¯ä»¥å›æ”¶å®ƒçš„å­˜å‚¨ç©ºé—´ã€‚</p><h2 id="8-ç¤ºä¾‹ä»£ç "><a class="markdownIt-Anchor" href="#8-ç¤ºä¾‹ä»£ç "></a> 8. ç¤ºä¾‹ä»£ç </h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">// Flyweight.h</span><br><span class="hljs-comment">// Created by å¼ å®‡è½© on 2022/3/26.</span><br><span class="hljs-comment">// Copyright (c) 2022 zhangyuxuan. All rights reserved.</span><br><span class="hljs-comment">// </span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;string&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;unordered_map&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-meta">#<span class="hljs-meta-keyword">ifndef</span> BEHAVIORALPATTERNDESIGN_FLYWEIGHT_H</span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> BEHAVIORALPATTERNDESIGN_FLYWEIGHT_H</span><br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">test_Flyweight</span><span class="hljs-params">()</span></span>;<br><br><span class="hljs-comment">// æ£‹å­çŠ¶æ€ï¼Œåæ ‡</span><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ChessPoint</span> &#123;</span><br>    <span class="hljs-keyword">int</span> x;<br>    <span class="hljs-keyword">int</span> y;<br>    <span class="hljs-built_in">ChessPoint</span>() = <span class="hljs-keyword">default</span>;<br>    <span class="hljs-built_in">ChessPoint</span>(<span class="hljs-keyword">int</span> x,<span class="hljs-keyword">int</span> y) : <span class="hljs-built_in">x</span>(x),<span class="hljs-built_in">y</span>(y) &#123;&#125;<br>    <span class="hljs-function">string <span class="hljs-title">to_string</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;(&quot;</span> + ::<span class="hljs-built_in">to_string</span>(x)+<span class="hljs-string">&quot;,&quot;</span> + ::<span class="hljs-built_in">to_string</span>(y)+<span class="hljs-string">&quot;)&quot;</span>;<br>    &#125;<br>&#125;;<br><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ChessPointHash</span> &#123;</span><br>    <span class="hljs-function"><span class="hljs-keyword">size_t</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-keyword">const</span> ChessPoint&amp; point)</span> <span class="hljs-keyword">const</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> hash&lt;<span class="hljs-keyword">int</span>&gt;()(point.x + <span class="hljs-number">10</span> * point.y);<br>    &#125;<br>&#125;;<br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ChessPointEqual</span> &#123;</span><br>    <span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">operator</span><span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-keyword">const</span> ChessPoint&amp; p1,<span class="hljs-keyword">const</span> ChessPoint&amp; p2 )</span> <span class="hljs-keyword">const</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> (p1.x == p2.x &amp;&amp; p1.y == p2.y);<br>    &#125;<br>&#125;;<br><br><br><span class="hljs-comment">// è±¡æ£‹æ£‹å­</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Chess</span> &#123;</span><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">Type</span> &#123;</span><br>        Red,<br>        Black,<br>        Board<br>    &#125;;<br>    <span class="hljs-built_in">Chess</span>(string name, Type type) :<span class="hljs-built_in">name</span>(name),<span class="hljs-built_in">type</span>(type) &#123;<br><br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">bool</span> <span class="hljs-title">move</span><span class="hljs-params">(ChessPoint start, ChessPoint end)</span> </span>&#123;<br>        <span class="hljs-comment">// æ£‹ç›˜è¶Šç•Œ</span><br>        <span class="hljs-keyword">if</span> (start.x &lt; <span class="hljs-number">0</span> || start.y &lt; <span class="hljs-number">0</span> || start.x &gt;= <span class="hljs-number">9</span> || start.y &gt;= <span class="hljs-number">10</span> ||<br>            end.x &lt;<span class="hljs-number">0</span> || end.y &lt; <span class="hljs-number">0</span> || end.x &gt;= <span class="hljs-number">9</span> || end.y &gt;= <span class="hljs-number">10</span>) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    &#125;<br>    <span class="hljs-function">string <span class="hljs-title">get_name</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br>    <span class="hljs-function">Type <span class="hljs-title">get_type</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> type;<br>    &#125;<br><br><span class="hljs-keyword">protected</span>:<br>    string name;<br>    Type type;<br>&#125;;<br><br><span class="hljs-comment">// å…µ</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Soldier</span> :</span> <span class="hljs-keyword">public</span> Chess &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Soldier</span>(string name, Type type) : <span class="hljs-built_in">Chess</span>(name, type)  &#123;<br><br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">bool</span> <span class="hljs-title">move</span><span class="hljs-params">(ChessPoint start, ChessPoint end)</span> </span>&#123;<br>        <span class="hljs-keyword">if</span> (!Chess::<span class="hljs-built_in">move</span>(start,end)) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>        <span class="hljs-keyword">if</span> ( (start.x == end.x &amp;&amp; start.y +<span class="hljs-number">1</span> == end.y) ||       <span class="hljs-comment">// å‘ä¸Šèµ°</span><br>             (start.y == end.y &amp;&amp; (start.x+<span class="hljs-number">1</span> == end.x || start.x<span class="hljs-number">-1</span> == end.y)))&#123;      <span class="hljs-comment">// å·¦å³èµ°</span><br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    &#125;<br>&#125;;<br><br><span class="hljs-comment">// è½¦</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Car</span> :</span> <span class="hljs-keyword">public</span> Chess &#123;<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">bool</span> <span class="hljs-title">move</span><span class="hljs-params">(ChessPoint start, ChessPoint end)</span> </span>&#123;<br>        <span class="hljs-keyword">if</span> (!Chess::<span class="hljs-built_in">move</span>(start,end)) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>        <span class="hljs-comment">// è½¦ æ²¡æœ‰å¤šä½™çš„é™åˆ¶</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    &#125;<br>&#125;;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ChessFactory</span> &#123;</span><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-comment">// å¦‚æœä¸æå‰åˆ›å»ºçš„è¯ï¼Œå¦‚ä½•æ ¹æ®ä¼ å…¥çš„nameï¼ŒåŠ¨æ€åˆ›å»ºå¯¹åº”çš„ç±»ï¼ˆä¸ç”¨if else è¿›è¡Œåˆ¤æ–­ï¼‰ï¼Ÿ</span><br>    <span class="hljs-built_in">ChessFactory</span>() &#123;<br>        red_chess[<span class="hljs-string">&quot;å…µ&quot;</span>] = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Soldier</span>(<span class="hljs-string">&quot;å…µ&quot;</span>,Chess::Red);<br>        red_chess[<span class="hljs-string">&quot;è½¦&quot;</span>] = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Soldier</span>(<span class="hljs-string">&quot;è½¦&quot;</span>,Chess::Red);<br>        black_chess[<span class="hljs-string">&quot;å…µ&quot;</span>] = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Soldier</span>(<span class="hljs-string">&quot;å…µ&quot;</span>,Chess::Red);<br>        red_chess[<span class="hljs-string">&quot;è½¦&quot;</span>] = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Soldier</span>(<span class="hljs-string">&quot;è½¦&quot;</span>,Chess::Red);<br>    &#125;<br><br>    <span class="hljs-function">Chess* <span class="hljs-title">create_chess</span><span class="hljs-params">(string name, Chess::Type type)</span> </span>&#123;<br>        <span class="hljs-keyword">if</span> (type == Chess::Type::Red) &#123;<br>            <span class="hljs-keyword">return</span> red_chess[name];<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">return</span> black_chess[name];<br>        &#125;<br>    &#125;<br>    ~<span class="hljs-built_in">ChessFactory</span>() &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> iter : red_chess) &#123;<br>            <span class="hljs-keyword">delete</span> iter.second;<br>        &#125;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> iter : black_chess) &#123;<br>            <span class="hljs-keyword">delete</span> iter.second;<br>        &#125;<br>    &#125;<br><br><span class="hljs-keyword">private</span>:<br>    unordered_map&lt;string, Chess*&gt; red_chess;<br>    unordered_map&lt;string, Chess*&gt; black_chess;<br>&#125;;<br><br><br><span class="hljs-comment">// è±¡æ£‹æ£‹ç›˜ï¼Œç±»æ¯” UnsharedConcreteFlyweight</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ChessBoard</span> :</span> <span class="hljs-keyword">public</span> Chess &#123;<br><span class="hljs-keyword">public</span> :<br>    <span class="hljs-built_in">ChessBoard</span>(string name, Type type, ChessFactory&amp; factory) : <span class="hljs-built_in">Chess</span>(name, type) &#123;<br>        <span class="hljs-comment">// ç®€å•åœ°åšä¸‹åˆå§‹åŒ–</span><br>        <span class="hljs-function">ChessPoint <span class="hljs-title">p1</span><span class="hljs-params">(<span class="hljs-number">1</span>,<span class="hljs-number">4</span>)</span></span>;<br>        <span class="hljs-function">ChessPoint <span class="hljs-title">p2</span><span class="hljs-params">(<span class="hljs-number">1</span>,<span class="hljs-number">8</span>)</span></span>;<br>        board[p1] = factory.<span class="hljs-built_in">create_chess</span>(<span class="hljs-string">&quot;å…µ&quot;</span>,Red);<br>        board[p2] = factory.<span class="hljs-built_in">create_chess</span>(<span class="hljs-string">&quot;è½¦&quot;</span>,Red);<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">bool</span> <span class="hljs-title">move</span><span class="hljs-params">(ChessPoint start, ChessPoint end)</span> </span>&#123;<br>        <span class="hljs-keyword">auto</span> start_iter = board.<span class="hljs-built_in">find</span>(start);<br>        <span class="hljs-keyword">if</span> (start_iter == board.<span class="hljs-built_in">end</span>()) &#123;        <span class="hljs-comment">// èµ·ç‚¹æ²¡æœ‰æ£‹å­</span><br>            cout &lt;&lt; <span class="hljs-string">&quot;èµ·ç‚¹æ²¡æœ‰æ£‹å­ï¼&quot;</span> &lt;&lt;endl;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>        <span class="hljs-keyword">auto</span> end_iter = board.<span class="hljs-built_in">find</span>(end);<br>        <span class="hljs-keyword">if</span> (end_iter != board.<span class="hljs-built_in">end</span>() &amp;&amp;          <span class="hljs-comment">// èµ·ç‚¹å’Œç»ˆç‚¹çš„æ£‹å­é¢œè‰²ç›¸åŒ</span><br>            end_iter-&gt;second-&gt;<span class="hljs-built_in">get_type</span>() == start_iter-&gt;second-&gt;<span class="hljs-built_in">get_type</span>()) &#123;<br>            cout &lt;&lt; <span class="hljs-string">&quot;èµ·ç‚¹å’Œç»ˆç‚¹çš„æ£‹å­é¢œè‰²ç›¸åŒ&quot;</span> &lt;&lt; endl;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>        <span class="hljs-keyword">bool</span> flag = start_iter-&gt;second-&gt;<span class="hljs-built_in">move</span>(start,end);<br>        <span class="hljs-keyword">if</span> (flag) &#123;<br>            board[end] = start_iter-&gt;second;<br>            board.<span class="hljs-built_in">erase</span>(start_iter);<br>            cout &lt;&lt; <span class="hljs-string">&quot;æ£‹å­ï¼š&quot;</span> &lt;&lt; start_iter-&gt;second-&gt;<span class="hljs-built_in">get_name</span>() &lt;&lt;<br>                 <span class="hljs-string">&quot; ä»&quot;</span> &lt;&lt; start.<span class="hljs-built_in">to_string</span>() &lt;&lt; <span class="hljs-string">&quot;åˆ°&quot;</span> &lt;&lt; end.<span class="hljs-built_in">to_string</span>() &lt;&lt;<span class="hljs-string">&quot; ç§»åŠ¨æˆåŠŸ&quot;</span> &lt;&lt; endl;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            cout &lt;&lt; <span class="hljs-string">&quot;æ£‹å­ï¼š&quot;</span> &lt;&lt; start_iter-&gt;second-&gt;<span class="hljs-built_in">get_name</span>() &lt;&lt;<br>             <span class="hljs-string">&quot; ä»&quot;</span> &lt;&lt; start.<span class="hljs-built_in">to_string</span>() &lt;&lt; <span class="hljs-string">&quot;åˆ°&quot;</span> &lt;&lt; end.<span class="hljs-built_in">to_string</span>() &lt;&lt;<span class="hljs-string">&quot; ç§»åŠ¨å¤±è´¥&quot;</span> &lt;&lt; endl;<br>        &#125;<br>        <span class="hljs-keyword">return</span> flag;<br>    &#125;<br><br><span class="hljs-keyword">private</span>:<br>    unordered_map&lt;ChessPoint, Chess*, ChessPointHash, ChessPointEqual&gt; board;<br><br>&#125;;<br><br><span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span> <span class="hljs-comment">//BEHAVIORALPATTERNDESIGN_FLYWEIGHT_H</span></span><br></code></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">// Flyweight.cpp</span><br><span class="hljs-comment">// Created by å¼ å®‡è½© on 2022/3/26.</span><br><span class="hljs-comment">// Copyright (c) 2022 zhangyuxuan. All rights reserved.</span><br><span class="hljs-comment">// </span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&quot;Flyweight.h&quot;</span></span><br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">test_Flyweight</span><span class="hljs-params">()</span> </span>&#123;<br>    cout &lt;&lt; <span class="hljs-string">&quot;â€”â€”â€”â€”â€”â€”å¼€å§‹æµ‹è¯• Flyweight æ¨¡å¼â€”â€”â€”â€”â€”â€”&quot;</span> &lt;&lt; endl;<br>    ChessFactory factory;<br>    <span class="hljs-function">ChessBoard <span class="hljs-title">board</span><span class="hljs-params">(<span class="hljs-string">&quot;æ£‹ç›˜&quot;</span>,Chess::Board, factory)</span></span>;<br>    <span class="hljs-function">ChessPoint <span class="hljs-title">start1</span><span class="hljs-params">(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>)</span>, <span class="hljs-title">start2</span><span class="hljs-params">(<span class="hljs-number">1</span>,<span class="hljs-number">4</span>)</span>,<span class="hljs-title">end1</span><span class="hljs-params">(<span class="hljs-number">1</span>,<span class="hljs-number">8</span>)</span>,<span class="hljs-title">end2</span><span class="hljs-params">(<span class="hljs-number">1</span>,<span class="hljs-number">5</span>)</span>, <span class="hljs-title">end3</span><span class="hljs-params">(<span class="hljs-number">1</span>,<span class="hljs-number">7</span>)</span></span>;<br>    board.<span class="hljs-built_in">move</span>(start1,end1);<br>    board.<span class="hljs-built_in">move</span>(start2,end1);<br>    board.<span class="hljs-built_in">move</span>(start2,end2);<br>    board.<span class="hljs-built_in">move</span>(end2,end3);<br>    cout &lt;&lt; <span class="hljs-string">&quot;â€”â€”â€”â€”â€”â€”ç»“æŸæµ‹è¯• Flyweight æ¨¡å¼â€”â€”â€”â€”â€”â€”&quot;</span> &lt;&lt; endl;<br>    cout &lt;&lt; endl ;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="9-ç›¸å…³æ¨¡å¼"><a class="markdownIt-Anchor" href="#9-ç›¸å…³æ¨¡å¼"></a> 9. ç›¸å…³æ¨¡å¼</h2><p>Flyweightæ¨¡å¼é€šå¸¸å’ŒCompositeï¼ˆç»„åˆï¼‰æ¨¡å¼ç»“åˆèµ·æ¥ï¼Œç”¨å…±äº«å¶èŠ‚ç‚¹çš„æœ‰å‘æ— ç¯å›¾å®ç°ä¸€ä¸ªé€»è¾‘ä¸Šçš„å±‚æ¬¡ç»“æ„ã€‚</p><p>é€šå¸¸ï¼Œæœ€å¥½ç”¨flyweightå®ç°Stateå’ŒStrategyå¯¹è±¡ã€‚</p><h1 id="strategyç­–ç•¥æ¨¡å¼"><a class="markdownIt-Anchor" href="#strategyç­–ç•¥æ¨¡å¼"></a> Strategyï¼ˆç­–ç•¥ï¼‰æ¨¡å¼</h1><h2 id="1-æ„å›¾-2"><a class="markdownIt-Anchor" href="#1-æ„å›¾-2"></a> 1. æ„å›¾</h2><p>å®šä¹‰ä¸€ç³»åˆ—çš„ç®—æ³•ï¼ŒæŠŠå®ƒä»¬ä¸€ä¸ªä¸ªå°è£…èµ·æ¥ï¼Œå¹¶ä¸”ä½¿å®ƒä»¬å¯ä»¥ç›¸äº’æ›¿æ¢ã€‚æœ¬æ¨¡å¼ä½¿å¾—ç®—æ³•å¯ç‹¬ç«‹äºä½¿ç”¨å®ƒçš„å®¢æˆ·è€Œå˜åŒ–</p><h2 id="2-åˆ«å"><a class="markdownIt-Anchor" href="#2-åˆ«å"></a> 2. åˆ«å</h2><p>æ”¿ç­–ï¼ˆpolicyï¼‰</p><h2 id="3-é€‚ç”¨æ€§-2"><a class="markdownIt-Anchor" href="#3-é€‚ç”¨æ€§-2"></a> 3. é€‚ç”¨æ€§</h2><p>åœ¨ä»¥ä¸‹æƒ…å†µä¸‹ä½¿ç”¨Strategyæ¨¡å¼ï¼š</p><ul><li>è®¸å¤šç›¸å…³çš„ç±»ä»…ä»…æ˜¯è¡Œä¸ºæœ‰å¼‚ã€‚â€œç­–ç•¥â€æä¾›äº†ä¸€ç§ç”¨å¤šä¸ªè¡Œä¸ºä¸­çš„ä¸€ä¸ªè¡Œä¸ºæ¥é…ç½®ä¸€ä¸ªç±»çš„æ–¹æ³•ã€‚</li><li>éœ€è¦ä½¿ç”¨ä¸€ä¸ªç®—æ³•çš„ä¸åŒå˜ä½“ã€‚ä¾‹å¦‚ï¼Œä½ å¯èƒ½ä¼šå®šä¹‰ä¸€äº›åæ˜ ä¸åŒçš„ç©ºé—´/æ—¶é—´æƒè¡¡çš„ç®—æ³•ã€‚å½“è¿™äº›å˜ä½“å®ç°ä¸ºä¸€ä¸ªç®—æ³•çš„ç±»å±‚æ¬¡æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ç­–ç•¥æ¨¡å¼ã€‚</li><li>ç®—æ³•ä½¿ç”¨å®¢æˆ·ä¸åº”è¯¥çŸ¥é“çš„æ•°æ®ã€‚å¯ä½¿ç”¨ç­–ç•¥æ¨¡å¼ä»¥é¿å…æš´éœ²å¤æ‚çš„ã€ä¸ç®—æ³•ç›¸å…³çš„æ•°æ®ç»“æ„</li><li>ä¸€ä¸ªç±»å®šä¹‰äº†å¤šç§è¡Œä¸ºï¼Œå¹¶ä¸”è¿™äº›è¡Œä¸ºåœ¨è¿™ä¸ªç±»çš„æ“ä½œä¸­ä»¥å¤šä¸ªæ¡ä»¶è¯­å¥çš„å½¢å¼å‡ºç°ã€‚å°†ç›¸å…³çš„æ¡ä»¶åˆ†æ”¯ç§»å…¥å®ƒä»¬å„è‡ªçš„Strategyç±»ä¸­ä»¥ä»£æ›¿è¿™äº›æ¡ä»¶è¯­å¥ã€‚</li></ul><h2 id="4-ç»“æ„-2"><a class="markdownIt-Anchor" href="#4-ç»“æ„-2"></a> 4. ç»“æ„</h2><p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202203281444593.jpeg" alt="ç»“æ„ç¤ºæ„å›¾" /></p><h2 id="5-å‚ä¸è€…-2"><a class="markdownIt-Anchor" href="#5-å‚ä¸è€…-2"></a> 5. å‚ä¸è€…</h2><ul><li>Strategyï¼ˆç­–ç•¥ï¼Œå¦‚Compositorï¼‰<ul><li>å®šä¹‰æ‰€æ”¯æŒçš„ç®—æ³•çš„å…¬å…±æ¥å£ã€‚Contextä½¿ç”¨è¿™ä¸ªæ¥å£æ¥è°ƒç”¨æŸConcreteStrategyå®šä¹‰çš„ç®—æ³•</li></ul></li><li>ConcreteStrategyï¼ˆå…·ä½“ç­–ç•¥ï¼Œå¦‚SimpleCompositorã€TeXCompositorã€ArrayCompositorï¼‰<ul><li>ä»¥Strategyæ¥å£å®ç°å…·ä½“ç®—æ³•</li></ul></li><li>Contextï¼ˆä¸Šä¸‹æ–‡ï¼Œå¦‚Compositionï¼‰<ul><li>ç”¨ä¸€ä¸ªConcreteStrategyå¯¹è±¡æ¥é…ç½®</li><li>ç»´æŠ¤ä¸€ä¸ªStrategyå¯¹è±¡çš„å¼•ç”¨</li><li>å¯å®šä¹‰ä¸€ä¸ªæ¥å£æ¥è®©Strategyè®¿é—®å®ƒçš„æ•°æ®</li></ul></li></ul><h2 id="6-åä½œ-2"><a class="markdownIt-Anchor" href="#6-åä½œ-2"></a> 6. åä½œ</h2><ul><li>Strategyå’ŒContextç›¸äº’ä½œç”¨ä»¥å®ç°é€‰å®šçš„ç®—æ³•ã€‚å½“ç®—æ³•è¢«è°ƒç”¨æ—¶ï¼ŒContextå¯ä»¥å°†è¯¥ç®—æ³•æ‰€éœ€è¦çš„æ‰€æœ‰æ•°æ®éƒ½ä¼ é€’ç»™è¯¥Strategyã€‚æˆ–è€…ï¼ŒContextå¯ä»¥å°†è‡ªèº«ä½œä¸ºä¸€ä¸ªå‚æ•°ä¼ é€’ç»™Strategyæ“ä½œã€‚è¿™å°±è®©Strategyåœ¨éœ€è¦æ—¶å¯ä»¥å›è°ƒContext</li><li>Contextå°†å®¢æˆ·çš„è¯·æ±‚è½¬å‘ç»™å®ƒçš„Strategyã€‚å®¢æˆ·é€šå¸¸åˆ›å»ºå¹¶ä¼ é€’ä¸€ä¸ªConcreteStrategyå¯¹è±¡ç»™è¯¥Contextï¼Œè¿™æ ·å®¢æˆ·ä»…ä¸Contextäº¤äº’ã€‚é€šå¸¸æœ‰ä¸€ç³»åˆ—Strategyç±»å¯ä¾›å®¢æˆ·ä»ä¸­é€‰æ‹©ã€‚</li></ul><h2 id="7-å®ç°-2"><a class="markdownIt-Anchor" href="#7-å®ç°-2"></a> 7. å®ç°</h2><p>è€ƒè™‘ä¸‹é¢çš„å®ç°é—®é¢˜ï¼š</p><ol><li>å®šä¹‰Strategyå’ŒContextæ¥å£ã€‚</li></ol><ul><li>Strategyå’ŒContextæ¥å£å¿…é¡»ä½¿å¾—ConcreteStrategyèƒ½å¤Ÿæœ‰æ•ˆåœ°è®¿é—®å®ƒæ‰€éœ€è¦çš„contextä¸­çš„ä»»ä½•æ•°æ®ï¼Œåä¹‹äº¦ç„¶ã€‚ä¸€ç§æ–¹æ³•æ˜¯è®©Contextå°†æ•°æ®æ”¾åœ¨å‚æ•°ä¸­ä¼ é€’ç»™Strategyï¼Œè¿™ä½¿å¾—Strategyå’ŒContextè§£è€¦ï¼Œä½†Contextä¹Ÿå¯èƒ½å‘é€ä¸€äº›Strategyä¸éœ€è¦çš„æ•°æ®ã€‚</li><li>å¦ä¸€ç§æ–¹æ³•æ˜¯è®©Contextå°†è‡ªèº«ä½œä¸ºä¸€ä¸ªå‚æ•°ä¼ é€’ç»™Strategyï¼Œè¯¥Strategyå†æ˜¾å¼åœ°æƒ³Contextè¯·æ±‚æ•°æ®ã€‚æˆ–è€…Strategyå¯ä»¥å­˜å‚¨å¯¹å®ƒçš„Contextçš„å¼•ç”¨ã€‚</li></ul><ol start="2"><li>å°†Strategyä½œä¸ºæ¨¡æ¿å‚æ•°</li></ol><ul><li>åœ¨C++ä¸­ï¼Œå¯åˆ©ç”¨æ¨¡æ¿æœºåˆ¶ç”¨ä¸€ä¸ªStrategyæ¥é…ç½®ä¸€ä¸ªç±»ã€‚ç„¶è€Œè¿™ç§æ–¹æ³•ä»…å½“æ»¡è¶³ä¸‹é¢æ¡ä»¶æ—¶æ‰èƒ½ä½¿ç”¨ï¼šâ‘  å¯ä»¥åœ¨ç¼–è¯‘æ—¶é€‰æ‹©Strategyï¼›â‘¡ ä¸éœ€è¦åœ¨è¿è¡Œæ—¶æ”¹å˜ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¦è¢«é…ç½®çš„ç±»ï¼ˆå¦‚Contextï¼‰è¢«å®šä¹‰ä¸ºä¸€ä¸ªä»¥Strategyç±»ä½œä¸ºå‚æ•°çš„æ¨¡æ¿ç±»ã€‚</li></ul><ol start="3"><li>ä½¿Strategyå¯¹è±¡æˆä¸ºå¯é€‰çš„</li></ol><ul><li>å³ä½¿åœ¨ä¸ä½¿ç”¨é¢å¤–çš„Strategyå¯¹è±¡çš„æƒ…å†µä¸‹ï¼ŒContextä¹Ÿæœ‰æ„ä¹‰çš„è¯ï¼Œé‚£ä¹ˆå®ƒè¿˜å¯ä»¥è¢«ç®€åŒ–ã€‚Contextåœ¨è®¿é—®æŸStrategyå‰å…ˆæ£€æŸ¥å®ƒæ˜¯å¦å­˜åœ¨ã€‚å¦‚æœæœ‰ï¼Œå°±ä½¿ç”¨å®ƒï¼›å¦‚æœæ²¡æœ‰ï¼Œé‚£ä¹ˆContextæ‰§è¡Œç¼ºçœçš„è¡Œä¸ºã€‚è¿™ç§æ–¹æ³•çš„å¥½å¤„æ˜¯å®¢æˆ·æ ¹æœ¬ä¸éœ€è¦å¤„ç†Strategyå¯¹è±¡ï¼Œé™¤éä¸å–œæ¬¢ç¼ºçœçš„è¡Œä¸ºã€‚</li></ul><h2 id="8-ç¤ºä¾‹ä»£ç -2"><a class="markdownIt-Anchor" href="#8-ç¤ºä¾‹ä»£ç -2"></a> 8. ç¤ºä¾‹ä»£ç </h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">// Strategy.h</span><br><span class="hljs-comment">// Created by å¼ å®‡è½© on 2022/3/26.</span><br><span class="hljs-comment">// Copyright (c) 2022 zhangyuxuan. All rights reserved.</span><br><span class="hljs-comment">// </span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;string&gt;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-meta-keyword">ifndef</span> BEHAVIORALPATTERNDESIGN_STRATEGY_H</span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> BEHAVIORALPATTERNDESIGN_STRATEGY_H</span><br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * @brief ç­–ç•¥æ¨¡å¼ï¼Œæ¨¡æ‹Ÿä¸¤ä¸ªå®ç°</span><br><span class="hljs-comment"> * 1. å®šä¹‰Strategyå’ŒContextæ¥å£ï¼Œæ¨¡æ‹Ÿåœºæ™¯ä¸º è¾“å…¥æ¡†å­—ç¬¦ä¸²çš„éªŒè¯ç­–ç•¥</span><br><span class="hljs-comment"> * 2. å°†Strategyä½œä¸ºæ¨¡æ¿å‚æ•°ï¼Œå¯ä»¥å‚è€ƒSTLä¸­åˆ†é…å™¨ï¼Œå…¶ä¸­å°±è¿ç”¨äº†ç­–ç•¥æ¨¡å¼</span><br><span class="hljs-comment"> */</span><br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">test_strategy</span><span class="hljs-params">()</span></span>;<br><br><span class="hljs-comment">// æ ¡éªŒå™¨ï¼Œå¯¹åº”äº Strategy ç±»ï¼Œå¯¹å­—ç¬¦ä¸²è¿›è¡Œæ ¡éªŒ</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Validator</span> &#123;</span><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">bool</span> <span class="hljs-title">validate</span><span class="hljs-params">(string text)</span> </span>&#123;<br>        <span class="hljs-keyword">if</span> (text.<span class="hljs-built_in">empty</span>()) &#123;<br>            cout &lt;&lt; <span class="hljs-string">&quot;æ–‡æœ¬ä¸ºç©ºï¼&quot;</span> &lt;&lt; endl;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    &#125;<br>    ~<span class="hljs-built_in">Validator</span>() = <span class="hljs-keyword">default</span>;<br>&#125;;<br><br><span class="hljs-comment">// è¾“å…¥æ¡† å¯¹åº”Contextç±»ï¼Œéœ€è¦å¯¹è¾“å…¥çš„å­—ç¬¦ä¸²è¿›è¡Œæ ¡éªŒï¼Œåœ¨ä¸åŒåœºæ™¯ä¸‹éœ€è¦ä¸åŒçš„éªŒè¯ç­–ç•¥</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">InputText</span> &#123;</span><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">InputText</span>() &#123;&#125;<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">set_validator</span><span class="hljs-params">(shared_ptr&lt;Validator&gt; validator)</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>-&gt;validator = validator;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">input_text</span><span class="hljs-params">(string input)</span> </span>&#123;<br>        <span class="hljs-keyword">if</span> (validator-&gt;<span class="hljs-built_in">validate</span>(input)) &#123;<br>            cout &lt;&lt; <span class="hljs-string">&quot;è¾“å…¥ï¼š&quot;</span>&lt;&lt; input &lt;&lt;<span class="hljs-string">&quot;\tæ ¡éªŒæˆåŠŸï¼&quot;</span> &lt;&lt; endl;<br>            text = input;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            cout &lt;&lt; <span class="hljs-string">&quot;è¾“å…¥ï¼š&quot;</span>&lt;&lt; input &lt;&lt;<span class="hljs-string">&quot;\tæ ¡éªŒå¤±è´¥ï¼Œè¯·é‡æ–°è¾“å…¥ï¼&quot;</span> &lt;&lt; endl;<br>        &#125;<br>    &#125;<br>    <span class="hljs-function">string <span class="hljs-title">get_text</span><span class="hljs-params">()</span></span>&#123;<br>        <span class="hljs-keyword">return</span> text;<br>    &#125;<br><span class="hljs-keyword">private</span>:<br>    string text;<br>    std::shared_ptr&lt;Validator&gt; validator;<br>&#125;;<br><br><span class="hljs-comment">// æ•°å­—æ ¡éªŒå™¨ï¼Œæ ¡éªŒç­–ç•¥ä¸ºè¾“å…¥çš„å¿…é¡»æ˜¯æ•°å­—</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DigitValidator</span> :</span> <span class="hljs-keyword">public</span> Validator&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">bool</span> <span class="hljs-title">validate</span><span class="hljs-params">(string text)</span> </span>&#123;<br>        <span class="hljs-keyword">bool</span> flag = Validator::<span class="hljs-built_in">validate</span>(text);<br>        <span class="hljs-keyword">if</span> (!flag) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">char</span> c : text) &#123;<br>            <span class="hljs-keyword">if</span> (c &lt; <span class="hljs-string">&#x27;0&#x27;</span> || c &gt; <span class="hljs-string">&#x27;9&#x27;</span>)&#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    &#125;<br>&#125;;<br><br><span class="hljs-comment">// å­—æ¯æ ¡éªŒå™¨ï¼Œæ ¡éªŒç­–ç•¥ä¸ºè¾“å…¥çš„å¿…é¡»æ˜¯å­—æ¯</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CharacterValidator</span> :</span> <span class="hljs-keyword">public</span> Validator &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">bool</span> <span class="hljs-title">validate</span><span class="hljs-params">(string text)</span> </span>&#123;<br>        <span class="hljs-keyword">bool</span> flag = Validator::<span class="hljs-built_in">validate</span>(text);<br>        <span class="hljs-keyword">if</span> (!flag) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">char</span> c : text) &#123;<br>            <span class="hljs-keyword">if</span> (!( (c &gt;=<span class="hljs-string">&#x27;a&#x27;</span> &amp;&amp; c&lt;=<span class="hljs-string">&#x27;z&#x27;</span>) || (c&gt;=<span class="hljs-string">&#x27;A&#x27;</span> &amp;&amp; c&lt;=<span class="hljs-string">&#x27;Z&#x27;</span>)))&#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    &#125;<br>&#125;;<br><br><br><span class="hljs-comment">// ç„¶åæ¨¡æ‹Ÿå°†Strategyä½œä¸ºæ¨¡æ¿å‚æ•°ï¼Œç±»æ¯”STLå®¹å™¨å’Œåˆ†é…å™¨çš„å…³ç³»ï¼Œåšä¸€ä¸ªç®€å•åœ°ç¤ºæ„</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Allocator</span> &#123;</span><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">allocate</span><span class="hljs-params">()</span> </span>&#123;<br><br>    &#125;<br>    <span class="hljs-keyword">virtual</span> ~<span class="hljs-built_in">Allocator</span>() = <span class="hljs-keyword">default</span>;<br>&#125;;<br><br><span class="hljs-comment">// ç±»æ¯”ç­–ç•¥ç±»ï¼Œå®ç°ç®€å•å†…å­˜åˆ†æ‰¹é¢ç­–ç•¥</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SimpleAllocator</span> :</span> <span class="hljs-keyword">public</span> Allocator&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">allocate</span><span class="hljs-params">()</span>  </span>&#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;å®ç°ç®€å•å†…å­˜åˆ†é…ç­–ç•¥&quot;</span> &lt;&lt; endl;<br>    &#125;<br>&#125;;<br><br><span class="hljs-comment">// ç±»æ¯”ç­–ç•¥ç±»ï¼Œå®ç°å†…å­˜æ± åˆ†é…ç­–ç•¥</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PoolAllocator</span> :</span> <span class="hljs-keyword">public</span> Allocator &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">allocate</span><span class="hljs-params">()</span>  </span>&#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;å®ç°å†…å­˜æ± åˆ†é…ç­–ç•¥&quot;</span> &lt;&lt; endl;<br>    &#125;<br>&#125;;<br><br><span class="hljs-keyword">template</span> &lt;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">T</span>, <span class="hljs-keyword">class</span> <span class="hljs-title">Allocator</span>&gt;</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Container</span> &#123;</span><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">push</span><span class="hljs-params">(T val)</span> </span>&#123;<br>        allocator.<span class="hljs-built_in">allocate</span>();<br>        cout &lt;&lt; <span class="hljs-string">&quot;åŠ å…¥å…ƒç´ ï¼š &quot;</span> &lt;&lt; val &lt;&lt; endl;<br>    &#125;<br><span class="hljs-keyword">private</span>:<br>    Allocator allocator;<br>&#125;;<br><br><span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span> <span class="hljs-comment">//BEHAVIORALPATTERNDESIGN_STRATEGY_H</span></span><br></code></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">// Strategy.cpp</span><br><span class="hljs-comment">// Created by å¼ å®‡è½© on 2022/3/26.</span><br><span class="hljs-comment">// Copyright (c) 2022 zhangyuxuan. All rights reserved.</span><br><span class="hljs-comment">// </span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&quot;Strategy.h&quot;</span></span><br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">test_strategy</span><span class="hljs-params">()</span> </span>&#123;<br>    cout &lt;&lt; <span class="hljs-string">&quot;â€”â€”â€”â€”â€”â€”å¼€å§‹æµ‹è¯• Strategy æ¨¡å¼â€”â€”â€”â€”â€”â€”&quot;</span> &lt;&lt; endl;<br>    <span class="hljs-comment">// å®šä¹‰æ¥å£</span><br>    InputText it;<br>    it.<span class="hljs-built_in">set_validator</span>(make_shared&lt;DigitValidator&gt;());<br>    it.<span class="hljs-built_in">input_text</span>(<span class="hljs-string">&quot;1aaaa&quot;</span>);<br>    it.<span class="hljs-built_in">set_validator</span>(make_shared&lt;CharacterValidator&gt;());<br>    it.<span class="hljs-built_in">input_text</span>(<span class="hljs-string">&quot;aaaa&quot;</span>);<br><br>    <span class="hljs-comment">// ä½¿ç”¨æ¨¡æ¿å‚æ•°</span><br>    Container&lt;<span class="hljs-keyword">int</span>,SimpleAllocator&gt; container;<br>    container.<span class="hljs-built_in">push</span>(<span class="hljs-number">1</span>);<br>    Container&lt;<span class="hljs-keyword">int</span>,PoolAllocator&gt; container2;<br>    container2.<span class="hljs-built_in">push</span>(<span class="hljs-number">2</span>);<br>    cout &lt;&lt; <span class="hljs-string">&quot;â€”â€”â€”â€”â€”â€”ç»“æŸæµ‹è¯• Strategy æ¨¡å¼â€”â€”â€”â€”â€”â€”&quot;</span> &lt;&lt; endl;<br>    cout &lt;&lt;endl;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="9-ç›¸å…³æ¨¡å¼-2"><a class="markdownIt-Anchor" href="#9-ç›¸å…³æ¨¡å¼-2"></a> 9. ç›¸å…³æ¨¡å¼</h2><p>Flyweightï¼šStrategyå¯¹è±¡é€šå¸¸æ˜¯å¾ˆå¥½çš„è½»é‡çº§å¯¹è±¡</p>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºçŸ¥è¯†</category>
      
      <category>ç¼–ç¨‹æŠ€å·§</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è®¾è®¡æ¨¡å¼</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€è®¾è®¡æ¨¡å¼ã€‘ç»„åˆæ¨¡å¼ä¸è£…é¥°æ¨¡å¼</title>
    <link href="/2022/03/20/2022-03/2022-03-20%20%E3%80%90%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E3%80%91%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F%E4%B8%8E%E8%A3%85%E9%A5%B0%E6%A8%A1%E5%BC%8F/"/>
    <url>/2022/03/20/2022-03/2022-03-20%20%E3%80%90%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E3%80%91%E7%BB%84%E5%90%88%E6%A8%A1%E5%BC%8F%E4%B8%8E%E8%A3%85%E9%A5%B0%E6%A8%A1%E5%BC%8F/</url>
    
    <content type="html"><![CDATA[<h1 id="compositeç»„åˆ-å¯¹è±¡ç»“æ„å‹æ¨¡å¼"><a class="markdownIt-Anchor" href="#compositeç»„åˆ-å¯¹è±¡ç»“æ„å‹æ¨¡å¼"></a> Compositeç»„åˆ â€”â€” å¯¹è±¡ç»“æ„å‹æ¨¡å¼</h1><ol><li>æ„å›¾</li></ol><p>å°†å¯¹è±¡ç»„åˆæˆæ ‘å½¢ç»“æ„ä»¥è¡¨ç¤ºâ€œéƒ¨åˆ†â€”â€”æ•´ä½“â€çš„å±‚æ¬¡ç»“æ„ã€‚Compositeä½¿å¾—ç”¨æˆ·å¯¹å•ä¸ªå¯¹è±¡å’Œç»„åˆå¯¹è±¡çš„ä½¿ç”¨å…·æœ‰ä¸€è‡´æ€§ã€‚</p><ol start="2"><li>ä½¿ç”¨æ€§</li></ol><ul><li>ä½ æƒ³è¡¨ç¤ºå¯¹è±¡çš„éƒ¨åˆ† - æ•´ä½“å±‚æ¬¡ç»“æ„</li><li>ä½ å¸Œæœ›ç”¨æˆ·å¿½ç•¥ç»„åˆå¯¹è±¡ä¸å•ä¸ªå¯¹è±¡çš„ä¸åŒï¼Œç”¨æˆ·å°†ç»Ÿä¸€åœ°ä½¿ç”¨ç»„åˆç»“æ„ä¸­çš„æ‰€æœ‰ç‹¬äº«</li></ul><ol start="3"><li>ç»“æ„<br /><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202203202023130.jpeg" alt="ç±»å›¾è®¾è®¡" /></li></ol><p>å…¸å‹ç»“æ„å¦‚ä¸‹ï¼š<br /><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202203202024231.jpeg" alt="å…¸å‹ç»“æ„" /></p><ol start="4"><li>å‚ä¸è€…</li></ol><ul><li>Componentï¼ˆGraphic)<ul><li>ä¸ºç»„åˆä¸­çš„å¯¹è±¡å£°æ˜æ¥å£</li><li>åœ¨é€‚å½“æƒ…å†µä¸‹ï¼Œå®ç°æ‰€æœ‰ç±»å…±æœ‰æ¥å£çš„ç¼ºçœè¡Œä¸º</li><li>å£°æ˜ä¸€ä¸ªæ¥å£ç”¨äºè®¿é—®å’Œç®¡ç†Componentçš„å­ç»„ä»¶</li><li>ï¼ˆå¯é€‰ï¼‰åœ¨é€’å½’ç»“æ„ä¸­å®šä¹‰ä¸€ä¸ªæ¥å£ï¼Œç”¨äºè®¿é—®ä¸€ä¸ªçˆ¶ç»„ä»¶ï¼Œå¹¶åœ¨åˆé€‚æƒ…å†µä¸‹å®ç°å®ƒ</li></ul></li><li>Leafï¼ˆRectangleï¼ŒLineï¼ŒTextç­‰ï¼‰<ul><li>åœ¨ç»„åˆä¸­è¡¨ç¤ºå¶èŠ‚ç‚¹å¯¹è±¡ï¼Œå¶èŠ‚ç‚¹æ²¡æœ‰å­èŠ‚ç‚¹</li><li>åœ¨ç»„åˆä¸­å®šä¹‰å›¾å…ƒå¯¹è±¡çš„è¡Œä¸º</li></ul></li><li>Compositeï¼ˆPictureï¼‰<ul><li>å®šä¹‰æœ‰å­éƒ¨ä»¶çš„é‚£äº›éƒ¨ä»¶çš„è¡Œä¸º</li><li>å­˜å‚¨å­éƒ¨ä»¶</li><li>åœ¨Componentæ¥å£ä¸­å®ç°ä¸å­éƒ¨ä»¶æœ‰å…³çš„æ“ä½œ</li></ul></li><li>Cilent<ul><li>é€šè¿‡Componentæ¥å£æ“ä½œç»„åˆéƒ¨ä»¶çš„å¯¹è±¡</li></ul></li></ul><ol start="5"><li>ç›¸å…³æ¨¡å¼</li></ol><p>é€šå¸¸ï¼Œéƒ¨ä»¶ - çˆ¶éƒ¨ä»¶è¿æ¥ç”¨äº Responsibility of Chainæ¨¡å¼</p><ul><li>Decoratoræ¨¡å¼ç»å¸¸ä¸Compositeæ¨¡å¼ä¸€èµ·ä½¿ç”¨ã€‚å½“è£…é¥°å’Œç»„åˆä¸€èµ·ä½¿ç”¨æ—¶ï¼Œå®ƒä»¬é€šå¸¸æœ‰ä¸€ä¸ªå…¬å…±çš„çˆ¶ç±»ã€‚å› æ­¤è£…é¥°å¿…é¡»æ”¯æŒå…·æœ‰Addã€Removeã€GetChildæ“ä½œçš„Componentæ¥å£</li><li>Flyweight è®©ä½ å…±äº«ç»„ä»¶ï¼Œä½†ä¸å†èƒ½å¼•ç”¨å…¶çˆ¶ç»„ä»¶</li><li>Iterator å¯ç”¨æ¥éå†Composite</li><li>Visitor å°†æœ¬æ¥åº”è¯¥åˆ†å¸ƒåœ¨Compositeå’ŒLeafç±»ä¸­çš„æ“ä½œå’Œè¡Œä¸ºå±€éƒ¨åŒ–</li></ul><ol start="6"><li>ç¤ºä¾‹ä»£ç </li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">// Decorator.h</span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;string&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;vector&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-meta-keyword">ifndef</span> PATTERNDESIGN_DECORATOR_H</span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> PATTERNDESIGN_DECORATOR_H</span><br><br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">test_composite</span><span class="hljs-params">()</span> </span>;<br><br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * @brief ç»„åˆæ¨¡å¼</span><br><span class="hljs-comment"> * ç²—ç•¥åœ°å°†è®¡ç®—æœºä½œä¸ºä¾‹å­ï¼Œä¸€äº›åŸºæœ¬çš„å¤–è®¾ä½œä¸ºLeafï¼Œä¸»æ¿ä½œä¸ºä¸€ä¸ªå°æ•´ä½“ Compositeï¼ˆé‡Œé¢åˆåŒ…å«äº†cpuã€å†…å­˜ã€æ˜¾å¡ç­‰ï¼‰</span><br><span class="hljs-comment"> * ä»¥æŸ¥è¯¢ä»·æ ¼ä½œä¸ºå…¬å…±æ¥å£</span><br><span class="hljs-comment"> */</span><br><br><span class="hljs-comment">// Componentç±»</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Equipment</span> &#123;</span><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Equipment</span>(std::string name, <span class="hljs-keyword">int</span> price) : <span class="hljs-built_in">name</span>(name),<span class="hljs-built_in">price</span>(price) &#123;&#125;<br>    <span class="hljs-keyword">virtual</span> ~<span class="hljs-built_in">Equipment</span>() = <span class="hljs-keyword">default</span>;<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> std::string <span class="hljs-title">get_name</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">int</span> <span class="hljs-title">get_price</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> price;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">add</span><span class="hljs-params">(Equipment* equipment)</span> </span>&#123;&#125;<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">remove</span><span class="hljs-params">(Equipment* equipment)</span> </span>&#123;&#125;<br><br>    <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span>å¯ä»¥æ›´è¿‘ä¸€æ­¥ï¼Œä½¿ç”¨ Iterator æ¨¡å¼</span><br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> Equipment* <span class="hljs-title">get_child</span><span class="hljs-params">(<span class="hljs-keyword">int</span> index)</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;<br>    &#125;<br><br><span class="hljs-keyword">protected</span>:<br>    std::string name;<br>    <span class="hljs-keyword">int</span> price;<br>&#125;;<br><br><span class="hljs-comment">// é¼ æ ‡ï¼ŒLeafç±»</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Mouse</span> :</span> <span class="hljs-keyword">public</span> Equipment&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Mouse</span>(std::string name, <span class="hljs-keyword">int</span> price) : <span class="hljs-built_in">Equipment</span>(name,price) &#123;<br><br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">int</span> <span class="hljs-title">get_price</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> price * <span class="hljs-number">0.9</span> ;        <span class="hljs-comment">// æ¯”å¦‚è¿™æ®µæ—¶é—´é¼ æ ‡å¹³å‡ä»·ä¸‹é™</span><br>    &#125;<br>&#125;;<br><br><span class="hljs-comment">// CPUï¼ŒLeafç±»</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CPU</span> :</span> <span class="hljs-keyword">public</span> Equipment &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">CPU</span>(std::string name, <span class="hljs-keyword">int</span> price, std::string type) : <span class="hljs-built_in">Equipment</span>(name, price), <span class="hljs-built_in">type</span>(type) &#123;<br><br>    &#125;<br><span class="hljs-keyword">private</span>:<br>    std::string type;<br>&#125;;<br><br><span class="hljs-comment">// æ˜¾å¡ï¼ŒLeafç±»</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GraphicCards</span> :</span><span class="hljs-keyword">public</span> Equipment &#123;<br><span class="hljs-keyword">public</span> :<br>    <span class="hljs-built_in">GraphicCards</span>(std::string name, <span class="hljs-keyword">int</span> price) : <span class="hljs-built_in">Equipment</span>(name, price) &#123;<br><br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">int</span> <span class="hljs-title">get_price</span><span class="hljs-params">()</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> price * <span class="hljs-number">2</span>;           <span class="hljs-comment">// è¿™æ®µæ—¶é—´æ˜¾å¡æº¢ä»·</span><br>    &#125;<br>&#125;;<br><br><span class="hljs-comment">// Compositeç±»ï¼Œä¸»æ¿</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainBoard</span> :</span> <span class="hljs-keyword">public</span> Equipment &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">MainBoard</span>(std::string name, <span class="hljs-keyword">int</span> price) : <span class="hljs-built_in">Equipment</span>(name, price) &#123;<br><br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">add</span><span class="hljs-params">(Equipment* equipment)</span> </span>&#123;<br>        <span class="hljs-keyword">if</span> (equipment == <span class="hljs-literal">nullptr</span>)<br>            <span class="hljs-keyword">return</span>;<br>        children.<span class="hljs-built_in">push_back</span>(equipment);<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">remove</span><span class="hljs-params">(Equipment* equipment)</span> </span>&#123;<br>        <span class="hljs-keyword">if</span> (equipment == <span class="hljs-literal">nullptr</span>)<br>            <span class="hljs-keyword">return</span> ;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> iter = children.<span class="hljs-built_in">begin</span>(); iter != children.<span class="hljs-built_in">end</span>(); iter++) &#123;<br>            <span class="hljs-keyword">if</span> (*iter == equipment) &#123;<br>                children.<span class="hljs-built_in">erase</span>(iter);<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>        &#125;<br><br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> Equipment* <span class="hljs-title">get_child</span><span class="hljs-params">(<span class="hljs-keyword">int</span> index)</span> </span>&#123;<br>        <span class="hljs-keyword">if</span> (index &lt; <span class="hljs-number">0</span> || index &gt;= children.<span class="hljs-built_in">size</span>()) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> children[index];<br>    &#125;<br><br>    <span class="hljs-comment">// ç´¯åŠ è¯¥è®¾å¤‡ä¸Šé™„å¸¦çš„æ‰€æœ‰è®¾å¤‡çš„ä»·å€¼</span><br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">int</span> <span class="hljs-title">get_price</span><span class="hljs-params">()</span> </span>&#123;<br>       <span class="hljs-keyword">int</span> sum = price;<br>       <span class="hljs-keyword">for</span> (Equipment* p : children) &#123;<br>           sum += p-&gt;<span class="hljs-built_in">get_price</span>();<br>       &#125;<br>       <span class="hljs-keyword">return</span> sum;<br>    &#125;<br><br><span class="hljs-keyword">private</span>:<br>    std::vector&lt;Equipment*&gt; children;<br>&#125;;<br><br><span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span> <span class="hljs-comment">//PATTERNDESIGN_DECORATOR_H</span></span><br></code></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">// Decorator.cpp</span><br><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&quot;Composite.h&quot;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">test_composite</span><span class="hljs-params">()</span> </span>&#123;<br>    cout &lt;&lt; <span class="hljs-string">&quot;â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”å¼€å§‹æµ‹è¯•è£…é¥°æ¨¡å¼â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”&quot;</span> &lt;&lt; endl;<br>    Equipment* cpu = <span class="hljs-keyword">new</span> <span class="hljs-built_in">CPU</span>(<span class="hljs-string">&quot;CPU&quot;</span>, <span class="hljs-number">1000</span>, <span class="hljs-string">&quot;Intel&quot;</span>);<br>    Equipment* graphic_card = <span class="hljs-keyword">new</span> <span class="hljs-built_in">GraphicCards</span>(<span class="hljs-string">&quot;æ˜¾å¡&quot;</span>,<span class="hljs-number">4000</span>);<br>    Equipment* main_board = <span class="hljs-keyword">new</span> <span class="hljs-built_in">MainBoard</span>(<span class="hljs-string">&quot;ä¸»æ¿&quot;</span>,<span class="hljs-number">800</span>);<br>    main_board-&gt;<span class="hljs-built_in">add</span>(cpu);<br>    main_board-&gt;<span class="hljs-built_in">add</span>(graphic_card);<br>    cout &lt;&lt; main_board-&gt;<span class="hljs-built_in">get_name</span>() &lt;&lt; <span class="hljs-string">&quot; with &quot;</span> ;<br>    cout &lt;&lt; main_board-&gt;<span class="hljs-built_in">get_child</span>(<span class="hljs-number">0</span>)-&gt;<span class="hljs-built_in">get_name</span>() &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; main_board-&gt;<span class="hljs-built_in">get_child</span>(<span class="hljs-number">1</span>) -&gt;<span class="hljs-built_in">get_name</span>() &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;all price:&quot;</span> &lt;&lt; main_board-&gt;<span class="hljs-built_in">get_price</span>() &lt;&lt; endl;<br>    main_board-&gt;<span class="hljs-built_in">remove</span>(cpu);<br>    cout &lt;&lt; <span class="hljs-string">&quot;ä¸»æ¿ï¼ˆå¸¦æœ‰æ˜¾å¡ï¼‰å½“å‰ä»·æ ¼:&quot;</span> &lt;&lt; main_board-&gt;<span class="hljs-built_in">get_price</span>() &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”ç»“æŸæµ‹è¯•è£…é¥°æ¨¡å¼â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”&quot;</span> &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="decoratorè£…é¥°å¯¹è±¡ç»“æ„å‹æ¨¡å¼"><a class="markdownIt-Anchor" href="#decoratorè£…é¥°å¯¹è±¡ç»“æ„å‹æ¨¡å¼"></a> Decoratorï¼ˆè£…é¥°ï¼‰â€”â€”å¯¹è±¡ç»“æ„å‹æ¨¡å¼</h1><ol><li>æ„å›¾</li></ol><p>åŠ¨æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡æ·»åŠ ä¸€äº›é¢å¤–çš„èŒè´£ã€‚å°±æ·»åŠ åŠŸèƒ½æ¥è¯´ï¼ŒDecoratoræ¨¡å¼ç›¸æ¯”ç”Ÿæˆå­ç±»æ›´åŠ çµæ´»</p><ol start="2"><li>åˆ«å</li></ol><p>åŒ…è£…å™¨ï¼ˆwrapperï¼‰</p><ol start="3"><li>åŠ¨æœº</li></ol><p>æœ‰æ—¶æˆ‘ä»¬å¸Œæœ›ç»™æŸä¸ªå¯¹è±¡è€Œä¸æ˜¯æ•´ä¸ªç±»æ·»åŠ ä¸€äº›åŠŸèƒ½ï¼Œä¾‹å¦‚ä¸€ä¸ªå›¾å½¢ç”¨æˆ·ç•Œé¢å·¥å…·ç®±å…è®¸ä½ å¯¹ä»»æ„ä¸€ä¸ªç”¨æˆ·ç•Œé¢ç»„ä»¶æ·»åŠ ä¸€äº›ç‰¹æ€§ï¼ˆä¾‹å¦‚è¾¹æ¡†ï¼‰ï¼Œæˆ–æ˜¯ä¸€äº›è¡Œä¸ºï¼ˆä¾‹å¦‚çª—å£æ»‘åŠ¨ï¼‰ã€‚</p><p>ä½¿ç”¨ç»§æ‰¿æœºåˆ¶æ˜¯æ·»åŠ åŠŸèƒ½çš„ä¸€ç§æœ‰æ•ˆé€”ç»ï¼Œä»å…¶ä»–ç±»ç»§æ‰¿è¿‡æ¥çš„è¾¹æ¡†ç‰¹æ€§å¯ä»¥è¢«å¤šä¸ªå­ç±»çš„å®ä¾‹æ‰€ä½¿ç”¨ï¼Œä½†è¿™ç§æ–¹æ³•ä¸å¤Ÿçµæ´»ï¼Œå› ä¸ºè¾¹æ¡†çš„é€‰æ‹©æ—¶é™æ€çš„ï¼Œç”¨æˆ·ä¸èƒ½æ§åˆ¶å¯¹ç»„ä»¶åŠ è¾¹æ¡†çš„æ–¹å¼å’Œæ—¶æœºã€‚</p><p>ä¸€ç§è¾ƒä¸ºçµæ´»çš„æ–¹å¼å°±æ˜¯å°†ç»„ä»¶åµŒå…¥å¦ä¸€ä¸ªå¯¹è±¡ä¸­ï¼Œç”±è¿™ä¸ªå¯¹è±¡æ·»åŠ è¾¹æ¡†ã€‚æˆ‘ä»¬ç§°è¿™ä¸ªåµŒå…¥çš„å¯¹è±¡ä¸ºè£…é¥°ã€‚è¿™ä¸ªè£…é¥°ä¸å®ƒæ‰€è£…é¥°çš„ç»„ä»¶æ¥å£ä¸€è‡´ï¼Œå› æ­¤å®ƒå¯¹ä½¿ç”¨è¯¥ç»„ä»¶çš„å®¢æˆ·é€æ˜ã€‚å®ƒå°†å®¢æˆ·è¯·æ±‚è½¬å‘ç»™è¯¥ç»„ä»¶ï¼Œå¹¶ä¸”å¯èƒ½åœ¨è½¬å‘å‰åæ‰§è¡Œä¸€äº›é¢å¤–çš„åŠ¨ä½œï¼ˆä¾‹å¦‚ç”»ä¸€ä¸ªè¾¹æ¡†ï¼‰ã€‚é€æ˜æ€§ä½¿å¾—ä½ å¯ä»¥é€’å½’åœ°åµŒå¥—å¤šä¸ªè£…é¥°ï¼Œä»è€Œå¯ä»¥æ·»åŠ ä»»æ„å¤šçš„åŠŸèƒ½ã€‚</p><ol start="4"><li>é€‚ç”¨æ€§</li></ol><p>ä»¥ä¸‹æƒ…å†µä¸‹ä½¿ç”¨Decoratoræ¨¡å¼ï¼š</p><ul><li>åœ¨ä¸å½±å“å…¶ä»–å¯¹è±¡çš„æƒ…å†µä¸‹ï¼Œä»¥åŠ¨æ€ã€é€æ˜çš„æ–¹å¼ç»™å•ä¸ªå¯¹è±¡æ·»åŠ èŒè´£</li><li>å¤„ç†é‚£äº›å¯ä»¥æ’¤é”€çš„èŒè´£</li><li>å½“ä¸èƒ½é‡‡ç”¨ç”Ÿæˆå­ç±»çš„æ–¹æ³•è¿›è¡Œæ‰©å……æ—¶ã€‚ä¸€ç§æƒ…å†µæ˜¯ï¼Œå¯èƒ½æœ‰å¤§é‡ç‹¬ç«‹çš„æ‰©å±•ï¼Œä¸ºæ”¯æŒæ¯ä¸€ç§ç»„åˆå°†äº§ç”Ÿå¤§é‡çš„å­ç±»ï¼Œä½¿å¾—å­ç±»æ•°ç›®å‘ˆçˆ†ç‚¸æ€§å¢é•¿ã€‚å¦ä¸€ç§æƒ…å†µå¯èƒ½æ˜¯ï¼Œç±»å®šä¹‰è¢«éšè—ï¼Œæˆ–ç±»å®šä¹‰ä¸èƒ½ç”¨äºç”Ÿæˆå­ç±»ï¼ˆè¿™ä¸ªæ„æ€å°±æ˜¯è£…é¥°çš„æ„æ€ï¼Ÿï¼‰ã€‚</li></ul><ol start="5"><li>ç»“æ„</li></ol><p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202203202024851.jpeg" alt="ç±»å›¾è®¾è®¡" /></p><ol start="6"><li>å‚ä¸è€…</li></ol><ul><li>Componentï¼ˆVisualComponentï¼‰<ul><li>å®šä¹‰ä¸€ä¸ªå¯¹è±¡æ¥å£ï¼Œå¯ä»¥ç»™è¿™äº›å¯¹è±¡åŠ¨æ€åœ°æ·»åŠ èŒè´£</li></ul></li><li>ConcreteComponent(TextView)<ul><li>å®šä¹‰ä¸€ä¸ªå¯¹è±¡ï¼Œå¯ä»¥ç»™è¿™ä¸ªå¯¹è±¡æ·»åŠ ä¸€äº›èŒè´£</li></ul></li><li>Decorator<ul><li>ç»´æŒä¸€ä¸ªæŒ‡å‘Componentå¯¹è±¡çš„æŒ‡é’ˆï¼Œå¹¶å®šä¹‰ä¸€ä¸ªä¸Componentæ¥å£ä¸€è‡´çš„æ¥å£</li></ul></li><li>ConcreteDecoratorï¼ˆBorderDecoratorã€ScrollDecorator)<ul><li>å‘ç»„ä»¶æ·»åŠ èŒè´£</li></ul></li></ul><ol start="7"><li>åä½œ</li></ol><p>Decoratorå°†è¯·æ±‚è½¬å‘ç»™å®ƒçš„Componentå¯¹è±¡ï¼Œå¹¶æœ‰å¯èƒ½åœ¨è½¬å‘è¯·æ±‚å‰åæ‰§è¡Œä¸€äº›é™„åŠ çš„åŠ¨ä½œ</p><ol start="8"><li>ç›¸å…³æ¨¡å¼</li></ol><ul><li>Adapterï¼šDecoratoræ¨¡å¼ä¸åŒäºAdapteræ¨¡å¼ï¼Œå› ä¸ºè£…é¥°ä»…æ”¹å˜å¯¹è±¡çš„èŒè´£è€Œä¸æ”¹å˜å®ƒçš„æ¥å£ï¼›è€Œé€‚é…å™¨å°†ç»™å¯¹è±¡ä¸€ä¸ªå…¨æ–°çš„æ¥å£</li><li>Compositeï¼šå¯ä»¥å°†è£…é¥°è§†ä¸ºä¸€ä¸ªé€€åŒ–çš„ã€ä»…æœ‰ä¸€ä¸ªç»„ä»¶çš„ç»„åˆã€‚ç„¶è€Œï¼Œ è£…é¥°ä»…ç»™å¯¹è±¡æ·»åŠ ä¸€äº›é¢å¤–çš„èŒè´£â€”â€”å®ƒçš„ç›®çš„ä¸åœ¨äºå¯¹è±¡èšé›†ã€‚</li><li>Strategyï¼šç”¨ä¸€ä¸ªè£…é¥°å¯ä»¥æ”¹å˜å¯¹è±¡çš„å¤–è¡¨ï¼›è€ŒStrategyæ¨¡å¼ä½¿ä½ å¯ä»¥æ”¹å˜å¯¹è±¡çš„å†…æ ¸ã€‚è¿™æ˜¯æ”¹å˜å¯¹è±¡çš„ä¸¤ç§é€”ç»ã€‚</li></ul><ol start="9"><li>ç¤ºä¾‹ä»£ç </li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">// Decorator.h </span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-meta-keyword">ifndef</span> STRUCTURALPATTERNDESIGN_DECORATOR_H</span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> STRUCTURALPATTERNDESIGN_DECORATOR_H</span><br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * @brief è£…é¥°æ¨¡å¼</span><br><span class="hljs-comment"> * ä»¥GUIç»„ä»¶ä¸ºä¾‹ï¼Œå®šä¹‰å¯è§†åŒ–ç»„ä»¶ä¸ºåŸºæœ¬çš„componentç±»ï¼Œæ–‡æœ¬æ¡†ä¸ºå…·ä½“çš„ä¸€ä¸ªç»„ä»¶ç±»ï¼Œ</span><br><span class="hljs-comment"> * è¾¹æ¡†å’Œæ»šè½®åˆ™æ˜¯è£…é¥°å™¨ç±»</span><br><span class="hljs-comment"> */</span><br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">test_decorator</span><span class="hljs-params">()</span></span>;<br><br><span class="hljs-comment">// Componentç±»</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">VisualComponent</span> &#123;</span><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">draw</span><span class="hljs-params">()</span> </span>= <span class="hljs-number">0</span>;<br>    ~<span class="hljs-built_in">VisualComponent</span>() = <span class="hljs-keyword">default</span>;<br>&#125;;<br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TextLine</span> :</span> <span class="hljs-keyword">public</span> VisualComponent &#123;<br><span class="hljs-keyword">public</span> :<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">draw</span><span class="hljs-params">()</span>  </span>&#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;ç”»å‡ºä¸€ä¸ªæ–‡æœ¬æ¡†&quot;</span> &lt;&lt; std::endl;<br><br>    &#125;<br>&#125;;<br><br><span class="hljs-comment">// ç®€å•ä¿®é¥°å™¨ç±»</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Decorator</span> :</span> <span class="hljs-keyword">public</span> VisualComponent&#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">Decorator</span>(VisualComponent* component) : <span class="hljs-built_in">component</span>(component) &#123;<br><br>    &#125;<br>    <span class="hljs-keyword">virtual</span> ~<span class="hljs-built_in">Decorator</span>() = <span class="hljs-keyword">default</span>;<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">draw</span><span class="hljs-params">()</span> </span>&#123;<br>        component-&gt;<span class="hljs-built_in">draw</span>();<br>    &#125;<br><br><span class="hljs-keyword">private</span>:<br>    VisualComponent* component;<br><br>&#125;;<br><br><span class="hljs-comment">// è¾¹æ¡†ä¿®é¥°å™¨</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BorderDecorator</span> :</span> <span class="hljs-keyword">public</span> Decorator &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">BorderDecorator</span>(VisualComponent* component, <span class="hljs-keyword">int</span> width) : <span class="hljs-built_in">Decorator</span>(component), <span class="hljs-built_in">width</span>(width) &#123;<br><br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">draw</span><span class="hljs-params">()</span> </span>&#123;<br>       Decorator::<span class="hljs-built_in">draw</span>();<br>       <span class="hljs-built_in">add_border</span>();<br>    &#125;<br><br><span class="hljs-keyword">private</span>:<br>    <span class="hljs-keyword">int</span> width;<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">add_border</span><span class="hljs-params">()</span> </span>&#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;æ·»åŠ è¾¹æ¡†,&quot;</span> &lt;&lt; <span class="hljs-string">&quot;åšåº¦ä¸º&quot;</span> &lt;&lt; width &lt;&lt; std::endl;<br>    &#125;<br><br><br>&#125;;<br><br><span class="hljs-comment">// æ»šåŠ¨æ¡ä¿®é¥°å™¨</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ScrollDecorator</span> :</span> <span class="hljs-keyword">public</span> Decorator &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-built_in">ScrollDecorator</span>(VisualComponent* component) : <span class="hljs-built_in">Decorator</span>(component) &#123;<br><br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-keyword">void</span> <span class="hljs-title">draw</span><span class="hljs-params">()</span> </span>&#123;<br>        Decorator::<span class="hljs-built_in">draw</span>();<br>        <span class="hljs-built_in">add_scroll</span>();<br>    &#125;<br><span class="hljs-keyword">private</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">add_scroll</span><span class="hljs-params">()</span> </span>&#123;<br>        std::cout &lt;&lt; <span class="hljs-string">&quot;æ·»åŠ æ»šåŠ¨æ¡&quot;</span> &lt;&lt; std::endl;<br>    &#125;<br>&#125;;<br><br><span class="hljs-comment">// çª—å£windowï¼Œå¯ä»¥å°†ä¸€ä¸ªå¯è§†åŒ–ç»„ä»¶æ”¾å…¥çª—å£ä¸­æ˜¾ç¤º</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Window</span> &#123;</span><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">set_content</span><span class="hljs-params">(VisualComponent* component)</span> </span>&#123;<br>        component-&gt;<span class="hljs-built_in">draw</span>();<br>    &#125;<br>&#125;;<br><br><span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span> <span class="hljs-comment">//STRUCTURALPATTERNDESIGN_DECORATOR_H</span></span><br></code></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">// Decorator.cpp</span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&quot;Decorator.h&quot;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">test_decorator</span><span class="hljs-params">()</span> </span>&#123;<br>    cout &lt;&lt; <span class="hljs-string">&quot;â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”å¼€å§‹æµ‹è¯•è£…é¥°æ¨¡å¼â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”&quot;</span> &lt;&lt; endl;<br>    Window window;<br><br>    window.<span class="hljs-built_in">set_content</span>(<br>            <span class="hljs-keyword">new</span> <span class="hljs-built_in">ScrollDecorator</span>(<br>                    <span class="hljs-keyword">new</span> <span class="hljs-built_in">BorderDecorator</span>(<br>                            <span class="hljs-keyword">new</span> TextLine, <span class="hljs-number">3</span>)));<br>    cout &lt;&lt; <span class="hljs-string">&quot;â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”ç»“æŸæµ‹è¯•è£…é¥°æ¨¡å¼â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”&quot;</span> &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºçŸ¥è¯†</category>
      
      <category>ç¼–ç¨‹æŠ€å·§</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è®¾è®¡æ¨¡å¼</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€99%ç¯å¢ƒæ­å»ºç³»åˆ—ã€‘xv6-riscvå†…æ ¸è°ƒè¯•æ•™ç¨‹</title>
    <link href="/2022/03/19/2022-03/2022-03-19%20%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E7%B3%BB%E5%88%97-xv6%E5%86%85%E6%A0%B8%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/"/>
    <url>/2022/03/19/2022-03/2022-03-19%20%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E7%B3%BB%E5%88%97-xv6%E5%86%85%E6%A0%B8%E8%B0%83%E8%AF%95%E6%95%99%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a class="markdownIt-Anchor" href="#å‰è¨€"></a> å‰è¨€</h1><p>æœ€è¿‘åœ¨ä¸Šã€Šæ“ä½œç³»ç»Ÿé«˜çº§è¯¾ç¨‹ã€‹ï¼Œåšçš„å®éªŒæ˜¯MIT6.828çš„è¯¾ç¨‹å®éªŒï¼Œåœ¨ä¸€ä¸ªç®€æ˜“æ“ä½œç³»ç»Ÿå†…æ ¸XV6ä¸Šè¿›è¡Œè°ƒè¯•å¼€å‘ã€‚åç»­æˆ‘ä¹Ÿä¼šå†™ä¸€äº›ä»‹ç»æ“ä½œç³»ç»Ÿçš„æ–‡ç« ã€‚</p><p>å…³äºXV6ï¼Œè¿™æ˜¯MITå¼€å‘çš„ä¸€ä¸ªæ•™å­¦ç›®çš„çš„æ“ä½œç³»ç»Ÿã€‚<em>XV6</em>æ˜¯åœ¨x86å¤„ç†å™¨ä¸Š(xå³æŒ‡x86)ç”¨ANSIæ ‡å‡†Cé‡æ–°å®ç°çš„Unixç¬¬å…­ç‰ˆ(Uni<em>x V6</em>ï¼Œé€šå¸¸ç›´æ¥è¢«ç§°ä¸ºV6)ã€‚å¹¶ä¸”MIT6.828è¿™é—¨å…³äºæ“ä½œç³»ç»Ÿçš„è¯¾ç¨‹ä¹Ÿæ˜¯å¹¿å—å¥½è¯„çš„ï¼Œä¹Ÿæ¨èå¤§å®¶å»å­¦ä¹ ã€‚</p><p>è¿™é‡Œå†è´´å‡ºä¸€ä»½ç›¸å…³çš„èµ„æºæ¸…å•ï¼ˆä¸è¦å†è¯´æ‰¾ä¸åˆ°å­¦ä¹ èµ„æºäº†è€Œä¸å­¦äº†~ï¼‰ï¼š</p><ul><li>è¯¾ç¨‹ç½‘ç«™ï¼š<a href="https://pdos.csail.mit.edu/6.828/2020">https://pdos.csail.mit.edu/6.828/2020</a></li><li>xv6 å®˜ç½‘å®‰è£…æ•™ç¨‹ï¼š<a href="https://pdos.csail.mit.edu/6.828/2020/tools.html">https://pdos.csail.mit.edu/6.828/2020/tools.html</a></li><li>åŒ—å¤§è¯¾ç¨‹æç¤ºï¼š<a href="https://github.com/FrankZn/xv6-pku-hints">https://github.com/FrankZn/xv6-pku-hints</a></li><li>xv6-bookä¸­æ–‡ç‰ˆï¼š<a href="https://github.com/FrankZn/xv6-riscv-book-Chinese">https://github.com/FrankZn/xv6-riscv-book-Chinese</a></li><li>ä¸­æ–‡å­—å¹•è§†é¢‘ï¼š<a href="https://www.bilibili.com/video/BV19k4y1C7kA">6.S081 / Fall 2020 éº»çœç†å·¥æ“ä½œç³»ç»Ÿ - 2020 å¹´ç§‹å­£</a></li><li>å®éªŒä»£ç å‚è€ƒï¼š<a href="https://home.cnblogs.com/u/weijunji/">https://home.cnblogs.com/u/weijunji/</a></li></ul><hr /><p>å›å½’ä¸»é¢˜ï¼Œè¿™æ¬¡æ–‡ç« çš„æ¥ç”±å°±æ˜¯å®ç°è™šæ‹Ÿæœºä¸Šå®ç°gdbè°ƒè¯•xv6ã€‚ä¸€å¼€å§‹å› ä¸ºåªä¸‹è½½äº†å†…æ ¸çš„ä»£ç ï¼Œæ‰€ä»¥åªèƒ½è¿›è¡Œç¼–è¯‘è¿è¡Œï¼Œä½¿ç”¨è‡ªå¸¦çš„gdbå‡ºç°å„ç§é—®é¢˜ï¼Œåæ¥å‘ç°æ˜¯æ²¡æœ‰å®‰è£…ç›¸åº”çš„ç¼–è¯‘å·¥å…·ã€‚ä½†æ˜¯å®é™…å®‰è£…èµ·æ¥å´èŠ±è´¹äº†æˆ‘å¥½å¤§ä¸€ç•ªåŠŸå¤«ï¼Œæ‰€ä»¥ç‰¹æ­¤è®°å½•ï¼Œå¸®åŠ©åæ¥äººå‡å°‘å¼¯è·¯ã€‚</p><p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202203200908096.(null)" alt="æŠ¥é”™ä¿¡æ¯1" /></p><p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202203200908937.(null)" alt="æŠ¥é”™ä¿¡æ¯2" /></p><p>å†æä¸€ä¸‹æˆ‘çš„æœºå™¨ç¯å¢ƒï¼š</p><ul><li>å®¿ä¸»æœºæ“ä½œç³»ç»Ÿï¼šWin10</li><li>è™šæ‹Ÿæœºï¼šUbuntu20.04</li></ul><h1 id="riscv-gnu-toolchain-å®‰è£…"><a class="markdownIt-Anchor" href="#riscv-gnu-toolchain-å®‰è£…"></a> riscv-gnu-toolchain å®‰è£…</h1><p>æ ¹æ®å®˜ç½‘ä¸Šçš„æ•™ç¨‹å®‰è£…ï¼Œå‘ç°è™šæ‹Ÿæœºè¿ä¸ä¸Šå¤–ç½‘ï¼ˆè¿™é‡Œè¿˜å°è¯•ä¸€ç•ªåŠŸå¤«ï¼Œæ²¡èƒ½æˆåŠŸï¼‰ï¼Œæ‰€ä»¥çœ‹åˆ°è¿™ç¯‡æ–‡ç« ï¼Œ<a href="https://blog.csdn.net/qq_35990574/article/details/110006307">riscv-gnu-toolchainå·¥å…·é“¾ä¸‹è½½å®‰è£…_roockietçš„åšå®¢</a><sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="riscv-gnu-toolchainå·¥å…·é“¾ä¸‹è½½å®‰è£…_roockietçš„åšå®¢">[1]</span></a></sup></p><p>ä½¿ç”¨giteeä¸Šçš„é•œåƒè¿›è¡Œä¸‹è½½ï¼Œéœ€è¦æ‰§è¡Œçš„å‘½ä»¤å¤§ä½“å¦‚ä¸‹ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs PowerShell"><span class="hljs-comment"># å®‰è£…ç¼–è¯‘éœ€è¦çš„ä¸€äº›ä¾èµ–</span><br>sudo apt<span class="hljs-literal">-get</span> install autoconf automake autotools<span class="hljs-literal">-dev</span> <span class="hljs-built_in">curl</span> libmpc<span class="hljs-literal">-dev</span> libmpfr<span class="hljs-literal">-dev</span> libgmp<span class="hljs-literal">-dev</span> gawk <span class="hljs-built_in">build-essential</span> bison flex texinfo gperf libtool patchutils bc zlib1g<span class="hljs-literal">-dev</span> libexpat<span class="hljs-literal">-dev</span><br><br><span class="hljs-comment"># å…‹éš†å·¥å…·ä»“åº“</span><br>git clone https://gitee.com/mirrors/riscv<span class="hljs-literal">-gnu</span><span class="hljs-literal">-toolchain</span>.git<br><br><span class="hljs-comment"># è¿›å…¥ç›®å½•</span><br><span class="hljs-built_in">cd</span> riscv<span class="hljs-literal">-gnu</span><span class="hljs-literal">-toolchain</span> <br><br><span class="hljs-comment"># æ‰‹åŠ¨å…‹éš†å…¶ä»–ä»“åº“ï¼Œä¸‹è½½æ¯”è¾ƒè€—æ—¶ï¼Œè€å¿ƒç­‰å¾…å§</span><br>git clone https://gitee.com/mirrors/riscv<span class="hljs-literal">-binutils</span><span class="hljs-literal">-gdb</span>.git riscv<span class="hljs-literal">-binutils</span><br>git clone https://gitee.com/mirrors/riscv<span class="hljs-literal">-dejagnu</span>.git riscv<span class="hljs-literal">-dejagnu</span><br>git clone https://gitee.com/mirrors/riscv<span class="hljs-literal">-gcc</span>.git riscv<span class="hljs-literal">-gcc</span><br>git clone https://gitee.com/mirrors/riscv<span class="hljs-literal">-binutils</span><span class="hljs-literal">-gdb</span>.git riscv<span class="hljs-literal">-gdb</span><br>git clone https://gitee.com/mirrors/riscv<span class="hljs-literal">-glibc</span>.git riscv<span class="hljs-literal">-glibc</span><br>git clone https://gitee.com/mirrors/riscv<span class="hljs-literal">-newlib</span>.git riscv<span class="hljs-literal">-newlib</span><br><br><span class="hljs-comment"># è¿™ä¸ªqemuç›®å½•ï¼Œåé¢å¥½åƒæ²¡æœ‰ç”¨åˆ°ï¼Œå¯ä»¥æŠŠè¿™ä¸ªç›®å½•ç»™å»äº†ï¼Œå¦‚æœæ‹…å¿ƒï¼Œé‚£å°±ä¹Ÿä¸€å¹¶ä¸‹è½½å§</span><br>git clone https://gitee.com/mirrors/qemu.git qemu<br><br><span class="hljs-comment"># æ‰€æœ‰ä»“åº“ä¸‹è½½å®Œæˆï¼Œå¼€å§‹ç¼–è¯‘</span><br>./configure -<span class="hljs-literal">-prefix</span>=/usr/local  <span class="hljs-comment">#ï¼ˆé€‰æ‹©å®‰è£…ç›®å½•ï¼Œè¯·ç¡®ä¿å¯¹åº”çš„ç›®å½•æœ‰è¶³å¤Ÿå¤§çš„å®¹é‡ï¼Œç®—ä¸Šä¸‹è½½çš„ä»“åº“å¤§çº¦20Gï¼‰</span><br>sudo make<br><span class="hljs-comment"># è¿™æ ·ç¼–è¯‘å¤§çº¦éœ€è¦ 1 ~ 2 å°æ—¶</span><br></code></pre></td></tr></table></figure><hr /><p>æ³¨æ„è¿™ä¸ªriscv-gnu-toolchainæ‰€æœ‰çš„ä»“åº“éƒ½å…‹éš†ä¸‹æ¥åï¼Œå¹¶ä¸”ç›´æ¥æ‰§è¡Œmakeå®‰è£…çš„è¯ï¼Œè€—æ—¶è¾ƒä¹…ï¼Œä¼°è®¡æœ‰1~2å°æ—¶ï¼Œæœ€åå¤§çº¦æœ‰18Gï¼ˆæˆ‘æ˜¯å®‰è£…åœ¨äº†/opt/binç›®å½•ä¸‹ï¼‰ï¼Œæ‰€ä»¥ä¸€å®šè¦ç¡®ä¿å¯¹åº”åˆ†åŒºçš„å®¹é‡è¶³å¤Ÿï¼Œä¸ç„¶å°±ä¼šå› ä¸ºå®¹é‡ä¸å¤Ÿè€Œå†™å¤±è´¥ï¼ˆéƒ½æ˜¯è¡€æ·‹æ·‹çš„æ•™è®­å•Šï¼Œçœ‹åˆ°ä¸‹å›¾æ ¹ç›®å½•çš„æŒ‚è½½ç‚¹äº†å—ï¼Œä¹‹å‰å°±æ˜¯å› ä¸ºå®‰è£…åœ¨æ ¹ç›®å½•å¯¹åº”çš„åˆ†åŒºä¸‹ï¼Œå¯¼è‡´å®¹é‡ç©ºé—´ç›´æ¥æ»¡äº†ã€‚ã€‚ï¼‰ã€‚</p><p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202203192203252.(null)" alt="æŸ¥çœ‹ç£ç›˜åˆ†åŒºä½¿ç”¨æƒ…å†µ" /></p><p>å¦‚æœä¸ºäº†èŠ‚çœç©ºé—´å’Œæ—¶é—´ï¼Œå¯ä»¥åªå°è¯•ä¸‹é¢çš„é…ç½®æ–¹å¼ï¼Œåªå®‰è£…riscv64-unknown-elf-gccï¼Œå‚è€ƒè¿™ç¯‡æ–‡ç« ï¼Œ<a href="https://blog.csdn.net/weiqi7777/article/details/88045720">riscvå„ç§ç‰ˆæœ¬gccå·¥å…·é“¾ç¼–è¯‘ä¸å®‰è£…_weiqi7777çš„åšå®¢-CSDNåšå®¢_riscvç¼–è¯‘å™¨</a><sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><span class="hint--top hint--rounded" aria-label="riscvå„ç§ç‰ˆæœ¬gccå·¥å…·é“¾ç¼–è¯‘ä¸å®‰è£…_weiqi7777çš„åšå®¢-CSDNåšå®¢_riscvç¼–è¯‘å™¨">[2]</span></a></sup></p><p>å› ä¸ºåé¢è°ƒè¯•æ—¶åªç”¨åˆ°äº†riscv64-unknown-elf-gdbï¼Œæ‰€ä»¥æˆ‘çŒœæµ‹åªéœ€è¦å®‰è£…å¯¹åº”gccå·¥å…·å³å¯ï¼Œä¸è¿‡æˆ‘è‡ªå·²æ²¡æœ‰å°è¯•è¿‡å¯ä¸å¯è¡Œï¼Œæ‰€ä»¥è¿˜æ˜¯äº¤ç”±å„ä½çœ‹å®˜è‡ªè¡Œå†³å®šã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs Shell">../configure --prefix=/opt/riscv64 --with-arch=rv64imc --with-abi=lp64<br>make<br></code></pre></td></tr></table></figure><h1 id="gdbè°ƒè¯•"><a class="markdownIt-Anchor" href="#gdbè°ƒè¯•"></a> GDBè°ƒè¯•</h1><ol><li>é¦–å…ˆåœ¨ä¸€ä¸ªçª—å£ä¸Šæ‰§è¡Œï¼š</li></ol><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">make qemu-gdb</span><br></code></pre></td></tr></table></figure><ol start="2"><li>ç„¶åæ‰“å¼€å¦ä¸€ä¸ªçª—å£ï¼Œæ‰§è¡Œï¼š</li></ol><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs maxima">riscv64-<span class="hljs-literal">unknown</span>-elf-gdb kernel/kernel<br></code></pre></td></tr></table></figure><ol start="3"><li>ç„¶åå¯ä»¥çœ‹åˆ°è¿›å…¥äº†gdbç•Œé¢ï¼Œæ¥ç€è¿œç¨‹è¿æ¥ä¸Šä¸€ä¸ªçª—å£çš„gdbï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š</li></ol><p><code>target remote localhost:26000</code> ï¼ˆè¿™é‡Œçš„26000å¡«ä¸Šä¸€ä¸ªçª—å£çš„ç«¯å£å·ï¼‰</p><ol start="4"><li>è¿æ¥æˆåŠŸä¹‹åï¼Œæ˜¾ç¤ºå¦‚ä¸‹ï¼š</li></ol><p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202203200909360.(null)" alt="è¿œç¨‹è¿æ¥ç¨‹åº" /></p><ol start="5"><li>ç„¶åæŠŠè‡ªå·±ç¼–è¯‘å¥½çš„ç”¨æˆ·ç¨‹åºåŠ è½½è¿›æ¥ï¼Œä¹Ÿå°±æ˜¯userç›®å½•ä¸‹çš„æ–‡ä»¶<code>file user/_find</code></li></ol><p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202203200909713.(null)" alt="åŠ è½½è¦è°ƒè¯•çš„ç¼–è¯‘æ–‡ä»¶" /></p><p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202203200909785.(null)" alt="è®¾ç½®æ–­ç‚¹å¹¶æ‰§è¡Œ" /></p><ol start="6"><li>ç„¶åè®¾ç½®å¥½æ–­ç‚¹ï¼Œå°±å¯ä»¥æŒ‰ä¸‹ c è®©ç¨‹åºè¿è¡Œåˆ°æ–­ç‚¹å¤„ï¼Œå†è¿”å›ä¸Šä¸ªçª—å£ï¼Œæ‰§è¡Œå¯¹åº”å‘½ä»¤ï¼Œå°±å¯ä»¥çœ‹åˆ°ç¨‹åºæš‚åœä½äº†ï¼Œè¿”å›gdbè°ƒè¯•ç¨‹åºçª—å£ï¼Œä¹Ÿèƒ½çœ‹åˆ°å½“å‰æš‚åœçš„åœ°æ–¹å°±æ˜¯åˆšåˆšè®¾ç½®çš„æ–­ç‚¹å¤„ã€‚</li></ol><p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202203200909251.(null)" alt="è¿œç¨‹å†…æ ¸å¼€å§‹è¿è¡Œ" /></p><p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202203200910116.(null)" alt="gdbæŸ¥çœ‹å½“å‰æ–­ç‚¹" /></p><ol start="7"><li>ä¹‹åå°±æ˜¯ç—›è‹¦åœ°æ„‰å¿«åœ°è°ƒè¯•bugå•¦~æœ‰å…³gdbè°ƒè¯•æŠ€å·§ï¼Œè¿˜å¯ä»¥å‚è€ƒæˆ‘ä¹‹å‰å†™çš„è¿™ç¯‡æ–‡ç« ï¼Œ<a href="http://gg.gg/y7c2n">GDBè°ƒè¯•å­¦ä¹ </a>ã€‚</li></ol><h1 id="è¸©å‘è®°å½•"><a class="markdownIt-Anchor" href="#è¸©å‘è®°å½•"></a> è¸©å‘è®°å½•</h1><p>è¿™æ¬¡å®‰è£…è¿‡ç¨‹ä¸­é‡åˆ°ä¸¤ä¸ªå‘ï¼Œä¸€ä¸ªæ˜¯åœ¨å…‹éš†ä»“åº“çš„æ—¶å€™ï¼Œè™šæ‹Ÿæœºæ— æ³•è®¿é—®å¤–ç½‘ï¼Œä¸€ä¸ªæ˜¯å®‰è£…riscvç¼–è¯‘å·¥å…·æ—¶ï¼Œåˆ†åŒºçš„å®¹é‡ä¸å¤Ÿäº†ï¼Œè¿™é‡Œå°±ç®€å•åœ°åšä¸ªè®°å½•ã€‚</p><h2 id="è™šæ‹Ÿæœºç½‘ç»œé…ç½®"><a class="markdownIt-Anchor" href="#è™šæ‹Ÿæœºç½‘ç»œé…ç½®"></a> è™šæ‹Ÿæœºç½‘ç»œé…ç½®</h2><p>ä¸€å¼€å§‹çš„éœ€æ±‚æ˜¯å®ç°è™šæ‹Ÿæœºå…±äº«ä¸»æœºçš„VPNï¼Œä¹Ÿèƒ½å¤Ÿè®¿é—®å¤–ç½‘ï¼Œå‚è€ƒäº†è¿™ç¯‡æ–‡ç« ï¼Œ<a href="https://www.jianshu.com/p/6c7abd4adc9b">Ubuntuè™šæ‹Ÿæœºå…±äº«ä¸»æœºVPNï¼ˆé€‚ç”¨äºNATæˆ–æ¡¥æ¥ï¼‰</a><sup id="fnref:3" class="footnote-ref"><a href="#fn:3" rel="footnote"><span class="hint--top hint--rounded" aria-label="Ubuntuè™šæ‹Ÿæœºå…±äº«ä¸»æœºVPNï¼ˆé€‚ç”¨äºNATæˆ–æ¡¥æ¥ï¼‰">[3]</span></a></sup></p><p>å°è¯•ä¹‹åï¼ŒæŠ¥é”™ä»£ç†æœåŠ¡å™¨é”™è¯¯ï¼Œæ­£å¸¸çš„å›½å†…ç½‘é¡µæ— æ³•è®¿é—®äº†ã€‚å› ä¸ºè¿™ä¸ªæ—¶å€™æˆ‘ç”¨çš„æ˜¯NATæ¨¡å¼ï¼Œæ‰€ä»¥å°±æƒ³è¦å°è¯•ç”¨æ¡¥æ¥æ¨¡å¼å†è¯•ä¸€ä¸‹ã€‚</p><p>å‚è€ƒè¿™é‡Œçš„è§†é¢‘æ•™ç¨‹ <a href="https://www.bilibili.com/video/BV1ji4y1772Z?from=search&amp;seid=5722489325382065130&amp;spm_id_from=333.337.0.0">VMwareç½‘ç»œé€‰æ‹©å’Œubuntu 20_04 ç½‘ç»œé…ç½®æ•™ç¨‹</a><sup id="fnref:4" class="footnote-ref"><a href="#fn:4" rel="footnote"><span class="hint--top hint--rounded" aria-label="VMwareç½‘ç»œé€‰æ‹©å’Œubuntu 20_04 ç½‘ç»œé…ç½®æ•™ç¨‹">[4]</span></a></sup>ï¼Œ</p><p>é…ç½®é™æ€IPçš„æ–¹å¼ï¼Œæˆ‘ä¹‹å‰ä¹Ÿæåˆ°è¿‡<a href="http://gg.gg/y7c4c">ã€99%ç¯å¢ƒæ­å»ºç³»åˆ—ã€‘äº‘è®¡ç®—ç®¡ç†å¹³å°Devstackå®‰è£…</a>ï¼Œåæ¥è™½ç„¶å›½å†…ç½‘ç»œèƒ½å¤Ÿæ­£å¸¸è®¿é—®äº†ï¼Œä½†æ˜¯å¤–ç½‘è¿˜æ˜¯ä¸è¡Œã€‚</p><p>åæ¥å°è¯•å¾ˆä¹…è¿˜æ˜¯æ²¡èƒ½æˆåŠŸï¼Œæœ€åä¹Ÿå°±ä½œç½¢äº†ã€‚æ—¢ç„¶å¤–ç½‘è®¿é—®ä¸äº†ï¼Œé‚£å°±æ‰¾å›½å†…é•œåƒå§ï¼Œå¹¸è¿çš„æ˜¯è¿™æ¡è·¯èµ°é€šäº†ã€‚</p><hr /><p>æœ€åæ²¡æœ‰å®ç°éœ€æ±‚ï¼Œæˆ‘æƒ³å¯èƒ½è¿˜æ˜¯è‡ªå·±å¯¹ç½‘ç»œçš„äº†è§£è¿˜æ˜¯å¤ªç²—æµ…äº†ï¼Œæ—¥åä¸€å®šè¦å†æ¶è¡¥ä¸€ä¸‹ã€‚ä¸è¿‡å€Ÿæ­¤æœºä¼šï¼Œä¹Ÿäº†è§£å­¦ä¹ äº†ä¸‹VPNã€æ¡¥æ¥æ¨¡å¼ã€NATæ¨¡å¼çš„æ¦‚å¿µï¼Œè¿™é‡Œåšä¸ªç®€å•æ€»ç»“å§ã€‚</p><p>VPNï¼šVitrual Private Networkï¼Œç®€å•æ¥è¯´å°±æ˜¯é€šä¿¡åŒæ–¹ä¹‹é—´çš„æ•°æ®è¿›è¡Œäº†åŠ å¯†ã€‚æ›´å¤šå†…å®¹å‚è€ƒ <a href="https://www.bilibili.com/video/BV1KY411t75D?from=search&amp;seid=9126546184192701202&amp;spm_id_from=333.337.0.0">VPNæ¦‚å¿µï¼ŒæŠ€æœ¯åŸç†å’Œè¯¯åŒº_å“”å“©å“”å“©_bilibili</a><sup id="fnref:5" class="footnote-ref"><a href="#fn:5" rel="footnote"><span class="hint--top hint--rounded" aria-label="VPNæ¦‚å¿µï¼ŒæŠ€æœ¯åŸç†å’Œè¯¯åŒº_å“”å“©å“”å“©_bilibili">[5]</span></a></sup></p><p>æ¡¥æ¥æ¨¡å¼ï¼šè™šæ‹Ÿæœºä½¿ç”¨å®¿ä¸»æœºçš„çœŸå®ç½‘å¡ï¼Œå®¿ä¸»æœºå’Œè™šæ‹Ÿæœºåœ¨ç›¸åŒçš„å…¬ç½‘IPæ®µä¸‹ã€‚</p><p>NATæ¨¡å¼ï¼šè™šæ‹Ÿæœºå’Œå®¿ä¸»æœºä½¿ç”¨åŒä¸€ä¸ªè™šæ‹Ÿç½‘å¡ï¼Œä»è€Œå®ç°åœ¨åŒä¸€ä¸ªå±€åŸŸç½‘ç½‘æ®µä¸‹ï¼Œæ¯”å¦‚192.168.17.0 / 24ã€‚</p><h2 id="ubuntuæ·»åŠ ç£ç›˜åˆ†åŒº"><a class="markdownIt-Anchor" href="#ubuntuæ·»åŠ ç£ç›˜åˆ†åŒº"></a> ubuntuæ·»åŠ ç£ç›˜åˆ†åŒº</h2><p>è¿˜æœ‰ä¸€ä¸ªå‘å°±æ˜¯åœ¨ç¼–è¯‘å®‰è£…çš„æ—¶å€™ï¼Œç£ç›˜åˆ†åŒºå®¹é‡ä¸å¤Ÿäº†ã€‚æ‰€ä»¥è¿™é‡Œåœ¨æ¼”ç¤ºä¸€ä¸‹å¦‚ä½•ç»™linuxè™šæ‹Ÿæœºæ·»åŠ ç£ç›˜åˆ†åŒºã€‚</p><ol><li>é¦–å…ˆåœ¨VMware -&gt; è™šæ‹Ÿæœºé€‰é¡¹ -&gt; ç®¡ç†ï¼Œé€‰æ‹©æ‰©å±•ï¼Œæ·»åŠ æƒ³è¦å¢åŠ çš„åˆ†åŒºå®¹é‡ã€‚ï¼ˆæ³¨æ„éœ€è¦å…³é—­è™šæ‹Ÿæœºè¿›è¡Œè®¾ç½®)</li><li>æ­¤æ—¶æ˜¯è¿˜æ— æ³•ä½¿ç”¨æ–°å¢å®¹é‡çš„ï¼Œéœ€è¦åœ¨è™šæ‹Ÿæœºä¸Šæ·»åŠ åˆ†åŒºï¼Œå¹¶æŒ‚è½½æŸä¸€ç›®å½•ã€‚é‚£ä¹ˆé¦–å…ˆç™»é™†è™šæ‹Ÿæœºï¼Œæ·»åŠ åˆ†åŒºã€‚</li></ol><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs PowerShell"><span class="hljs-comment"># åˆ—å‡ºæ‰€æœ‰è®¾å¤‡ï¼Œæ‰¾åˆ° type ç±»å‹ä¸º disk çš„è®¾å¤‡åç§°</span><br>lsblk<br><br><span class="hljs-comment"># fdisk é€‚åˆMBRåˆ†åŒº </span><br>fdisk /dev/sda <span class="hljs-comment"># è¿™é‡Œçš„è®¾å¤‡åç§°å°±æ˜¯ä¸Šé¢æ‰¾åˆ°çš„è®¾å¤‡åç§°</span><br><br><span class="hljs-comment"># ç„¶åæŒ‰ n ï¼Œ æ–°å¢åˆ†åŒºï¼Œé€‰æ‹©ä¸€ä¸ªåŒºå·ï¼Œä¸€è·¯å›è½¦ï¼Œæœ€å w å†™å…¥ </span><br><span class="hljs-comment"># æ›´è¯¦ç»†çš„æ•™ç¨‹å¯ä»¥å‚è€ƒ https://www.cnblogs.com/rootshaw/p/12895022.html</span><br></code></pre></td></tr></table></figure><ol start="3"><li><p>æ·»åŠ å¥½åˆ†åŒºä¹‹åï¼Œå°±æ˜¯æ ¼å¼åŒ– <code>sudo mkfs.ext4 /dev/sda3</code> (è®¾å¤‡åæ¢æˆåˆšåˆšæ–°å¢çš„åˆ†åŒº)</p></li><li><p>ç„¶åå°±æ˜¯æŒ‚è½½ç›®å½•<code>sudo mount /dev/sda3 /opt/bin</code>ï¼ˆé€‰æ‹©è‡ªå·±éœ€è¦æŒ‚è½½çš„ç›®å½•ï¼‰</p></li><li><p>ä½¿ç”¨<code>df -h</code> å¯ä»¥çœ‹æ˜¯å¦æŒ‚è½½æˆåŠŸã€‚æŒ‚è½½æˆåŠŸä¹‹åå°±å¯ä»¥ä½¿ç”¨è¯¥åˆ†åŒºäº†ã€‚</p></li><li><p>ä¸Šé¢çš„æŒ‚è½½ï¼Œæ¯æ¬¡é‡å¯åéƒ½éœ€è¦æ‰‹åŠ¨é‡æ–°è®¾ç½®ï¼Œæ‰€ä»¥è¿™é‡Œå†å®ç°å¼€æœºè‡ªåŠ¨æŒ‚è½½ï¼Œå…¶å®å°±æ˜¯å¾€é…ç½®æ–‡ä»¶<code>/etc/fstab</code> é‡Œå†™é…ç½®ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š</p></li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">åˆ†åŒº/è®¾å¤‡å     è¦æŒ‚è½½çš„ç›®å½•     æ–‡ä»¶ç³»ç»Ÿç±»å‹     defaults        0       0<br>/dev/sda3   /opt/bin   ext4   defaults 0   0<br></code></pre></td></tr></table></figure><h1 id="æ€»ç»“"><a class="markdownIt-Anchor" href="#æ€»ç»“"></a> æ€»ç»“</h1><p>è‡³æ­¤ï¼ŒæŠ˜è…¾äº†æˆ‘å¿«ä¸€æ˜ŸæœŸï¼Œæ€»è®¡è€—æ—¶çº¦10å°æ—¶çš„è°ƒè¯•ç¯å¢ƒå®‰è£…ä¹‹æ—…ç»ˆäºè½ä¸‹äº†å¸·å¹•ã€‚æ­¤æ—¶æ­¤åˆ»æˆ‘çš„å¿ƒæƒ…æ˜¯å¤æ‚çš„ï¼Œä¸€æ–¹é¢æ˜¯ä¸ºè‡ªå·±çš„æ— èƒ½è€Œæµæ³ªï¼ˆä¸€ä¸ªç®€å•çš„è°ƒè¯•ç¯å¢ƒæ­å»ºå¼„äº†è¿™ä¹ˆä¹…ï¼‰ï¼Œå…œå…œè½¬è½¬è¿™ä¹ˆä¹…ï¼Œä¹Ÿè¿˜åªæ˜¯å®Œæˆäº†è°ƒè¯•å‰çš„å‡†å¤‡å·¥ä½œï¼ŒæŸ¥bugè¿˜åœ¨åå¤´å‘¢ã€‚å¦ä¸€æ–¹é¢ä¹Ÿæ˜¯ä¸€ç§é‡Šç„¶ï¼Œè‡³å°‘æˆ‘æ²¡æœ‰åŠé€”è€ŒåºŸï¼Œè™½ç„¶è¿‡ç¨‹åå·ï¼Œä½†æˆ‘ç»ˆç©¶è¿˜æ˜¯æ¥åˆ°äº†ç»ˆç‚¹ã€‚æˆ–è®¸ä¸€å¼€å§‹æˆ‘å¯ä»¥å°è¯•ç”¨printè¾“å‡ºæ¥è°ƒè¯•ï¼Œä½†æ˜¯æˆ‘çŸ¥é“è¿™ç§è°ƒè¯•æ–¹å¼ç»ˆç©¶èµ°ä¸è¿œï¼Œå› ä¸ºçœŸæ­£å‡ºé—®é¢˜çš„æ—¶å€™ï¼Œæ˜¯æ²¡æœ‰åŠæ³•é€šè¿‡å®æ—¶è¾“å‡ºæ¥è¿›è¡Œè°ƒè¯•çš„ã€‚æ‰€ä»¥è¿™æ¬¡ä½¿ç”¨gdbæ¥è°ƒè¯•å†…æ ¸ï¼Œæ˜¯ä¸€ä¸ªåƒè½½éš¾é€¢çš„æœºä¼šï¼Œæˆ‘ä¸è¯¥é”™è¿‡ã€‚</p><hr /><p><em>ç¼“æ…¢çš„ã€æŒä¹…çš„ã€æœ‰çºªå¾‹çš„åŠªåŠ›ï¼Œæœ€ç»ˆä¼šå¯¼è‡´ä»¤äººéš¾ä»¥ç½®ä¿¡çš„ç»“æœã€‚</em></p><p><em>æ¯å½“æˆ‘æ— æ³•å¿å—æ—¥å¸¸ç”Ÿæ´»æ—¶ï¼Œæˆ‘å°±æé†’è‡ªå·±ï¼Œæ²¡æœ‰ä»€ä¹ˆæ¯”æ¯å¤©åšæŒåšä¸‹å»æ›´é‡è¦äº†ã€‚è™½ç„¶æˆ‘å¾ˆéš¾çœ‹åˆ°æœªæ¥ä¼šæ€æ ·ï¼Œä½†æˆ‘çŸ¥é“æŒä¹…æ€§å…·æœ‰å¼ºå¤§çš„å¨åŠ›ï¼Œå°±åƒä¸€å¥å¤è€æ ¼è¨€è¯´çš„â€œç»§ç»­å»åšâ€ï¼ˆkeep doingï¼‰ã€‚</em></p><p>â€”â€”<a href="https://www.collaborativefund.com/blog/lessons-from-the-sea/">ã€Šå¤§æµ·æ•™ç»™æˆ‘çš„ã€‹</a></p><section class="footnotes"><h1>å¤‡æ³¨/å‚è€ƒ</h1><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a href="https://blog.csdn.net/qq_35990574/article/details/110006307">riscv-gnu-toolchainå·¥å…·é“¾ä¸‹è½½å®‰è£…_roockietçš„åšå®¢</a><a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a href="https://blog.csdn.net/weiqi7777/article/details/88045720">riscvå„ç§ç‰ˆæœ¬gccå·¥å…·é“¾ç¼–è¯‘ä¸å®‰è£…_weiqi7777çš„åšå®¢-CSDNåšå®¢_riscvç¼–è¯‘å™¨</a><a href="#fnref:2" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:3" class="footnote-text"><span><a href="https://www.jianshu.com/p/6c7abd4adc9b">Ubuntuè™šæ‹Ÿæœºå…±äº«ä¸»æœºVPNï¼ˆé€‚ç”¨äºNATæˆ–æ¡¥æ¥ï¼‰</a><a href="#fnref:3" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:4" class="footnote-text"><span><a href="https://www.bilibili.com/video/BV1ji4y1772Z?from=search&amp;seid=5722489325382065130&amp;spm_id_from=333.337.0.0">VMwareç½‘ç»œé€‰æ‹©å’Œubuntu 20_04 ç½‘ç»œé…ç½®æ•™ç¨‹</a><a href="#fnref:4" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:5" class="footnote-text"><span><a href="https://www.bilibili.com/video/BV1KY411t75D?from=search&amp;seid=9126546184192701202&amp;spm_id_from=333.337.0.0">VPNæ¦‚å¿µï¼ŒæŠ€æœ¯åŸç†å’Œè¯¯åŒº_å“”å“©å“”å“©_bilibili</a><a href="#fnref:5" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºçŸ¥è¯†</category>
      
      <category>ç¯å¢ƒæ­å»ºç³»åˆ—</category>
      
      <category>æ“ä½œç³»ç»Ÿ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>xv6-riscv</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>GitæŒ‡å—</title>
    <link href="/2022/03/12/2022-03/2022-03-12%20Git%E6%8C%87%E5%8D%97/"/>
    <url>/2022/03/12/2022-03/2022-03-12%20Git%E6%8C%87%E5%8D%97/</url>
    
    <content type="html"><![CDATA[<h1 id="åŸºæœ¬æ¦‚å¿µ"><a class="markdownIt-Anchor" href="#åŸºæœ¬æ¦‚å¿µ"></a> åŸºæœ¬æ¦‚å¿µ</h1><h2 id="ç®€å•ä»‹ç»"><a class="markdownIt-Anchor" href="#ç®€å•ä»‹ç»"></a> ç®€å•ä»‹ç»</h2><p>Gitæ˜¯ç›®å‰ä¸–ç•Œä¸Šæœ€å…ˆè¿›çš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼ˆæ²¡æœ‰ä¹‹ä¸€ï¼‰ã€‚Gitæ˜¯ç”±Linuxå†…æ ¸ç¤¾åŒºä»¥Linusä¸ºä¸»åŸºäºBitKeeperå¼€å‘çš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œå…·æœ‰å¿«é€Ÿã€ç®€å•ã€åˆ†å¸ƒå¼ã€èƒ½å¤Ÿé«˜æ•ˆç®¡ç†å¤§è§„æ¨¡é¡¹ç›®çš„ç‰¹ç‚¹ã€‚</p><p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202203121131335.cn&amp;app=2002&amp;size=f9999,10000&amp;q=a80&amp;n=0&amp;g=0n&amp;fmt=auto" alt="" /></p><h2 id="æœ¬åœ°ä»“åº“ç»“æ„"><a class="markdownIt-Anchor" href="#æœ¬åœ°ä»“åº“ç»“æ„"></a> æœ¬åœ°ä»“åº“ç»“æ„</h2><p>Gitæœ¬åœ°ä»“åº“é€»è¾‘ç»“æ„å¯ä»¥åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼š</p><ul><li>å·¥ä½œåŒº Working Directoryï¼šå°±æ˜¯å­˜æ”¾é¡¹ç›®æ–‡ä»¶ã€ä»£ç çš„åœ°æ–¹ï¼Œå¯¹äºæ·»åŠ ã€ä¿®æ”¹ã€åˆ é™¤æ–‡ä»¶çš„æ“ä½œï¼Œéƒ½å‘ç”Ÿåœ¨å·¥ä½œåŒºä¸­ï¼›</li><li>æš‚å­˜åŒº Staging Areaã€Indexï¼šç”¨äºä¸´æ—¶å­˜æ”¾ä½ çš„æ”¹åŠ¨ï¼Œå°†å·¥ä½œåŒºä¸­çš„æ“ä½œè¿›è¡Œä¿å­˜ï¼›</li><li>ç‰ˆæœ¬åº“ Repositoryï¼šæŠŠæ‰€æœ‰çš„commitç»„ç»‡èµ·æ¥ï¼Œä¹Ÿå°±æ˜¯ä¿å­˜æ‰€æœ‰æäº¤çš„æ•°æ®ï¼Œè®°å½•å†å²ç‰ˆæœ¬ã€‚</li></ul><center><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202203121132711.png" alt="" style="zoom:50%;" /></center>ä¸Šå›¾ä¹Ÿæç»˜äº†åŸºæœ¬çš„å·¥ä½œæµç¨‹ï¼Œå½“ä½ åœ¨å·¥ä½œåŒºå®Œæˆé˜¶æ®µæ€§æ“ä½œåï¼Œå°±å¯ä»¥æ‰§è¡Œ`add`å‘½ä»¤ï¼Œå°†ä¿®æ”¹ä¿å­˜åˆ°æš‚å­˜åŒºã€‚å½“ä½ è§‰å¾—å®Œæˆè¿™æ¬¡å¼€å‘åï¼Œå°±å¯ä»¥æ‰§è¡Œ`commit`å‘½ä»¤ï¼Œæäº¤åˆ°ç‰ˆæœ¬åº“ã€‚æ­¤å¤–`.git`è¿™ä¸ªç›®å½•æ˜¯åœ¨gitè‡ªå¸¦çš„ä¸€ä¸ªéšè—é¡¹ç›®ï¼Œåœ¨åˆå§‹åŒ–çš„æ—¶å€™ä¼šè‡ªåŠ¨ç”Ÿæˆï¼Œé‡Œé¢çš„å„ä¸ªç›®å½•å°±è®°å½•ç€å®ç°ç‰ˆæœ¬æ§åˆ¶æ‰€éœ€çš„æ•°æ®ï¼Œä¾‹å¦‚å¯¹è±¡åº“ï¼Œå¯¹è±¡æ¦‚å¿µå°†åœ¨ç¨åä»‹ç»ã€‚<p>ç½‘ä¸Šä¹Ÿæœ‰ä¸å°‘å…³äºgitçš„æ–‡ç« ï¼Œä¸‹å›¾æ¥è‡ªäºè¿™ç¯‡æ–‡ç« <a href="https://www.cnblogs.com/qdhxhz/p/9757390.html">Gitï¼šå·¥ä½œåŒºã€æš‚å­˜åŒºã€ç‰ˆæœ¬åº“ã€è¿œç¨‹ä»“åº“</a><sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="ã€Gitã€‘(1)â€”å·¥ä½œåŒºã€æš‚å­˜åŒºã€ç‰ˆæœ¬åº“ã€è¿œç¨‹ä»“åº“ ">[1]</span></a></sup>ï¼Œæ›´ä¸ºè¯¦ç»†åœ°å±•ç¤ºäº†gitæ•´ä¸ªæµç¨‹ã€‚å…¶ä¸­ Remote è¡¨ç¤ºæ˜¯è¿œç¨‹ä»“åº“ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯ä»£ç æ‰˜ç®¡çš„æœåŠ¡å™¨/è¿œç¨‹å¤‡ä»½ï¼Œåƒæˆ‘ä»¬æœ€ä¸ºç†ŸçŸ¥çš„å°±æ˜¯Githubã€‚</p><p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202203121139228.png" alt="gitåŸºæœ¬æµç¨‹" /></p><h2 id="gitä¸­çš„å¯¹è±¡"><a class="markdownIt-Anchor" href="#gitä¸­çš„å¯¹è±¡"></a> Gitä¸­çš„å¯¹è±¡</h2><p>Gitä¸­æœ‰ä¸‰ç§åŸºæœ¬å¯¹è±¡ï¼š</p><ol><li>blobï¼šæ–‡ä»¶ï¼Œä¿å­˜æ–‡ä»¶çš„æ•°æ®å†…å®¹</li><li>treeï¼šç›®å½•æ ‘ï¼Œä¿å­˜ç›®å½•ç»“æ„å’Œæ–‡ä»¶åç­‰ä¿¡æ¯</li><li>commitï¼šæäº¤ï¼Œä¿å­˜æäº¤å†…å®¹ã€ä½œè€…ã€æäº¤è€…ã€æäº¤æ—¶é—´ç­‰ä¿¡æ¯</li></ol><blockquote><p>æ³¨æ„ï¼šè¿™é‡Œè¯´çš„æ˜¯åŸºæœ¬å¯¹è±¡ï¼Œè¿˜æœ‰è¯´æ³•æ˜¯tagä¹Ÿæ˜¯ä¸€ç§å¯¹è±¡ï¼Œç”¨æ¥æ ‡è®°æŸä¸€æ¬¡æäº¤(commit) ï¼Œç±»ä¼¼äºé‡Œç¨‹ç¢‘çš„ä¸€ç§è®°å½•</p></blockquote><p>è€Œå¯¹è±¡æœ‰å¯¹è±¡åï¼Œæ˜¯40ä¸ªå­—ç¬¦ï¼ˆ20å­—èŠ‚çš„16è¿›åˆ¶è¡¨ç¤ºï¼‰çš„å­—ç¬¦ä¸²ï¼Œç”±SHA-1è®¡ç®—æ–‡ä»¶å†…å®¹çš„å“ˆå¸Œå€¼ï¼Œå½“æ²¡æœ‰å†²çªæ­§ä¹‰çš„æ—¶å€™ï¼Œå¯ä»¥å°±ç”¨å‰å‡ ä½å­—ç¬¦è¡¨ç¤ºï¼ˆä½†ä¸å¯ä»¥å°‘äº4ä½ï¼‰ã€‚</p><p>åœ¨gitä¸­ï¼Œå¯¹è±¡ä¹‹é—´çš„å…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºï¼ŒcommitåŒ…å«ä¸€ä¸ªtreeå¯¹è±¡ï¼ˆä¸»ç›®å½•ï¼‰ï¼Œè€Œä¸€ä¸ªtreeå¯¹è±¡å¯ä»¥åŒ…å«å¤šä¸ªblobï¼ˆæ–‡ä»¶ï¼‰å’Œå¤šä¸ªtreeï¼ˆå­ç›®å½•ï¼‰ã€‚</p><p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202203121202585.png" alt="blob,tree,commitä¹‹é—´çš„å…³ç³»" /></p><p>å¯ä»¥ç”¨<code>get cat-file -t [å¯¹è±¡å]</code>æŸ¥çœ‹æŸä¸ªå¯¹è±¡çš„ç±»å‹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè¯¥å¯¹è±¡æ˜¯ä¸€ä¸ªtreeï¼š</p><p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202203121719515.png" alt="æŸ¥çœ‹å¯¹è±¡ç±»å‹" /></p><p>å¯ä»¥ç”¨<code>get cat-file -p [å¯¹è±¡å]</code>æŸ¥çœ‹æŸä¸ªå¯¹è±¡çš„å†…å®¹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¯ä»¥çœ‹åˆ°è¯¥treeå¯¹è±¡ä¸‹æœ‰ä¸€ä¸ªblobæ–‡ä»¶ï¼Œå’Œä¸¤ä¸ªtreeå¯¹è±¡ï¼ˆä¸¤ä¸ªå­ç›®å½•ï¼‰ï¼š</p><p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202203121719712.png" alt="æŸ¥çœ‹å¯¹è±¡å†…å®¹" /></p><h1 id="å•åˆ†æ”¯ç®¡ç†"><a class="markdownIt-Anchor" href="#å•åˆ†æ”¯ç®¡ç†"></a> å•åˆ†æ”¯ç®¡ç†</h1><h2 id="åˆå§‹åŒ–å’Œæäº¤"><a class="markdownIt-Anchor" href="#åˆå§‹åŒ–å’Œæäº¤"></a> åˆå§‹åŒ–å’Œæäº¤</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> å°†è‡ªåŠ¨åœ°åœ¨å½“å‰ç›®å½•å®Œæˆç‰ˆæœ¬åº“çš„åˆå§‹åŒ–ï¼Œå³åœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ª.gitçš„éšè—ç›®å½•</span><br>git init<br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash"> å°†è‡ªåŠ¨åœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªæŒ‡å®šé¡¹ç›®åçš„ç›®å½•ï¼Œå¹¶åœ¨è¯¥ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º.gitçš„éšè—ç›®å½•</span><br>git init &lt;é¡¹ç›®å&gt;<br></code></pre></td></tr></table></figure><p>ä¸€ä¸ªæ–°çš„<code>.git</code>ç›®å½•ä¸‹é€šå¸¸ä¼šåŒ…æ‹¬7ä¸ªæ–‡ä»¶/ç›®å½•ï¼š</p><ul><li>hooksï¼šåŒ…å«å®¢æˆ·ç«¯æˆ–æœåŠ¡ç«¯çš„é’©å­è„šæœ¬ï¼ˆhooks scripts)</li><li>infoï¼šé»˜è®¤åŒ…å«ä¸€ä¸ªå…¨å±€æ€§å¿½ç•¥æ–‡ä»¶</li><li>objectsï¼šå­˜å‚¨æ‰€æœ‰çš„å¯¹è±¡</li><li>refsï¼šå­˜å‚¨æ‰€æœ‰åˆ†æ”¯å’Œtagï¼ˆæŒ‡å‘commitå¯¹è±¡çš„æŒ‡é’ˆï¼‰</li><li>configï¼šç‰ˆæœ¬åº“çº§åˆ«çš„é…ç½®æ–‡ä»¶</li><li>descriptionï¼šä»…ä¾›GitWebç¨‹åºä½¿ç”¨</li><li>HEADï¼šå½“å‰æŒ‡é’ˆï¼Œç”¨äºå½“å‰æ“ä½œ</li></ul><p>è€Œå½“è¿›è¡Œaddæ“ä½œä¹‹åå°±ä¼šå‡ºç°ä¸€ä¸ªindexæ–‡ä»¶</p><ul><li>indexï¼šä¿å­˜æš‚å­˜åŒºçš„ä¿¡æ¯</li></ul><hr /><p>æœ€ä¸ºå¸¸ç”¨çš„å°±æ˜¯<code>add</code>å’Œ<code>commit</code>çš„å‘½ä»¤äº†ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> å°†pathæ‰€æŒ‡å®šçš„ç›®å½•æˆ–æ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒº</span><br>git add &lt;path&gt;<br><span class="hljs-meta">#</span><span class="bash"> å°†æš‚å­˜åŒºä¸­&lt;path&gt;æ‰€æŒ‡å®šçš„ç›®å½•æˆ–æ–‡ä»¶æ·»åŠ åˆ°ç‰ˆæœ¬åº“ï¼ŒåŒæ—¶äº§ç”Ÿä¸€ä¸ªæ–°çš„commitï¼Œpathé»˜è®¤ä¸ºå½“å‰ç›®å½•</span><br>git commit [&lt;path&gt;] -m &quot;&lt;æäº¤è¯´æ˜&gt;&quot;<br></code></pre></td></tr></table></figure><p>ä½†å…¶å®è¿™ä¸¤ä¸ªå‘½ä»¤ï¼Œæ˜¯ç”±è®¸å¤šä¸ªæ›´åº•å±‚çš„å‘½ä»¤ç»„æˆçš„ï¼š</p><ul><li><code>git update-index --add --cacheinfo</code> å‘½ä»¤å°†å¯¹è±¡åº“ä¸­çš„blobæ·»åŠ åˆ°æš‚å­˜åŒº</li><li><code>git update-index --add</code> å°†å·¥ä½œåŒºä¸­çš„æ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒºï¼ˆåŒæ—¶åœ¨å¯¹è±¡åº“ä¸­ç”Ÿæˆblobå¯¹è±¡ï¼‰</li><li><code>git write-tree</code> å‘½ä»¤æ ¹æ®å½“å‰æš‚å­˜åŒºå†…å®¹åœ¨å¯¹è±¡åº“ä¸­æ–°å»ºä¸€ä¸ªtreeå¯¹è±¡</li><li><code>git read-tree</code> å‘½ä»¤å°†treeå¯¹è±¡è¯»åˆ°æš‚å­˜åŒº</li><li><code>git commit-tree</code> å‘½ä»¤å¯ä»¥å°†æŒ‡å®šçš„treeå¯¹è±¡â€å°è£…â€œæˆcommitå¯¹è±¡ä¿å­˜åœ¨ç‰ˆæœ¬åº“ä¸­</li></ul><p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202203121911543.png" alt="addå’Œcommitçš„å‘½ä»¤åˆ†è§£" /></p><h2 id="æäº¤å†å²å’Œç®¡ç†"><a class="markdownIt-Anchor" href="#æäº¤å†å²å’Œç®¡ç†"></a> æäº¤å†å²å’Œç®¡ç†</h2><p>è¿™é‡Œå°±åˆ—ä¸¾ä¸€äº›æ¯”è¾ƒå…³é”®å¸¸ç”¨çš„å‘½ä»¤å§ï¼š</p><ul><li><code>git diff</code> ï¼šå¯ä»¥æ˜¾ç¤ºå·¥ä½œåŒºã€æš‚å­˜åŒºã€ç‰ˆæœ¬åº“ä¸­æ–‡ä»¶å…·ä½“çš„å·®åˆ«</li><li><code>git log [-n]</code> ï¼šæ˜¾ç¤ºæœ€è¿‘æäº¤çš„commitè®°å½•ï¼›<code>-n</code> å‚æ•°è¡¨ç¤ºæ˜¾ç¤ºæœ€è¿‘næ¡è®°å½•ï¼›è¿˜å¯ä»¥é€šè¿‡æ·»åŠ  <code>--pretty=raw</code> å‚æ•°æ¥æ˜¾ç¤ºcommitå¯¹è±¡çš„å†…å®¹</li><li><code>git status</code>ï¼šæ˜¾ç¤ºå·¥ä½œåŒºã€æš‚å­˜åŒºã€ç‰ˆæœ¬åº“ä¸­æ–‡ä»¶å¢åˆ æ”¹çš„æƒ…å†µ</li><li><code>git stash [list | [pop|apply] [--index] [stashå] ]</code>ï¼šå°†å½“å‰çš„ä¿®æ”¹è¿›åº¦æš‚æ—¶ä¿å­˜èµ·æ¥<ul><li>æ²¡æœ‰å‚æ•°å°±æ˜¯ç°åœºä¿å­˜</li><li>å‚æ•°ä¸ºlistè¡¨ç¤ºæŸ¥çœ‹ä¿å­˜ç°åœºçš„æ ˆçš„å†…å®¹</li><li>å‚æ•°ä¸ºpopæˆ–applyè¡¨ç¤ºå°†æ ˆä¸­çš„å†…å®¹æ¢å¤ï¼ŒåŒºåˆ«åœ¨äºpopåæ ˆçš„è®°å½•ä¼šè¢«åˆ é™¤è€Œapplyä¸ä¼š</li></ul></li><li><code>git blame &lt;æ–‡ä»¶å&gt;</code> ï¼šå¯ä»¥æŒ‰è¡ŒæŸ¥çœ‹æŒ‡å®šæ–‡ä»¶çš„æœ€åä¸€æ¬¡ä¿®æ”¹çš„commitï¼Œä¿®æ”¹äººï¼Œæ—¶é—´</li></ul><h1 id="å¤šåˆ†æ”¯ç®¡ç†"><a class="markdownIt-Anchor" href="#å¤šåˆ†æ”¯ç®¡ç†"></a> å¤šåˆ†æ”¯ç®¡ç†</h1><p><strong>æ¸¸æ ‡ï¼ˆheadï¼‰</strong>ï¼šå¯ä»¥çœ‹æˆæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘æŸä¸ªç‰¹å®šçš„commitå¯¹è±¡æˆ–è€…åˆ†æ”¯ï¼Œå³å½“å‰æ“ä½œçš„é»˜è®¤å¯¹è±¡ï¼Œå¦‚git logï¼Œgit statusç­‰å‘½ä»¤ä¸­ï¼Œç‰ˆæœ¬åº“çš„å½“å‰æ“ä½œcommitå°±æ˜¯headæ‰€æŒ‡å‘çš„commitå¯¹è±¡ã€‚</p><p><strong>åˆ†æ”¯ï¼ˆbranchï¼‰</strong>ï¼šå¯ä»¥çœ‹æˆæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘äº†ä¸€ä¸ªæäº¤ï¼ˆcommitï¼‰ï¼Œåœ¨è¯¥åˆ†æ”¯ä¸Šçš„æ‰€æœ‰æäº¤éƒ½ä¼šå¯¹è¯¥åˆ†æ”¯è¿›è¡Œæ›´æ–°ï¼Œä¿è¯è¯¥åˆ†æ”¯ä¸€ç›´æŒ‡å‘æœ€æ–°çš„commit</p><blockquote><p>æ³¨æ„ï¼šheadå¯ä»¥æŒ‡å‘åˆ†æ”¯æˆ–è€…commitï¼Œä½†æ˜¯åˆ†æ”¯æ€»æ˜¯æŒ‡å‘commit</p></blockquote><p><strong>ç»å…¸åœºæ™¯</strong>ï¼šåŠŸèƒ½ç‰¹æ€§çš„å¼€å‘â€”â€”åœ¨æ·»åŠ ä¸€ä¸ªæ–°åŠŸèƒ½æ—¶å¯ä»¥é€šè¿‡å†æ–°çš„åˆ†æ”¯ä¸Šè¿›è¡Œå¼€å‘ï¼Œä»è€Œä½¿å¾—åŠŸèƒ½ç‰¹æ€§çš„å¼€å‘ä¸ä¼šå½±å“åˆ°æ­£å¸¸çš„ç‰ˆæœ¬è¿­ä»£ï¼Œåœ¨å¼€å‘å®Œæˆåå†é€šè¿‡åˆ†æ”¯çš„åˆå¹¶å°†è¯¥åŠŸèƒ½æ·»åŠ åˆ°æœ€æ–°çš„ç‰ˆæœ¬ä¸Šã€‚</p><ul><li><code>git branch &lt;åˆ†æ”¯å&gt;</code>ï¼šè¯¥å‘½ä»¤å¯ä»¥åœ¨å½“å‰headæŒ‡å‘çš„commitä½ç½®åˆ›å»ºä¸€ä¸ªæŒ‡å®šåˆ†æ”¯åçš„branchåˆ†æ”¯ã€‚masterå°±æ˜¯ä¸€ä¸ªbranch</li><li><code>git checkout [-b] &lt; commit &gt;</code>ï¼šè¯¥å‘½ä»¤çš„ä¸»è¦åŠŸèƒ½ä¸ºæ”¹å˜headæ¸¸æ ‡ï¼Œå°†å…¶æŒ‡å‘commit<ul><li>å› ä¸ºbranchå’Œtagæœ¬è´¨ä¸Šéƒ½æ˜¯ä¸€ä¸ªcommitå¯¹è±¡ï¼Œæ‰€ä»¥è¿™é‡Œç”¨äº†&lt; commit &gt;å‚æ•°ï¼Œå…¶å®ä¹Ÿå¯ä»¥å†™æˆåˆ†æ”¯å</li><li><code>-b</code> å‚æ•°æ˜¯åˆ›å»ºå¹¶åˆ‡æ¢</li></ul></li></ul><p>æœ‰æ—¶å€™åœ¨æ“ä½œåˆ‡æ¢åˆ†æ”¯çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šé‡åˆ°ä¸€ä¸ªå¾ˆç»å…¸çš„é—®é¢˜ï¼š<strong>åˆ†ç¦»å¤´æŒ‡é’ˆçŠ¶æ€(detached HEAD)</strong>ã€‚è¯¥çŠ¶æ€è¡¨æ˜å½“å‰headæ²¡æœ‰æŒ‡å‘ä»»ä½•è®¤çŸ¥ï¼Œè€Œæ˜¯æŒ‡å‘äº†ä¸€ä¸ªç‹¬ç«‹çš„commitï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202203121937329.png" alt="åˆ†ç¦»å¤´æŒ‡é’ˆçŠ¶æ€" /></p><p>æƒ³è¦æ¢å¤ä¹Ÿå¾ˆç®€å•ï¼Œä½¿ç”¨checkoutå‘½ä»¤åˆ‡æ¢åˆ°ä¸€ä¸ªåˆ†æ”¯ä¸Šå³å¯ã€‚</p><hr /><p>åˆ†æ”¯ä¼šéšç€commitçš„æäº¤è€Œæ›´æ–°ï¼Œä½†æ˜¯æœ‰æ—¶å€™éœ€è¦è®°å½•ä¸€ä¸ªç¨³å®šçš„ç‰ˆæœ¬ï¼Œå¦‚v1.1ï¼Œv1.2ï¼Œæ­¤æ—¶å°±éœ€è¦å¼•å…¥tagã€‚</p><p>tagå¯ä»¥è®°å½•æŸä¸ªç‰¹å®šçš„commitï¼Œå¹¶ä½¿å…¶ä¸éšç€commitçš„æäº¤è€Œæ”¹å˜å…¶æŒ‡å‘çš„commitä½ç½®ã€‚tagå¯ä»¥çœ‹æˆæ˜¯ä¸€ä¸ªæŒ‡å‘commitçš„å¸¸é‡æŒ‡é’ˆï¼Œæ‰€æœ‰å¯¹commitçš„æ“ä½œéƒ½å¯ä»¥å¯¹tagä½¿ç”¨ã€‚</p><ul><li><code>git tag &lt; tagå &gt;</code>ï¼šå¯ä»¥åœ¨å½“å‰headæŒ‡å‘çš„commitä½ç½®å»ºç«‹ä¸€ä¸ªæŒ‡å®štagåçš„tag</li></ul><hr /><p>å½“å‰éœ€è¦å¯¹åˆ†æ”¯è¿›è¡Œä¿®æ”¹/é‡ç½®çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ï¼Œå°†å½“å‰åˆ†æ”¯æŒ‡å‘æŸcommit</p><ul><li><code>git reset [--soft | --mixed | --head] &lt; commit &gt;</code><ul><li>ä¸­é—´å‚æ•°é»˜è®¤ä¸º --mixed</li><li><code>--soft</code>ï¼šä¼šå°†å½“å‰æŒ‡å‘çš„branchæŒ‡å‘æŒ‡å®šçš„commit</li><li><code>--mixed</code>ï¼ˆæˆ–æ— å‚æ•°ï¼‰ï¼šé™¤äº†æ”¹å˜branchçš„ä½ç½®å¤–ï¼Œè¿˜ä¼šä½¿ç”¨è¯¥commitçš„å†…å®¹æ›´æ–°<strong>æš‚å­˜åŒº</strong>çš„å†…å®¹</li><li><code>--hard</code> ï¼šé™¤äº†æ”¹å˜branchçš„ä½ä¹‹å¤–ï¼Œè¿˜ä¼šç”¨è¯¥commitçš„å†…å®¹æ›´æ–°<strong>æš‚å­˜åŒºå’Œå·¥ä½œåŒº</strong>çš„å†…å®¹ï¼ˆ<strong>å±é™©æ“ä½œï¼è´¸ç„¶ä½¿ç”¨å®¹æ˜“ä¸¢å¤±å½“å‰å·¥ä½œåŒºçš„ä¿®æ”¹</strong>ï¼‰</li></ul></li></ul><p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202203121946975.png" alt="åˆ†æ”¯ä¿®æ”¹" /></p><hr /><p>è¿˜æœ‰å‡ ä¸ªåˆ†æ”¯ç›¸å…³çš„é‡è¦å‘½ä»¤ï¼š</p><ul><li><p><code>git merge &lt; commit &gt;</code>ï¼šå°†å½“å‰headæ‰€æŒ‡å‘çš„åˆ†æ”¯å’ŒæŒ‡å®šcommitåˆ†æ”¯è¿›è¡Œåˆå¹¶ï¼Œæœ€åä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„commitï¼Œè¯¥commitçš„parentæŒ‡é’ˆåŒæ—¶æŒ‡å‘ä¸¤ä¸ªcommit</p></li><li><p><code>git rebase &lt; commit &gt;</code>ï¼š å˜åŸºæ“ä½œï¼Œè¯¥å‘½ä»¤å°†æäº¤åˆ°æŸä¸€åˆ†æ”¯ä¸Šçš„æ‰€æœ‰ä¿®æ”¹éƒ½ç§»è‡³å¦ä¸€åˆ†æ”¯ä¸Š</p></li><li><p><code>git rebase -i HEAD~3</code> ï¼š -i é€‰é¡¹è¿›å…¥äº¤äº’å¼ç•Œé¢ï¼Œå¯ä»¥å¯¹å‰ä¸‰ä¸ªcommitè¿›è¡Œå‹ç¼©</p></li></ul><p>å…³äºmergeå’Œrebaseçš„ç›¸å…³æ¦‚å¿µå¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« <a href="https://www.imooc.com/article/316077">git rebase å’Œ merge çš„åŒºåˆ«</a><sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><span class="hint--top hint--rounded" aria-label="git rebase å’Œ merge çš„åŒºåˆ«">[2]</span></a></sup>ï¼Œè¿™é‡Œå°±ä¸å†é‡å¤é€ è½®å­äº†ï¼Œä¸‹å›¾å°±æ˜¯ç®€å•ç¤ºæ„ï¼Œä¸Šé¢æ˜¯mergeåçš„åˆ†æ”¯å˜åŒ–ï¼Œä¸‹é¢æ˜¯rebaseåçš„åˆ†æ”¯å˜åŒ–ã€‚</p><p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202203122020985.png" alt="mergeï¼ˆä¸Šï¼‰rebaseï¼ˆä¸‹ï¼‰" /></p><h1 id="å¤šäººåä½œ"><a class="markdownIt-Anchor" href="#å¤šäººåä½œ"></a> å¤šäººåä½œ</h1><p>å¤šäººåä½œæ—¶å°±ä¼šæ¶‰åŠè¿œç¨‹ä»“åº“çš„æ¦‚å¿µï¼Œç®€å•ç†è§£å°±æ˜¯è¿œç¨‹æœåŠ¡å™¨ä¸Šçš„gitç‰ˆæœ¬åº“ã€‚ç›®å‰å¸¸è§çš„åŸºäºgitçš„ä»£ç æ‰˜ç®¡å¹³å°æœ‰Githubã€Giteeã€Gitlabç­‰ï¼Œå¯ä»¥ç®€å•çš„æŠŠä»£ç æ‰˜ç®¡å¹³å°çœ‹æˆæ›´æ˜¯ä¸€ä¸ªè¿œç¨‹çš„gitä»“åº“ï¼Œé€šè¿‡pushã€fetchç­‰å‘½ä»¤æ¥è¿›è¡Œæ“ä½œã€‚</p><p>è¿™é‡Œå°±ç®€å•ç½—åˆ—ç›¸å…³å‘½ä»¤ï¼š</p><ul><li><code>git clone</code> ï¼šåœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºæŒ‡å®šçš„gitä»“åº“çš„å…‹éš†</li><li><code>git push</code>ï¼šå°†å½“å‰æŒ‡å‘çš„åˆ†æ”¯æ¨é€è‡³è¿œç¨‹ç‰ˆæœ¬åº“</li><li><code>git fetch</code>ï¼šå°†è¿œç¨‹ç‰ˆæœ¬åº“ä¸­æœ¬åœ°æ²¡æœ‰çš„è®°å½•æ‹‰å–åˆ°æœ¬åœ°</li><li><code>git pull</code>ï¼šè¯¥å‘½ä»¤ç­‰äº<code>git fetch</code> åŠ  <code>git merge [fetchå‘½ä»¤è·å¾—çš„head]</code></li><li><code>git remote -v</code> ï¼šå¯ä»¥æŸ¥çœ‹å½“å‰ä½¿ç”¨pushã€fetchã€pullå‘½ä»¤åŒæ­¥çš„è¿œç¨‹ç‰ˆæœ¬åº“</li></ul><p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202203122027018.png" alt="å¤šäººåä½œå¼€å‘" /></p><p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202203122030217.png" alt="å¤§å‹é¡¹ç›®åä½œå¼€å‘" /></p><p>Githubä¸Šé¡¹ç›®çš„å¼€å‘æµç¨‹å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå¦‚æœæˆ‘ä»¬å¯¹åˆ«äººçš„é¡¹ç›®æ„Ÿå…´è¶£ï¼Œå¯ä»¥é€šè¿‡forkæ“ä½œï¼Œå°†ä»–äººçš„é¡¹ç›®ä»“åº“å¤åˆ¶ä¸€ä¸ªè‡ªå·±çš„é¡¹ç›®ä»“åº“ï¼Œç„¶åé€šè¿‡fetchã€pushå¯¹ä¸ªäººä»“åº“è¿›è¡Œæ“ä½œã€‚è€Œé€šè¿‡Pull requestsæ“ä½œï¼Œå¯ä»¥ç”³è¯·å°†è‡ªå·±ä¸ªäººä»“åº“ä¸Šçš„ç‰¹å®šåˆ†æ”¯ä¸ä»–äººä»“åº“ä¸Šçš„ç‰¹å®šåˆ†æ”¯è¿›è¡Œåˆå¹¶ã€‚</p><h1 id="æ€»ç»“"><a class="markdownIt-Anchor" href="#æ€»ç»“"></a> æ€»ç»“</h1><p>å¤§ä½“ä¸ŠæŠŠgité‡è¦çš„çŸ¥è¯†ç‚¹éƒ½ä»‹ç»äº†ä¸€ä¸‹ï¼Œä½†å®é™…ä¸Šä¸»è¦å¸¸ç”¨çš„å‘½ä»¤å¯èƒ½å°±é‚£ä¹ˆå‡ ä¸ªï¼Œaddã€commitã€pushã€pullã€mergeã€rebaseã€checkoutï¼ŒæŠŠè¿™å‡ ä¸ªå‘½ä»¤ç”¨ç†Ÿäº†åŸºæœ¬å¤Ÿç”¨äº†ï¼Œé‡åˆ°ä¸ä¼šçš„ç°æŸ¥å°±æ˜¯äº†ï¼ˆè¯ä¸èƒ½è¿™ä¹ˆè¯´å•Šï¼‰ã€‚ æ€»å½’æ˜¯äº†è§£å¾—è¶Šå¤šè¶Šå¥½ï¼Œåªä¸è¿‡ä¸Šé¢è¿™å‡ ä¸ªå‘½ä»¤ç®—æ˜¯åŸºæœ¬è¦æ±‚äº†ï¼Œä¸èƒ½ä¸ä¼šå•Š~</p><p>æœ€åå†æ¨èå‡ ä¸ªgitç›¸å…³çš„å­¦ä¹ å‚è€ƒç½‘ç«™ï¼š</p><ul><li><p><a href="https://git-scm.com/docs">Gitå®˜æ–¹æ–‡æ¡£</a></p></li><li><p><a href="https://www.progit.cn/">Pro Gitç¬¬äºŒç‰ˆï¼ˆä¸­æ–‡ç‰ˆï¼‰</a></p></li><li><p><a href="https://learngitbranching.js.org/?locale=zh_CN">åœ¨çº¿å­¦ä¹ gitï¼ˆæ²™ç›’ç¯å¢ƒï¼‰</a></p></li></ul><section class="footnotes"><h1>å¤‡æ³¨/å‚è€ƒ</h1><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a href="https://www.cnblogs.com/qdhxhz/p/9757390.html">ã€Gitã€‘(1)â€”å·¥ä½œåŒºã€æš‚å­˜åŒºã€ç‰ˆæœ¬åº“ã€è¿œç¨‹ä»“åº“ </a><a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a href="https://www.imooc.com/article/316077">git rebase å’Œ merge çš„åŒºåˆ«</a><a href="#fnref:2" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºçŸ¥è¯†</category>
      
      <category>ç¼–ç¨‹æŠ€å·§</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Git</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>C++è¸©å‘è®°å½•ä¹‹å­—é¢å€¼å¸¸é‡</title>
    <link href="/2022/03/04/2022-03/2022-03-04%20C++%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95%E4%B9%8B%E5%AD%97%E9%9D%A2%E5%80%BC%E5%B8%B8%E9%87%8F/"/>
    <url>/2022/03/04/2022-03/2022-03-04%20C++%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95%E4%B9%8B%E5%AD%97%E9%9D%A2%E5%80%BC%E5%B8%B8%E9%87%8F/</url>
    
    <content type="html"><![CDATA[<h1 id="å¼•è¨€"><a class="markdownIt-Anchor" href="#å¼•è¨€"></a> å¼•è¨€</h1><p class='note note-info'>   æœ€è¿‘åœ¨åˆ·é¢˜çš„æ—¶å€™æ— æ„é—´åˆè¸©äº†ä¸ªå‘ï¼Œå‘ç°è‡ªå·±çš„ä¿®è¡Œè¿˜è¿œè¿œä¸å¤Ÿï¼Œæ‰€ä»¥ä¹Ÿç‰¹æ­¤è®°å½•ä¸€ä¸‹ã€‚</p><p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202203051921295.jpg" alt="" /></p><p>ç›®æ ‡æ˜¯æƒ³è¦æ‹¼æ¥ä¸€ä¸ªå­—ç¬¦ä¸²å¸¸é‡å’Œä¸€ä¸ª<code>char</code>å‹å­—ç¬¦ï¼Œç±»ä¼¼ä¸‹é¢è¿™æ ·çš„ä»£ç  ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs C++">string input=<span class="hljs-string">&quot;abc&quot;</span>;<br>cout &lt;&lt; <span class="hljs-string">&quot;&quot;</span> + input[<span class="hljs-number">0</span>] &lt;&lt; endl;<br></code></pre></td></tr></table></figure><p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œä¸Šé¢ä¼šè¾“å‡ºä»€ä¹ˆå‘¢ï¼Ÿ</p><h1 id="æ’æŸ¥è¿‡ç¨‹"><a class="markdownIt-Anchor" href="#æ’æŸ¥è¿‡ç¨‹"></a> æ’æŸ¥è¿‡ç¨‹</h1><p>ä¹‹å‰æˆ‘æƒ³è±¡ä¸­æ˜¯æ‹¼æ¥åè¿”å›æ˜¯ä¸€ä¸ªstringå¯¹è±¡ï¼Œæœ€åè¾“å‡º<code>input</code>çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ï¼Œä½†æ˜¯è¾“å‡ºç»“æœå´è®©äººæ„å¤–ï¼Œä¸Šé¢è¾“å‡ºçš„ç»“æœä¸æ˜¯æœŸæœ›å€¼ <code>&quot;a&quot;</code>ï¼Œè€Œæ˜¯ä¸€ä¸²è«åå¥‡å¦™çš„å­—ç¬¦ï¼Œå¦‚ä¸‹å›¾ã€‚</p><p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202203050828438.png" alt="ä»¤äººä¸è§£çš„è¾“å‡º" /></p><p>è¿™è®©æˆ‘æœ‰äº›æ‘¸ä¸ç€å¤´è„‘ï¼Œè¿™ä¸€ä¸²æ˜¯æ€ä¹ˆæ¥çš„ï¼Œå½“å‰æ‰§è¡Œçš„ç¨‹åºæ ¹æœ¬æ²¡æœ‰å†™è¿‡è¿™æ ·çš„å­—ç¬¦ä¸²å‘€ï¼Ÿç­‰ç­‰ï¼Œè¿™äº›å­—ç¬¦çœ‹ç€æœ‰ç‚¹çœ¼ç†Ÿï¼Œç„¶åæˆ‘å°è¯•æœç´¢äº†ä¸€ä¸‹ï¼Œå‘ç°è¿™ä¸ªå­—ç¬¦ä¸²åœ¨æˆ‘ä¹‹å‰æ‰§è¡Œçš„å¦ä¸€ä¸ªæºæ–‡ä»¶é‡Œã€‚</p><p>è¿™æ˜¯æ€ä¹ˆå›äº‹å‘¢ï¼Ÿä¸ºä»€ä¹ˆå½“å‰è¿è¡Œçš„ç¨‹åºï¼Œå´æ¶‰åŠäº†å¦ä¸€ä¸ªæ ¹æœ¬å°±æ²¡æœ‰å¯åŠ¨ã€ä¸ç›¸å…³çš„æºæ–‡ä»¶å‘¢ï¼Ÿ</p><center><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202203051921292.jpg" alt="å®‰è¯¦" style="zoom: 50%;" /></center><p>ç„¶åçµå…‰ä¸€ç°ï¼Œæˆ‘ä»¿ä½›æƒ³èµ·ä»€ä¹ˆï¼Œè¯¥ä¸ä¼šæ˜¯è¿™ä¸ªå¸¸é‡å­—ç¬¦ä¸²æ ¹æœ¬æ²¡æœ‰è°ƒç”¨ string é‡è½½çš„åŠ æ³•è¿ç®—ç¬¦å§ï¼Ÿ</p><p>ç„¶åå†IDEé‡Œæµ‹è¯•äº†ä¸€ä¸‹ï¼Œå‘ç°æœç„¶ä¸Šé¢çš„è¿™ä¸ªåŠ æ³•æ˜¯æ— æ³•è·³è½¬åˆ°stringå¯¹åº”çš„é‡è½½è¿ç®—ç¬¦ä¸Šçš„ï¼Œä½†å¦‚æœç”¨stringæ„é€ å‡½æ•°å°è£…ä¸€ä¸‹ï¼Œå‘ç°å°±å¯ä»¥è¿›è¡Œè·³è½¬äº†ã€‚å…¶å®ç¼–è¯‘å™¨ä¹Ÿæç¤ºæˆ‘ï¼Œè¿™ç§åŠ æ³•æ“ä½œå¹¶æ²¡æœ‰çœŸæ­£çš„æŠŠ<code>input[0]</code>è¿™ä¸ªå­—ç¬¦æ’å…¥åˆ°å‰é¢çš„è¿™ä¸ªå­—ç¬¦ä¸²å­—é¢é‡é‡Œã€‚</p><p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202203051707911.png" alt="ç¼–è¯‘å™¨æç¤º" /></p><p>ç„¶åè”æƒ³ä¸€ä¸‹ç”¨<code>char*</code>è¡¨ç¤ºå­—ç¬¦ä¸²çš„æ–¹å¼ï¼Œä»¥åŠå­—é¢å€¼å¸¸é‡åœ¨å†…å­˜ä¸­çš„å­˜æ”¾ä½ç½®ï¼Œç­”æ¡ˆå°±æµ®å‡ºæ°´é¢äº†ã€‚</p><p>æˆ‘ä»¬çŸ¥é“å­—é¢å€¼å¸¸é‡å­˜å‚¨åœ¨å†…å­˜çš„å¸¸é‡åŒºï¼Œè€Œå¹³å¸¸æˆ‘ä»¬ä½¿ç”¨<code>char* s = &quot;abc&quot;;</code>è¿™æ ·çš„è¡¨è¾¾æ–¹å¼ï¼Œä¹Ÿè¯´æ˜å­—ç¬¦ä¸²å­—é¢é‡å…¶å®æŒ‡å‘çš„å°±æ˜¯å®ƒåœ¨å†…å­˜å¸¸é‡åŒºçš„åœ°å€ï¼Œæ˜¯ä¸€ä¸ªåœ°å€å€¼ï¼ˆæˆ–è€…å†æç«¯ä¸€ç‚¹ï¼ŒæŠŠå­—ç¬¦ä¸²å­—é¢é‡å½“æˆä¸€ä¸ª<code>char*</code>æŒ‡é’ˆæ¥çœ‹ï¼‰ã€‚å› æ­¤<code>&quot;&quot;+input[0]</code>åœ¨æ‰§è¡ŒåŠ æ³•è¿ç®—æ—¶ï¼Œè¿™é‡ŒæŠŠ<code>input[0]</code>éšå¼è½¬æ¢æˆäº†intï¼Œç„¶åè¿›è¡ŒæŒ‡é’ˆçš„åŠ æ³•è¿ç®—ï¼Œæœ€åè®¡ç®—çš„ç»“æœæŒ‡å‘äº†å¸¸é‡åŒºçš„æŸå¤„åœ°å€ï¼Œè€Œè¿™ä¸ªåœ°å€æ°å¥½æŒ‡å‘æˆ‘ä¸Šä¸ªç¨‹åºæ‰§è¡Œåè¿˜ä¿å­˜ç€çš„å­—ç¬¦ä¸²å­—é¢é‡ï¼ˆ<em>ä¸ºä»€ä¹ˆå¸¸é‡åŒºè¿˜å­˜å‚¨ç€ä¹‹å‰ç¨‹åºçš„å†…å®¹ï¼Œæˆ‘çŒœæµ‹å¯èƒ½æ˜¯<strong>ç¼“å­˜</strong>ä¹‹ç±»çš„åŸå› </em>ï¼‰ï¼Œä¹Ÿå°±æ˜¯<code>from left to right are:</code>è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œæ‰€ä»¥æœ€ç»ˆè¾“å‡ºäº†ä¸Šè¿°ç»“æœã€‚</p><p>æœ€åé€šè¿‡https://cppinsights.io/ è¿™ä¸ªç½‘ç«™éªŒè¯ä¸‹çŒœæƒ³çš„ç»“æœï¼Œå‘ç°çš„ç¡®å¦‚æ­¤ã€‚å¯ä»¥çœ‹åˆ°ç¼–è¯‘è¿‡åï¼Œå¦‚æœå’Œå­—ç¬¦ä¸²å­—é¢è¿›è¡Œç›¸åŠ ï¼Œå®é™…ä¸Šä¼šå¯¹<code>input[0]</code>è¿›è¡Œ<code>static_cast&lt;int&gt;</code>çš„è½¬æ¢ï¼Œè€Œå¦‚æœå’Œstringç±»è¿›è¡Œç›¸åŠ ï¼Œåˆ™ä¼šè°ƒç”¨é‡è½½è¿ç®—ç¬¦æ–¹æ³•ã€‚</p><p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202203051725718.png" alt="cppinsights" /></p><h1 id="æ€»ç»“"><a class="markdownIt-Anchor" href="#æ€»ç»“"></a> æ€»ç»“</h1><p>è‡³æ­¤ï¼Œé—®é¢˜è§£å†³ï¼ˆ<s>åˆæ°´äº†ä¸€ç¯‡åšå®¢</s>ï¼‰ã€‚æ€»ç»“ä¸€ä¸‹ï¼Œè¿™æ¬¡è¸©çš„å‘å¾ˆç²—æµ…ï¼Œå¤§æ¦‚æ¶‰åŠä¸¤ä¸ªçŸ¥è¯†ç‚¹ï¼Œä¸€ä¸ªæ˜¯å­—ç¬¦ä¸²å­—é¢å€¼æŒ‡å‘çš„æ˜¯å¸¸é‡åŒºçš„ä¸€ä¸ªåœ°å€ï¼ŒäºŒæ˜¯C++æœ‰æ•°æ®éšå¼è½¬æ¢ï¼Œåœ¨è¿›è¡Œç®—æœ¯è¿ç®—æ—¶ä¼šè‡ªåŠ¨æå‡ç±»å‹ï¼Œæ¯”å¦‚<code>char</code>è½¬ä¸º<code>int</code>ã€‚ç©¶å…¶å› ä¸ºåº”è¯¥æ˜¯è‡ªå·±çš„åŸºç¡€ä¸å¤Ÿç‰¢å›ºï¼Œå¯¹å­—é¢å€¼å¸¸é‡æ¬ ç¼ºè®¤è¯†ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯å—ä»¥å‰Javaçš„å½±å“ï¼Œè‡ªä»¥ä¸ºä¼šå°è£…æˆç±»ï¼Œå¤ªè¿‡äºæƒ³å½“ç„¶äº†ï¼Œéœ€è¦å¼•ä»¥ä¸ºæˆ’ã€‚</p><p>æœ€åå†è®°å½•ä¸‹è¿‘æœŸè‡ªå·±çš„ä¸€äº›æ„Ÿå—å§ï¼Œå› ä¸ºåœ¨å‡†å¤‡æ‰¾å®ä¹ ï¼Œæ‰€ä»¥ä¹Ÿæ˜¯åœ¨çœ‹å…«è‚¡ï¼Œåˆ·ç®—æ³•é¢˜ï¼Œç„¶åä»Šå¤©ç»ƒä¹ çš„æ—¶å€™ï¼Œåˆè¢«éš¾ä½äº†ï¼Œå°±è§‰å¾—è‡ªå·±çœŸå¼±å‘€ï¼Œè‡ªå·±è¿™æ ·çš„æ°´å¹³å’Œå®åŠ›èƒ½å»é¢è¯•å—ï¼Ÿå›å¤´ä¸€çœ‹ï¼Œå‘ç°è‡ªå·±ç›¸æ¯”è¿‡å»å¥½åƒå¹¶æ²¡æœ‰å¤ªå¤§çš„è¿›æ­¥ï¼Œæˆ–è€…è¯´æ²¡æœ‰å¯ä»¥æ‹¿å¾—å‡ºæ‰‹ï¼Œå€¼å¾—è‡ªè±ªçš„æœ¬äº‹ã€‚æˆ–è®¸æœ‰è‡ªè°¦çš„æˆåˆ†ï¼Œä½†æˆ‘è‡ªå·±çŸ¥é“ï¼Œè·Ÿé¡¶å°–çš„äººç›¸æ¯”ï¼Œä¸ï¼Œå°±è·Ÿæˆ‘ç†æƒ³ä¸­çš„è‡ªå·±ç›¸æ¯”ï¼Œè¿˜å·®å¾—å¤ªè¿œäº†ï¼Œå¾…åŠäº‹é¡¹é‡Œã€å¾…å­¦ä¹ çš„ä¸œè¥¿è¿˜æœ‰ä¸€ç®©ç­ã€‚</p><p>ä½†æ˜¯ï¼Œå¹³å‡¡æ— å¥‡çš„æˆ‘å•Šï¼Œç°åœ¨æœ‰æ—¶é—´è®©ä½ æ¶ˆæ²‰å—ï¼Ÿï¼æˆ‘èƒ½åšçš„ï¼Œæˆ‘è¦åšçš„ï¼Œå°±æ˜¯å’¬ç‰™åšæŒï¼Œç»§ç»­å­¦ä¹ ï¼</p><p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202203051946077.jpg" alt="" /></p>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºçŸ¥è¯†</category>
      
      <category>C++</category>
      
    </categories>
    
    
    <tags>
      
      <tag>C++</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>äºŒç»´æ•°ç»„ä¸äºŒçº§æŒ‡é’ˆ</title>
    <link href="/2022/02/28/2022-02/2022-02-28%20%E4%BA%8C%E7%BB%B4%E6%95%B0%E7%BB%84%E4%B8%8E%E4%BA%8C%E7%BA%A7%E6%8C%87%E9%92%88/"/>
    <url>/2022/02/28/2022-02/2022-02-28%20%E4%BA%8C%E7%BB%B4%E6%95%B0%E7%BB%84%E4%B8%8E%E4%BA%8C%E7%BA%A7%E6%8C%87%E9%92%88/</url>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a class="markdownIt-Anchor" href="#å‰è¨€"></a> å‰è¨€</h1><p>æœ€è¿‘å†åˆ·ã€Šå‰‘æŒ‡Offerã€‹çš„é¢è¯•é¢˜ï¼Œå…¶ä¸­é‡åˆ°æœ‰ä¸€é¢˜è·ŸäºŒç»´æ•°ç»„ç›¸å…³ï¼Œæ‰€ä»¥éœ€è¦è¿™æ ·å½¢å¼çš„å‡½æ•°ï¼Œ<code>void func(int** matrix, int rows, int columns)</code>ï¼Œé‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œå†è°ƒç”¨è¿™ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œ<strong>åº”è¯¥ä¼ å…¥æ€æ ·çš„å®å‚å‘¢</strong>ï¼Ÿ</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">// éœ€è¦è¢«è°ƒç”¨çš„å‡½æ•°</span><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">func</span><span class="hljs-params">(<span class="hljs-keyword">int</span>** matrix, <span class="hljs-keyword">int</span> rows, <span class="hljs-keyword">int</span> columns)</span> </span>&#123;<br>  cout &lt;&lt; matrix[rows<span class="hljs-number">-1</span>][columns<span class="hljs-number">-1</span>] &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-comment">// ç¬¬ä¸€ç§ä¼ å…¥å®å‚æ–¹å¼</span><br><span class="hljs-keyword">int</span> matrix[<span class="hljs-number">2</span>][<span class="hljs-number">2</span>] = &#123;<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>&#125;;<br><span class="hljs-built_in">func</span>(matrix, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>);<br><br><span class="hljs-comment">// ç¬¬äºŒç§ä¼ å…¥å®å‚</span><br><span class="hljs-keyword">int</span>** matrix = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>*[<span class="hljs-number">2</span>];<br><span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i &lt; <span class="hljs-number">2</span>; i++) &#123;<br>matrix[i] = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[<span class="hljs-number">2</span>];<br> <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j=<span class="hljs-number">0</span>; j &lt; <span class="hljs-number">2</span>; j++) &#123;<br>    matrix[i][j] = i*<span class="hljs-number">2</span> + j + <span class="hljs-number">1</span>;<br>  &#125;<br>&#125;<br><span class="hljs-built_in">func</span>(matrix, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>);<br></code></pre></td></tr></table></figure><center><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202203012135420.jpg" alt="" style="zoom:50%;" /></center><h1 id="è¸©å‘è¿‡ç¨‹"><a class="markdownIt-Anchor" href="#è¸©å‘è¿‡ç¨‹"></a> è¸©å‘è¿‡ç¨‹</h1><p>å…¶å®ä¸Šé¢çš„ç­”æ¡ˆå¾ˆç®€å•ï¼Œç›´æ¥æ•²ä»£ç æµ‹è¯•ä¸€ä¸‹ï¼Œå°±çŸ¥é“ç¬¬ä¸€ç§ä¼ å‚æ–¹å¼ç¼–è¯‘å™¨ç›´æ¥æŠ¥é”™ï¼Œæç¤ºä½ ç±»å‹ä¸åŒ¹é…ã€‚ä½†æ˜¯æˆ‘å¤´é“å•Šï¼Œæ„£æ˜¯ç”¨å¼ºåˆ¶è½¬æ¢ <code>func((int**)matrix, 2, 2)</code>çš„æ–¹å¼ï¼Œç„¶åå°±æ˜¯ç¨‹åºå´©æºƒæŠ¥é”™äº†ã€‚</p><p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202203012139296.jpg" alt="" /></p><p>è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿç°åœ¨æ¥ç†æ€§åˆ†æä¸€æ³¢ï¼Œä»¥ä¸‹é¢çš„æµ‹è¯•ä»£ç æ¥è¿›è¡Œè¯´æ˜ã€‚</p><p>é¦–å…ˆ<code>matrix</code> æ˜¯ä¸€ä¸ªäºŒç»´æ•°ç»„ï¼Œå®ƒï¼ˆæ•°ç»„åï¼‰å¯¹åº”çš„æŒ‡é’ˆç±»å‹å®é™…ä¸Šæ˜¯ <code>int(*)[2]</code> ï¼Œå³æŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆï¼ˆæœ‰äººç§°ä½œæ˜¯è¡Œæ•°ç»„æŒ‡é’ˆï¼‰<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="C/C++â€”â€”äºŒç»´æ•°ç»„ä¸æŒ‡é’ˆã€æŒ‡é’ˆæ•°ç»„ã€æ•°ç»„æŒ‡é’ˆï¼ˆè¡ŒæŒ‡é’ˆï¼‰ã€äºŒçº§æŒ‡é’ˆçš„ç”¨æ³• ">[1]</span></a></sup>ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœæŠŠ<code>matrix</code>çœ‹æˆæ˜¯ä¸€ä¸ªæŒ‡é’ˆçš„è¯ï¼ŒæŒ‡å‘çš„ç±»å‹æ˜¯ä¸€ä¸ªé•¿åº¦ä¸º2çš„intæ•°ç»„ï¼Œå› æ­¤åœ¨å¯¹<code>matrix</code>æ‰§è¡ŒæŒ‡é’ˆåŠ æ³•<code>ï¼ˆmatrix+1ï¼‰</code>çš„æ—¶å€™ï¼Œä¸€æ¬¡ç§»åŠ¨çš„å­—èŠ‚æ•°ä¸ºä¸€ä¸ªæ•°ç»„çš„é•¿åº¦å³ 2*4 = 8 å­—èŠ‚ã€‚é‚£ä¹ˆæ‰§è¡Œè§£å¼•ç”¨æ—¶ï¼Œ <code>matrix[1]</code> å¾—åˆ°æ˜¯ç¬¬2è¡Œä¸€ç»´æ•°ç»„çš„é¦–åœ°å€ï¼Œå…¶ç±»å‹å°±æ˜¯ä¸€ç»´æ•°ç»„ã€‚åŒæ—¶ä¸€ç»´æ•°ç»„åå¯¹åº”æŒ‡é’ˆç±»å‹ä¸º<code>int *</code>ï¼Œå› æ­¤å†å¯¹ <code>matrix[1]</code> æ‰§è¡ŒæŒ‡é’ˆåŠ æ³•æ“ä½œ<code>ï¼ˆmatrix[1] + 1ï¼‰</code>æ—¶ï¼Œä¸€æ¬¡ç§»åŠ¨çš„å­—èŠ‚æ•°ä¸ºä¸€ä¸ªintç±»å‹çš„å­—èŠ‚é•¿åº¦ã€‚</p><p>å…¶æ¬¡å¯¹äºäºŒçº§æŒ‡é’ˆï¼ˆæŒ‡é’ˆçš„æŒ‡é’ˆï¼‰<code>p</code> æ¥è¯´ï¼Œå› ä¸º<code>p</code> æŒ‡å‘çš„æ˜¯ä¸€ä¸ª<code>int *</code>æŒ‡é’ˆï¼Œæ‰€ä»¥ <code>p</code> æ‰§è¡ŒæŒ‡é’ˆåŠ æ³•çš„æ—¶å€™ï¼Œä¸€æ¬¡ç§»åŠ¨çš„é•¿åº¦ä¸º <code>int *</code> æŒ‡é’ˆç±»å‹çš„å­—èŠ‚æ•°ï¼ˆå³8å­—èŠ‚ï¼‰ï¼Œé‚£ä¹ˆè§£å¼•ç”¨å¾—åˆ°æ•°æ®ç±»å‹ä¹Ÿå°±æ˜¯ <code>int *</code> ï¼Œæ‰€ä»¥<code>p[0]</code> å¾—åˆ°çš„å…ƒç´ å°±æ˜¯ä¸€ä¸ª<code>int *</code> æŒ‡é’ˆï¼Œæ‰“å° <code>p[0]</code> çš„å€¼å°±æ˜¯æ‰“å°è¯¥æŒ‡é’ˆçš„å€¼ï¼Œè€ŒæŒ‡é’ˆçš„å€¼å°±æ˜¯ä¸€ä¸ªåœ°å€ã€‚ä¸ºä»€ä¹ˆè¿™é‡Œæ‰“å°å‡ºæ¥çš„å€¼è¿™ä¹ˆæ€ªå¼‚å‘¢ï¼Ÿå› ä¸ºå®ƒæŠŠ<code>matrix</code>äºŒç»´çŸ©é˜µå­˜å‚¨çš„intå€¼å½“åšæŒ‡é’ˆçš„å€¼æ¥è¿›è¡Œè§£æäº†ï¼Œä¾‹å¦‚3 å’Œ 5 ä¸¤ä¸ªintå€¼åˆèµ·æ¥ä¸º8å­—èŠ‚ï¼Œè¿™ä¸ª8ä¸ªå­—èŠ‚è¢«å½“åšåœ°å€çš„å€¼è€Œä¸æ˜¯å…ƒç´ intçš„å€¼ï¼Œå†åŠ ä¸Šæˆ‘çš„ç”µè„‘æ˜¯å°ç«¯ï¼ˆå³ä½å­—èŠ‚åœ¨ä½åœ°å€ï¼‰ï¼Œæœ€åæ‰“å°å‡ºæ¥çš„ <code>p[0]</code> å°±æ˜¯<code>0x500000003</code> äº†ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-keyword">int</span> matrix[<span class="hljs-number">2</span>][<span class="hljs-number">2</span>] = &#123;<span class="hljs-number">3</span>,<span class="hljs-number">5</span>,<span class="hljs-number">7</span>,<span class="hljs-number">8</span>&#125;;<br>cout &lt;&lt; <span class="hljs-string">&quot;matrix    address: &quot;</span> &lt;&lt; matrix &lt;&lt; endl;     <span class="hljs-comment">// 0x16d92b610</span><br>cout &lt;&lt; <span class="hljs-string">&quot;matrix[0] address: &quot;</span> &lt;&lt; matrix[<span class="hljs-number">0</span>] &lt;&lt; endl;  <span class="hljs-comment">// 0x16d92b610</span><br>cout &lt;&lt; <span class="hljs-string">&quot;matrix+1  address: &quot;</span> &lt;&lt; matrix+<span class="hljs-number">1</span> &lt;&lt; endl;   <span class="hljs-comment">// 0x16d92b618</span><br>cout &lt;&lt; <span class="hljs-string">&quot;matrix[1] address: &quot;</span> &lt;&lt; matrix[<span class="hljs-number">1</span>] &lt;&lt; endl;  <span class="hljs-comment">// 0x16d92b618</span><br><br><span class="hljs-keyword">int</span>** p = (<span class="hljs-keyword">int</span>**) matrix;<br>cout &lt;&lt; <span class="hljs-string">&quot;p    address: &quot;</span> &lt;&lt; p &lt;&lt; endl;          <span class="hljs-comment">// 0x16d92b610</span><br>cout &lt;&lt; <span class="hljs-string">&quot;p[0] address: &quot;</span> &lt;&lt; p[<span class="hljs-number">0</span>] &lt;&lt; endl;       <span class="hljs-comment">// 0x500000003</span><br>cout &lt;&lt; <span class="hljs-string">&quot;p+1  address: &quot;</span> &lt;&lt; p+<span class="hljs-number">1</span> &lt;&lt; endl;        <span class="hljs-comment">// 0x16d92b618</span><br>cout &lt;&lt; <span class="hljs-string">&quot;p[1] address: &quot;</span> &lt;&lt; p[<span class="hljs-number">1</span>] &lt;&lt; endl;       <span class="hljs-comment">// 0x800000007</span><br><br><span class="hljs-keyword">int</span> ** p_matrix = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>*[<span class="hljs-number">2</span>];<br>p_matrix[<span class="hljs-number">0</span>] = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[<span class="hljs-number">2</span>];<br>p_matrix[<span class="hljs-number">1</span>] = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[<span class="hljs-number">2</span>];<br>p_matrix[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = <span class="hljs-number">3</span>; p_matrix[<span class="hljs-number">0</span>][<span class="hljs-number">1</span>] = <span class="hljs-number">5</span>;<br>p_matrix[<span class="hljs-number">1</span>][<span class="hljs-number">0</span>] = <span class="hljs-number">7</span>; p_matrix[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>] = <span class="hljs-number">8</span>;<br>cout &lt;&lt; <span class="hljs-string">&quot;p_matrix    address: &quot;</span> &lt;&lt; p_matrix &lt;&lt; endl;    <span class="hljs-comment">// 0x60000081c020</span><br>cout &lt;&lt; <span class="hljs-string">&quot;p_matrix[0] address: &quot;</span> &lt;&lt; p_matrix[<span class="hljs-number">0</span>] &lt;&lt; endl; <span class="hljs-comment">// 0x60000081c030</span><br>cout &lt;&lt; <span class="hljs-string">&quot;p_matrix+1  address: &quot;</span> &lt;&lt; p_matrix+<span class="hljs-number">1</span> &lt;&lt; endl;  <span class="hljs-comment">// 0x60000081c028</span><br>cout &lt;&lt; <span class="hljs-string">&quot;p_matrix[1] address: &quot;</span> &lt;&lt; p_matrix[<span class="hljs-number">1</span>] &lt;&lt; endl; <span class="hljs-comment">// 0x60000081c040</span><br></code></pre></td></tr></table></figure><p>å•°é‡Œå•°å—¦è¯´äº†è¿™ä¹ˆå¤šï¼Œå¯èƒ½è¿˜æ˜¯æ²¡è§£é‡Šæ¸…æ¥šï¼Œåè€ŒæŠŠè‡ªå·±ç»•æ™•äº†ï¼Œæ‰€ä»¥å†ç”¨ä¸‹é¢è¿™å¼ å›¾è§£é‡Šä¸€ä¸‹ã€‚</p><p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202203011443395.jpeg" alt="å†…å­˜å›¾è§£" /></p><p>å¼„æ¸…æ¥šå†…å­˜ä¸­æ•°æ®åˆ†å¸ƒåï¼Œç°åœ¨åº”è¯¥çŸ¥é“ä¸ºä»€ä¹ˆä¸èƒ½ç›´æ¥æŠŠäºŒç»´æ•°ç»„matrixç›´æ¥ä¼ ç»™äºŒçº§æŒ‡é’ˆäº†å§ã€‚ä¸è¿‡è¿˜æœ‰ä¸€ä¸ªç‚¹ï¼Œå¯èƒ½è¿˜æ˜¯æ¯”è¾ƒä»¤äººæ„Ÿåˆ°ç–‘æƒ‘çš„ï¼Œå°±æ˜¯ä¸ºä»€ä¹ˆ<code>matrix+1</code> å’Œ <code>matrix[1]</code> æ‰“å°å‡ºæ¥çš„å€¼æ˜¯ç›¸åŒçš„ï¼Ÿ</p><p>æˆ‘æ˜¯è¿™ä¹ˆç†è§£çš„ï¼ˆ<strong>å¦‚æœä¸å¯¹ï¼Œè¿˜è¯·åœ¨è¯„è®ºåŒºä¸­æŒ‡å‡º</strong>ï¼‰ï¼šå› ä¸ºmatrix ç±»å‹æ—¶ <code>int(*)[2]</code>ï¼Œæ˜¯ä¸€ä¸ªæŒ‡å‘ä¸€ç»´æ•°ç»„çš„æŒ‡é’ˆï¼Œå› æ­¤è§£å¼•ç”¨å¾—åˆ°çš„åº”è¯¥å°±æ˜¯ä¸ªæ•°ç»„ï¼Œæ‰€ä»¥å¯ä»¥è®¤ä¸º <code>matrix[1]</code> å°±æ˜¯ä¸ªä¸€ç»´æ•°ç»„ï¼Œè€Œä¸€ç»´æ•°ç»„åä¸å°±æ˜¯æ•°ç»„é¦–å…ƒç´ çš„åœ°å€å˜›ï¼Œå› æ­¤æˆ‘è§‰å¾—ç¼–è¯‘å™¨åœ¨å¯¹ <code>matrix+1</code>è¿™ä¸ªåœ°å€è§£å¼•ç”¨å–å€¼çš„æ—¶å€™ï¼Œå¹¶æ²¡æœ‰åƒ äºŒçº§æŒ‡é’ˆ <code>int** p</code> é‚£æ ·å»å–å†…å­˜é‡Œçš„å€¼ä½œä¸ºåœ°å€å€¼ï¼Œè€Œæ˜¯ç›´æ¥å°†å½“å‰çš„åœ°å€å€¼ä½œä¸ºæ•°ç»„åçš„åœ°å€å€¼åæ‚”äº†ã€‚æ‰€ä»¥æœ€ç»ˆ <code>matrix+1</code> å’Œ <code>matrix[1]</code> æ‰“å°å¾—åˆ°çš„ç»“æœç›¸åŒã€‚</p><hr /><p>å…¶å®è¿˜é‡åˆ°äº†å¦ä¸€ç§æ¯”è¾ƒå¥‡æ€ªçš„å½¢å¼ï¼Œè§ä¸‹é¢çš„å‡½æ•°ã€‚æˆ‘è¯•äº†å¥½å‡ ç§ä¼ å‚æ–¹å¼ï¼Œä½†æ€»æ˜¯ç¼–è¯‘é€šè¿‡ï¼Œç¼–è¯‘å™¨ä¸€ç›´æç¤ºæˆ‘ç±»å‹ä¸åŒ¹é…ï¼Œå‘Šè¯‰æˆ‘å½¢å‚<code>matrix</code>çš„çœŸå®ç±»å‹ä¸º<code>int(*)[columns]</code>ï¼Œè¿™å°±å’Œå°´å°¬ï¼Œå› ä¸º<code>columns</code>æ˜¯ä¸ªå˜é‡ï¼Œæˆ‘æ€ä¹ˆä¼ ä¸€ä¸ªæ•°ç»„é•¿åº¦ä¸ºå˜é‡çš„æ•°ç»„æŒ‡é’ˆï¼Ÿ</p><p>æˆ‘ä»¬éƒ½çŸ¥é“C++é‡Œï¼Œæ•°ç»„çš„é•¿åº¦æ˜¯ä¸€ä¸ªå›ºå®šå€¼ï¼Œé‚£ä¹ˆè¿™é‡Œçš„<code>func2</code>ä¸ºä»€ä¹ˆå¯ä»¥é€šè¿‡ç¼–è¯‘ï¼Ÿæ›´ç—›è‹¦çš„æ˜¯æˆ‘è¿˜æ— æ³•ä¼ å‚ã€‚ã€‚ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">// è¿™é‡Œ martix ç±»å‹ç­‰ä»·ä¸º int(*)[columns]</span><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">func2</span><span class="hljs-params">(<span class="hljs-keyword">int</span> rows, <span class="hljs-keyword">int</span> columns, <span class="hljs-keyword">int</span> matrix[rows][columns])</span> </span>&#123;<br>    cout &lt;&lt; matrix[rows<span class="hljs-number">-1</span>][columns<span class="hljs-number">-1</span>];<br>&#125;<br></code></pre></td></tr></table></figure><p>åæ¥æˆ‘åœ¨stackoverflowä¸Šæäº†è¿™ä¸ªé—®é¢˜ï¼ˆç»“æœæ ‡è®°ä¸º <em>æ¨¡æ¿å‚æ•°è‡ªåŠ¨æ¨å¯¼</em> çš„é—®é¢˜ï¼Œä½†æˆ‘æ„Ÿè§‰è¿˜æ˜¯ä¸å¤ªä¸€æ ·ï¼‰ï¼Œæœ‰äººå›å¤æˆ‘è¯´ï¼Œè¿™ç§å‡½æ•°å®šä¹‰æ–¹å¼åœ¨Cé‡Œé¢æ˜¯æœ‰æ•ˆçš„ï¼Œä½†åœ¨C++é‡Œæ˜¯ä¸åˆæ³•ï¼Œæ‰€ä»¥è¿™ä¸æ˜¯å¦‚ä½•ä¼ å‚çš„é—®é¢˜ï¼Œè€Œæ˜¯è¿™æ ·çš„å†™æ³•åœ¨C++æ ‡å‡†é‡Œæ˜¯ä¸å…è®¸çš„ã€‚<sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><span class="hint--top hint--rounded" aria-label="stackoverflowä¸Šçš„æé—®">[2]</span></a></sup>è™½ç„¶æ„Ÿè§‰è¿˜æ˜¯æ²¡è¯´æ˜ç™½ä¸ºä»€ä¹ˆç¼–è¯‘å¯è¡Œï¼Œä½†æ˜¯å§‘ä¸”è®¤ä¸ºæ˜¯C++æ ‡å‡†ä¸å…è®¸è¿™æ ·çš„å†™æ³•ï¼Œæ‰€ä»¥å¯¼è‡´æ²¡æ³•ä¼ å‚ã€‚</p><h1 id="ç»“è®º"><a class="markdownIt-Anchor" href="#ç»“è®º"></a> ç»“è®º</h1><p>æœ€åæ€»ç»“ä¸€ä¸‹ï¼ŒäºŒç»´æ•°ç»„æ˜¯ä¸èƒ½ç›´æ¥èµ‹å€¼ç»™äºŒçº§æŒ‡é’ˆçš„ï¼ŒäºŒç»´æ•°ç»„å¯¹åº”çš„æŒ‡é’ˆç±»å‹æ˜¯ä¸€ä¸ªæ•°ç»„æŒ‡é’ˆï¼Œä¸‹é¢è¡¨æ ¼ç»™å‡ºæ•°ç»„å’ŒæŒ‡é’ˆçš„å‚æ•°åŒ¹é…ã€‚<sup id="fnref:3" class="footnote-ref"><a href="#fn:3" rel="footnote"><span class="hint--top hint--rounded" aria-label="C/C++äºŒç»´æ•°ç»„åå’ŒäºŒçº§æŒ‡é’ˆ">[3]</span></a></sup></p><table><thead><tr><th style="text-align:left">å®å‚</th><th>ä¾‹å­</th><th>æ‰€åŒ¹é…çš„å½¢å‚</th></tr></thead><tbody><tr><td style="text-align:left">äºŒç»´æ•°ç»„</td><td>char c[4][3]</td><td>char (*c)[3]</td></tr><tr><td style="text-align:left">æŒ‡é’ˆæ•°ç»„</td><td>char * c[4]</td><td>char ** c</td></tr><tr><td style="text-align:left">æ•°ç»„æŒ‡é’ˆ</td><td>char (*c)[3]</td><td>char (*c)[3]</td></tr><tr><td style="text-align:left">äºŒçº§æŒ‡é’ˆ</td><td>char ** c</td><td>char ** c</td></tr></tbody></table><p>ç„¶åå†ç»™å‡ºå‡ ç§æ­£ç¡®çš„ä¼ é€’äºŒç»´æ•°ç»„çš„å§¿åŠ¿ã€‚</p><h2 id="1å½¢å‚ä½¿ç”¨äºŒçº§æŒ‡é’ˆ"><a class="markdownIt-Anchor" href="#1å½¢å‚ä½¿ç”¨äºŒçº§æŒ‡é’ˆ"></a> 1.å½¢å‚ä½¿ç”¨äºŒçº§æŒ‡é’ˆ</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">func</span><span class="hljs-params">(<span class="hljs-keyword">int</span> **matrix, <span class="hljs-keyword">int</span> rows, <span class="hljs-keyword">int</span> columns)</span> </span>&#123;<br>    cout &lt;&lt; matrix[rows - <span class="hljs-number">1</span>][columns - <span class="hljs-number">1</span>];<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>  <span class="hljs-keyword">int</span> rows = <span class="hljs-number">2</span>, columns = <span class="hljs-number">2</span>;<br>    <span class="hljs-keyword">int</span> **matrix = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span> *[rows];<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; rows; i++) &#123;<br>        matrix[i] = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[columns];<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; columns; j++) &#123;<br>            matrix[i][j] = i * columns + j + <span class="hljs-number">1</span>;<br>        &#125;<br>    &#125;<br>    <span class="hljs-built_in">func</span>(matrix,rows, columns);<br>  <br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i&lt;rows;i++) &#123;<br>        <span class="hljs-keyword">delete</span>[] matrix[i];<br>    &#125;<br>    <span class="hljs-keyword">delete</span>[] matrix;<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="2å½¢å‚ä½¿ç”¨ä¸€çº§æŒ‡é’ˆ"><a class="markdownIt-Anchor" href="#2å½¢å‚ä½¿ç”¨ä¸€çº§æŒ‡é’ˆ"></a> 2.å½¢å‚ä½¿ç”¨ä¸€çº§æŒ‡é’ˆ</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">func</span><span class="hljs-params">(<span class="hljs-keyword">int</span> *matrix, <span class="hljs-keyword">int</span> rows, <span class="hljs-keyword">int</span> columns)</span> </span>&#123;<br>    cout &lt;&lt; matrix[(rows - <span class="hljs-number">1</span>) * columns + (columns - <span class="hljs-number">1</span>)];<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">int</span> rows = <span class="hljs-number">2</span>, columns = <span class="hljs-number">2</span>;<br>    <span class="hljs-keyword">int</span> *matrix = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[rows * columns];<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; rows; i++) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; columns; j++) &#123;<br>            matrix[i * columns + j] = i * columns + j + <span class="hljs-number">1</span>;<br>        &#125;<br>    &#125;<br>    <span class="hljs-built_in">func</span>(matrix, rows, columns);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="3å½¢å‚ä½¿ç”¨æ•°ç»„æŒ‡é’ˆ"><a class="markdownIt-Anchor" href="#3å½¢å‚ä½¿ç”¨æ•°ç»„æŒ‡é’ˆ"></a> 3.å½¢å‚ä½¿ç”¨æ•°ç»„æŒ‡é’ˆ</h2><p>é‡‡ç”¨è¿™ç§æ–¹å¼ï¼Œéœ€è¦å½¢å‚æŒ‡å®šäºŒç»´æ•°ç»„çš„åˆ—æ•°</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">// columns = 2</span><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">func</span><span class="hljs-params">(<span class="hljs-keyword">int</span> (*matrix)[<span class="hljs-number">2</span>], <span class="hljs-keyword">int</span> rows, <span class="hljs-keyword">int</span> columns)</span> </span>&#123;<br>    cout &lt;&lt; matrix[rows<span class="hljs-number">-1</span>][columns<span class="hljs-number">-1</span>];<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">int</span> rows = <span class="hljs-number">2</span>, columns = <span class="hljs-number">2</span>;<br>    <span class="hljs-keyword">int</span> matrix[<span class="hljs-number">2</span>][<span class="hljs-number">2</span>] = &#123;<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>&#125;;<br>    <span class="hljs-built_in">func</span>(matrix, rows, columns);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="4å½¢å‚ä½¿ç”¨æŒ‡é’ˆæ•°ç»„"><a class="markdownIt-Anchor" href="#4å½¢å‚ä½¿ç”¨æŒ‡é’ˆæ•°ç»„"></a> 4.å½¢å‚ä½¿ç”¨æŒ‡é’ˆæ•°ç»„</h2><p>é‡‡ç”¨è¿™ç§æ–¹å¼ï¼Œéœ€è¦å½¢å‚æŒ‡å®šäºŒç»´æ•°ç»„çš„è¡Œæ•°</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">// rows = 3</span><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">func</span><span class="hljs-params">(<span class="hljs-keyword">int</span>* matrix[<span class="hljs-number">3</span>], <span class="hljs-keyword">int</span> rows, <span class="hljs-keyword">int</span> columns)</span> </span>&#123;<br>    cout &lt;&lt; matrix[rows - <span class="hljs-number">1</span>][columns - <span class="hljs-number">1</span>];<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">int</span> rows = <span class="hljs-number">3</span>, columns = <span class="hljs-number">2</span>;<br>    <span class="hljs-keyword">int</span> *matrix[rows];<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; rows; i++) &#123;<br>        matrix[i] = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[columns];<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; columns; j++) &#123;<br>            matrix[i][j] = i * columns + j;<br>        &#125;<br>    &#125;<br>    <span class="hljs-built_in">func</span>(matrix, rows, columns);<br>  <br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; rows; i++) &#123;<br>        <span class="hljs-keyword">delete</span>[] matrix[i];<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="5å½¢å‚ä½¿ç”¨-vector-å®¹å™¨"><a class="markdownIt-Anchor" href="#5å½¢å‚ä½¿ç”¨-vector-å®¹å™¨"></a> 5.å½¢å‚ä½¿ç”¨ vector å®¹å™¨</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">func</span><span class="hljs-params">(vector&lt;vector&lt;<span class="hljs-keyword">int</span>&gt;&gt;&amp; matrix, <span class="hljs-keyword">int</span> rows, <span class="hljs-keyword">int</span> columns)</span> </span>&#123;<br>    cout &lt;&lt; matrix[rows - <span class="hljs-number">1</span>][columns - <span class="hljs-number">1</span>];<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">int</span> rows = <span class="hljs-number">3</span>, columns = <span class="hljs-number">2</span>;<br>    vector&lt;vector&lt;<span class="hljs-keyword">int</span>&gt;&gt; <span class="hljs-built_in">matrix</span>(rows);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>;i&lt;rows;i++) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j=<span class="hljs-number">0</span>;j&lt;columns;j++) &#123;<br>            matrix[i].<span class="hljs-built_in">push_back</span>(i * columns + j + <span class="hljs-number">1</span>);<br>        &#125;<br>    &#125;<br>    <span class="hljs-built_in">func</span>(matrix, rows, columns);<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202203012140651.jpeg" alt="" /></p><section class="footnotes"><h1>å¤‡æ³¨/å‚è€ƒ</h1><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a href="https://www.cnblogs.com/oddcat/p/9701518.html">C/C++â€”â€”äºŒç»´æ•°ç»„ä¸æŒ‡é’ˆã€æŒ‡é’ˆæ•°ç»„ã€æ•°ç»„æŒ‡é’ˆï¼ˆè¡ŒæŒ‡é’ˆï¼‰ã€äºŒçº§æŒ‡é’ˆçš„ç”¨æ³• </a><a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a href="https://stackoverflow.com/questions/71303527/how-to-pass-parameters-to-this-function-void-funcint-rows-int-columns-int-m">stackoverflowä¸Šçš„æé—®</a><a href="#fnref:2" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:3" class="footnote-text"><span><a href="https://www.cnblogs.com/fuao2000/p/11005671.html">C/C++äºŒç»´æ•°ç»„åå’ŒäºŒçº§æŒ‡é’ˆ</a><a href="#fnref:3" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºçŸ¥è¯†</category>
      
      <category>C++</category>
      
    </categories>
    
    
    <tags>
      
      <tag>C++</tag>
      
      <tag>æŒ‡é’ˆ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å¤šå³æ˜¯å°‘ï¼Œå°‘å³æ˜¯å¤š</title>
    <link href="/2022/02/21/2022-02/2022-02-21%20%E5%A4%9A%E5%8D%B3%E6%98%AF%E5%B0%91%EF%BC%8C%E5%B0%91%E5%8D%B3%E6%98%AF%E5%A4%9A/"/>
    <url>/2022/02/21/2022-02/2022-02-21%20%E5%A4%9A%E5%8D%B3%E6%98%AF%E5%B0%91%EF%BC%8C%E5%B0%91%E5%8D%B3%E6%98%AF%E5%A4%9A/</url>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a class="markdownIt-Anchor" href="#å‰è¨€"></a> å‰è¨€</h1><p>è¿™å‡ å¤©ä¸€ç›´åœ¨æŠ˜è…¾obsidianè¿™æ¬¾ç¬”è®°è½¯ä»¶ï¼Œçœ‹ç›¸å…³è§†é¢‘ï¼Œå­¦ä¹ æœ‰å…³ç”¨æ³•ï¼Œå¹¿é˜”çš„ä¸»é¢˜å’Œä¸è®¡å…¶æ•°çš„æ’ä»¶ä»¤æˆ‘çƒŸèŠ±ç¼­ä¹±ï¼Œå®Œå…¨è¢«ç»šä¸½çš„ç•Œé¢é…ç½®æ‰€å¸å¼•ã€‚</p><p>ä½†æ˜¯ç­‰æˆ‘å†·é™ä¸‹æ¥ä¹‹åï¼Œæ‰ªå¿ƒè‡ªé—®ï¼Œè‡ªå·±çœŸçš„éœ€è¦è¿™ä¹ˆæ·±å…¥å­¦ä¹ ä½¿ç”¨obsidianå—ï¼Ÿæˆ‘å†³å®šæ¥è§¦ä½¿ç”¨obsidiançš„åˆå¿ƒæ˜¯ä»€ä¹ˆï¼Ÿæˆ‘çš„çœŸå®éœ€æ±‚åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿè¿™æ ·ç†æ¸…è‡ªå·±çš„æ€è·¯åï¼Œæˆ–è®¸å°±ä¼šè±ç„¶å¼€æœ—äº†ã€‚</p><h1 id="è¿‡ç¨‹"><a class="markdownIt-Anchor" href="#è¿‡ç¨‹"></a> è¿‡ç¨‹</h1><p>å…¶å®æˆ‘çš„éœ€æ±‚å¾ˆç®€å•ï¼Œå°±æ˜¯æƒ³è¦æ‰¾ä¸€ä¸ªåœ°æ–¹å¯ä»¥è®°å½•æˆ‘çš„è´¢åŠ¡çŠ¶å†µã€‚æ­¤å‰æˆ‘çš„ä¸»è¦ç¬”è®°è½¯ä»¶ç”¨çš„æ˜¯é£ä¹¦ï¼Œä½†å› ä¸ºé£ä¹¦éœ€è¦è”ç½‘ï¼Œä¸”æ•°æ®å­˜å‚¨åœ¨åˆ«äººçš„æœåŠ¡å™¨ä¸Šï¼Œæ‰€ä»¥ä¸€äº›ä¸ªäººç§å¯†æ•°æ®å°±ä¸å¥½å†™åœ¨ä¸Šé¢ï¼Œæ‰€ä»¥å°±éœ€è¦ä¸€æ¬¾æœ¬åœ°çš„æ–‡æœ¬ç¼–è¾‘è½¯ä»¶ã€‚</p><p>ç„¶åå°±é€šè¿‡å…¬ä¼—å·ç­‰æ¸ é“ï¼Œå°±äº†è§£åˆ°äº†obsidianè¿™æ¬¾ç¬”è®°è½¯ä»¶ï¼Œç›¸æ¯” typora æ¥è¯´å…·æœ‰æ›´å¤šçš„æ’ä»¶å’Œæ›´é«˜çš„è‡ªç”±åº¦ã€‚è€Œæ­¤å‰æˆ‘å†™åšå®¢ç”¨çš„å°±æ˜¯ typora æ¥ç¼–è¾‘æ’°å†™ï¼Œæ‰€ä»¥å°±æƒ³ç€èƒ½ä¸èƒ½æ”¹æˆç”¨ obsidianï¼Œè¿™æ ·å¯ä»¥å°è¯•å»å­¦ä¹ ä½¿ç”¨ç‚«é…·çš„æ’ä»¶äº†ï¼ˆè¿˜æ˜¯è¿½æ±‚èŠ±é‡Œèƒ¡å“¨çš„å¿ƒç†å•Šï¼‰ï¼Œç”šè‡³ä¹‹åå¯ä»¥å–ä»£é£ä¹¦ã€‚</p><p>ä½†æ˜¯ç°åœ¨æˆ‘å‘ç°ï¼Œå…¶å®å½“ä¸‹å°è¯•å»æ·±åº¦å­¦ä¹ ä½¿ç”¨obsidianå¹¶æ²¡æœ‰å¤ªå¤§å¿…è¦ï¼šä¸€æ¥æˆ‘æœ€åˆçš„éœ€æ±‚å¾ˆç®€å•ï¼Œåªæ˜¯æƒ³åœ¨æœ¬åœ°è®°å½•ç‚¹è´¢åŠ¡ä¿¡æ¯ï¼›äºŒæ¥å¦‚æœä½¿ç”¨obsidianå–ä»£typoraæ¥å†™åšå®¢ï¼Œå…¶å®æˆ‘è¿˜æ˜¯æ²¡æ³•ç”¨ä¸Šobsidiané‡Œæœ€å…³é”®çš„åŒé“¾åŠŸèƒ½ï¼Œå› ä¸ºåšå®¢æ¸²æŸ“çš„æ—¶å€™æ— æ³•æ”¯æŒï¼›ä¸‰æ¥å¦‚æœç”¨obsidianå–ä»£é£ä¹¦åšç¬”è®°ï¼Œæˆæœ¬æ¯”è¾ƒé«˜ï¼Œæƒ³è¦æŠŠobsidianæ‰“é€ æˆç°åœ¨é£ä¹¦è¿™æ ·å­éœ€è¦èŠ±è´¹çš„ç²¾åŠ›å’Œæ—¶é—´å¯å¤ªå¤§äº†ã€‚</p><h1 id="æ€»ç»“"><a class="markdownIt-Anchor" href="#æ€»ç»“"></a> æ€»ç»“</h1><p>ç»¼ä¸Šæ‰€è¿°ï¼Œå…¶å®æˆ‘å¤§å¯ä¸å¿…å»æ·±å…¥å­¦ä¹ obsidianï¼Œå»å­¦å„ç§æ’ä»¶ï¼Œæ‰“é€ ä¸€ä¸ªå®Œç¾çš„å†™ä½œç³»ç»Ÿï¼Œæ¯•ç«Ÿå·²ç»æœ‰ä¸€ä¸ªæ¯”è¾ƒå®Œå¤‡çš„è½¯ä»¶åœ¨ä½¿ç”¨äº†ï¼Œä¹Ÿæ²¡æœ‰ç‰¹åˆ«çš„éœ€æ±‚ï¼Œæœ‰è¿™ä¸ªæ—¶é—´ç²¾åŠ›è¿˜ä¸å¦‚å»åšå½“ä¸‹ä¼˜å…ˆçº§æ›´é«˜çš„äº‹æƒ…ï¼Œå­¦ä¹ æ›´å¤šå®é™…æ€§çš„çŸ¥è¯†å†…å®¹ã€‚</p><p>è¿™ä»¶äº‹è®©æˆ‘è”æƒ³åˆ°ä»Šå¤©è€å¸ˆè¯¾ä¸Šè®²çš„è¯ï¼Œâ€œ<strong>å¤šå³æ˜¯å°‘ï¼Œå°‘å³æ˜¯å¤š</strong>â€ã€‚åœ¨å½“ä¸‹ä¿¡æ¯çˆ†ç‚¸çš„æ—¶ä»£ï¼Œæˆ‘ä»¬ä¼šæ¥è§¦åˆ°å¾ˆå¤šçº·ç¹å¤æ‚çš„äº‹ç‰©ï¼Œæˆ‘ä»¬æˆ–è®¸ä¼šè¢«è¡¨è±¡æ‰€è¿·æƒ‘ï¼Œè€Œå¿˜è®°è‡ªå·±çœŸå®çš„éœ€æ±‚ã€‚å½“å¤ªå¤šçš„é€‰æ‹©æ‘†åœ¨é¢å‰ï¼Œåè€Œæ— æ³•å†³å®šï¼Œè®¤ä¸ºè¿˜æ˜¯å¤ªå°‘ï¼Œè¿˜æƒ³è¿½æ±‚æ›´å¤šæ›´å¥½ã€‚ä½†å…¶å®åªè¦æŒæ¡å…³é”®çš„å‡ ä¸ªæŠ€æœ¯ã€è½¯ä»¶ï¼Œå°±è¶³ä»¥è§£å†³å¤§å¤šæ•°é—®é¢˜å’Œéœ€æ±‚ã€‚</p><p>æœ€å…³é”®çš„è¿˜æ˜¯è¦æ˜ç¡®è‡ªå·±çš„éœ€æ±‚å’Œæƒ³æ³•ï¼Œç„¶åä»¥æ­¤ä¸ºå‡ºå‘ç‚¹å¯»æ‰¾åˆé€‚çš„è§£å†³æ–¹æ³•ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>ç”Ÿæ´»</category>
      
      <category>éšç¬”</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ‚è°ˆ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€æ¼‚æµå°‘å¹´ã€‘é’æ˜¥çš„æ„ä¹‰åœ¨äºæˆé•¿</title>
    <link href="/2022/02/19/2022-02/2022-02-19%20%E3%80%90%E6%BC%82%E6%B5%81%E5%B0%91%E5%B9%B4%E3%80%91%E9%9D%92%E6%98%A5%E7%9A%84%E6%84%8F%E4%B9%89%E5%9C%A8%E4%BA%8E%E6%88%90%E9%95%BF/"/>
    <url>/2022/02/19/2022-02/2022-02-19%20%E3%80%90%E6%BC%82%E6%B5%81%E5%B0%91%E5%B9%B4%E3%80%91%E9%9D%92%E6%98%A5%E7%9A%84%E6%84%8F%E4%B9%89%E5%9C%A8%E4%BA%8E%E6%88%90%E9%95%BF/</url>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a class="markdownIt-Anchor" href="#å‰è¨€"></a> å‰è¨€</h1><p>ä¹‹å‰å°±å¬é—»ã€Šæ¼‚æµå°‘å¹´ã€‹è¿™éƒ¨ç•ªè¯„ä»·å¾ˆé«˜ï¼Œå°±ä¸€ç›´æƒ³æ‰¾æœºä¼šè¡¥äº†ï¼Œæ°å¥½è¿™æ®µå¯’å‡æ—¶é—´é‡Œæœ‰ç©ºï¼Œå°±ä¸€æ¬¡æ€§åˆ·å®Œäº†ã€‚å½“æ—¶çœ‹å®Œçš„ç¡®æ˜¯å¿ƒç”°é‡Œæ¶Œå‡ºäº†äº›ä»€ä¹ˆï¼Œä½†å¯æƒœçš„æ˜¯æ²¡æœ‰åŠæ—¶è®°å½•ä¸‹æ¥ï¼Œç°åœ¨å›è¿‡å¤´æ¥ï¼Œæƒ³è¦è¯´äº›ä»€ä¹ˆï¼Œå´åˆæ— ä»è¯´èµ·äº†ã€‚</p><p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202202201047171.png" alt="" /></p><p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202202201048916.png" alt="" /></p><h1 id="æ„Ÿæ‚Ÿ"><a class="markdownIt-Anchor" href="#æ„Ÿæ‚Ÿ"></a> æ„Ÿæ‚Ÿ</h1><p>ã€Šæ¼‚æµå°‘å¹´ã€‹è®²è¿°äº†ä¸€ä¸ªç­çº§çš„ä¸­å­¦ç”Ÿçªç„¶æ¥åˆ°äº†å¥‡å¦™çš„å¼‚æ¬¡å…ƒä¸–ç•Œï¼Œæ¯ä¸ªäººè·å¾—äº†ä¸åŒçš„è¶…èƒ½åŠ›ï¼Œä¸ºäº†å›åˆ°ç°å®ä¸–ç•Œï¼Œå­¦ç”Ÿä»¬åšäº†å„ç§å°è¯•å’ŒåŠªåŠ›ï¼ŒæœŸé—´ä¹Ÿå‘ç”Ÿäº†å¾ˆå¤šäº‹ä»¶ï¼Œæœ€ç»ˆåªæœ‰ä¸»è§’é•¿è‰¯å’Œç‘ç©—å›åˆ°äº†ç°å®ä¸–ç•Œã€‚</p><p>ã€Šæ¼‚æµå°‘å¹´ã€‹æ˜¯ä¸€éƒ¨ç¾¤åƒç•ªï¼Œå°†ç­çº§é‡Œæ¯ä¸ªå­¦ç”Ÿçš„ä¸ªæ€§åˆ»ç”»å¾—å¾ˆé²œæ˜ï¼Œå¾ˆæœ‰ç‰¹ç‚¹ï¼Œå½“å·å…¥å¥‡æ€ªçš„äº‹ä»¶ä¸­ï¼Œæ¼‚æµåˆ°å¼‚ä¸–ç•Œï¼Œæ¯ä¸ªäººéƒ½æœ‰ç€å„è‡ªçš„æ€åº¦å’Œè¡¨ç°ã€‚è€Œå†ç»ä¼—å¤šäº‹ä»¶åï¼Œæ¯ä¸ªäººä¹Ÿéƒ½èµ°ä¸Šäº†ä¸åŒçš„é“è·¯ã€‚</p><p>å…¶ä¸­ä»¤æˆ‘å°è±¡æœ€æ·±çš„å°±æ˜¯ä¸»è§’çš„æˆé•¿å˜åŒ–äº†ï¼ˆå½“ç„¶è¿˜æœ‰å…ƒæ°”å°‘å¥³å¸Œå’Œå‚²å¨‡çš„ç‘ç©—ï¼Œç¬‘ï¼‰ï¼Œä¸»è§’é•¿è‰¯ä»ä¸€å¼€å§‹çš„æ¶ˆæé¿ä¸–ï¼Œè®¤ä¸ºè‡ªå·±ä¸é‡è¦ï¼Œä»€ä¹ˆéƒ½ä¸æƒ³åšï¼Œåˆ°æœ€åå˜å¾—åšå®šä¸ç§»ï¼Œç«­å°½å…¨åŠ›å›åˆ°ç°å®ï¼Œè¿™ä¸€æˆé•¿è¿‡ç¨‹ä»¤äººä¾§ç›®ã€‚æˆ–è®¸æ˜¯ä»é•¿è‰¯èº«ä¸Šçœ‹åˆ°äº†è‡ªå·±ï¼Œé‚£ä¸ªå¦„è‡ªè²è–„ï¼Œèƒ†å°æ‡¦å¼±çš„è‡ªå·±ï¼Œæ‰€ä»¥ä¸ºé•¿è‰¯çš„æˆé•¿å˜åŒ–è€Œå–œæ‚¦åŠ¨å®¹ï¼Œå› ä¸ºåœ¨æˆ‘å¿ƒåº•çš„æŸå¤„ï¼Œä¹Ÿä¸€ç›´å¸Œæœ›è‡ªå·±èƒ½å¤Ÿåšå‡ºæ”¹å˜ï¼Œæ”¹æ­£æ¶ä¹ ï¼Œä¸€æ‰«é¢“åºŸæ€ æƒ°ä¹‹é£ï¼Œå˜å¾—åšå®šè‡ªä¿¡ï¼Œå‹‡å¾€ç›´å‰ã€‚</p><p>ç•ªå‰§é‡Œè¿˜è®²è¿°äº†å¾ˆå¤šæ•…äº‹ï¼Œæˆ‘è®¤ä¸ºå¾ˆåƒæ˜¯é’æ˜¥æˆé•¿è·¯ä¸Šé‡åˆ°çš„ç§ç§ï¼Œæœ‰æŒ«æŠ˜æœ‰ç£¨éš¾ï¼Œæœ‰é»‘æš—æœ‰æ­»äº¡ï¼Œä½†ä¹Ÿæœ‰æ‹æƒ…å‹æƒ…ï¼Œæœ‰å‹‡æ°”æœ‰åšéŸ§ï¼Œæœ‰è‡ªä¿¡å…ƒæ°”ã€å‚²å¨‡å–„è‰¯çš„å°‘å¥³ï¼Œæœ‰ä¸æ–­æˆé•¿ã€è‡ªæˆ‘æ•‘èµçš„å°‘å¹´ï¼Œè¿™ä¸€åˆ‡å…±åŒäº¤ç»‡çš„äº‹ç‰©ï¼Œç»„æˆäº†æˆ‘ä»¬çš„é’æ˜¥ã€‚</p><p>æœ€åæ•…äº‹çš„ç»“å°¾ï¼Œé•¿è‰¯å’Œç‘ç©—å›åˆ°äº†å¸Œè¿˜æ´»ç€çš„ç°å®ä¸–ç•Œï¼ˆä½†å·²ç»ä¸æ˜¯åŸæ¥çš„ä¸–ç•Œäº†ï¼‰ï¼Œä¸€åˆ‡éƒ½å½’äºå¹³æ·¡ï¼Œä»¿ä½›ä¹‹å‰çš„é‚£åœºæ¼‚æµä¹‹æ—…æœªæ›¾å‘ç”Ÿè¿‡ï¼Œé•¿è‰¯ä¹Ÿå›åˆ°äº†å¹³é™çš„ç”Ÿæ´»ä¹‹ä¸­ã€‚æ²¡æœ‰æƒ³è±¡ä¸­çš„ç»ˆæˆçœ·å±ï¼Œæ²¡æœ‰æƒ³è±¡ä¸­çš„è½°è½°çƒˆçƒˆï¼Œä½†çš„ç¡®æœ‰ä»€ä¹ˆå‘ç”Ÿäº†å˜åŒ–ï¼Œé•¿è‰¯æˆé•¿äº†ï¼Œä¸å†æ˜¯æ¶ˆæç”Ÿæ´»ï¼Œè€Œæ˜¯èƒ½å¤ŸæŠ¬èµ·èƒ¸è†›è‡ªä¿¡åœ°èµ°ä¸‹å»ã€‚ä½œä¸ºè§‚ä¼—çš„æˆ‘æ¥è¯´ï¼Œæ•…äº‹çš„ç»“å±€å¹¶æ²¡æœ‰äº‹äº‹å¦‚æ„¿ï¼Œä½†è¿™å°±æ˜¯ç”Ÿæ´»ä¸æ˜¯å—ï¼Ÿ</p><p>è¿™æ˜¯ä¸€åœºåä¸ºâ€æˆé•¿â€œçš„é’æ˜¥æ¼‚æµä¹‹æ—…ã€‚</p><h1 id="åè®°"><a class="markdownIt-Anchor" href="#åè®°"></a> åè®°</h1><p>äºæˆ‘è€Œè¨€ï¼Œ æˆ‘ä¸çŸ¥é“è‡ªå·±çš„é’æ˜¥ä½•æ—¶å¼€å§‹ï¼Œæ›´æ— ä»è°ˆèµ·ä½•æ—¶ç»“æŸï¼Œæˆ‘æƒ³è‡ªèº«æˆ–è®¸è¿˜æ²¡ç»å†è¿‡æˆé•¿çš„é˜µç—›ï¼Œæˆ‘è¿˜æ˜¯å¸¦æœ‰å­©å­èˆ¬çš„å¤©çœŸå’Œç¨šæ°”ï¼Œä¸å…·æœ‰æˆ‘è¿™ä¸ªå¹´é¾„åº”æœ‰çš„æˆç†Ÿå’Œåšæ¯…ã€‚æˆ‘æƒ³ï¼Œæˆ‘æ˜¯æ¸´æœ›æˆé•¿çš„ï¼Œä¹Ÿå¸Œæœ›è‡ªå·±å˜å¾—è´Ÿè´£ä»»æœ‰æ‹…å½“ï¼Œä½†æ€»æ˜¯ç¼ºä¹å®é™…è¡ŒåŠ¨ã€‚æˆ–è®¸æ”¹å˜æ˜¯æœ‰çš„ï¼Œä½†è¿˜æ˜¯å¤ªå°ï¼Œè¿˜æ˜¯å¤ªæ…¢ï¼Œè¿˜æ˜¯ä¸æ»¡è¶³ã€‚å˜›ï¼Œæˆ–è®¸ä¹Ÿä¸èƒ½æ“ä¹‹è¿‡æ€¥ã€‚</p><p>ä½ å¯ä»¥å¾ˆèœï¼Œä½†ä½ ä¸èƒ½ä¸€ç›´èœã€‚</p><p>ä½ å¯ä»¥å¤©çœŸï¼Œä½†ä½ ä¸èƒ½ä¸€ç›´å¤©çœŸã€‚</p><p>ä½ å¯ä»¥é€ƒé¿ï¼Œä½†ä½ ä¸èƒ½ä¸€ç›´é€ƒé¿ã€‚</p><p class='note note-primary'>  <font size='4'>äººç”Ÿå°±æ˜¯æ°¸æ— æ­¢å¢ƒçš„å¾’åŠ³ï¼Œä½†æ­£æ˜¯å› ä¸ºä¸€åˆ‡çš†æ— æ„ä¹‰ï¼Œæ‰€ä»¥ã€Œæ´»ç€ã€çš„è¿™ä¸ªç¬é—´ï¼Œè¿™ä¸ªå…‰èŠ’æ‰ä¼šæ— æ¯”çè´µï¼Œå› ä¸ºé‚£ä¸ªç¬é—´æ˜¯åªå±äºé‚£ä¸ªäººè‡ªå·±çš„ã€‚</font></p><center><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202202201025436.png" alt="" style="zoom: 50%;" /></center>]]></content>
    
    
    <categories>
      
      <category>å¨±ä¹</category>
      
      <category>åŠ¨æ¼«</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ¼‚æµå°‘å¹´</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>GDBè°ƒè¯•å­¦ä¹ </title>
    <link href="/2022/02/16/2022-02/2022-02-16%20GDB%E8%B0%83%E8%AF%95%E5%AD%A6%E4%B9%A0/"/>
    <url>/2022/02/16/2022-02/2022-02-16%20GDB%E8%B0%83%E8%AF%95%E5%AD%A6%E4%B9%A0/</url>
    
    <content type="html"><![CDATA[<h1 id="ç®€ä»‹"><a class="markdownIt-Anchor" href="#ç®€ä»‹"></a> ç®€ä»‹</h1><p>GDBæ˜¯ä¸€ä¸ªç”±GNUå¼€æºç»„ç»‡å‘å¸ƒçš„ã€UNIX / LINUXæ“ä½œç³»ç»Ÿä¸‹çš„ã€åŸºäºå‘½ä»¤è¡Œçš„ã€åŠŸèƒ½å¼ºå¤§çš„ç¨‹åºè°ƒè¯•å·¥å…·ã€‚ å¯¹äºä¸€åLinuxä¸‹å·¥ä½œçš„c/c++ç¨‹åºå‘˜ï¼Œgdbæ˜¯å¿…ä¸å¯å°‘çš„å·¥å…·ã€‚æ ‡å‡†çš„ GDB æ˜¯çº¯å‘½ä»¤è¡Œå¼çš„ï¼Œä½†ä¹Ÿæœ‰ä¸€äº›åŸºäºå®ƒçš„å›¾å½¢åŒ–å·¥å…·ï¼ˆæ¯”å¦‚ DDDã€Data Display Debuggerï¼‰ï¼Œä½†ç”¨å¥½ GDB å‘½ä»¤è¡Œè°ƒè¯•ï¼Œè¿˜æ˜¯æˆ‘ä»¬çš„ä¸€é¡¹åŸºæœ¬ç´ è´¨ã€‚</p><p>**GDB ä¸ä»…æ˜¯ä¸€ä¸ªè°ƒè¯•å·¥å…·ï¼Œå®ƒä¹Ÿæ˜¯ä¸€ä¸ªå­¦ä¹ æºç çš„å¥½å·¥å…·ã€‚**å•çº¯çš„æºç æ˜¯é™æ€çš„ï¼Œè™½ç„¶ä½ å¯ä»¥åˆ†æå®ƒçš„æ•´ä½“æ¶æ„ï¼Œåœ¨å¤´è„‘é‡Œæ¨¡æ‹Ÿå‡ºå®ƒçš„å·¥ä½œæµç¨‹ï¼Œä½†è®¡ç®—æœºå®åœ¨æ˜¯å¤ªå¤æ‚äº†ï¼Œå†…å¤–éƒ¨ç¯å¢ƒå› ç´ å¾ˆå¤šï¼Œä»…é â€œäººè‚‰åˆ†æâ€å¾ˆéš¾å®Œå…¨ç†è§£å®ƒçš„é€»è¾‘ã€‚è¿™ä¸ªæ—¶å€™ï¼ŒGDB å°±æ´¾ä¸Šç”¨åœºäº†ï¼Œä»¥è°ƒè¯•æ¨¡å¼å¯åŠ¨ï¼Œä»»æ„è®¾å®šå¤–éƒ¨æ¡ä»¶ï¼Œä»æŒ‡å®šçš„å…¥å£è¿è¡Œï¼ŒæŠŠç¨‹åºæ”¾æ…¢å‡ ä¸‡å€ï¼Œç»†è‡´åœ°è§‚å¯Ÿæ¯ä¸ªå˜é‡çš„å€¼ï¼Œè·Ÿè¸ªä»£ç çš„åˆ†æ”¯å’Œæ•°æ®çš„æµå‘ï¼Œè¿™æ ·èµ°ä¸Šå‡ ä¸ªæ¥å›ä¹‹åï¼Œå†ç»“åˆæºç ï¼Œå°±èƒ½å¤Ÿå¯¹ç¨‹åºçš„æ•´ä½“æƒ…å†µâ€œäº†ç„¶äºèƒ¸â€ã€‚</p><p>æœ¬ç¯‡æ–‡ç« å°†ç®€å•åœ°ä»‹ç» GDB å¸¸è§ç”¨æ³•ï¼Œæ›´å¤šå†…å®¹å¯ä»¥å‚è€ƒä¸‹é¢çš„æ–‡ç« ï¼š</p><ul><li><a href="https://blog.csdn.net/niyaozuozuihao/article/details/91802994">linuxä¸‹gdbè°ƒè¯•æ–¹æ³•ä¸æŠ€å·§æ•´ç†</a><sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="linuxä¸‹gdbè°ƒè¯•æ–¹æ³•ä¸æŠ€å·§æ•´ç†">[1]</span></a></sup></li><li><a href="https://github.com/hellogcc/100-gdb-tips">ã€Š100ä¸ªgdbå°æŠ€å·§ã€‹</a><sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><span class="hint--top hint--rounded" aria-label="ã€Š100ä¸ªgdbå°æŠ€å·§ã€‹">[2]</span></a></sup> (å¼ºçƒˆæ¨è)</li></ul><h1 id="gdbä½¿ç”¨æµç¨‹"><a class="markdownIt-Anchor" href="#gdbä½¿ç”¨æµç¨‹"></a> GDBä½¿ç”¨æµç¨‹</h1><h2 id="1å¯åŠ¨gdbè°ƒè¯•"><a class="markdownIt-Anchor" href="#1å¯åŠ¨gdbè°ƒè¯•"></a> 1.å¯åŠ¨GDBè°ƒè¯•</h2><p>æµ‹è¯•ç¨‹åºæºä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">square</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> x * x;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">get_num</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x)</span> </span>&#123;<br>    <span class="hljs-keyword">int</span> x_2 = <span class="hljs-built_in">square</span>(x);<br>    <span class="hljs-keyword">return</span>  x_2;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-keyword">int</span> a = <span class="hljs-number">10</span>;<br>    <span class="hljs-keyword">int</span> b = <span class="hljs-built_in">get_num</span>(a);<br>&#125;<br></code></pre></td></tr></table></figure><p>å¯åŠ¨å‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">gcc test.cpp -o test # ç¼–è¯‘æºæ–‡ä»¶<br>gdb test<br>gdb -q test # -q è¡¨ç¤ºä¸æ‰“å°gdbç‰ˆæœ¬ä¿¡æ¯ï¼Œç•Œé¢è¾ƒä¸ºå¹²å‡€ï¼›<br></code></pre></td></tr></table></figure><p>æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202202160948610.png" alt="å¯åŠ¨gdb" /></p><h2 id="2æŸ¥çœ‹æºç "><a class="markdownIt-Anchor" href="#2æŸ¥çœ‹æºç "></a> 2.æŸ¥çœ‹æºç </h2><p><strong>list(ç®€å†™ l)</strong>ï¼š æŸ¥çœ‹æºç¨‹åºä»£ç ï¼Œé»˜è®¤æ˜¾ç¤º10è¡Œï¼ŒæŒ‰å›è½¦é”®æˆ–ç»§ç»­è¾“å…¥<code>l</code>æŸ¥çœ‹ä¸‹10è¡Œã€‚</p><p>æ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202202160951660.png" alt="list æŸ¥çœ‹æºç¨‹åºä»£ç " /></p><h2 id="3è¿è¡Œç¨‹åº"><a class="markdownIt-Anchor" href="#3è¿è¡Œç¨‹åº"></a> 3.è¿è¡Œç¨‹åº</h2><p><strong>run(ç®€å†™ r)</strong> ï¼šè¿è¡Œç¨‹åºç›´åˆ°é‡åˆ° ç»“æŸæˆ–è€…é‡åˆ°æ–­ç‚¹ç­‰å¾…ä¸‹ä¸€ä¸ªå‘½ä»¤ï¼›<br />æ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼ˆè¿™é‡Œæˆ‘æ²¡æœ‰è®¾ç½®æ–­ç‚¹ï¼Œæ‰€ä»¥ç¨‹åºç›´æ¥è¿è¡Œåˆ°ç»“æŸï¼‰ï¼š</p><p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202202160953401.png" alt="run è¿è¡Œç¨‹åº" /></p><h2 id="4è®¾ç½®æ–­ç‚¹"><a class="markdownIt-Anchor" href="#4è®¾ç½®æ–­ç‚¹"></a> 4.è®¾ç½®æ–­ç‚¹</h2><p><strong>break(ç®€å†™ b)</strong> ï¼šå‘½ä»¤æ ¼å¼ <code>b è¡Œå·</code>ï¼Œåœ¨æŸè¡Œè®¾ç½®æ–­ç‚¹ï¼›<br /><strong>info breakpoints</strong> (ç®€å†™ <code>i b</code>) ï¼šæ˜¾ç¤ºæ–­ç‚¹ä¿¡æ¯</p><ul><li>Numï¼š æ–­ç‚¹ç¼–å·</li><li>Typeï¼šç±»å‹ï¼Œbreakpoint æˆ–è€… watchpoint</li><li>Dispï¼šæ–­ç‚¹æ‰§è¡Œä¸€æ¬¡ä¹‹åæ˜¯å¦æœ‰æ•ˆ kepï¼šæœ‰æ•ˆ disï¼šæ— æ•ˆ</li><li>Enbï¼š å½“å‰æ–­ç‚¹æ˜¯å¦æœ‰æ•ˆ yï¼šæœ‰æ•ˆ nï¼šæ— æ•ˆ</li><li>Addressï¼šå†…å­˜åœ°å€</li><li>Whatï¼šä½ç½®</li></ul><p>æ¼”ç¤ºæ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202202160957555.png" alt="b è®¾ç½®æ–­ç‚¹" /></p><h2 id="5å•æ­¥æ‰§è¡Œ"><a class="markdownIt-Anchor" href="#5å•æ­¥æ‰§è¡Œ"></a> 5.å•æ­¥æ‰§è¡Œ</h2><p>é¦–å…ˆéœ€è¦è¾“å…¥<code>run</code>å¯åŠ¨ç¨‹åºï¼Œè¿è¡Œåˆ°ç¬¬ä¸€ä¸ªæ–­ç‚¹å¤„ï¼Œç„¶åå¯ä»¥é€‰æ‹©<code>step</code>å•æ­¥è°ƒè¯•ï¼ˆå¦‚æœæœ‰å‡½æ•°è°ƒç”¨åˆ™è¿›å…¥å‡½æ•°ï¼‰ï¼Œ<code>next</code>å•æ­¥è·Ÿè¸ªç¨‹åºï¼ˆé‡åˆ°å‡½æ•°è°ƒç”¨ï¼Œç›´æ¥è°ƒç”¨å‡½æ•°ï¼Œä¸ä¼šè¿›å…¥å‡½æ•°ä½“å†…ï¼‰ï¼Œ<code>continue</code>ç»§ç»­è¿è¡Œåˆ°ä¸‹ä¸€ä¸ªæ–­ç‚¹å¤„ã€‚</p><p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202202161026973.png" alt="æ‰§è¡Œç¨‹åº" /></p><hr /><p>ç¨‹åºè¿è¡Œçš„ç›¸å…³å‘½ä»¤å¦‚ä¸‹ï¼š</p><ul><li><strong>run</strong>ï¼šç®€è®°ä¸º r ï¼Œå…¶ä½œç”¨æ˜¯è¿è¡Œç¨‹åºï¼Œå½“é‡åˆ°æ–­ç‚¹åï¼Œç¨‹åºä¼šåœ¨æ–­ç‚¹å¤„åœæ­¢è¿è¡Œï¼Œç­‰å¾…ç”¨æˆ·è¾“å…¥ä¸‹ä¸€æ­¥çš„å‘½ä»¤ã€‚</li><li><strong>continue</strong> ï¼ˆç®€å†™c ï¼‰ï¼šç»§ç»­æ‰§è¡Œï¼Œåˆ°ä¸‹ä¸€ä¸ªæ–­ç‚¹å¤„ï¼ˆæˆ–è¿è¡Œç»“æŸï¼‰</li><li><strong>next</strong>ï¼šï¼ˆç®€å†™ nï¼‰ï¼Œå•æ­¥è·Ÿè¸ªç¨‹åºï¼Œå½“é‡åˆ°å‡½æ•°è°ƒç”¨æ—¶ï¼Œä¹Ÿä¸è¿›å…¥æ­¤å‡½æ•°ä½“ï¼›æ­¤å‘½ä»¤åŒstep çš„ä¸»è¦åŒºåˆ«æ˜¯ï¼Œstep é‡åˆ°ç”¨æˆ·è‡ªå®šä¹‰çš„å‡½æ•°ï¼Œå°†æ­¥è¿›åˆ°å‡½æ•°ä¸­å»è¿è¡Œï¼Œè€Œ next åˆ™ç›´æ¥è°ƒç”¨å‡½æ•°ï¼Œä¸ä¼šè¿›å…¥åˆ°å‡½æ•°ä½“å†…ã€‚</li><li><strong>step</strong> ï¼ˆç®€å†™sï¼‰ï¼šå•æ­¥è°ƒè¯•å¦‚æœæœ‰å‡½æ•°è°ƒç”¨ï¼Œåˆ™è¿›å…¥å‡½æ•°ï¼›ä¸å‘½ä»¤nä¸åŒï¼Œnæ˜¯ä¸è¿›å…¥è°ƒç”¨çš„å‡½æ•°çš„</li><li><strong>until</strong>ï¼šå½“ä½ åŒå€¦äº†åœ¨ä¸€ä¸ªå¾ªç¯ä½“å†…å•æ­¥è·Ÿè¸ªæ—¶ï¼Œè¿™ä¸ªå‘½ä»¤å¯ä»¥è¿è¡Œç¨‹åºç›´åˆ°é€€å‡ºå¾ªç¯ä½“ã€‚</li><li><strong>until+è¡Œå·</strong>ï¼š è¿è¡Œè‡³æŸè¡Œï¼Œä¸ä»…ä»…ç”¨æ¥è·³å‡ºå¾ªç¯</li><li><strong>finish</strong>ï¼š è¿è¡Œç¨‹åºï¼Œç›´åˆ°å½“å‰å‡½æ•°å®Œæˆè¿”å›ï¼Œå¹¶æ‰“å°å‡½æ•°è¿”å›æ—¶çš„å †æ ˆåœ°å€å’Œè¿”å›å€¼åŠå‚æ•°å€¼ç­‰ä¿¡æ¯ã€‚</li><li><strong>call å‡½æ•°(å‚æ•°)</strong>ï¼šè°ƒç”¨ç¨‹åºä¸­å¯è§çš„å‡½æ•°ï¼Œå¹¶ä¼ é€’â€œå‚æ•°â€ï¼Œå¦‚ï¼šcall gdb_test(55)</li></ul><h2 id="6æŸ¥çœ‹å˜é‡"><a class="markdownIt-Anchor" href="#6æŸ¥çœ‹å˜é‡"></a> 6.æŸ¥çœ‹å˜é‡</h2><ul><li>print ï¼šæ‰“å°å˜é‡æˆ–è¡¨è¾¾å¼çš„å€¼</li><li>whatis ï¼šæŸ¥è¯¢å˜é‡æˆ–å‡½æ•°</li><li>pt ï¼šè·Ÿwhatisä½œç”¨ç±»ä¼¼</li><li>displayï¼šåœ¨å•æ­¥è°ƒè¯•çš„æ—¶å€™å¾ˆæœ‰ç”¨ï¼Œä½¿ç”¨displayå‘½ä»¤è®¾ç½®ä¸€ä¸ªè¡¨è¾¾å¼åï¼Œå®ƒå°†åœ¨æ¯æ¬¡å•æ­¥è¿›è¡ŒæŒ‡ä»¤åï¼Œç´§æ¥ç€è¾“å‡ºè¢«è®¾ç½®çš„è¡¨è¾¾å¼åŠå€¼ã€‚<ul><li>å¯ä»¥é€šè¿‡info dispalyï¼ŒæŸ¥çœ‹å½“å‰è¢«è®¾ç½®çš„å˜é‡ï¼Œç„¶åå¯ä»¥ç”¨undisplay numï¼ˆå˜é‡å¯¹åº”çš„ç¼–å·ï¼‰å–æ¶ˆè®¾ç½®</li></ul></li></ul><p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202202161039792.png" alt="æŸ¥çœ‹å˜é‡" /></p><h2 id="7é€€å‡ºgdb"><a class="markdownIt-Anchor" href="#7é€€å‡ºgdb"></a> 7.é€€å‡ºGDB</h2><p>ä½¿ç”¨<code>quit</code>å‘½ä»¤é€€å‡ºå³å¯ã€‚</p><p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202202161041935.png" alt="é€€å‡ºgdb" /></p><h1 id="gdbå¸¸ç”¨å‘½ä»¤"><a class="markdownIt-Anchor" href="#gdbå¸¸ç”¨å‘½ä»¤"></a> GDBå¸¸ç”¨å‘½ä»¤</h1><p>ä¸‹é¢åˆ—å‡ºæœ€å¸¸ç”¨çš„GDBå‘½ä»¤ï¼š</p><ul><li><p>ptï¼šæŸ¥çœ‹å˜é‡çš„çœŸå®ç±»å‹ï¼Œä¸å— typedef çš„å½±å“ã€‚</p></li><li><p>btï¼šæ˜¾ç¤ºå½“å‰è°ƒç”¨å †æ ˆã€‚</p></li><li><p>up/downï¼šåœ¨å‡½æ•°è°ƒç”¨æ ˆé‡Œä¸Šä¸‹ç§»åŠ¨ã€‚æˆ–è€…ä½¿ç”¨<code>frame å‡½æ•°å¸§å·</code>è·³è½¬ã€‚</p></li><li><p>finï¼šç›´æ¥è¿è¡Œåˆ°å‡½æ•°ç»“æŸã€‚</p></li><li><p>i bï¼šæŸ¥çœ‹æ‰€æœ‰çš„æ–­ç‚¹ä¿¡æ¯ã€‚</p></li><li><p>i localsï¼šæŸ¥çœ‹å½“å‰å †æ ˆé¡µçš„æ‰€æœ‰å˜é‡ã€‚</p></li><li><p>whï¼šå¯åŠ¨â€œå¯è§†åŒ–è°ƒè¯•â€ã€‚è¿™ä¸ªæ˜¯æˆ‘æœ€å–œæ¬¢çš„å‘½ä»¤ï¼Œå¯ä»¥æŠŠå±å¹•åˆ†æˆä¸Šä¸‹ä¸¤ä¸ªçª—å£ï¼Œä¸Šé¢æ˜¾ç¤ºæºç ï¼Œä¸‹é¢æ˜¯ GDB å‘½ä»¤è¾“å‡ºï¼Œä¸å¿…å†ç”¨â€œlâ€é¢‘ç¹åœ°åˆ—å‡ºæºç äº†ï¼Œèƒ½å¤Ÿå¤§å¤§æé«˜è°ƒè¯•çš„æ•ˆç‡ã€‚</p><ul><li>ctrl x + a ï¼šé€€å‡ºæˆ–è¿›å…¥å¯è§†åŒ–æ¨¡å¼</li></ul></li></ul><h1 id="åˆ†æcoredump"><a class="markdownIt-Anchor" href="#åˆ†æcoredump"></a> åˆ†æCoreDump</h1><p>åœ¨çœŸå®ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œç¨‹åºå¯èƒ½ä¼šå´©æºƒè€Œäº§ç”ŸCoreDumpæ–‡ä»¶ï¼Œæ­¤æ—¶æˆ‘ä»¬é€šå¸¸å°±éœ€è¦ç”¨gdbæ¥è°ƒè¯•CoreDumpæ–‡ä»¶ï¼Œåˆ†æç¨‹åºå´©æºƒçš„åŸå› ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæ¥æ¨¡æ‹Ÿè¿™ä¸€è¿‡ç¨‹ã€‚é¦–å…ˆéœ€è¦ä¿®æ”¹ä¸‹æºä»£ç ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">square</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> x * x;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">get_num</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x)</span> </span>&#123;<br>    <span class="hljs-keyword">int</span> x_2 = <span class="hljs-built_in">square</span>(x);<br>    <span class="hljs-keyword">return</span>  x_2;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-keyword">int</span> a = <span class="hljs-number">10</span>;<br>    <span class="hljs-keyword">int</span> b = <span class="hljs-built_in">get_num</span>(a);<br>    <span class="hljs-keyword">int</span>* p = <span class="hljs-literal">NULL</span>;<br>    *p = <span class="hljs-number">1</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç„¶åç¼–è¯‘ç”Ÿæˆæ–°çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">gcc -g test.cpp -o test6<br></code></pre></td></tr></table></figure><p>ç„¶åéœ€è¦ä¿®æ”¹ä¸‹é…ç½®<sup id="fnref:3" class="footnote-ref"><a href="#fn:3" rel="footnote"><span class="hint--top hint--rounded" aria-label="è®©ç¨‹åºå´©æºƒåç”ŸæˆCore Dump">[3]</span></a></sup>ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> ä½œç”¨æ˜¯è®©ç¨‹åºå´©æºƒæ˜¯äº§ç”Ÿçš„core dumpæ–‡ä»¶å¤§å°æ²¡æœ‰é™åˆ¶ï¼Œé»˜è®¤æ˜¯0è¡¨ç¤ºä¸ç”Ÿæˆcore dumpæ–‡ä»¶</span><br>ulimit -c unlimited<br></code></pre></td></tr></table></figure><p>ç„¶åæ‰§è¡Œä¿®æ”¹åçš„ç¨‹åºï¼Œå‘ç”Ÿæ®µé”™è¯¯ï¼š</p><p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202202161515053.png" alt="ç¨‹åºå´©æºƒå‘ç”Ÿæ®µé”™è¯¯" /></p><p>ä½†å¥‡æ€ªçš„æ˜¯ï¼Œå¹¶æ²¡æœ‰ç”Ÿæˆcoreæ–‡ä»¶ï¼Œæ˜æ˜æˆ‘å·²ç»ä¿®æ”¹äº†ulimitã€‚åæ¥å‡ ç»æ³¢æŠ˜ï¼Œå‘ç°äº†åŸå› ï¼Œå‚è€ƒ<a href="https://baijiahao.baidu.com/s?id=1599347824327158577&amp;wfr=spider&amp;for=pc">åœ¨Linuxä¸Šåˆ©ç”¨core dumpå’ŒGDBè°ƒè¯•segfault</a><sup id="fnref:4" class="footnote-ref"><a href="#fn:4" rel="footnote"><span class="hint--top hint--rounded" aria-label="åœ¨Linuxä¸Šåˆ©ç”¨core dumpå’ŒGDBè°ƒè¯•segfault">[4]</span></a></sup>ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯Ubuntué»˜è®¤å¿½ç•¥éUbuntuè½¯ä»¶åŒ…çš„äºŒè¿›åˆ¶æ–‡ä»¶çš„å´©æºƒæ—¥å¿—ï¼Œä¹Ÿå°±ä¸ä¼šäº§ç”Ÿcore dumpæ–‡ä»¶ã€‚è°ƒæ•´çš„åšæ³•ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯é‡æ–°è®¾ç½®kernel.core_patternçš„å€¼ï¼ˆè¯¥å€¼è¡¨ç¤ºcore dumpæ–‡ä»¶çš„è¾“å‡ºç›®å½•ï¼‰ï¼Œæ‰§è¡Œä¸‹é¢å‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo sysctl -w kernel.core_pattern=/tmp/core/core-%e.%p.%h.%t<br></code></pre></td></tr></table></figure><p>ç°åœ¨å†æ‰§è¡Œä¹‹å‰çš„ç¨‹åºï¼Œå°±å¯ä»¥åœ¨å¯¹åº”ç›®å½•ä¸‹ç”Ÿæˆcore dumpæ–‡ä»¶ï¼Œå¹¶å¯ä»¥ç”¨gdbæ¥è¿›è¡Œè°ƒè¯•åˆ†æï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¯ä»¥çœ‹åˆ°å‡ºé”™åŸå› åœ¨æºä»£ç çš„ç¬¬15è¡Œï¼Œå¯¹ä¸€ä¸ªç©ºæŒ‡é’ˆèµ‹å€¼ï¼š</p><p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202202161511784.png" alt="è°ƒè¯•coreæ–‡ä»¶" /></p><section class="footnotes"><h1>å¤‡æ³¨/å‚è€ƒ</h1><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a href="https://blog.csdn.net/niyaozuozuihao/article/details/91802994">linuxä¸‹gdbè°ƒè¯•æ–¹æ³•ä¸æŠ€å·§æ•´ç†</a><a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a href="https://github.com/hellogcc/100-gdb-tips">ã€Š100ä¸ªgdbå°æŠ€å·§ã€‹</a><a href="#fnref:2" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:3" class="footnote-text"><span><a href="https://www.cnblogs.com/chingliu/archive/2011/07/25/2223815.html">è®©ç¨‹åºå´©æºƒåç”ŸæˆCore Dump</a><a href="#fnref:3" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:4" class="footnote-text"><span><a href="https://baijiahao.baidu.com/s?id=1599347824327158577&amp;wfr=spider&amp;for=pc">åœ¨Linuxä¸Šåˆ©ç”¨core dumpå’ŒGDBè°ƒè¯•segfault</a><a href="#fnref:4" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºçŸ¥è¯†</category>
      
      <category>linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>GDB</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€éªšæ“ä½œã€‘MacOSä¸Šè‡ªåŠ¨å‹ç¼©æˆªå›¾</title>
    <link href="/2022/02/15/2022-02/2022-02-15%20%E3%80%90%E9%AA%9A%E6%93%8D%E4%BD%9C%E3%80%91MacOS%E4%B8%8A%E8%87%AA%E5%8A%A8%E5%8E%8B%E7%BC%A9%E6%88%AA%E5%9B%BE/"/>
    <url>/2022/02/15/2022-02/2022-02-15%20%E3%80%90%E9%AA%9A%E6%93%8D%E4%BD%9C%E3%80%91MacOS%E4%B8%8A%E8%87%AA%E5%8A%A8%E5%8E%8B%E7%BC%A9%E6%88%AA%E5%9B%BE/</url>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a class="markdownIt-Anchor" href="#å‰è¨€"></a> å‰è¨€</h1><p>ä¹‹å‰å†™åšå®¢ä¸€ç›´æ˜¯ç”¨ picgo + github ä½œä¸º typoraçš„å›¾åºŠï¼Œä½†æ˜¯æœ‰æ—¶å€™ç½‘ä¸å¤ªè¡Œï¼Œå›¾ç‰‡æ˜¾ç¤ºå¾—å¾ˆæ…¢ã€‚æ‰€ä»¥åæ¥æ¢äº† gitee ä½œä¸ºå›¾åºŠï¼Œä½†æ˜¯å‘ç°ä»ç„¶æœ‰æ—¶å€™å›¾ç‰‡æ— æ³•æ˜¾ç¤ºï¼Œä½†æ˜¯é€šè¿‡æµè§ˆå™¨çš„URLè®¿é—®æ²¡æœ‰é—®é¢˜ï¼Œè¿™å°±è®©æˆ‘å¾ˆç–‘æƒ‘ï¼Œåæ¥æŸ¥é˜…èµ„æ–™å‘ç°ï¼Œgitee å±…ç„¶ä¸æ”¯æŒ 1M ä»¥ä¸Šå›¾ç‰‡çš„æŸ¥çœ‹<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="è®°ä¸€æ¬¡cssæ–‡ä»¶å¼•èµ·çš„è·¨åŸŸé—®é¢˜ï¼ˆgiteeå›¾ç‰‡è¶…è¿‡1Méœ€è¦ç™»å½•æŸ¥çœ‹) â†©">[1]</span></a></sup>ï¼Œè¿™å¯å¤ªå‘äº†ã€‚</p><center><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202202152050052.jpeg" alt="æƒŠäº†" style="zoom: 25%;" /></center><p>ç„¶åæˆ‘å°±æƒ³ç€èƒ½ä¸èƒ½åšåˆ°è‡ªåŠ¨å‹ç¼©æˆªå›¾å¤§å°ï¼Œæ¥å®ç°æ›²çº¿æ•‘å›½ï¼Œé€šè¿‡æŸ¥é˜…ç½‘ä¸Šèµ„æ–™ï¼Œè¿˜çœŸè®©æˆ‘æ‰¾åˆ°äº†æ–¹æ³•ã€‚</p><h1 id="è‡ªåŠ¨å‹ç¼©æˆªå›¾"><a class="markdownIt-Anchor" href="#è‡ªåŠ¨å‹ç¼©æˆªå›¾"></a> è‡ªåŠ¨å‹ç¼©æˆªå›¾</h1><p>å®ç°æ–¹æ³•å‚è€ƒè¿™ç¯‡æ–‡ç« ï¼š<a href="https://depp.wang/2020/08/07/how-to-automatically-compress-screenshot-size-in-macos/">åœ¨ macOS ä¸­ï¼Œå¦‚ä½•è‡ªåŠ¨å‹ç¼©æˆªå±å›¾ç‰‡å¤§å°</a><sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><span class="hint--top hint--rounded" aria-label="åœ¨ macOS ä¸­ï¼Œå¦‚ä½•è‡ªåŠ¨å‹ç¼©æˆªå±å›¾ç‰‡å¤§å°">[2]</span></a></sup>ï¼Œé‡Œé¢å†™å¾—å¾ˆè¯¦ç»†äº†ï¼Œæˆ‘è¿™é‡Œå°±ç®€å•åœ°æè¿°ä¸‹å®ç°åŸç†ï¼Œå¹¶æ¼”ç¤ºå®é™…æ•ˆæœã€‚</p><h2 id="å®ç°åŸç†"><a class="markdownIt-Anchor" href="#å®ç°åŸç†"></a> å®ç°åŸç†</h2><p>æˆ‘ä»¬éƒ½çŸ¥é“æœ‰ä¸€äº›åŠæ³•èƒ½å¤Ÿè°ƒæ•´å›¾ç‰‡å¤§å°ï¼Œæ¯”å¦‚åˆ©ç”¨MacOSä¸Šçš„é¢„è§ˆï¼Œå¯¹å›¾ç‰‡è¿›è¡Œå¯¼å‡ºï¼Œå°±å¯ä»¥å®ç°å‹ç¼©å›¾ç‰‡å¤§å°ã€‚è¿˜å¯ä»¥é€šè¿‡å…¶ä»–è½¯ä»¶ï¼Œæˆ–è€…å‘½ä»¤è¡Œå·¥å…·ï¼ˆä¾‹å¦‚pngquantï¼ŒImageMagickï¼‰æ¥å‹ç¼©å›¾ç‰‡ã€‚ä½†æ˜¯ä¸Šé¢å¦‚æœæ‰‹åŠ¨æ“ä½œå°±æœ‰ç‚¹ç¹çäº†ï¼Œ æ‰€ä»¥å…³é”®åœ¨äºå¦‚ä½•å®ç°â€œ<strong>è‡ªåŠ¨</strong>â€çš„æ•ˆæœã€‚</p><p>æåˆ°â€œè‡ªåŠ¨â€ï¼Œé‚£ä¹ˆè‡ªç„¶å°±éœ€è¦è‡ªåŠ¨çš„å·¥ä½œæµè½¯ä»¶äº†ï¼Œä¹Ÿå°±æ˜¯ Hazel æˆ–è€…  Automatorï¼Œåˆ©ç”¨å·¥ä½œæµè½¯ä»¶ï¼Œæ¥è‡ªåŠ¨åœ°å¯¹æˆªå›¾è¿›è¡Œå‹ç¼©ã€‚å®Œæ•´æµç¨‹å¦‚ä¸‹ï¼š</p><ol><li>å°†æˆªå›¾ä¿å­˜åˆ°ä¸€ä¸ªç›®å½•ä¸­ï¼›</li><li>åˆ©ç”¨ Hazel æˆ–è€… Automator å·¥ä½œæµè½¯ä»¶ï¼Œè‡ªåŠ¨è§¦å‘è„šæœ¬ï¼›</li><li>åœ¨è„šæœ¬ä¸­ï¼Œä½¿ç”¨å‘½ä»¤è¡Œå·¥å…·å¯¹æˆªå›¾è¿›è¡Œå‹ç¼©å¹¶ä¿å­˜ï¼›</li><li>å°†å‹ç¼©åçš„å›¾ç‰‡å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼ˆä¹Ÿæ˜¯åˆ©ç”¨è„šæœ¬å®Œæˆï¼‰ï¼›</li><li>å±å¹•é€šçŸ¥å›¾ç‰‡å‹ç¼©å®Œæˆï¼›</li><li>ï¼ˆå¯é€‰ï¼‰å°†å‹ç¼©åçš„å›¾ç‰‡åˆ é™¤ã€‚</li></ol><h2 id="å®é™…æ¼”ç¤º"><a class="markdownIt-Anchor" href="#å®é™…æ¼”ç¤º"></a> å®é™…æ¼”ç¤º</h2><p>æ¥ä¸‹æ¥æˆ‘å°†æ¼”ç¤ºå¦‚ä½•é…ç½® Hazel ï¼ŒAutomator å¯ä»¥å‚è€ƒä¸Šé¢åšæ–‡çš„å†…å®¹ã€‚</p><ol><li>é¦–å…ˆé€‰æ‹©ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œä½œä¸ºå­˜æ”¾æˆªå›¾çš„ç›®å½•ã€‚</li></ol><center><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202202152110926.png" alt="é€‰æ‹©æˆªå›¾ç›®å½•" style="zoom: 50%;" /></center>2. ç„¶åæ·»åŠ è§„åˆ™<center><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202202152112016.png" alt="æ·»åŠ è§„åˆ™" style="zoom:50%;" /></center>3. é…ç½®è§„åˆ™ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º<p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202202152113647.png" alt="é…ç½®è§„åˆ™" /></p><ol start="4"><li>å…·ä½“è„šæœ¬å†…å®¹å¦‚ä¸‹æ‰€ç¤ºï¼š</li></ol><p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202202152115294.png" alt="å‹ç¼©å›¾ç‰‡å¹¶å¤åˆ¶åˆ°å‰ªè´´æ¿" /></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">pngquant 128 --skip-if-larger --strip --ext=.png --force &quot;$1&quot;<br>osascript -e &quot;set the clipboard to (read (POSIX file \&quot;$(perl -e &quot;print glob(&#x27;$1&#x27;)&quot;)\&quot;) as &#123;Â«class PNGfÂ»&#125;)&quot;<br></code></pre></td></tr></table></figure><p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202202152116588.png" alt="å±å¹•æç¤º" /></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">The compressed image `file` has been copied to the clipboard.<br></code></pre></td></tr></table></figure><p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202202152116561.png" alt="åˆ é™¤æˆªå›¾" /></p><p>æœ€ååˆ é™¤æˆªå›¾æ˜¯å¯é€‰çš„ï¼Œå› ä¸ºåœ¨typoraé‡Œå›¾ç‰‡å¤åˆ¶åè‡ªåŠ¨ä¸Šä¼ ï¼Œæ‰€ä»¥æˆ‘å°±è®¾ç½®äº†åˆ é™¤æˆªå›¾ã€‚</p><hr /><p>è‡³æ­¤å°±å®ç°äº†è‡ªåŠ¨å‹ç¼©æˆªå›¾çš„æ•ˆæœï¼Œåªè¦æ¯æ¬¡æˆªå›¾çš„æ—¶å€™ä¿å­˜åˆ°è®¾ç½®çš„ç›®å½•ï¼Œå°±ä¼šè‡ªåŠ¨å‹ç¼©å›¾ç‰‡ï¼Œå¹¶å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼Œç­‰å±å¹•æç¤ºâ€œå‹ç¼©å·²å®Œæˆâ€åï¼Œæˆ‘ç›´æ¥åœ¨ typora é‡Œç²˜è´´å›¾ç‰‡å³å¯ï¼Œåˆå¯ä»¥æ„‰å¿«åœ°å†™åšå®¢å–½~</p><p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202202152126405.jpeg" alt="" /></p><section class="footnotes"><h1>å¤‡æ³¨/å‚è€ƒ</h1><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a href="https://www.cnblogs.com/xsyz/p/14043564.html">è®°ä¸€æ¬¡cssæ–‡ä»¶å¼•èµ·çš„è·¨åŸŸé—®é¢˜ï¼ˆgiteeå›¾ç‰‡è¶…è¿‡1Méœ€è¦ç™»å½•æŸ¥çœ‹)</a> â†©<a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a href="https://depp.wang/2020/08/07/how-to-automatically-compress-screenshot-size-in-macos/">åœ¨ macOS ä¸­ï¼Œå¦‚ä½•è‡ªåŠ¨å‹ç¼©æˆªå±å›¾ç‰‡å¤§å°</a><a href="#fnref:2" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºçŸ¥è¯†</category>
      
      <category>éªšæ“ä½œç³»åˆ—</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MacOSæŠ€å·§</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€99%ç¯å¢ƒæ­å»ºç³»åˆ—ã€‘é˜¿é‡Œäº‘æœåŠ¡å™¨é…ç½®Hexoåšå®¢</title>
    <link href="/2022/02/13/2022-02/2022-02-13%20%E9%98%BF%E9%87%8C%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AEHexo%E5%8D%9A%E5%AE%A2/"/>
    <url>/2022/02/13/2022-02/2022-02-13%20%E9%98%BF%E9%87%8C%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AEHexo%E5%8D%9A%E5%AE%A2/</url>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a class="markdownIt-Anchor" href="#å‰è¨€"></a> å‰è¨€</h1><p>è¿™ä¸ªç¯å¢ƒæ­å»ºç³»åˆ—å¥½ä¹…æ²¡æ›´äº†ï¼Œæ‰€ä»¥è¶æ­¤æœºä¼šéš¾å¾—å¡«å‘ä¸€ä¸‹ã€‚</p><p>ä¹‹å‰ä¸€ç›´ç™½å«–æ˜¯Github pagesæ¥éƒ¨ç½²è‡ªå·±çš„åšå®¢ï¼Œç„¶åè§‰å¾—è¿˜æ˜¯æœ‰ä¸€ä¸ªè‡ªå·±çš„æœåŠ¡å™¨æ›´å¥½ä¸€ç‚¹ï¼Œè¿˜èƒ½å­¦ä¹ ç›¸å…³çŸ¥è¯†ã€‚æ‰€ä»¥è¶è¿˜æ²¡å›å­¦æ ¡ï¼ŒæŠŠè‡ªå·±çš„åšå®¢éƒ¨ç½²åˆ°è‡ªå·±çš„æœåŠ¡å™¨ä¸Šï¼Œæ¯•ç«Ÿä¹‹å‰è´­ä¹°çš„åŸŸåä¸€ç›´æ²¡ç”¨ä¸Šï¼Œç”šæ˜¯å¿ƒç—›å•Šã€‚</p><p>è¿™æ¬¡æˆ‘æ˜¯åœ¨é˜¿é‡Œäº‘ä¸Šä¹°çš„æœåŠ¡å™¨ï¼Œä¸»è¦æ˜¯å› ä¸ºä¹‹å‰åœ¨é˜¿é‡Œäº‘ä¸Šä¹°çš„åŸŸåï¼Œæ‰€ä»¥è¿™æ¬¡æ­å»ºçš„è¿‡ç¨‹å°±ç”¨é˜¿é‡Œäº‘è¿›è¡Œè¯´æ˜ã€‚</p><h1 id="æ–°å»ºç”¨æˆ·"><a class="markdownIt-Anchor" href="#æ–°å»ºç”¨æˆ·"></a> æ–°å»ºç”¨æˆ·</h1><p>è¿™é‡Œä»¥é˜¿é‡Œäº‘çš„æœåŠ¡å™¨æ¥ä¸¾ä¾‹ã€‚</p><p>é€šå¸¸åˆ›å»ºå¥½æœåŠ¡å™¨å®ä¾‹åï¼Œåœ¨é‡ç½®ä¸€ä¸‹å®ä¾‹çš„å¯†ç ï¼Œå°±å¯ä»¥ç”¨rootç”¨æˆ·è¿›è¡Œsshè¿æ¥äº†ã€‚ä½¿ç”¨rootç”¨æˆ·ç™»å½•åï¼Œæˆ‘è¿™é‡Œæ˜¯æ–°å»ºäº†ä¸€ä¸ªç”¨æˆ·ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> æ–°å»ºç”¨æˆ·</span><br>adduser zyx<br><span class="hljs-meta">#</span><span class="bash"> è®¾ç½®å¯†ç </span><br>passwd zyx<br></code></pre></td></tr></table></figure><p>ç„¶åèµ‹äºˆ<code>zyx</code>ç”¨æˆ·rootæƒé™ï¼Œå…·ä½“åšæ³•æ˜¯ç¼–è¾‘<code>/etc/sudoers</code>ï¼Œåœ¨rootç”¨æˆ·ä¸‹æ–¹æ·»åŠ æ–°å¢çš„ç”¨æˆ·åï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</p><center><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202202131602517.png" alt="image-20220213160236426" style="zoom: 67%;" /></center><h1 id="sshå…å¯†ç™»å½•"><a class="markdownIt-Anchor" href="#sshå…å¯†ç™»å½•"></a> sshå…å¯†ç™»å½•</h1><p>åœ¨æœ¬åœ°åˆ›å»ºå¯†é’¥ï¼Œä½¿ç”¨å‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ssh-keygen -t rsa<br></code></pre></td></tr></table></figure><p>ç„¶åä¸€ç›´å›è½¦ï¼Œåˆ›å»ºä¸€ä¸ªå¯†é’¥ã€‚å› ä¸ºæˆ‘æ˜¯macç³»ç»Ÿï¼Œç”Ÿæˆçš„å¯†é’¥æ–‡ä»¶ä½ç½®åœ¨<code>~/.ssh/id_rsa.pub</code></p><p>ç„¶åå›åˆ°æœåŠ¡å™¨ç«¯ï¼Œåˆ›å»º<code>.ssh</code>ç›®å½•ï¼ˆåœ¨å½“å‰ç”¨æˆ·çš„~ ç›®å½•ä¸‹å³å¯ï¼‰ï¼Œå¹¶ç¼–è¾‘æ–‡ä»¶<code>.ssh/authorized_keys</code>ï¼Œå¤åˆ¶ç²˜è´´åˆšåˆšåœ¨æœ¬åœ°åˆ›å»ºå¥½çš„å¯†é’¥ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">vim .ssh/authorized_keys<br></code></pre></td></tr></table></figure><h1 id="é…ç½®ç¯å¢ƒ"><a class="markdownIt-Anchor" href="#é…ç½®ç¯å¢ƒ"></a> é…ç½®ç¯å¢ƒ</h1><p>é¦–å…ˆéœ€è¦å®‰è£…é…ç½®ä¸€ä¸‹å¼€å‘ç›¸å…³çš„è½¯ä»¶ç¯å¢ƒäº†ï¼Œä½¿ç”¨çš„å‘½ä»¤å¦‚ä¸‹<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="hexoæœ¬åœ°åšå®¢éƒ¨ç½²åˆ°äº‘æœåŠ¡å™¨">[1]</span></a></sup>ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> æ›´æ–°ä¸‹è½½æº</span><br>sudo apt-get update<br><span class="hljs-meta">#</span><span class="bash"> å®‰è£… git</span><br>sudo apt install git<br><span class="hljs-meta">#</span><span class="bash"> å®‰è£… vim</span><br>sudo apt install vim<br><span class="hljs-meta">#</span><span class="bash"> å®‰è£… node.js</span><br>sudo apt install nodejs<br><span class="hljs-meta">#</span><span class="bash"> å®‰è£… nginx</span><br>sudo apt install nginx<br></code></pre></td></tr></table></figure><p>ç„¶åå†åˆ›å»ºç½‘ç«™ç›®å½•å’Œè¿œç¨‹ä»“åº“ç›®å½•ï¼Œä½¿ç”¨å‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> åˆ›å»ºç½‘ç«™ç›®å½•ï¼Œä»¥è¿™ä¸ªç›®å½•ä½œä¸ºåšå®¢é™æ€æ–‡ä»¶çš„å­˜æ”¾ç›®å½•ï¼Œä¹‹åå†nginxé…ç½®æ–‡ä»¶é‡Œä¼šç”¨åˆ°</span><br>mkdir /home/zyx/hexo<br><span class="hljs-meta">#</span><span class="bash"> åˆ›å»ºæœåŠ¡å™¨ä¸Šçš„è¿œç¨‹ä»“åº“ç›®å½•</span><br>git init --bare blog.git<br><span class="hljs-meta">#</span><span class="bash"> æ–°å»ºé’©å­æ–‡ä»¶</span><br>vim /home/zyx/blog.git/hooks/post-receive<br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash"> ---------</span><br><span class="hljs-meta">#</span><span class="bash"> æŠŠå¦‚ä¸‹å†…å®¹ç²˜è´´è¿›å»</span><br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash">!/bin/bash</span><br>git --work-tree=/home/zyx/hexo --git-dir=/home/zyx/blog.git checkout -f<br></code></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ä¸Šé¢åˆ›å»ºè¿œç¨‹ä»“åº“çš„å‘½ä»¤ï¼Œè¿™é‡ŒåŠ äº†<code>--bare</code>å‚æ•°ï¼Œè¡¨ç¤ºåˆ›å»ºçš„æ˜¯ä¸€ä¸ªè£¸ä»“åº“ï¼Œå«ä¹‰æ˜¯è¿™ä¸ªä»“åº“åªä¿å­˜gitå†å²æäº¤çš„ç‰ˆæœ¬ä¿¡æ¯ï¼Œè€Œä¸å…è®¸ç”¨æˆ·åœ¨ä¸Šé¢è¿›è¡Œå„ç§gitæ“ä½œã€‚</p></blockquote><h1 id="å¼€æ”¾ç«¯å£"><a class="markdownIt-Anchor" href="#å¼€æ”¾ç«¯å£"></a> å¼€æ”¾ç«¯å£</h1><p>åœ¨å®‰è£…å®Œnginxå¹¶å¯åŠ¨æœåŠ¡åï¼Œåœ¨æµè§ˆå™¨ä¸­ç›´æ¥è®¿é—®æœåŠ¡å™¨çš„å…¬ç½‘ipæ˜¯å¯ä»¥çœ‹åˆ°nginxçš„æ¬¢è¿é¡µçš„ã€‚ä½†æ˜¯åœ¨å®é™…æ“ä½œä¸­å´å‘ç°ï¼Œæ— æ³•è®¿é—®ã€‚åæ¥å‘ç°æ˜¯æ²¡æœ‰å¼€æ”¾ç«¯å£ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨ECSäº‘æœåŠ¡å™¨çš„æ§åˆ¶å°ä¸­ï¼Œåœ¨â€<strong>ç½‘ç»œä¸å®‰å…¨</strong>â€œä¸­çš„â€<strong>å®‰å…¨ç»„</strong>â€œä¸­ï¼Œé€‰æ‹©å¯¹åº”çš„å®‰å…¨ç»„ï¼Œé€‰æ‹©â€<strong>é…ç½®è§„åˆ™</strong>â€œï¼Œå¼€æ”¾80ï¼ˆhttpï¼‰å’Œ443ï¼ˆhttpsï¼‰ç«¯å£ã€‚æœ€ç»ˆæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼Œæ­¤æ—¶å†è®¿é—®å…¬ç½‘ipï¼Œå°±å¯ä»¥çœ‹åˆ°nginxçš„æ¬¢è¿é¡µçš„ã€‚</p><p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202202131917400.png" alt="åŸŸåè§£ææ·»åŠ è®°å½•" /></p><h1 id="sslè¯ä¹¦"><a class="markdownIt-Anchor" href="#sslè¯ä¹¦"></a> SSLè¯ä¹¦</h1><p>åœ¨é˜¿é‡Œäº‘ä¸­ï¼Œæœç´¢â€SSLè¯ä¹¦â€œäº§å“ï¼Œé€‰è´­å…è´¹çš„â€œDVå•åŸŸåè¯ä¹¦â€ï¼Œç„¶ååœ¨æ§åˆ¶å°é‡Œåˆ›å»ºè¯ä¹¦ï¼Œå¡«ä¸Šè‡ªå·±è´­ä¹°çš„åŸŸåå’Œç›¸å…³ä¿¡æ¯å³å¯ã€‚ç­¾å‘æˆåŠŸåï¼Œå°±å¯ä»¥ä¸‹è½½è¯ä¹¦ã€‚</p><p>å› ä¸ºä¹‹åä½¿ç”¨nginxè¿›è¡Œé…ç½®ï¼Œæ‰€ä»¥æˆ‘è¿™é‡Œä¸‹è½½çš„ä¹Ÿå°±æ˜¯nginxå¯¹åº”çš„è¯ä¹¦ã€‚ä¸‹è½½åä¼šå¾—åˆ°ä¸€ä¸ªzipå‹ç¼©åŒ…ï¼Œè§£å‹åå¾—åˆ° <em>.key</em> å’Œ <em>.pem</em> ç»“å°¾çš„ä¸¤ä¸ªæ–‡ä»¶ã€‚</p><p>åœ¨nginxçš„å®‰è£…ç›®å½•ï¼ˆå°±æ˜¯nginx.confæ‰€åœ¨çš„ç›®å½•ï¼Œä¸çŸ¥é“çš„è¯å¯ä»¥é€šè¿‡<code>nginx -t</code>æ¥æŸ¥çœ‹é…ç½®æ–‡ä»¶æ‰€åœ¨ç›®å½•ï¼‰ä¸‹ï¼Œæ–°å»ºä¸€ä¸ª <em>cert</em> ç›®å½•ï¼Œå°†ä¸‹è½½çš„ä¸¤ä¸ªè¯ä¹¦æ–‡ä»¶æ”¾åˆ° <em>cert</em> ç›®å½•ä¸‹ã€‚</p><p>ç„¶åä¿®æ”¹ <strong>nginx.conf</strong> é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹é…ç½®<sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><span class="hint--top hint--rounded" aria-label="åœ¨Nginxï¼ˆæˆ–Tengineï¼‰æœåŠ¡å™¨ä¸Šå®‰è£…è¯ä¹¦">[2]</span></a></sup>ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">server</span> &#123;<br>    <span class="hljs-string">listen</span> <span class="hljs-number">80</span><span class="hljs-string">;</span><br>    <span class="hljs-string">server_name</span> <span class="hljs-string">yourdomain.com;</span> <span class="hljs-comment">#éœ€è¦å°†yourdomain.comæ›¿æ¢æˆè¯ä¹¦ç»‘å®šçš„åŸŸåï¼Œæˆ–è€…æ˜¯åŸŸåçš„ç”¨ä¸ºIP</span><br>    <span class="hljs-string">rewrite</span> <span class="hljs-string">^(.*)$</span> <span class="hljs-string">https://$host$1;</span> <span class="hljs-comment">#å°†æ‰€æœ‰HTTPè¯·æ±‚é€šè¿‡rewriteæŒ‡ä»¤é‡å®šå‘åˆ°HTTPSã€‚</span><br>    <span class="hljs-string">location</span> <span class="hljs-string">/</span> &#123;<br>        <span class="hljs-string">index</span> <span class="hljs-string">index.html</span> <span class="hljs-string">index.htm;</span><br>    &#125;<br>&#125;<br><span class="hljs-string">server</span> &#123;<br>    <span class="hljs-comment">#å¦‚æœæ‚¨ä½¿ç”¨Nginx 1.15.0åŠä»¥ä¸Šç‰ˆæœ¬ï¼Œè¯·ä½¿ç”¨listen 443 sslä»£æ›¿listen 443å’Œssl onã€‚</span><br>    <span class="hljs-string">listen</span> <span class="hljs-number">443</span> <span class="hljs-string">ssl;</span><br>    <span class="hljs-string">server_name</span> <span class="hljs-string">yourdomain.com;</span> <span class="hljs-comment">#éœ€è¦å°†yourdomain.comæ›¿æ¢æˆè¯ä¹¦ç»‘å®šçš„åŸŸåã€‚</span><br>    <span class="hljs-string">root</span> <span class="hljs-string">html;</span><br>    <span class="hljs-string">index</span> <span class="hljs-string">index.html</span> <span class="hljs-string">index.htm;</span><br>    <span class="hljs-string">ssl_certificate</span> <span class="hljs-string">cert/cert-file-name.pem;</span>   <span class="hljs-comment">#éœ€è¦å°†cert-file-name.pemæ›¿æ¢æˆå·²ä¸Šä¼ çš„è¯ä¹¦æ–‡ä»¶çš„åç§°ã€‚</span><br>    <span class="hljs-string">ssl_certificate_key</span> <span class="hljs-string">cert/cert-file-name.key;</span>   <span class="hljs-comment">#éœ€è¦å°†cert-file-name.keyæ›¿æ¢å·²ä¸Šä¼ çš„è¯ä¹¦ç§é’¥æ–‡ä»¶çš„åç§°ã€‚</span><br>    <span class="hljs-string">ssl_session_timeout</span> <span class="hljs-string">5m;</span><br>    <span class="hljs-string">ssl_ciphers</span> <span class="hljs-string">ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;</span><br>    <span class="hljs-string">ssl_protocols</span> <span class="hljs-string">TLSv1.1</span> <span class="hljs-string">TLSv1.2</span> <span class="hljs-string">TLSv1.3;</span><br>    <span class="hljs-string">ssl_prefer_server_ciphers</span> <span class="hljs-string">on;</span><br>    <span class="hljs-string">location</span> <span class="hljs-string">/</span> &#123;<br>        <span class="hljs-string">index</span> <span class="hljs-string">index.html</span> <span class="hljs-string">index.htm;</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="ç½‘ç«™å¤‡æ¡ˆ"><a class="markdownIt-Anchor" href="#ç½‘ç«™å¤‡æ¡ˆ"></a> ç½‘ç«™å¤‡æ¡ˆ</h1><h2 id="icpå¤‡æ¡ˆ"><a class="markdownIt-Anchor" href="#icpå¤‡æ¡ˆ"></a> ICPå¤‡æ¡ˆ</h2><p>åœ¨å³ä¸Šè§’æ§åˆ¶å°æ—è¾¹ï¼Œæœ‰ä¸ªâ€œICPå¤‡æ¡ˆâ€æŒ‰é’®ï¼Œç‚¹å‡»è¿™é‡Œè¿›è¡Œç½‘ç«™çš„ICPå¤‡æ¡ˆï¼ŒæŒ‰ç…§ç›¸å…³æµç¨‹æ“ä½œå³å¯<sup id="fnref:3" class="footnote-ref"><a href="#fn:3" rel="footnote"><span class="hint--top hint--rounded" aria-label="é˜¿é‡Œäº‘-ICPå¤‡æ¡ˆæŒ‡å¯¼">[3]</span></a></sup>ã€‚å¤‡æ¡ˆæ—¶é—´æœ€å¥½åœ¨å·¥ä½œæ—¥ï¼Œå¤§æ¦‚éœ€è¦ä¸€å¤©æ—¶é—´ã€‚è¿˜æœ‰ä¸€ä¸ªæ³¨æ„ç‚¹æ˜¯ï¼Œå¤‡æ¡ˆç”¨çš„æœåŠ¡å™¨æ‹¥æœ‰æ—¶é•¿å¿…é¡»<strong>æ»¡3ä¸ªæœˆ</strong>ä»¥ä¸Šï¼Œå¦åˆ™æ˜¯æ— æ³•ç”¨äºç½‘ç«™å¤‡æ¡ˆçš„ï¼Œä¹Ÿå°±æ˜¯è¯´å…è´¹ç”³è¯·çš„æœåŠ¡å™¨æ˜¯ä¸èƒ½æ‹¿æ¥åšå¤‡æ¡ˆçš„ã€‚ï¼ˆç™½å«–å…šè½æ³ªQAQï¼‰</p><p>åªæœ‰åŸŸåICPå¤‡æ¡ˆä¹‹åï¼Œæ‰èƒ½é€šè¿‡åŸŸåè®¿é—®ç½‘ç«™ï¼Œå¦åˆ™åªèƒ½é€šè¿‡å…¬ç½‘ipè¿›è¡Œè®¿é—®ã€‚<strong>è¿˜è¦è®°å¾—åœ¨åŸŸåè§£æçš„æ§åˆ¶å°é‡Œï¼Œç»™è‡ªå·±è´­ä¹°çš„åŸŸåæ·»åŠ è®°å½•ã€‚</strong></p><p class='note note-info'>æ³¨æ„è¿™é‡Œä¸ç”¨é€šè¿‡æœç´¢â€œç½‘ç«™å¤‡æ¡ˆâ€æ¥æ‰¾ï¼Œä¼šæŠŠä½ å¯¼å‘çœ¼èŠ±ç¼­ä¹±çš„äº‘å¸‚åœºï¼Œå±å®æ²¡æœ‰å¿…è¦ã€‚å¹¶ä¸”å¤‡æ¡ˆæˆåŠŸä¹‹åï¼Œæ³¨æ„è¦åœ¨è‡ªå·±çš„ç½‘ç«™é¡µé¢ä¸Šå¢åŠ å¤‡æ¡ˆçš„è„šæ³¨ã€‚</p><h2 id="å…¬å®‰è”ç½‘å¤‡æ¡ˆ"><a class="markdownIt-Anchor" href="#å…¬å®‰è”ç½‘å¤‡æ¡ˆ"></a> å…¬å®‰è”ç½‘å¤‡æ¡ˆ</h2><p>é™¤äº†å·¥ä¿¡éƒ¨çš„ICPå¤‡æ¡ˆï¼Œè¿˜éœ€è¦è¿›è¡Œ<a href="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202202211449323.png">å…¬å®‰è”ç½‘å¤‡æ¡ˆ</a>ï¼ŒåŒæ ·æŒ‰ç…§é˜¿é‡Œäº‘çš„æŒ‡å¯¼æ–‡æ¡£è¿›è¡Œæ“ä½œå³å¯<sup id="fnref:4" class="footnote-ref"><a href="#fn:4" rel="footnote"><span class="hint--top hint--rounded" aria-label="é˜¿é‡Œäº‘-å…¬å®‰è”ç½‘å¤‡æ¡ˆ">[4]</span></a></sup>ã€‚æ³¨æ„åœ¨é€‰æ‹©æœåŠ¡ç±»å‹æ—¶ï¼Œä¸è¦é€‰æ‹©â€åšå®¢ç½‘ç«™â€œï¼Œé€‰æ‹©â€wwwæœåŠ¡â€œå³å¯ï¼Œä¸ç„¶å¯èƒ½åˆéœ€è¦ç­‰å¾…ä¸‹æ¬¡å®¡æ ¸å®¡æ ¸ã€‚</p><p>å†è¡¥å……ä¸€ä¸‹ï¼Œè¿˜éœ€è¦ä¸Šä¼ å®‰å…¨è¯„ä¼°æŠ¥å‘Šï¼Œä¹Ÿå°±æ˜¯ä¸‹å›¾çš„å·¦ä¾§ç™»å½•å…¥å£ã€‚å…¶ä¸­å¡«æŠ¥å®‰å…¨è¯„ä¼°æŠ¥å‘Šçš„å†…å®¹å¯ä»¥å‚è€ƒ<a href="https://wenku.baidu.com/view/17e55c62951ea76e58fafab069dc5022aaea46e6.html">å®‰å…¨ç½‘ç»œæŠ¥å‘Šä¸­çš„é—®é¢˜åŠå‚è€ƒè§£ç­”</a>ã€‚</p><p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202202211451504.png" alt="å…¨å›½äº’è”ç½‘å®‰å…¨ç®¡ç†æœå¹³å°" /></p><p class='note note-info'>  æ³¨æ„ä¸€ä¸‹ï¼Œå…¬å®‰è”ç½‘å¤‡æ¡ˆæ˜¯éœ€è¦æœ¬äººç°åœºåˆ°æœ¬åœ°çš„ç½‘è­¦éƒ¨é—¨å®¡æ ¸ç­¾å­—çš„ï¼Œæ‰€ä»¥æœ€å¥½åœ¨å½“åœ°ç•™å‡ºå……è£•çš„æ—¶é—´ã€‚æˆ‘çš„ä¸€ä¸ªæƒ¨ç—›æ•™è®­å°±æ˜¯ä¸´è¿‘å¼€å­¦çš„æ—¶å€™ç”³è¯·ï¼Œç»“æœäººå»å­¦æ ¡äº†ï¼Œæ‰€ä»¥å°±ä¸èƒ½åœ¨æœ¬åœ°è¿™è¾¹åŠç†äº†ã€‚<br>  å¹¸è¿çš„æ˜¯åŒ—äº¬è¿™è¾¹ä¼¼ä¹ç½‘ä¸ŠåŠç†å°±å¯ä»¥äº†ã€‚ä¹Ÿå°±æ˜¯ICPå¤‡æ¡ˆå’Œå…¬å®‰è”ç½‘å¤‡æ¡ˆå¯ä»¥æ˜¯ä¸åŒçœä»½ï¼Œä½†å„ä¸ªåœ°æ–¹ä¼šæœ‰è‡ªå·±çš„è¦æ±‚ã€‚</p><h1 id="hexoç«™ç‚¹é…ç½®ä¿®æ”¹"><a class="markdownIt-Anchor" href="#hexoç«™ç‚¹é…ç½®ä¿®æ”¹"></a> Hexoç«™ç‚¹é…ç½®ä¿®æ”¹</h1><p>æœ€åä¿®æ”¹æœ¬åœ°hexoåšå®¢æ‰€åœ¨ç›®å½•ä¸‹çš„ç«™ç‚¹é…ç½®æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯**_config.yml**ï¼Œå¡«å…¥ä¹‹å‰åœ¨æœåŠ¡å™¨ä¸Šåˆ›å»ºçš„gitä»“åº“åœ°å€ã€‚æœ€ç»ˆæ‰§è¡Œ<code>hexo clean &amp; hexo g &amp; hexo d</code>å‘½ä»¤ï¼Œå°±å¯ä»¥å°†é™æ€æ–‡ä»¶ä»£ç éƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Šäº†ï¼Œå°±å¯ä»¥é€šè¿‡åŸŸåæˆ–è€…ipè¿›è¡Œè®¿é—®ï¼Œçœ‹åˆ°éƒ¨ç½²å¥½çš„åšå®¢é¡µé¢ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">deploy:</span><br>  <span class="hljs-attr">type:</span> <span class="hljs-string">git</span><br>  <span class="hljs-attr">repository:</span> [<span class="hljs-string">username</span>]<span class="hljs-string">@100.0.0.100:/home/git/blog.git</span>   <span class="hljs-comment">#ç”¨æˆ·å@æœåŠ¡å™¨Ip:gitä»“åº“ä½ç½®</span><br>  <span class="hljs-attr">branch:</span> <span class="hljs-string">master</span><br><br></code></pre></td></tr></table></figure><h1 id="é™„å½•nginxå¸¸ç”¨å‘½ä»¤"><a class="markdownIt-Anchor" href="#é™„å½•nginxå¸¸ç”¨å‘½ä»¤"></a> é™„å½•ï¼šNginxå¸¸ç”¨å‘½ä»¤</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> åœæ­¢å¼€æœºè‡ªå¯åŠ¨</span><br>systemctl disable nginx.service<br><span class="hljs-meta">#</span><span class="bash">è®¾ç½®nginxæœåŠ¡å¼€æœºè‡ªå¯åŠ¨</span><br>systemctl enable nginx.service<br><span class="hljs-meta">#</span><span class="bash">å¯åŠ¨nginxæœåŠ¡</span><br>systemctl start nginx.service<br><span class="hljs-meta">#</span><span class="bash">åœæ­¢nginxæœåŠ¡</span><br>systemctl stop nginx.service<br><span class="hljs-meta">#</span><span class="bash">é‡å¯nginxæœåŠ¡</span><br>systemctl restart nginx.service<br><span class="hljs-meta">#</span><span class="bash">é‡æ–°è¯»å–nginxé…ç½®(è¿™ä¸ªæœ€å¸¸ç”¨, ä¸ç”¨åœæ­¢nginxæœåŠ¡å°±èƒ½ä½¿ä¿®æ”¹çš„é…ç½®ç”Ÿæ•ˆ)</span><br>systemctl reload nginx.service<br><span class="hljs-meta">#</span><span class="bash"> æŸ¥çœ‹æœåŠ¡å½“å‰çŠ¶æ€</span><br>systemctl status nginx.service<br><span class="hljs-meta">#</span><span class="bash"> æŸ¥çœ‹æ‰€æœ‰å·²å¯åŠ¨çš„æœåŠ¡</span><br>systemctl list-units --type=service<br></code></pre></td></tr></table></figure><section class="footnotes"><h1>å¤‡æ³¨/å‚è€ƒ</h1><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a href="https://www.yyyzyyyz.cn/posts/45dafe31d273/">hexoæœ¬åœ°åšå®¢éƒ¨ç½²åˆ°äº‘æœåŠ¡å™¨</a><a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a href="https://help.aliyun.com/document_detail/98728.html?spm=5176.b657008.help.dexternal.7891799dpSS9Ed">åœ¨Nginxï¼ˆæˆ–Tengineï¼‰æœåŠ¡å™¨ä¸Šå®‰è£…è¯ä¹¦</a><a href="#fnref:2" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:3" class="footnote-text"><span><a href="https://help.aliyun.com/document_detail/36921.html0">é˜¿é‡Œäº‘-ICPå¤‡æ¡ˆæŒ‡å¯¼</a><a href="#fnref:3" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:4" class="footnote-text"><span><a href="https://help.aliyun.com/document_detail/116029.html">é˜¿é‡Œäº‘-å…¬å®‰è”ç½‘å¤‡æ¡ˆ</a><a href="#fnref:4" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºçŸ¥è¯†</category>
      
      <category>ç¯å¢ƒæ­å»ºç³»åˆ—</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åšå®¢æ­å»º</tag>
      
      <tag>é˜¿é‡Œäº‘ECS</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æˆ‘è¿˜æ˜¯ä»€ä¹ˆéƒ½æ²¡æœ‰æ”¹å˜</title>
    <link href="/2022/02/12/2022-02/2022-02-12%20%E6%88%91%E8%BF%98%E6%98%AF%E4%BB%80%E4%B9%88%E9%83%BD%E6%B2%A1%E6%9C%89%E6%94%B9%E5%8F%98/"/>
    <url>/2022/02/12/2022-02/2022-02-12%20%E6%88%91%E8%BF%98%E6%98%AF%E4%BB%80%E4%B9%88%E9%83%BD%E6%B2%A1%E6%9C%89%E6%94%B9%E5%8F%98/</url>
    
    <content type="html"><![CDATA[<p>åˆå‡ ä¹é¢“åºŸäº†ä¸€å‘¨ï¼Œæ¯å¤©éƒ½åœ¨æ¸¸æˆä¸­èŠ±è´¹äº†å¤§é‡æ—¶å…‰ï¼ŒæŠ›å¼ƒäº†ç›®æ ‡ï¼ŒæŠ›å¼ƒäº†ç†æƒ³ï¼ŒæŠ›å¼ƒäº†æ‰€æœ‰ï¼Œå°±åƒæ˜¯æººæ°´çš„äººæ‹¼å‘½åœ°æƒ³è¦æŠ“ä½ä»€ä¹ˆï¼Œæˆ‘ä¹ŸæŠŠæ¸¸æˆå½“ä½œå”¯ä¸€çš„å®£æ³„å£ã€‚æ˜æ˜çŸ¥é“è‡ªå·±è¿™æ ·ä¸‹å»ä¸è¡Œï¼Œæ˜æ˜ç½ªæ¶æ„Ÿå’Œå†…ç–šæ„Ÿä¸æ–­æœæˆ‘è¢­æ¥ï¼Œæˆ‘å´æ— æ³•æ§åˆ¶è‡ªå·±ï¼Œæ¯æ¬¡å‘Šè¯‰è‡ªå·±æ”¶æ‰‹å§ï¼Œå´åˆå¾„è‡ªå å…¥æ·±æ¸Šã€‚</p><p class='note note-danger'>  â€œä½ å°å­ï¼ŒçœŸçš„æ˜¯ï¼ŒçœŸçš„æ˜¯ä¸€ç‚¹éƒ½æ²¡æœ‰æ”¹å˜å•Šï¼è¿˜æ˜¯ï¼Œä»€ä¹ˆéƒ½åšä¸åˆ°å•Šï¼ä»€ä¹ˆéƒ½...åšä¸åˆ°â€</p><p>æ˜¯å•Šï¼Œä»åˆä¸­å¼€å§‹çš„æ¯ä¸ªå‡æœŸï¼Œå°±ä»æ¥æ²¡æœ‰æŒ‰è‡ªå·±æœ€åˆè®¡åˆ’çš„é‚£æ ·åº¦è¿‡ï¼Œæ¯æ¬¡éƒ½æ˜¯æ²‰è¿·åœ¨æ¸¸æˆä¸–ç•Œäº†ï¼Œå¿˜è®°æ—¶é—´ï¼Œå¿˜è®°è‡ªæˆ‘ï¼Œå¿˜è®°èº«è¾¹çš„ä¸€åˆ‡ï¼Œè‡ªç”˜å •è½ï¼Œä¼¤å®³è‡ªå·±ï¼Œä¼¤å®³èº«è¾¹çš„äº²äººï¼Œç„¶ååˆæ¯æ¬¡åœ¨å‡æœŸç»“æŸçš„æ—¶å€™ï¼Œæ„Ÿåˆ°æ— å°½çš„æ‡Šæ¼ä¸æ‚”æ¨ï¼Œå´åˆæ€»æ˜¯å®‰æ…°è‡ªå·±ï¼Œâ€œæ²¡äº‹çš„ï¼Œå¤§ä¸äº†é‡æ–°å¼€å§‹å°±å¥½â€ï¼Œä»¥æ­¤ä½œä¸ºå€Ÿå£ï¼Œç»™è‡ªå·±ä¸€ä¸ªå°é˜¶ä¸‹ã€‚å¯äº‹å®ç©¶ç«Ÿå¦‚ä½•å‘¢ï¼Ÿæ—¶å…‰ä»æ¥ä¸èƒ½å€’æµï¼Œå”¯æœ‰æ—¶é—´ï¼Œå¤±å»äº†å°±çœŸæ­£çš„å¤±å»äº†ï¼Œè¿™æ®µå¤±å»çš„æ—¶å…‰æ°¸è¿œä¸ä¼šé‡æ¥ï¼Œè€Œè¿™æ®µæ—¶å…‰çš„ä»·å€¼æˆ‘åˆå¾—åˆ°äº†å¤šå°‘å‘¢ï¼Œæˆ‘åˆèƒ½å¼¥è¡¥å¤šå°‘å‘¢ï¼Ÿ</p><p class='note note-danger'>  â€œæˆ‘é€æ¸å˜æˆè‡ªå·±æœ€åŒæ¶çš„æ ·å­ã€‚â€</p><p>æˆ–è®¸ä¸€äº›ä¸œè¥¿ï¼Œæ›´ç›´ç™½åœ°è¯´ï¼Œäººçš„ä¹ æ€§ï¼Œæ ¹æ·±è’‚å›ºçš„æ¶ä¹ ï¼ŒçœŸçš„å¾ˆéš¾æ”¹æ­£ã€‚ä½†æ˜¯å°±è¿™æ ·æ”¾å¼ƒäº†å—ï¼Œå› ä¸ºå¤±è´¥å¤ªå¤šæ¬¡å°±æ”¾å¼ƒæ”¹å˜äº†å—ï¼Ÿæˆ‘ï¼ŒçœŸçš„æ˜¯è¿™æ ·è½¯å¼±æ— èƒ½çš„äººå—ï¼Ÿ</p><p>ç­”æ¡ˆå…¶å®å·²ç»å¾ˆæ˜æ˜¾äº†å§ï¼Œæˆ‘é‚£ç‡ƒçƒ§çš„çµé­‚å‘Šè¯‰æˆ‘ï¼Œä¸è¦ç•æƒ§å¤±è´¥ï¼Œä¸è¦åœä¸‹è„šæ­¥ï¼Œå°±ç®—éä½“é³ä¼¤ï¼Œå°±ç®—ä¸€æ— æ‰€æœ‰ï¼Œä¹Ÿè¦å‰è¿›ï¼Œä¹Ÿè¦æˆ˜æ–—ï¼Œä¹Ÿè¦è¯æ˜ç»™è‡ªå·±çœ‹ï¼Œæˆ‘åˆ°åº•æ˜¯æ€æ ·çš„ä¸€ä¸ªäººï¼ï¼Ÿ</p><p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202202122109437.jpg" alt="æœ‰è¯ç›´è¯´ï¼Œè¯´åˆ°åšåˆ°" /></p>]]></content>
    
    
    <categories>
      
      <category>ç”Ÿæ´»</category>
      
      <category>éšç¬”</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ‚è°ˆ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Linuxå‘½ä»¤è¡Œä¸‹æ€§èƒ½åˆ†æ</title>
    <link href="/2022/02/02/2022-02/2022-02-02%20Linux%E5%91%BD%E4%BB%A4%E8%A1%8C%E4%B8%8B%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90/"/>
    <url>/2022/02/02/2022-02/2022-02-02%20Linux%E5%91%BD%E4%BB%A4%E8%A1%8C%E4%B8%8B%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90/</url>
    
    <content type="html"><![CDATA[<h1 id="æ€§èƒ½åˆ†æ"><a class="markdownIt-Anchor" href="#æ€§èƒ½åˆ†æ"></a> æ€§èƒ½åˆ†æ</h1><p>æˆ‘æ ¹æ®æˆ‘è¿™äº›å¹´çš„ç»éªŒï¼ŒæŒ‘é€‰äº†å››ä¸ªâ€œé«˜æ€§ä»·æ¯”â€çš„å·¥å…·ï¼štopã€pstackã€strace å’Œ perfã€‚å®ƒä»¬ç”¨èµ·æ¥å¾ˆç®€å•ï¼Œè€Œä¸”å®ç”¨æ€§å¾ˆå¼ºï¼Œå¯ä»¥è§‚æµ‹åˆ°ç¨‹åºçš„å¾ˆå¤šå¤–éƒ¨å‚æ•°å’Œå†…éƒ¨å‡½æ•°è°ƒç”¨ï¼Œç”±å†…è€Œå¤–ã€ç”±è¡¨åŠé‡Œåœ°åˆ†æç¨‹åºæ€§èƒ½ã€‚</p><h1 id="top"><a class="markdownIt-Anchor" href="#top"></a> top</h1><h2 id="å‚æ•°è§£é‡Š"><a class="markdownIt-Anchor" href="#å‚æ•°è§£é‡Š"></a> å‚æ•°è§£é‡Š</h2><p>é€šè¿‡topå‘½ä»¤ï¼Œå°±èƒ½å¤Ÿç®€å•ç›´è§‚åœ°çœ‹åˆ° åº”ç”¨ç¨‹åºçš„CPUã€å†…å­˜ç­‰å‡ ä¸ªæœ€å…³é”®çš„æ€§èƒ½æŒ‡æ ‡ã€‚ä¸‹é¢è¿™å¼ å›¾æˆªè‡ªubuntu20.04 è™šæ‹Ÿæœºçš„topå‘½ä»¤ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/2017zhangyuxuan/picture_backend@master//img/202202041956057.png" alt="ubuntuä¸­topå‘½ä»¤æˆªå›¾" /></p><p>å…¶ä¸­ä¸ªæŒ‡æ ‡çš„å«ä¹‰å¯ä»¥å‚è€ƒè‡ªè¿™ç¯‡åšå®¢<a href="https://blog.csdn.net/zhuoya_/article/details/81049967">topå‘½ä»¤çš„ç”¨æ³•</a> <sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="topå‘½ä»¤çš„ç”¨æ³•">[1]</span></a></sup>ï¼š</p><ul><li><p>Tasksä¸€è¡Œï¼š</p><ul><li><p>total : è¿›ç¨‹æ€»æ•°</p></li><li><p>Running: æ­£åœ¨è¿è¡Œè¿›ç¨‹æ•°</p></li><li><p>Sleeping: ç¡çœ çš„è¿›ç¨‹æ•°</p></li><li><p>Stopped: åœæ­¢çš„è¿›ç¨‹æ•°</p></li><li><p>zombie: åƒµå°¸è¿›ç¨‹æ•°</p></li></ul></li><li><p>Cpuä¸€è¡Œï¼š</p><ul><li>usï¼šç”¨æˆ·ç©ºé—´å ç”¨CPUçš„ç™¾åˆ†æ¯”</li><li>syï¼šå†…æ ¸ç©ºé—´å ç”¨CPUçš„ç™¾åˆ†æ¯”</li><li>niï¼šç”¨æˆ·è¿›ç¨‹ç©ºé—´å†…æ”¹å˜è¿‡ä¼˜å…ˆçº§çš„è¿›ç¨‹å ç”¨CPUç™¾åˆ†æ¯”</li><li>idï¼šç©ºé—²CPUç™¾åˆ†æ¯”</li><li>waï¼šç­‰å¾…è¾“å…¥è¾“å‡ºçš„CPUç™¾åˆ†æ¯”</li><li>hiï¼šç¡¬ä¸­æ–­å ç”¨CPUç™¾åˆ†æ¯”</li><li>siï¼šè½¯ä¸­æ–­å ç”¨CPUç™¾åˆ†æ¯”</li><li>stï¼šå½“hypervisoræœåŠ¡å¦ä¸€ä¸ªè™šæ‹Ÿå¤„ç†å™¨çš„æ—¶å€™ï¼Œè™šæ‹ŸCPUç­‰å¾…å®é™…CPUçš„ç™¾åˆ†æ¯”</li></ul></li></ul><p class='note note-info'>è½¯ä¸­æ–­æ˜¯æ‰§è¡Œä¸­æ–­æŒ‡ä»¤äº§ç”Ÿçš„ï¼Œè€Œç¡¬ä¸­æ–­æ˜¯ç”±å¤–è®¾å¼•å‘çš„ã€‚</br>ä¸ºäº†æ»¡è¶³å®æ—¶ç³»ç»Ÿçš„è¦æ±‚ï¼Œä¸­æ–­å¤„ç†åº”è¯¥æ˜¯è¶Šå¿«è¶Šå¥½ã€‚linuxä¸ºäº†å®ç°è¿™ä¸ªç‰¹ç‚¹ï¼Œå½“ä¸­æ–­å‘ç”Ÿçš„æ—¶å€™ï¼Œç¡¬ä¸­æ–­å¤„ç†é‚£äº›çŸ­æ—¶é—´å°±å¯ä»¥å®Œæˆçš„å·¥ä½œï¼Œè€Œå°†é‚£äº›å¤„ç†äº‹ä»¶æ¯”è¾ƒé•¿çš„å·¥ä½œï¼Œæ”¾åˆ°ä¸­æ–­ä¹‹åæ¥å®Œæˆï¼Œä¹Ÿå°±æ˜¯è½¯ä¸­æ–­æ¥å®Œæˆã€‚</p><ul><li>Memä¸ºç‰©ç†å†…å­˜ä½¿ç”¨ï¼ŒSwapä¸ºäº¤æ¢åŒºä½¿ç”¨ã€‚</li><li>ç™½è‰²æ ‡æ³¨è¡Œï¼š<ul><li><p>PIDï¼šè¿›ç¨‹ID</p></li><li><p>USERï¼šè¿›ç¨‹æ‰€æœ‰è€…çš„ç”¨æˆ·ID</p></li><li><p>PRï¼špriorityï¼ŒåŠ¨æ€ä¼˜å…ˆçº§ï¼Œå–å€¼èŒƒå›´[0,99]ï¼Œå–å€¼è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜ã€‚priorityçš„å€¼åœ¨ä¹‹å‰å†…æ ¸çš„O1è°ƒåº¦å™¨ä¸Šè¡¨ç°æ˜¯ä¼šå˜åŒ–çš„ï¼Œæ‰€ä»¥å«åš<strong>åŠ¨æ€ä¼˜å…ˆçº§</strong>ã€‚</p></li><li><p>NIï¼šniceå€¼ï¼Œé™æ€ä¼˜å…ˆçº§ã€‚å–å€¼èŒƒå›´[-20,19]ï¼Œå–å€¼è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜ã€‚niceå€¼è®¾å®šå¥½åï¼Œä¸€èˆ¬æ˜¯ä¸ä¼šæ”¹å˜çš„ï¼Œé™¤éä½¿ç”¨ç³»ç»Ÿè°ƒç”¨è¿›è¡Œä¿®æ”¹ï¼Œæ‰€ä»¥ç§°ä¸º<strong>é™æ€ä¼˜å…ˆçº§</strong>ã€‚</p></li><li><p>VIRTï¼šè¿›ç¨‹ä½¿ç”¨çš„è™šæ‹Ÿå†…å­˜çš„æ€»é‡ï¼ŒVIRT = SWAP + RES</p></li><li><p>RESï¼šè¿›ç¨‹ä½¿ç”¨çš„ã€æœªè¢«æ¢å‡ºçš„ç‰©ç†å†…å­˜å¤§å°ï¼Œå•ä½kbï¼ŒRES = CODE + DATA</p></li><li><p>SHRï¼šå…±äº«å†…å­˜ï¼Œä¹Ÿä¼šè¢«ç»Ÿè®¡åœ¨RESä¸­ã€‚</p><ul><li><p>é™¤äº†è‡ªèº«è¿›ç¨‹çš„å…±äº«å†…å­˜ï¼Œä¹ŸåŒ…æ‹¬å…¶ä»–è¿›ç¨‹çš„å…±äº«å†…å­˜ï¼›</p></li><li><p>è™½ç„¶è¿›ç¨‹åªä½¿ç”¨äº†å‡ ä¸ªå…±äº«åº“çš„å‡½æ•°ï¼Œä½†å®ƒåŒ…å«äº†æ•´ä¸ªå…±äº«åº“çš„å¤§å°ï¼›</p></li><li><p>è®¡ç®—æŸä¸ªè¿›ç¨‹æ‰€å çš„ç‰©ç†å†…å­˜å¤§å°å…¬å¼ï¼šRES â€“ SHRï¼›</p></li></ul></li><li><p>Sï¼šè¿›ç¨‹çŠ¶æ€</p><ul><li>Rï¼šå½“å‰æ­£åœ¨è¿è¡Œ(RUNNING)</li><li>Sï¼šç¡çœ (SLEEP)</li><li>Dï¼šä¸å¯ä¸­æ–­</li><li>Tï¼šåœæ­¢(STOP)</li><li>Zï¼šåƒµå°¸è¿›ç¨‹(ZOMBIE)</li></ul></li><li><p>%CPUï¼šä¸Šæ¬¡æ›´æ–°åˆ°ç°åœ¨çš„CPUæ—¶é—´å ç”¨ç™¾åˆ†æ¯”</p></li><li><p>%MEMï¼šè¿›ç¨‹å ç”¨ç‰©ç†å†…å­˜å æ¯”</p></li><li><p>TIME+ï¼šè¿›ç¨‹ä½¿ç”¨CPUæ—¶é—´æ€»ç»“</p></li><li><p>COMMANDï¼šè¿›ç¨‹åç§°ï¼ˆå‘½åå/å‘½ä»¤è¡Œï¼‰</p></li></ul></li></ul><p><img src="https://cdn.jsdelivr.net/gh/2017zhangyuxuan/picture_backend@master//img/202202042034815.jpeg" alt="ç¨‹åºä¼˜å…ˆçº§æè¿°" /></p><h2 id="äº¤äº’å‘½ä»¤"><a class="markdownIt-Anchor" href="#äº¤äº’å‘½ä»¤"></a> äº¤äº’å‘½ä»¤</h2><ul><li>æŒ‰ <code>f</code> é”®è¿›å…¥äº¤äº’ç•Œé¢ï¼Œæ­¤æ—¶æŒ‰<code>d</code>å¯ä»¥æ˜¾ç¤ºæˆ–éšè—åˆ—ï¼ŒæŒ‰<code>s</code>å¯ä»¥è®¾ç½®å½“å‰é€‰ä¸­çš„åˆ—è¿›è¡Œæ’åºï¼Œé»˜è®¤ä¸ºé™åºï¼Œå¯ä»¥æŒ‰<code>R</code>è¿›è¡Œå‡åºï¼ˆæ³¨æ„å¤§å†™ï¼‰ã€‚</li></ul><p><img src="https://cdn.jsdelivr.net/gh/2017zhangyuxuan/picture_backend@master//img/202202042053474.png" alt="æŒ‰ f é”®è¿›å…¥äº¤äº’ç•Œé¢" /></p><ul><li>å…ˆæŒ‰<code>-&gt;</code>å³é”®è¡¨ç¤ºé€‰ä¸­è¯¥åˆ—ï¼Œåœ¨æŒ‰ä¸Šä¸‹ç§»åŠ¨é”®ï¼Œå°±å¯ä»¥è°ƒæ•´åˆ—çš„æ˜¾ç¤ºé¡ºåº</li></ul><p><img src="https://cdn.jsdelivr.net/gh/2017zhangyuxuan/picture_backend@master//img/202202042056414.png" alt="è°ƒæ•´åˆ—çš„é¡ºåº" /></p><ul><li><p><strong>h</strong>æˆ–è€…**?**ï¼šæ˜¾ç¤ºå¸®åŠ©ç”»é¢</p></li><li><p><strong>k</strong> :ç»ˆæ­¢ä¸€ä¸ªè¿›ç¨‹ï¼›é»˜è®¤ä½¿ç”¨15ä¿¡å·ï¼Œå¯ä»¥ä½¿ç”¨ä¿¡å·9æ¥å¼ºåˆ¶ç»“æŸè¯¥è¿›ç¨‹ã€‚ä½†æ˜¯åœ¨å®‰å…¨æ¨¡å¼ä¸‹æ­¤å‘½ä»¤è¢«å±è”½ã€‚</p></li><li><p><strong>t</strong>  ï¼šåˆ‡æ¢æ˜¾ç¤ºè¿›ç¨‹å’ŒCPUçŠ¶æ€ä¿¡æ¯ã€‚</p></li><li><p><strong>m</strong>  :åˆ‡æ¢æ˜¾ç¤ºå†…å­˜ä¿¡æ¯ã€‚</p></li><li><p><strong>i</strong> :å¿½ç•¥é—²ç½®å’Œåƒµæ­»è¿›ç¨‹ï¼Œå¼€å…³å¼å‘½ä»¤ã€‚</p></li><li><p><strong>M</strong>  ï¼šæ ¹æ®é©»ç•™å†…å­˜å¤§å°è¿›è¡Œæ’åºã€‚</p></li><li><p><strong>P</strong>  ï¼šæ ¹æ®CPUä½¿ç”¨ç™¾åˆ†æ¯”å¤§å°è¿›è¡Œæ’åºã€‚</p></li><li><p><strong>T</strong>   ï¼šæ ¹æ®æ—¶é—´æˆ–è€…ç´¯è®¡æ—¶é—´è¿›è¡Œæ’åºã€‚</p></li><li><p><strong>top -d ç§’æ•°</strong>ï¼šè¡¨ç¤ºè¿›ç¨‹ç•Œé¢æ›´æ–°æ—¶é—´ï¼ˆé»˜è®¤5ç§’ï¼‰</p></li><li><p><strong>top -p 1</strong> : æŸ¥çœ‹è¿›ç¨‹å·ä¸º1çš„è¿›ç¨‹</p></li></ul><h1 id="pstack"><a class="markdownIt-Anchor" href="#pstack"></a> pstack</h1><p>ä» top çš„è¾“å‡ºç»“æœé‡Œï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿›ç¨‹è¿è¡Œçš„æ¦‚å†µï¼ŒçŸ¥é“ CPUã€å†…å­˜çš„ä½¿ç”¨ç‡ã€‚å¦‚æœå‘ç°æŸä¸ªæŒ‡æ ‡è¶…å‡ºäº†é¢„æœŸï¼Œå°±è¯´æ˜ç¨‹åºå¯èƒ½å­˜åœ¨é—®é¢˜ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±åº”è¯¥é‡‡å–æ›´å…·ä½“çš„æªæ–½å»è¿›ä¸€æ­¥åˆ†æï¼Œæ¯”å¦‚é‡‡ç”¨pstackã€‚pstack å¯ä»¥æ‰“å°å‡ºè¿›ç¨‹çš„è°ƒç”¨æ ˆä¿¡æ¯ï¼Œæœ‰ç‚¹åƒæ˜¯ç»™æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹æ‹äº†ä¸ªå¿«ç…§ï¼Œèƒ½çœ‹åˆ°æŸä¸ªæ—¶åˆ»çš„è¿›ç¨‹é‡Œè°ƒç”¨çš„å‡½æ•°å’Œå…³ç³»ï¼Œå¯¹è¿›ç¨‹çš„è¿è¡Œæœ‰ä¸ªåˆæ­¥çš„å°è±¡ã€‚</p><p>pstackå…¶å®æ˜¯ä¸ªShellè„šæœ¬ï¼Œæ ¸å¿ƒåŸç†æ˜¯GDBçš„<strong>thread apply all bt</strong>å‘½ä»¤ï¼ŒåŸºæœ¬é€»è¾‘æ˜¯é€šè¿‡è¿›ç¨‹å·process-idæ¥åˆ†ææ˜¯å¦ä½¿ç”¨äº†å¤šçº¿ç¨‹ï¼ŒåŒæ—¶ä½¿ç”¨GDB Attachåˆ°åœ¨è·‘è¿›ç¨‹ä¸Šï¼Œæœ€åè°ƒç”¨btå­å‘½ä»¤åç®€å•æ ¼å¼åŒ–è¾“å‡º<sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><span class="hint--top hint--rounded" aria-label="Linux pstack æºç é‡Œçš„åŸºç¡€çŸ¥è¯†">[2]</span></a></sup>ã€‚</p><hr /><p>ç¼–å†™ä¸€ä¸ªæµ‹è¯•ç¨‹åºå¦‚ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ªæ­»å¾ªç¯çº¿ç¨‹ï¼Œä¸åœåœ°ç¡çœ 1ç§’åè¾“å‡ºã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;thread&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">sleeptime</span><span class="hljs-params">()</span></span>&#123;<br>    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123;<br>        this_thread::<span class="hljs-built_in">sleep_for</span>(chrono::<span class="hljs-built_in">seconds</span>(<span class="hljs-number">1</span>));<br>        cout &lt;&lt; <span class="hljs-string">&quot;sleep 1 s&quot;</span> &lt;&lt; endl;<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-function">thread <span class="hljs-title">t</span><span class="hljs-params">(sleeptime)</span></span>;<br>    t.<span class="hljs-built_in">join</span>();<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç¼–è¯‘å‘½ä»¤ï¼š<code>g++ -g -pthread test2.cpp -o test2</code>ã€‚</p><p>pstackå‘½ä»¤ï¼š<code>sudo pstack $&#123;pid&#125;</code>è¿™é‡Œçš„pidå¯é€šè¿‡topæˆ–è€…psæ¥æ‰¾åˆ°ã€‚æ³¨æ„è¿™é‡Œä¸åŠ sudoå¯èƒ½ä¸ä¼šæ‰“å°è¾“å‡ºã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/2017zhangyuxuan/picture_backend@master//img/202202042256078.png" alt="pstackæ‰“å°å‡½æ•°è°ƒç”¨æ ˆ" /></p><h1 id="strace"><a class="markdownIt-Anchor" href="#strace"></a> strace</h1><p><code>strace</code>æ˜¯ä¸ªåŠŸèƒ½å¼ºå¤§çš„Linuxè°ƒè¯•åˆ†æè¯Šæ–­å·¥å…·ï¼Œå¯ç”¨äºè·Ÿè¸ªç¨‹åºæ‰§è¡Œæ—¶è¿›ç¨‹ç³»ç»Ÿè°ƒç”¨(system call)å’Œæ‰€æ¥æ”¶çš„ä¿¡å·ï¼Œå°¤å…¶æ˜¯é’ˆå¯¹æºç ä¸å¯è¯»æˆ–æºç æ— æ³•å†ç¼–è¯‘çš„ç¨‹åºã€‚åœ¨Linuxç³»ç»Ÿä¸­ï¼Œç”¨æˆ·è¿›ç¨‹ä¸èƒ½ç›´æ¥è®¿é—®è®¡ç®—æœºç¡¬ä»¶è®¾å¤‡ã€‚å½“è¿›ç¨‹éœ€è¦è®¿é—®ç¡¬ä»¶è®¾å¤‡(å¦‚è¯»å–ç£ç›˜æ–‡ä»¶æˆ–æ¥æ”¶ç½‘ç»œæ•°æ®ç­‰)æ—¶ï¼Œå¿…é¡»ç”±ç”¨æˆ·æ€æ¨¡å¼åˆ‡æ¢è‡³å†…æ ¸æ€æ¨¡å¼ï¼Œé€šè¿‡ç³»ç»Ÿè°ƒç”¨è®¿é—®ç¡¬ä»¶è®¾å¤‡ã€‚<code>strace</code>å¯è·Ÿè¸ªè¿›ç¨‹äº§ç”Ÿçš„ç³»ç»Ÿè°ƒç”¨ï¼ŒåŒ…æ‹¬å‚æ•°ã€è¿”å›å€¼å’Œæ‰§è¡Œæ‰€æ¶ˆè€—çš„æ—¶é—´ã€‚<sup id="fnref:3" class="footnote-ref"><a href="#fn:3" rel="footnote"><span class="hint--top hint--rounded" aria-label="Linuxè¿›ç¨‹ç…§å¦–é•œstraceå‘½ä»¤">[3]</span></a></sup></p><p>å‚è€ƒçŸ¥ä¹è¿™ç¯‡æ–‡ç« <a href="https://zhuanlan.zhihu.com/p/69527356">Linuxè¿›ç¨‹ç…§å¦–é•œstraceå‘½ä»¤</a>ï¼Œæ¼”ç¤ºä¸‹ strace å‘½ä»¤ä½œç”¨ã€‚</p><p>é¦–å…ˆç¼–å†™ä¸€ä¸ªæµ‹è¯•ç¨‹åºï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;unistd.h&gt;</span></span><br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span>** argv)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">char</span> buffer[<span class="hljs-number">256</span>];<br>  <br>  <span class="hljs-comment">// è·å–å½“å‰å·¥ä½œç›®å½•çš„ç»å¯¹è·¯å¾„</span><br>    <span class="hljs-built_in">getcwd</span>(buffer, <span class="hljs-number">255</span>);<br><br>    <span class="hljs-built_in">printf</span>(buffer);<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç„¶åæ‰§è¡Œä¸‹åˆ—å‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> ç¼–è¯‘</span><br>gcc test3.cpp -o test3<br><span class="hljs-meta">#</span><span class="bash"> ä½¿ç”¨strace è¿½è¸ª test3ç¨‹åº</span><br>strace ./test3<br></code></pre></td></tr></table></figure><p>å°±å¯ä»¥çœ‹åˆ°ç¨‹åºäº§ç”Ÿçš„ç³»ç»Ÿè°ƒç”¨ï¼š</p><p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202202151120052.png" alt="ç¨‹åºä¸­çš„ç³»ç»Ÿè°ƒç”¨" /></p><p>æ ¹æ®ä¸Šè¿°é‚£ç‰‡çŸ¥ä¹æ–‡ç« å‚è€ƒï¼Œå¯ä»¥çœ‹åˆ°è¿™é‡Œç¨‹åºè°ƒç”¨äº†<code>getcwd</code>å‡½æ•°ï¼Œè·å–å½“å‰å·¥ä½œç›®å½•çš„ç»å¯¹è·¯å¾„ï¼›<code>fstat</code>æ˜¯ç”¨äºæ£€æŸ¥æ–‡ä»¶çŠ¶æ€ï¼Œ<code>brk</code>ç³»ç»Ÿè°ƒç”¨æŸ¥é˜…äº†ä¸€ä¸‹ï¼Œå¤§è‡´ä½œç”¨æ˜¯è¯·æ±‚å†…æ ¸å…è®¸è¯»å†™ä¸€ä¸ªç§°ä¸ºå †çš„è¿ç»­å†…å­˜å—<sup id="fnref:4" class="footnote-ref"><a href="#fn:4" rel="footnote"><span class="hint--top hint--rounded" aria-label="BRK()ç³»ç»Ÿè°ƒç”¨åšä»€ä¹ˆï¼Ÿ">[4]</span></a></sup>ï¼Œæˆ–è€…æ˜¯è¯´ç”¨äºè¿›ç¨‹çš„å†…å­˜åˆ†é…<sup id="fnref:5" class="footnote-ref"><a href="#fn:5" rel="footnote"><span class="hint--top hint--rounded" aria-label="Linuxè¿›ç¨‹åˆ†é…å†…å­˜çš„ä¸¤ç§æ–¹å¼â€“brk() å’Œmmap()">[5]</span></a></sup>ï¼›<code>write</code>åˆ™æ˜¯å¾€æ–‡ä»¶å†™å…¥å†…å®¹ã€‚</p><hr /><p>straceçš„å¸¸ç”¨å‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> æ‰§è¡Œåç§°ä¸º<span class="hljs-built_in">command</span>çš„å‘½ä»¤æˆ–ç¨‹åºå¹¶è·Ÿè¸ªç³»ç»Ÿè°ƒç”¨</span><br>strace command<br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash"> è·Ÿè¸ªIDä¸ºçš„procidçš„è¿›ç¨‹ç³»ç»Ÿè°ƒç”¨æƒ…å†µ</span><br>strace -p procid<br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash"> ç»Ÿè®¡IDä¸ºçš„procidçš„è¿›ç¨‹ç³»ç»Ÿè°ƒç”¨æ¬¡æ•°ä¸ç”¨æ—¶ï¼ŒæŒ‰CTRL+Cç»“æŸç»Ÿè®¡</span><br>strace -c -p procid<br></code></pre></td></tr></table></figure><p class='note note-info'>  æŠŠ pstack å’Œ strace ç»“åˆèµ·æ¥ï¼Œæˆ‘ä»¬å¤§æ¦‚å°±å¯ä»¥çŸ¥é“ï¼Œè¿›ç¨‹åœ¨ç”¨æˆ·ç©ºé—´å’Œå†…æ ¸ç©ºé—´éƒ½å¹²äº†äº›ä»€ä¹ˆã€‚å½“è¿›ç¨‹çš„ CPU åˆ©ç”¨ç‡è¿‡é«˜æˆ–è€…è¿‡ä½çš„æ—¶å€™ï¼Œæˆ‘ä»¬æœ‰å¾ˆå¤§æ¦‚ç‡èƒ½ç›´æ¥å‘ç°ç“¶é¢ˆæ‰€åœ¨ã€‚</p><h1 id="perf"><a class="markdownIt-Anchor" href="#perf"></a> perf</h1><p><code>perf</code> å¯ä»¥è¯´æ˜¯ <code>pstack</code> å’Œ <code>strace</code> çš„â€œé«˜çº§ç‰ˆâ€ï¼Œå®ƒæŒ‰ç…§å›ºå®šçš„é¢‘ç‡å»â€œé‡‡æ ·â€ï¼Œç›¸å½“äºè¿ç»­æ‰§è¡Œå¤šæ¬¡çš„ pstackï¼Œç„¶åå†ç»Ÿè®¡å‡½æ•°çš„è°ƒç”¨æ¬¡æ•°ï¼Œç®—å‡ºç™¾åˆ†æ¯”ã€‚åªè¦é‡‡æ ·çš„é¢‘ç‡è¶³å¤Ÿå¤§ï¼ŒæŠŠè¿™äº›â€œç¬æ—¶æˆªé¢â€ç»„åˆåœ¨ä¸€èµ·ï¼Œå°±å¯ä»¥å¾—åˆ°è¿›ç¨‹è¿è¡Œæ—¶çš„å¯ä¿¡æ•°æ®ï¼Œæ¯”è¾ƒå…¨é¢åœ°æè¿°å‡ºç¨‹åºçš„è¿è¡Œæƒ…å†µã€‚</p><p>é¦–å…ˆæ‰§è¡Œä¸‹é¢å‘½ä»¤ï¼Œå®‰è£…perfï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo apt install linux-tools-common <br></code></pre></td></tr></table></figure><p>ä½†æ˜¯æç¤ºæˆ‘éœ€è¦å†å®‰è£…æ–°çš„åŒ…ï¼Œè¿™é‡Œæˆ‘å†å®‰è£…<code>linux-tools-5.4.0-97-generic</code>å°±å¯ä»¥äº†ã€‚</p><p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202202151953426.png" alt="å®‰è£…perfå‘½ä»¤" /></p><p>ç„¶åæ‰§è¡Œ <code>sudo perf top</code>å‘½ä»¤ï¼Œå°±å¯ä»¥çœ‹åˆ° <code>perf</code>ç•Œé¢ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://kingofdark-blog.oss-cn-beijing.aliyuncs.com/picture_backend/picture_backend/img/202202152014700.png" alt="perf top ç•Œé¢" /></p><p>å‚è€ƒè¿™ç¯‡æ–‡ç« <a href="https://www.cnblogs.com/arnoldlu/p/6241297.html">ç³»ç»Ÿçº§æ€§èƒ½åˆ†æå·¥å…·perfçš„ä»‹ç»ä¸ä½¿ç”¨</a>ï¼Œäº†è§£å„åˆ—çš„å«ä¹‰ï¼š</p><ul><li><p>ç¬¬ä¸€åˆ—ï¼šç¬¦å·å¼•å‘çš„æ€§èƒ½äº‹ä»¶çš„æ¯”ä¾‹ï¼ŒæŒ‡å ç”¨çš„cpuå‘¨æœŸæ¯”ä¾‹ã€‚</p></li><li><p>ç¬¬äºŒåˆ—ï¼šç¬¦å·æ‰€åœ¨çš„DSO(Dynamic Shared Object)ï¼Œå¯ä»¥æ˜¯åº”ç”¨ç¨‹åºã€å†…æ ¸ã€åŠ¨æ€é“¾æ¥åº“ã€æ¨¡å—ã€‚</p></li><li><p>ç¬¬ä¸‰åˆ—ï¼šDSOçš„ç±»å‹ã€‚[.]è¡¨ç¤ºæ­¤ç¬¦å·å±äºç”¨æˆ·æ€çš„ELFæ–‡ä»¶ï¼ŒåŒ…æ‹¬å¯æ‰§è¡Œæ–‡ä»¶ä¸åŠ¨æ€é“¾æ¥åº“ï¼›[k]è¡¨è¿°æ­¤ç¬¦å·å±äºå†…æ ¸æˆ–æ¨¡å—ã€‚</p></li><li><p>ç¬¬å››åˆ—ï¼šç¬¦å·åã€‚æœ‰äº›ç¬¦å·ä¸èƒ½è§£æä¸ºå‡½æ•°åï¼Œåªèƒ½ç”¨åœ°å€è¡¨ç¤ºã€‚</p></li></ul><hr /><p>perf topå¸¸ç”¨é€‰é¡¹æœ‰ï¼š</p><blockquote><p>-e &lt; event &gt;ï¼šæŒ‡æ˜è¦åˆ†æçš„æ€§èƒ½äº‹ä»¶ã€‚</p><p>-p &lt; pid &gt;ï¼šProfile events on existing Process ID (comma sperated list). ä»…åˆ†æç›®æ ‡è¿›ç¨‹åŠå…¶åˆ›å»ºçš„çº¿ç¨‹ã€‚</p><p>-k &lt; path &gt;ï¼šPath to vmlinux. Required for annotation functionality. å¸¦ç¬¦å·è¡¨çš„å†…æ ¸æ˜ åƒæ‰€åœ¨çš„è·¯å¾„ã€‚</p><p>-Kï¼šä¸æ˜¾ç¤ºå±äºå†…æ ¸æˆ–æ¨¡å—çš„ç¬¦å·ã€‚</p><p>-Uï¼šä¸æ˜¾ç¤ºå±äºç”¨æˆ·æ€ç¨‹åºçš„ç¬¦å·ã€‚</p><p>-d &lt; n &gt;ï¼šç•Œé¢çš„åˆ·æ–°å‘¨æœŸï¼Œé»˜è®¤ä¸º2sï¼Œå› ä¸ºperf topé»˜è®¤æ¯2sä»mmapçš„å†…å­˜åŒºåŸŸè¯»å–ä¸€æ¬¡æ€§èƒ½æ•°æ®ã€‚</p><p>-gï¼šå¾—åˆ°å‡½æ•°çš„è°ƒç”¨å…³ç³»å›¾ã€‚</p></blockquote><p>å¸¸ç”¨çš„ perf å‘½ä»¤æ˜¯<code>perf top -K -p xxx</code>ï¼ŒæŒ‰ CPU ä½¿ç”¨ç‡æ’åºï¼Œåªçœ‹ç”¨æˆ·ç©ºé—´çš„è°ƒç”¨ï¼Œè¿™æ ·å¾ˆå®¹æ˜“å°±èƒ½æ‰¾å‡ºæœ€è€—è´¹ CPU çš„ç¨‹åºã€‚</p><section class="footnotes"><h1>å¤‡æ³¨/å‚è€ƒ</h1><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a href="https://blog.csdn.net/zhuoya_/article/details/81049967">topå‘½ä»¤çš„ç”¨æ³•</a><a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a href="https://cloud.tencent.com/developer/article/1005992">Linux pstack æºç é‡Œçš„åŸºç¡€çŸ¥è¯†</a><a href="#fnref:2" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:3" class="footnote-text"><span><a href="https://zhuanlan.zhihu.com/p/69527356">Linuxè¿›ç¨‹ç…§å¦–é•œstraceå‘½ä»¤</a><a href="#fnref:3" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:4" class="footnote-text"><span><a href="https://cloud.tencent.com/developer/ask/72042">BRK()ç³»ç»Ÿè°ƒç”¨åšä»€ä¹ˆï¼Ÿ</a><a href="#fnref:4" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:5" class="footnote-text"><span><a href="https://www.cnblogs.com/vinozly/p/5489138.html">Linuxè¿›ç¨‹åˆ†é…å†…å­˜çš„ä¸¤ç§æ–¹å¼â€“brk() å’Œmmap()</a><a href="#fnref:5" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºçŸ¥è¯†</category>
      
      <category>linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>linux</tag>
      
      <tag>æ€§èƒ½åˆ†æ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Linuxå‘½ä»¤å­¦ä¹ </title>
    <link href="/2022/02/01/2022-02/2022-02-01%20Linux%E5%91%BD%E4%BB%A4/"/>
    <url>/2022/02/01/2022-02/2022-02-01%20Linux%E5%91%BD%E4%BB%A4/</url>
    
    <content type="html"><![CDATA[<h1 id="ä»»åŠ¡æŒ‚èµ·å’Œæ¢å¤"><a class="markdownIt-Anchor" href="#ä»»åŠ¡æŒ‚èµ·å’Œæ¢å¤"></a> ä»»åŠ¡æŒ‚èµ·å’Œæ¢å¤</h1><p>æˆ‘æƒ³å¤§å®¶åº”è¯¥éƒ½çŸ¥é“<code>ctrl+c</code>æ˜¯ç»ˆæ­¢ä»»åŠ¡/è¿›ç¨‹ï¼Œ <code>ctrl+z</code>æ˜¯ä»»åŠ¡æŒ‚èµ·ï¼ˆå°†ä¸€ä¸ªæ­£åœ¨å‰å°æ‰§è¡Œçš„å‘½ä»¤æ”¾åˆ°åå°ï¼Œå¹¶ä¸”å¤„äºæš‚åœçŠ¶æ€ï¼‰ï¼Œé‚£ä¹ˆä»»åŠ¡æŒ‚èµ·åè¯¥å¦‚ä½•æ¢å¤å‘¢ï¼Ÿç»è¿‡æŸ¥é˜…<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="ctrl+z ä»¥åæ€ä¹ˆæ¢å¤æŒ‚èµ·çš„è¿›ç¨‹">[1]</span></a></sup>ï¼Œå¯ä»¥å‚è€ƒä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š</p><ol><li>jobs æ˜¾ç¤ºå½“å‰æš‚åœçš„è¿›ç¨‹</li><li>bg %N ä½¿ç¬¬Nä¸ªä»»åŠ¡åœ¨åå°è¿è¡Œ(%å‰æœ‰ç©ºæ ¼)</li><li>fg %N ä½¿ç¬¬Nä¸ªä»»åŠ¡åœ¨å‰å°è¿è¡Œ</li></ol><p class="note note-info">  æ³¨æ„ï¼šé»˜è®¤ bg å’Œ fg ä¸å¸¦%Næ—¶è¡¨ç¤ºå¯¹æœ€åä¸€ä¸ªè¿›ç¨‹æ“ä½œ</p><hr /><p>æ­¤å¤–ä¸ä»»åŠ¡/è¿›ç¨‹æ§åˆ¶ç›¸å…³çš„å‘½ä»¤è¿˜æœ‰ &amp; å’Œ nohup<sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><span class="hint--top hint--rounded" aria-label="linux è¿œç¨‹ä¸»æœºåå°è¿è¡Œä»»åŠ¡ æŒ‚èµ·è„šæœ¬">[2]</span></a></sup>ã€‚</p><p><code>Commod + &amp;</code> åœ¨ä¸€ä¸ªå‘½ä»¤æœ€ååŠ ä¸Šä¸€ä¸ª &amp;ï¼Œå¯ä»¥å°†è¿™ä¸ªå‘½ä»¤æ”¾åˆ°åå°æ‰§è¡Œï¼›</p><p>å¦‚æœè®©ç¨‹åºå§‹ç»ˆåœ¨åå°æ‰§è¡Œï¼Œå³ä½¿å…³é—­å½“å‰çš„ç»ˆç«¯ä¹Ÿæ‰§è¡Œï¼ˆä¹‹å‰çš„&amp;åšä¸åˆ°ï¼‰ï¼Œè¿™æ—¶å€™éœ€è¦<code>nohup</code>ã€‚è¯¥å‘½ä»¤å¯ä»¥åœ¨ä½ é€€å‡ºå¸æˆ·/å…³é—­ç»ˆç«¯ä¹‹åç»§ç»­è¿è¡Œç›¸åº”çš„è¿›ç¨‹ã€‚<br />å…³é—­ç»ˆç«¯åï¼Œåœ¨å¦ä¸€ä¸ªç»ˆç«¯jobså·²ç»æ— æ³•çœ‹åˆ°åå°è·‘å¾—ç¨‹åºäº†ï¼Œæ­¤æ—¶åˆ©ç”¨psï¼ˆè¿›ç¨‹æŸ¥çœ‹å‘½ä»¤ï¼‰</p><h1 id="éªŒè¯jsonæ ¼å¼æ­£ç¡®æ€§"><a class="markdownIt-Anchor" href="#éªŒè¯jsonæ ¼å¼æ­£ç¡®æ€§"></a> éªŒè¯JSONæ ¼å¼æ­£ç¡®æ€§</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">cat a.json | python -m json.tool | wc -l <br></code></pre></td></tr></table></figure><p>ä½¿ç”¨ä¸Šè¿°å‘½ä»¤ï¼Œå¯ä»¥æ£€æŸ¥ä¸€ä¸ªæ–‡ä»¶æ˜¯å¦ç¬¦åˆjsonæ ¼å¼ï¼Œå…¶å®ç°åŸç†å¦‚ä¸‹ï¼š</p><ul><li>è¦éªŒè¯çš„æ–‡ä»¶ a.jsonï¼›</li><li>å¦‚æœè¿”å›ç»“æœä¸€è¡Œæ•°å­—ï¼Œåˆ™è¡¨ç¤º a.json æ–‡ä»¶æ ¼å¼æ­£ç¡®ï¼›</li><li>å¦åˆ™è¿”å› a.json æ–‡ä»¶ä¸­é”™è¯¯çš„è¡Œå·åŠé”™è¯¯ä¿¡æ¯ã€‚</li></ul><p>ä¸€æ—¦ JSON æ–‡ä»¶æ ¼å¼ä¸å¯¹ï¼Œæˆ–è€…æ–‡ä»¶å†…å®¹ç¼ºå¤±æˆ–è€…å…¶ä»–é—®é¢˜ï¼Œå°±ä¼šå¯¼è‡´ python -m å‘½ä»¤æ— æ³•æ ¼å¼åŒ–ï¼Œæ­£æ˜¯åˆ©ç”¨è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥åšä¸€ä¸ª JSON çš„éªŒè¯ã€‚<sup id="fnref:3" class="footnote-ref"><a href="#fn:3" rel="footnote"><span class="hint--top hint--rounded" aria-label="Linuxå¼€å‘å°æŠ€å·§">[3]</span></a></sup></p><hr /><p>ä¸ºäº†ç®€åŒ–å‘½ä»¤ï¼Œå¯ä»¥åˆ©ç”¨aliasè®¾ç½®å‘½ä»¤åˆ«åï¼Œä½†æ˜¯å› ä¸ºéœ€è¦å‘½ä»¤è¡Œå‚æ•°ä¼ å…¥æ–‡ä»¶åï¼Œè€Œaliasä¸æ”¯æŒå‘½ä»¤è¡Œå‚æ•°ã€‚åœ¨æŸ¥é˜…èµ„æ–™å<sup id="fnref:4" class="footnote-ref"><a href="#fn:4" rel="footnote"><span class="hint--top hint--rounded" aria-label="linuxä¸­ç»™ alias æ·»åŠ è‡ªå®šä¹‰çš„å‚æ•°">[4]</span></a></sup>ï¼Œæ‰¾åˆ°ä¸€ç§æ–¹æ³•ï¼Œå°±æ˜¯é€šè¿‡å®šä¹‰å‡½æ•°çš„æ–¹å¼æ¥å®ç°ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">alias isjson=&#x27;isjson()&#123;cat &quot;$1&quot; | python -m json.tool | wc -l&#125;; isjson&#x27;<br></code></pre></td></tr></table></figure><h1 id="grep-sed-awkå‘½ä»¤"><a class="markdownIt-Anchor" href="#grep-sed-awkå‘½ä»¤"></a> GREPã€SEDã€AWKå‘½ä»¤</h1><h2 id="grep"><a class="markdownIt-Anchor" href="#grep"></a> GREP</h2><p>grep æŒ‡ä»¤ç”¨äºæŸ¥æ‰¾å†…å®¹åŒ…å«æŒ‡å®šçš„èŒƒæœ¬æ ·å¼çš„æ–‡ä»¶ï¼Œå¦‚æœå‘ç°æŸæ–‡ä»¶çš„å†…å®¹ç¬¦åˆæ‰€æŒ‡å®šçš„èŒƒæœ¬æ ·å¼ï¼Œé¢„è®¾ grep æŒ‡ä»¤ä¼šæŠŠå«æœ‰èŒƒæœ¬æ ·å¼çš„é‚£ä¸€åˆ—æ˜¾ç¤ºå‡ºæ¥ã€‚<sup id="fnref:3" class="footnote-ref"><a href="#fn:3" rel="footnote"><span class="hint--top hint--rounded" aria-label="Linuxå¼€å‘å°æŠ€å·§">[3]</span></a></sup></p><ul><li>grepé»˜è®¤æ˜¯å¿½ç•¥äºŒè¿›åˆ¶æ•°æ®çš„ï¼Œå¯ä»¥åŠ ä¸Š <code>-a</code> æˆ– <code>--text</code> æ¥è¡¨ç¤ºä¸å¿½ç•¥äºŒè¿›åˆ¶æ–‡ä»¶ã€‚</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">grep -a file_name<br>æˆ–<br>grep --text file_name <br></code></pre></td></tr></table></figure><ul><li><strong>-E</strong>  : ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼ŒåŒ¹é…äº†æ‰è¾“å‡º</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">grep -E &quot;word1|word2|word3&quot; file.txt<br><span class="hljs-meta">#</span><span class="bash">æ»¡è¶³ä»»æ„æ¡ä»¶ï¼ˆword1ã€word2å’Œword3ä¹‹ä¸€ï¼‰å°†åŒ¹é…ã€‚</span><br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">grep word1 file.txt | grep word2 |grep word3<br><span class="hljs-meta">#</span><span class="bash">å¿…é¡»åŒæ—¶æ»¡è¶³ä¸‰ä¸ªæ¡ä»¶ï¼ˆword1ã€word2å’Œword3ï¼‰æ‰åŒ¹é…ã€‚</span><br></code></pre></td></tr></table></figure><ul><li><strong>-r</strong>  ï¼šé€’å½’æœç´¢ç›®å½•</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">grep -r word directory<br></code></pre></td></tr></table></figure><ul><li><strong>-v</strong> : æ˜¾ç¤ºä¸åŒ…å«åŒ¹é…æ–‡æœ¬çš„æ‰€æœ‰è¡Œã€‚</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">grep -v &#x27;abc\|efg&#x27; log.txt<br><span class="hljs-meta">#</span><span class="bash">æ’é™¤ log.txt ä¸­çš„ abc efg å…³é”®å­—</span><br></code></pre></td></tr></table></figure><h2 id="sed"><a class="markdownIt-Anchor" href="#sed"></a> SED</h2><p>sed å¯ä¾ç…§è„šæœ¬çš„æŒ‡ä»¤æ¥å¤„ç†ã€ç¼–è¾‘æ–‡æœ¬æ–‡ä»¶ã€‚sed ä¸»è¦ç”¨æ¥è‡ªåŠ¨ç¼–è¾‘ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶ã€ç®€åŒ–å¯¹æ–‡ä»¶çš„åå¤æ“ä½œã€ç¼–å†™è½¬æ¢ç¨‹åºç­‰ã€‚</p><p>å¯¹æ–‡ä»¶è¿›è¡Œæ–‡æœ¬æ›¿æ¢æ“ä½œï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">sed -i &#x27;s/åŸå­—ç¬¦ä¸²/æ–°å­—ç¬¦ä¸²/&#x27; filename<br>sed -i &#x27;s/åŸå­—ç¬¦ä¸²/æ–°å­—ç¬¦ä¸²/g&#x27; filename<br></code></pre></td></tr></table></figure><p><strong>-i</strong> è¡¨ç¤ºç›´æ¥ä¿®æ”¹è¯»å–çš„æ–‡ä»¶å†…å®¹ï¼Œè€Œä¸æ˜¯è¾“å‡ºåˆ°ç»ˆç«¯ã€‚</p><p>æœ€åå¸¦ g è¿›è¡Œäº†ä¸€ä¸ªå…¨å±€çš„æœç´¢ï¼›ä¸å¸¦gçš„è¯ï¼Œåªæ˜¯åŒ¹é…æ¯è¡Œçš„ç¬¬ä¸€ä¸ªå­—æ®µï¼Œåé¢çš„åŒ¹é…åˆ™ä¼šå¿½ç•¥ã€‚</p><hr /><p>ç¤ºä¾‹ï¼š</p><ul><li>sed æ–‡ä»¶é¦–å°¾æ·»åŠ å¼•å·</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sed -i &#x27;s/^/&quot;/;s/$/&quot;/&#x27;  log.txt<br></code></pre></td></tr></table></figure><ul><li>sed æ–‡ä»¶å°¾æ·»åŠ é€—å·</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sed -i &#x27;s/$/,/&#x27;  txt<br></code></pre></td></tr></table></figure><p class="note note-info">  æ³¨æ„ä¸Šè¿°å‘½ä»¤åœ¨Macç³»ç»Ÿçš„ç»ˆç«¯é‡Œä¼šæŠ¥é”™ï¼Œéœ€è¦åœ¨"-i" ååŠ ä¸Š "" </p><h2 id="awk"><a class="markdownIt-Anchor" href="#awk"></a> AWK</h2><p>AWK æ˜¯ä¸€ç§å¤„ç†æ–‡æœ¬æ–‡ä»¶çš„è¯­è¨€ï¼Œæ˜¯ä¸€ä¸ªå¼ºå¤§çš„æ–‡æœ¬åˆ†æå·¥å…·ã€‚</p><ul><li>-F ï¼šæŒ‡å®šè¾“å…¥æ–‡ä»¶æŠ˜åˆ†éš”ç¬¦</li><li>-v : èµ‹å€¼ä¸€ä¸ªç”¨æˆ·å®šä¹‰å˜é‡ã€‚</li></ul><p>ä½¿ç”¨ç¤ºä¾‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> æ¯è¡ŒæŒ‰ç©ºæ ¼æˆ–TABåˆ†å‰²ï¼Œè¾“å‡ºæ–‡æœ¬ä¸­çš„1ã€4é¡¹</span><br>awk &#x27;&#123;print $1,$4&#125;&#x27; log.txt<br><span class="hljs-meta">#</span><span class="bash"> æ ¼å¼åŒ–è¾“å‡º</span><br>awk &#x27;&#123;printf &quot;%-8s %-10s\n&quot;,$1,$4&#125;&#x27; log.txt<br><span class="hljs-meta">#</span><span class="bash"> ä½¿ç”¨<span class="hljs-string">&quot;,&quot;</span>åˆ†å‰²</span><br>awk -F , &#x27;&#123;print $1,$2&#125;&#x27;   log.txt<br><span class="hljs-meta">#</span><span class="bash"> ä½¿ç”¨è‡ªå®šä¹‰å˜é‡</span><br>awk -v a=1 &#x27;&#123;print $1,$1+a&#125;&#x27; log.txt# æ•°å€¼åŠ <br>awk -v a=1 &#x27;&#123;print $1,$1a&#125;&#x27; log.txt# å­—ç¬¦åŠ <br></code></pre></td></tr></table></figure><h1 id="å‹ç¼©å’Œè§£å‹"><a class="markdownIt-Anchor" href="#å‹ç¼©å’Œè§£å‹"></a> å‹ç¼©å’Œè§£å‹</h1><h2 id="zip"><a class="markdownIt-Anchor" href="#zip"></a> zip</h2><ul><li>å‹ç¼©æ–‡ä»¶ï¼š <code>zip å‹ç¼©æ–‡ä»¶å æºæ–‡ä»¶</code></li><li>å‹ç¼©ç›®å½•ï¼š <code>zip -r å‹ç¼©æ–‡ä»¶å æºç›®å½•</code></li><li>è§£å‹ï¼š <code>unzip å‹ç¼©æ–‡ä»¶å</code></li></ul><p>ç¤ºä¾‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell">mkdir book<br>touch book/1.txt<br>touch book/2.txt<br>zip -r book.zip book<br>unzip book.zip<br></code></pre></td></tr></table></figure><h2 id="gzip"><a class="markdownIt-Anchor" href="#gzip"></a> gzip</h2><table><thead><tr><th style="text-align:left">å‘½ä»¤</th><th style="text-align:left">ç¤ºä¾‹</th><th style="text-align:left">å«ä¹‰</th></tr></thead><tbody><tr><td style="text-align:left">gzip æºæ–‡ä»¶</td><td style="text-align:left">gzip a.txt</td><td style="text-align:left">å‹ç¼©ä¸º.gzæ ¼å¼çš„å‹ç¼©æ–‡ä»¶ï¼Œæºæ–‡ä»¶ä¼šæ¶ˆå¤±</td></tr><tr><td style="text-align:left">gzip -c æºæ–‡ä»¶ &gt; å‹ç¼©æ–‡ä»¶</td><td style="text-align:left">gzip -c yum.txt &gt; yum.txt.gz</td><td style="text-align:left">å‹ç¼©ä¸º.gzæ ¼å¼çš„å‹ç¼©æ–‡ä»¶ï¼Œæºæ–‡ä»¶ä¸ä¼šæ¶ˆå¤±</td></tr><tr><td style="text-align:left">gzip -r ç›®å½•</td><td style="text-align:left">gzip -r xx</td><td style="text-align:left">å‹ç¼©ç›®å½•ä¸‹çš„æ‰€æœ‰å­æ–‡ä»¶ï¼Œä½†æ˜¯ä¸å‹ç¼©ç›®å½•</td></tr><tr><td style="text-align:left">gzip -d å‹ç¼©æ–‡ä»¶å</td><td style="text-align:left">gzip -d yum.txt.gz</td><td style="text-align:left">è§£å‹ç¼©æ–‡ä»¶,ä¸ä¿ç•™å‹ç¼©åŒ…</td></tr><tr><td style="text-align:left">gunzip å‹ç¼©æ–‡ä»¶</td><td style="text-align:left">gunzip yum.txt.gz</td><td style="text-align:left">è§£å‹ç¼©æ–‡ä»¶,ä¸ä¿ç•™å‹ç¼©åŒ…</td></tr></tbody></table><h2 id="tar"><a class="markdownIt-Anchor" href="#tar"></a> tar</h2><ul><li>tar -cvf æ‰“åŒ…æ–‡ä»¶å æºæ–‡ä»¶<sup id="fnref:5" class="footnote-ref"><a href="#fn:5" rel="footnote"><span class="hint--top hint--rounded" aria-label="linuxæ€»ç»“">[5]</span></a></sup><ul><li>-c æ‰“åŒ…</li><li>-v æ˜¾ç¤ºè¿‡ç¨‹</li><li>-f æŒ‡å®šæ‰“åŒ…åçš„æ–‡ä»¶å</li><li>-x è§£æ‰“åŒ…</li></ul></li></ul><p>ç¤ºä¾‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">tar -cvf book.tar book<br>tar -xvf book.tar<br></code></pre></td></tr></table></figure><p><strong>æ›´å¤šå‹ç¼©å‘½ä»¤ï¼š</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs shell">tar â€“cvf jpg.tar *.jpg #å°†ç›®å½•é‡Œæ‰€æœ‰jpgæ–‡ä»¶æ‰“åŒ…æˆtar.jpg <br><br>tar â€“czf jpg.tar.gz *.jpg #å°†ç›®å½•é‡Œæ‰€æœ‰jpgæ–‡ä»¶æ‰“åŒ…æˆjpg.taråï¼Œå¹¶ä¸”å°†å…¶ç”¨gzipå‹ç¼©ï¼Œç”Ÿæˆä¸€ä¸ªgzipå‹ç¼©è¿‡çš„åŒ…ï¼Œå‘½åä¸ºjpg.tar.gz <br><br>tar â€“cjf jpg.tar.bz2 *.jpg #å°†ç›®å½•é‡Œæ‰€æœ‰jpgæ–‡ä»¶æ‰“åŒ…æˆjpg.taråï¼Œå¹¶ä¸”å°†å…¶ç”¨bzip2å‹ç¼©ï¼Œç”Ÿæˆä¸€ä¸ªbzip2å‹ç¼©è¿‡çš„åŒ…ï¼Œå‘½åä¸ºjpg.tar.bz2 <br><br>tar â€“cZf jpg.tar.Z *.jpg #å°†ç›®å½•é‡Œæ‰€æœ‰jpgæ–‡ä»¶æ‰“åŒ…æˆjpg.taråï¼Œå¹¶ä¸”å°†å…¶ç”¨compresså‹ç¼©ï¼Œç”Ÿæˆä¸€ä¸ªumcompresså‹ç¼©è¿‡çš„åŒ…ï¼Œå‘½åä¸ºjpg.tar.Z <br><br>rar a jpg.rar *.jpg #raræ ¼å¼çš„å‹ç¼©ï¼Œéœ€è¦å…ˆä¸‹è½½rar for linux <br><br>zip jpg.zip *.jpg #zipæ ¼å¼çš„å‹ç¼©ï¼Œéœ€è¦å…ˆä¸‹è½½zip for linux<br></code></pre></td></tr></table></figure><p><strong>æ›´å¤šè§£å‹å‘½ä»¤ï¼š</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs shell">tar â€“xvf file.tar #è§£å‹ taråŒ… <br><br>tar -xzvf file.tar.gz #è§£å‹tar.gz<br><br>tar -xjvf file.tar.bz2 #è§£å‹ tar.bz2 <br><br>tar â€“xZvf file.tar.Z #è§£å‹tar.Z <br><br>unrar e file.rar #è§£å‹rar <br><br>unzip file.zip #è§£å‹zip<br></code></pre></td></tr></table></figure><h1 id="ç¡¬é“¾æ¥å’Œè½¯é“¾æ¥"><a class="markdownIt-Anchor" href="#ç¡¬é“¾æ¥å’Œè½¯é“¾æ¥"></a> ç¡¬é“¾æ¥å’Œè½¯é“¾æ¥</h1><blockquote><p>å‚è€ƒï¼š<a href="https://www.linuxprobe.com/soft-and-hard-links.html">è½¯é“¾æ¥å’Œç¡¬é“¾æ¥çš„åŒºåˆ«</a><sup id="fnref:6" class="footnote-ref"><a href="#fn:6" rel="footnote"><span class="hint--top hint--rounded" aria-label="è½¯é“¾æ¥å’Œç¡¬é“¾æ¥çš„åŒºåˆ«">[6]</span></a></sup></p></blockquote><p>æˆ‘ä»¬çŸ¥é“æ–‡ä»¶éƒ½æœ‰æ–‡ä»¶åä¸æ•°æ®ï¼Œè¿™åœ¨ <a href="https://www.linuxprobe.com/">Linux</a> ä¸Šè¢«åˆ†æˆä¸¤ä¸ªéƒ¨åˆ†ï¼šç”¨æˆ·æ•°æ® (user data) ä¸å…ƒæ•°æ® (metadata)ã€‚ç”¨æˆ·æ•°æ®ï¼Œå³æ–‡ä»¶æ•°æ®å— (data block)ï¼Œæ•°æ®å—æ˜¯è®°å½•æ–‡ä»¶çœŸå®å†…å®¹çš„åœ°æ–¹ï¼›è€Œå…ƒæ•°æ®åˆ™æ˜¯æ–‡ä»¶çš„é™„åŠ å±æ€§ï¼Œå¦‚æ–‡ä»¶å¤§å°ã€åˆ›å»ºæ—¶é—´ã€æ‰€æœ‰è€…ç­‰ä¿¡æ¯ã€‚åœ¨ Linux ä¸­ï¼Œå…ƒæ•°æ®ä¸­çš„ inode å·ï¼ˆinode æ˜¯æ–‡ä»¶å…ƒæ•°æ®çš„ä¸€éƒ¨åˆ†ä½†å…¶å¹¶ä¸åŒ…å«æ–‡ä»¶åï¼Œinode å·å³ç´¢å¼•èŠ‚ç‚¹å·ï¼‰æ‰æ˜¯æ–‡ä»¶çš„å”¯ä¸€æ ‡è¯†è€Œéæ–‡ä»¶åã€‚æ–‡ä»¶åä»…æ˜¯ä¸ºäº†æ–¹ä¾¿äººä»¬çš„è®°å¿†å’Œä½¿ç”¨ï¼Œç³»ç»Ÿæˆ–ç¨‹åºé€šè¿‡ inode å·å¯»æ‰¾æ­£ç¡®çš„æ–‡ä»¶æ•°æ®å—ã€‚è€Œæœ‰ä¸€ç§æ–¹æ³•å¯ä»¥å¿«é€Ÿçš„å¯»æ‰¾åˆ°æ•°æ®å…ƒï¼Œé‚£å°±æ˜¯è½¯ç¡¬é“¾æ¥ï¼Œé“¾æ¥å®é™…ä¸Šå°±æ˜¯ä¸€ç§æ–‡ä»¶å…±äº«çš„æ–¹å¼ã€‚</p><p>é‚£ä¹ˆè½¯é“¾æ¥å’Œç¡¬é“¾æ¥çš„åŒºåˆ«åœ¨å“ªå‘¢ï¼Ÿ<sup id="fnref:7" class="footnote-ref"><a href="#fn:7" rel="footnote"><span class="hint--top hint--rounded" aria-label="linuxä¸­ç¡¬é“¾æ¥ä¸è½¯é“¾æ¥çš„åŒºåˆ«">[7]</span></a></sup></p><ol><li><strong>é¦–å…ˆï¼Œä¸¤è€…ä½œç”¨çš„å¯¹è±¡ä¸åŒï¼š</strong></li></ol><ul><li>ç¡¬é“¾æ¥ï¼Œåªèƒ½åº”ç”¨äºæ–‡ä»¶ï¼Œè€Œä¸èƒ½åº”ç”¨äºç›®å½•ï¼Œè€Œä¸”ä¸èƒ½è·¨æ–‡ä»¶ç³»ç»Ÿï¼ˆå³åˆ†åŒºï¼‰ï¼›</li><li>è½¯ï¼ˆç¬¦å·ï¼‰é“¾æ¥ï¼Œå¯ä»¥åº”ç”¨äºæ–‡ä»¶ï¼Œè€Œä¸”å¯ä»¥åº”ç”¨äºç›®å½•å’Œå¯è·¨æ–‡ä»¶ç³»ç»Ÿï¼ˆåˆ†åŒºï¼‰ã€‚</li></ul><ol start="2"><li><strong>å…¶æ¬¡ï¼Œä¸¤è€…çš„ä½œç”¨åŸç†ä¸åŒï¼š</strong></li></ol><ul><li>ç¡¬é“¾æ¥ä¸­ï¼Œå‡å¦‚è¯´Aæ–‡ä»¶æ˜¯Bæ–‡ä»¶çš„ç¡¬è¿æ¥æ–‡ä»¶ï¼Œé‚£ä¹ˆAå’ŒBçš„inodeèŠ‚ç‚¹å·ç›¸åŒï¼Œå³ä¸€ä¸ªinodeèŠ‚ç‚¹å¯¹åº”ä¸¤ä¸ªä¸åŒçš„æ–‡ä»¶åï¼Œä¸¤ä¸ªæ–‡ä»¶åæŒ‡å‘åŒä¸€ä¸ªæ–‡ä»¶ï¼ŒAå’ŒBå¯¹æ–‡ä»¶ç³»ç»Ÿæ¥è¯´æ˜¯å®Œå…¨å¹³ç­‰çš„ï¼Œç¡¬é“¾æ¥ä¸­ä¸€ä¸ªinodeå·å¯ä»¥å¯¹åº”å¤šä¸ªæ–‡ä»¶ã€‚å¦‚æœåˆ é™¤å…¶ä¸­ä»»ä½•ä¸€ä¸ªæ–‡ä»¶ï¼Œå¦å¤–ä¸€ä¸ªæ–‡ä»¶è¿˜èƒ½è¿æ¥æ•°æ®å—ï¼Œè¿˜æ˜¯æœ‰æ•ˆçš„æ–‡ä»¶ï¼Œåªæ˜¯å¯¹åº”çš„inodeèŠ‚ç‚¹å·å‡å°‘ï¼Œå…¶å®ƒå¹¶æ— å½±å“ã€‚åªæœ‰inodeèŠ‚ç‚¹å·å‡å°‘åˆ°0ï¼Œæ•°æ®å—æ‰ä¼šè¢«ç³»ç»Ÿå›æ”¶ã€‚</li><li>è€Œåœ¨è½¯é“¾æ¥ä¸­ï¼Œå‡å¦‚è¯´Aæ–‡ä»¶æ˜¯Bæ–‡ä»¶çš„è½¯è¿æ¥æ–‡ä»¶ï¼Œåˆ™Aå’ŒBçš„inodeèŠ‚ç‚¹å·ä¸åŒï¼Œæ¯åˆ›å»ºä¸€ä¸ªæ–°çš„è½¯é“¾æ¥ï¼Œå°±ä¼šæœ‰ä¸€ä¸ªæ–°çš„èŠ‚ç‚¹å·ã€‚è€ŒAçš„æ•°æ®å—ä¸­å­˜æ”¾çš„åªæ˜¯Bçš„è·¯å¾„åï¼ˆå¯ä»¥æ ¹æ®è¿™ä¸ªæ‰¾åˆ°Bçš„ç›®å½•é¡¹ï¼‰ã€‚Aå’ŒBä¹‹é—´æ˜¯â€œä¸»ä»â€å…³ç³»ï¼Œå¦‚æœBè¢«åˆ é™¤äº†ï¼ŒAä»ç„¶å­˜åœ¨ï¼ˆå› ä¸ºä¸¤ä¸ªæ˜¯ä¸åŒçš„æ–‡ä»¶ï¼‰ï¼Œä½†æŒ‡å‘çš„æ˜¯ä¸€ä¸ªæ— æ•ˆçš„é“¾æ¥ã€‚</li></ul><ol start="3"><li><strong>è¯­æ³•ä¸åŒï¼š</strong></li></ol><ul><li>ç¡¬é“¾æ¥çš„è¯­æ³•ï¼š<code>ln filename [linkname ]</code></li><li>è½¯é“¾æ¥çš„è¯­æ³•ï¼š<code>ln -s filename [linkname]</code></li></ul><hr /><p>æœ€åæ€»ç»“ä¸€ä¸‹ï¼š</p><ul><li>ç¡¬é“¾æ¥ï¼šä¸æ™®é€šæ–‡ä»¶æ²¡ä»€ä¹ˆä¸åŒï¼Œinode éƒ½æŒ‡å‘åŒä¸€ä¸ªæ–‡ä»¶åœ¨ç¡¬ç›˜ä¸­çš„åŒºå—ï¼›</li><li>è½¯é“¾æ¥ï¼š ä¿å­˜äº†å…¶ä»£è¡¨çš„æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ï¼Œæ˜¯å¦å¤–ä¸€ç§æ–‡ä»¶ï¼Œåœ¨ç¡¬ç›˜ä¸Šæœ‰ç‹¬ç«‹çš„åŒºå—ï¼Œè®¿é—®æ•°æ®æ—¶ï¼Œå°†ç”¨æ•°æ®å—ä¸­æŒ‡å‘çš„æ–‡ä»¶è·¯å¾„è¿›è¡Œæ›¿æ¢ã€‚</li></ul><h1 id="å…¶å®ƒshellæŠ€å·§"><a class="markdownIt-Anchor" href="#å…¶å®ƒshellæŠ€å·§"></a> å…¶å®ƒshellæŠ€å·§</h1><h2 id="è¾“å…¥ç›¸ä¼¼æ–‡ä»¶å"><a class="markdownIt-Anchor" href="#è¾“å…¥ç›¸ä¼¼æ–‡ä»¶å"></a> è¾“å…¥ç›¸ä¼¼æ–‡ä»¶å</h2><p>ç”¨èŠ±æ‹¬å·æ‹¬èµ·æ¥çš„å­—ç¬¦ä¸²ä¹‹é—´å†ç”¨é€—å·è¿æ¥ï¼Œå¯ä»¥å®ç°è‡ªåŠ¨æ‰©å±•ï¼Œéå¸¸æœ‰ç”¨ã€‚èŠ±æ‹¬å·ä¸­çš„æ¯ä¸ªå­—ç¬¦éƒ½å¯ä»¥å’Œä¹‹åï¼ˆæˆ–ä¹‹å‰ï¼‰çš„å­—ç¬¦ä¸²è¿›è¡Œç»„åˆæ‹¼æ¥ï¼Œæ³¨æ„èŠ±æ‹¬å·å’Œå…¶ä¸­çš„é€—å·ä¸å¯ä»¥ç”¨ç©ºæ ¼åˆ†éš”ï¼Œå¦åˆ™ä¼šè¢«è®¤ä¸ºæ˜¯æ™®é€šçš„å­—ç¬¦ä¸²å¯¹å¾…ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">echo</span> &#123;one,two,three&#125;file</span><br>onefile twofile threefile<br><span class="hljs-meta"></span><br><span class="hljs-meta">$</span><span class="bash"> <span class="hljs-built_in">echo</span> &#123;one,two,three&#125;&#123;1,2,3&#125;</span><br>one1 one2 one3 two1 two2 two3 three1 three2 three3<br></code></pre></td></tr></table></figure><p>è¿™ä¸ªæŠ€å·§æœ‰ä»€ä¹ˆå®é™…ç”¨å¤„å‘¢ï¼Ÿæœ€ç®€å•å®ç”¨çš„å°±æ˜¯ç»™ cp,mv,rm ç­‰å‘½ä»¤æ‰©å±•å‚æ•°ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> cp /search/code/file&#123;,.bak&#125;</span><br><span class="hljs-meta">#</span><span class="bash"> ç»™ file å¤åˆ¶ä¸€ä¸ªå«åš file.bak çš„å‰¯æœ¬</span><br><span class="hljs-meta"></span><br><span class="hljs-meta">$</span><span class="bash"> rm file&#123;1,3,5&#125;.txt</span><br><span class="hljs-meta">#</span><span class="bash"> åˆ é™¤ file1.txt file3.txt file5.txt</span><br><span class="hljs-meta"></span><br><span class="hljs-meta">$</span><span class="bash"> mv *.&#123;c,cpp&#125; src/</span><br><span class="hljs-meta">#</span><span class="bash"> å°†æ‰€æœ‰ .c å’Œ .cpp ä¸ºåç¼€çš„æ–‡ä»¶ç§»å…¥ src æ–‡ä»¶å¤¹</span><br></code></pre></td></tr></table></figure><h2 id="å‘½ä»¤å¿«æ·é”®"><a class="markdownIt-Anchor" href="#å‘½ä»¤å¿«æ·é”®"></a> å‘½ä»¤å¿«æ·é”®</h2><table><thead><tr><th style="text-align:left">å‘½ä»¤</th><th style="text-align:left">å«ä¹‰</th></tr></thead><tbody><tr><td style="text-align:left">ctrl+c</td><td style="text-align:left">å¼ºåˆ¶ç»ˆæ­¢å½“å‰å‘½ä»¤</td></tr><tr><td style="text-align:left">ctrl+l</td><td style="text-align:left">æ¸…å±</td></tr><tr><td style="text-align:left">ctrl+a</td><td style="text-align:left">å…‰æ ‡ç§»åŠ¨åˆ°å‘½ä»¤è¡Œé¦–</td></tr><tr><td style="text-align:left">ctrl+e</td><td style="text-align:left">å…‰æ ‡ç§»åŠ¨åˆ°å‘½ä»¤è¡Œå°¾</td></tr><tr><td style="text-align:left">ctrl+u</td><td style="text-align:left">ä»å…‰æ ‡æ‰€åœ¨çš„ä½ç½®åˆ é™¤åˆ°è¡Œé¦–</td></tr><tr><td style="text-align:left">ctrl+z</td><td style="text-align:left">æŠŠå‘½ä»¤æ”¾å…¥åå°</td></tr><tr><td style="text-align:left">ctrl+r</td><td style="text-align:left">åœ¨å†å²å‘½ä»¤ä¸­æœç´¢</td></tr><tr><td style="text-align:left">!n</td><td style="text-align:left">æ›¿æ¢æˆç¬¬næ¡å†å²å‘½ä»¤</td></tr><tr><td style="text-align:left">!!</td><td style="text-align:left">æ›¿æ¢æˆä¸Šä¸€æ¡å‘½ä»¤</td></tr><tr><td style="text-align:left">!å­—ç¬¦</td><td style="text-align:left">æ›¿æ¢æˆæœ€åä¸€æ¡ä»¥è¯¥å­—ç¬¦ä¸²å¼€å¤´çš„å‘½ä»¤</td></tr></tbody></table><h2 id="å‘½ä»¤è¿æ¥ç¬¦"><a class="markdownIt-Anchor" href="#å‘½ä»¤è¿æ¥ç¬¦"></a> å‘½ä»¤è¿æ¥ç¬¦</h2><ol><li><p><strong>; åˆ†å·</strong>ï¼šæ²¡æœ‰ä»»ä½•é€»è¾‘å…³ç³»çš„è¿æ¥ç¬¦ã€‚å½“å¤šä¸ªå‘½ä»¤ç”¨åˆ†å·è¿æ¥æ—¶ï¼Œå„å‘½ä»¤ä¹‹é—´çš„æ‰§è¡ŒæˆåŠŸä¸å¦å½¼æ­¤æ²¡æœ‰ä»»ä½•å½±å“ï¼Œéƒ½ä¼šä¸€æ¡ä¸€æ¡æ‰§è¡Œä¸‹å»ã€‚</p></li><li><p><strong>|| é€»è¾‘æˆ–</strong>ï¼šå½“ç”¨æ­¤è¿æ¥ç¬¦è¿æ¥å¤šä¸ªå‘½ä»¤æ—¶ï¼Œå‰é¢çš„å‘½ä»¤æ‰§è¡ŒæˆåŠŸï¼Œåˆ™åé¢çš„å‘½ä»¤ä¸ä¼šæ‰§è¡Œã€‚å‰é¢çš„å‘½ä»¤æ‰§è¡Œå¤±è´¥ï¼Œåé¢çš„å‘½ä»¤æ‰ä¼šæ‰§è¡Œã€‚</p></li><li><p><strong>&amp;&amp; é€»è¾‘ä¸</strong>ï¼šå½“ç”¨æ­¤è¿æ¥ç¬¦è¿æ¥å¤šä¸ªå‘½ä»¤æ—¶ï¼Œå‰é¢çš„å‘½ä»¤æ‰§è¡ŒæˆåŠŸï¼Œæ‰ä¼šæ‰§è¡Œåé¢çš„å‘½ä»¤ï¼Œå‰é¢çš„å‘½ä»¤æ‰§è¡Œå¤±è´¥ï¼Œåé¢çš„å‘½ä»¤ä¸ä¼šæ‰§è¡Œï¼Œä¸ || æ­£å¥½ç›¸åã€‚</p></li><li><p><strong>| ç®¡é“ç¬¦</strong>ï¼šå½“ç”¨æ­¤è¿æ¥ç¬¦è¿æ¥å¤šä¸ªå‘½ä»¤æ—¶ï¼Œå‰é¢å‘½ä»¤æ‰§è¡Œçš„æ­£ç¡®è¾“å‡ºï¼Œä¼šäº¤ç»™åé¢çš„å‘½ä»¤ç»§ç»­å¤„ç†ã€‚è‹¥å‰é¢çš„å‘½ä»¤æ‰§è¡Œå¤±è´¥ï¼Œåˆ™ä¼šæŠ¥é”™ï¼Œè‹¥åé¢çš„å‘½ä»¤æ— æ³•å¤„ç†å‰é¢å‘½ä»¤çš„è¾“å‡ºï¼Œä¹Ÿä¼šæŠ¥é”™</p></li></ol><h2 id="å¤åˆ¶æ–‡æœ¬å†…å®¹"><a class="markdownIt-Anchor" href="#å¤åˆ¶æ–‡æœ¬å†…å®¹"></a> å¤åˆ¶æ–‡æœ¬å†…å®¹</h2><p>æœ‰æ—¶å€™ä¸å¥½åœ¨ç»ˆç«¯ç•Œé¢é‡Œï¼Œç”¨é¼ æ ‡æ“ä½œé€‰ä¸­å¹¶å¤åˆ¶æ–‡ä»¶é‡Œçš„æ–‡æœ¬å†…å®¹ï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤æ¥å¤åˆ¶æ–‡ä»¶é‡Œçš„å†…å®¹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> æ–¹æ³•1ï¼Œåˆ©ç”¨é‡å®šå‘</span><br><span class="hljs-meta">$</span><span class="bash"> pbcopy &lt; file.txt</span><br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash"> æ–¹æ³•2ï¼Œåˆ©ç”¨ç®¡é“</span><br><span class="hljs-meta">$</span><span class="bash"> cat file.txt | pbcopy</span><br></code></pre></td></tr></table></figure><h1 id="bonus-ç³»ç»Ÿå¯åŠ¨è¿‡ç¨‹"><a class="markdownIt-Anchor" href="#bonus-ç³»ç»Ÿå¯åŠ¨è¿‡ç¨‹"></a> Bonus: ç³»ç»Ÿå¯åŠ¨è¿‡ç¨‹</h1><blockquote><p>å‚è€ƒé˜®ä¸€å³°å¤§ä½¬çš„è¿™ç¯‡åšå®¢ï¼š<a href="http://www.ruanyifeng.com/blog/2013/02/booting.html">è®¡ç®—æœºæ˜¯å¦‚ä½•å¯åŠ¨çš„</a><sup id="fnref:8" class="footnote-ref"><a href="#fn:8" rel="footnote"><span class="hint--top hint--rounded" aria-label="è®¡ç®—æœºæ˜¯å¦‚ä½•å¯åŠ¨çš„">[8]</span></a></sup></p></blockquote><h2 id="1bios"><a class="markdownIt-Anchor" href="#1bios"></a> 1.BIOS</h2><ul><li>è®¡ç®—æœºé€šç”µåï¼Œç¬¬ä¸€ä»¶äº‹å°±æ˜¯è¯»å–åˆ·å…¥ROMèŠ¯ç‰‡çš„å¼€æœºç¨‹åºï¼Œè¿™ä¸ªç¨‹åºå«åš(Basic Input/Output System)</li></ul><h2 id="2ç¡¬ä»¶è‡ªæ£€"><a class="markdownIt-Anchor" href="#2ç¡¬ä»¶è‡ªæ£€"></a> 2.ç¡¬ä»¶è‡ªæ£€</h2><ul><li>BIOSç¨‹åºé¦–å…ˆæ£€æŸ¥ï¼Œè®¡ç®—æœºç¡¬ä»¶èƒ½å¦æ»¡è¶³è¿è¡Œçš„åŸºæœ¬æ¡ä»¶ï¼Œè¿™å«åš&quot;ç¡¬ä»¶è‡ªæ£€&quot;ï¼ˆPower-On Self-Test)</li><li>å¦‚æœç¡¬ä»¶å‡ºç°é—®é¢˜ï¼Œä¸»æ¿ä¼šå‘å‡ºä¸åŒå«ä¹‰çš„èœ‚é¸£ï¼Œå¯åŠ¨ä¸­æ­¢ã€‚å¦‚æœæ²¡æœ‰é—®é¢˜ï¼Œå±å¹•å°±ä¼šæ˜¾ç¤ºå‡ºCPUã€å†…å­˜ã€ç¡¬ç›˜ç­‰ä¿¡æ¯ã€‚</li></ul><h2 id="3-å¯åŠ¨é¡ºåº"><a class="markdownIt-Anchor" href="#3-å¯åŠ¨é¡ºåº"></a> 3. å¯åŠ¨é¡ºåº</h2><ul><li>ç¡¬ä»¶è‡ªæ£€å®Œæˆåï¼ŒBIOSæŠŠæ§åˆ¶æƒè½¬äº¤ç»™ä¸‹ä¸€é˜¶æ®µçš„å¯åŠ¨ç¨‹åºã€‚</li><li>è¿™æ—¶ï¼ŒBIOSéœ€è¦çŸ¥é“ï¼Œ&quot;ä¸‹ä¸€é˜¶æ®µçš„å¯åŠ¨ç¨‹åº&quot;å…·ä½“å­˜æ”¾åœ¨å“ªä¸€ä¸ªè®¾å¤‡</li><li>BIOSéœ€è¦æœ‰ä¸€ä¸ªå¤–éƒ¨å‚¨å­˜è®¾å¤‡çš„æ’åºï¼Œæ’åœ¨å‰é¢çš„è®¾å¤‡å°±æ˜¯ä¼˜å…ˆè½¬äº¤æ§åˆ¶æƒçš„è®¾å¤‡ã€‚è¿™ç§æ’åºå«åš&quot;å¯åŠ¨é¡ºåº&quot;ï¼ˆBoot Sequenceï¼‰</li><li>BIOSæŒ‰ç…§&quot;å¯åŠ¨é¡ºåº&quot;ï¼ŒæŠŠæ§åˆ¶æƒè½¬äº¤ç»™æ’åœ¨ç¬¬ä¸€ä½çš„å‚¨å­˜è®¾å¤‡ã€‚</li><li>è¿™æ—¶ï¼Œè®¡ç®—æœºè¯»å–è¯¥è®¾å¤‡çš„ç¬¬ä¸€ä¸ªæ‰‡åŒºï¼Œä¹Ÿå°±æ˜¯è¯»å–æœ€å‰é¢çš„512ä¸ªå­—èŠ‚ã€‚å¦‚æœè¿™512ä¸ªå­—èŠ‚çš„æœ€åä¸¤ä¸ªå­—èŠ‚æ˜¯0x55å’Œ0xAAï¼Œè¡¨æ˜è¿™ä¸ªè®¾å¤‡å¯ä»¥ç”¨äºå¯åŠ¨ï¼›å¦‚æœä¸æ˜¯ï¼Œè¡¨æ˜è®¾å¤‡ä¸èƒ½ç”¨äºå¯åŠ¨ï¼Œæ§åˆ¶æƒäºæ˜¯è¢«è½¬äº¤ç»™&quot;å¯åŠ¨é¡ºåº&quot;ä¸­çš„ä¸‹ä¸€ä¸ªè®¾å¤‡ã€‚</li><li>è¿™æœ€å‰é¢çš„512ä¸ªå­—èŠ‚ï¼Œå°±å«åš&quot;ä¸»å¼•å¯¼è®°å½•&quot;ï¼ˆMaster boot recordï¼Œç¼©å†™ä¸ºMBRï¼‰</li></ul><h2 id="4-ä¸»å¼•å¯¼è®°å½•çš„ç»“æ„"><a class="markdownIt-Anchor" href="#4-ä¸»å¼•å¯¼è®°å½•çš„ç»“æ„"></a> 4. ä¸»å¼•å¯¼è®°å½•çš„ç»“æ„</h2><ul><li><p>&quot;ä¸»å¼•å¯¼è®°å½•&quot;åªæœ‰512ä¸ªå­—èŠ‚ï¼Œæ”¾ä¸äº†å¤ªå¤šä¸œè¥¿ã€‚å®ƒçš„ä¸»è¦ä½œç”¨æ˜¯ï¼Œå‘Šè¯‰è®¡ç®—æœºåˆ°ç¡¬ç›˜çš„å“ªä¸€ä¸ªä½ç½®å»æ‰¾æ“ä½œç³»ç»Ÿã€‚</p><ul><li><p>ï¼ˆ1ï¼‰ ç¬¬1-446å­—èŠ‚ï¼šæ˜¯ç”¨æ¥è®°å½•ç³»ç»Ÿçš„å¯åŠ¨ä¿¡æ¯çš„,è°ƒç”¨æ“ä½œç³»ç»Ÿçš„æœºå™¨ç </p></li><li><p>ï¼ˆ2ï¼‰ ç¬¬447-510å­—èŠ‚(64ä¸ªå­—èŠ‚)ï¼šåˆ†åŒºè¡¨ï¼ˆPartition tableï¼‰ï¼Œåˆ†åŒºè¡¨çš„ä½œç”¨ï¼Œæ˜¯å°†ç¡¬ç›˜åˆ†æˆè‹¥å¹²ä¸ªåŒº</p></li><li><p>ï¼ˆ3ï¼‰ ç¬¬511-512å­—èŠ‚ï¼šä¸»å¼•å¯¼è®°å½•ç­¾åï¼ˆ0x55å’Œ0xAAï¼‰</p></li></ul></li></ul><h2 id="5-åˆ†åŒºè¡¨"><a class="markdownIt-Anchor" href="#5-åˆ†åŒºè¡¨"></a> 5. åˆ†åŒºè¡¨</h2><ul><li>ç£ç›˜åˆ†åŒºæ˜¯ä½¿ç”¨åˆ†åŒºç¼–è¾‘å™¨åœ¨ç£ç›˜ä¸Šåˆ’åˆ†å‡ ä¸ªé€»è¾‘éƒ¨åˆ†</li><li>ç£ç›˜ä¸€æ—¦åˆ’åˆ†æˆå¤šä¸ªåˆ†åŒºï¼Œä¸åŒç±»çš„ç›®å½•ä¸æ–‡ä»¶å¯ä»¥å­˜å‚¨è¿›ä¸åŒçš„åˆ†åŒºå†…</li><li>&quot;ä¸»å¼•å¯¼è®°å½•&quot;å› æ­¤å¿…é¡»çŸ¥é“å°†æ§åˆ¶æƒè½¬äº¤ç»™å“ªä¸ªåŒº</li><li>åˆ†åŒºè¡¨çš„é•¿åº¦åªæœ‰64ä¸ªå­—èŠ‚ï¼Œé‡Œé¢åˆåˆ†æˆå››é¡¹ï¼Œæ¯é¡¹16ä¸ªå­—èŠ‚ã€‚æ‰€ä»¥ï¼Œä¸€ä¸ªç¡¬ç›˜æœ€å¤šåªèƒ½åˆ†å››ä¸ªä¸€çº§åˆ†åŒºï¼Œåˆå«åš&quot;ä¸»åˆ†åŒº&quot;<ul><li>ï¼ˆ1ï¼‰ ç¬¬1ä¸ªå­—èŠ‚ï¼šå¦‚æœä¸º0x80ï¼Œå°±è¡¨ç¤ºè¯¥ä¸»åˆ†åŒºæ˜¯æ¿€æ´»åˆ†åŒºï¼Œæ§åˆ¶æƒè¦è½¬äº¤ç»™è¿™ä¸ªåˆ†åŒºã€‚å››ä¸ªä¸»åˆ†åŒºé‡Œé¢åªèƒ½æœ‰ä¸€ä¸ªæ˜¯æ¿€æ´»çš„ã€‚</li><li>ï¼ˆ2ï¼‰ ç¬¬2-4ä¸ªå­—èŠ‚ï¼šä¸»åˆ†åŒºç¬¬ä¸€ä¸ªæ‰‡åŒºçš„ç‰©ç†ä½ç½®ï¼ˆæŸ±é¢ã€ç£å¤´ã€æ‰‡åŒºå·ç­‰ç­‰ï¼‰ã€‚</li><li>ï¼ˆ3ï¼‰ ç¬¬5ä¸ªå­—èŠ‚ï¼šä¸»åˆ†åŒºç±»å‹ï¼Œæ¯”å¦‚FAT32ã€NTFSç­‰ã€‚</li><li>ï¼ˆ4ï¼‰ ç¬¬6-8ä¸ªå­—èŠ‚ï¼šä¸»åˆ†åŒºæœ€åä¸€ä¸ªæ‰‡åŒºçš„ç‰©ç†ä½ç½®ã€‚</li><li>ï¼ˆ5ï¼‰ ç¬¬9-12å­—èŠ‚ï¼šè¯¥ä¸»åˆ†åŒºç¬¬ä¸€ä¸ªæ‰‡åŒºçš„é€»è¾‘åœ°å€ã€‚</li><li>ï¼ˆ6ï¼‰ ç¬¬13-16å­—èŠ‚ï¼šä¸»åˆ†åŒºçš„æ‰‡åŒºæ€»æ•°ã€‚</li></ul></li></ul><h2 id="6-ç¡¬ç›˜å¯åŠ¨"><a class="markdownIt-Anchor" href="#6-ç¡¬ç›˜å¯åŠ¨"></a> 6. ç¡¬ç›˜å¯åŠ¨</h2><ul><li>è®¡ç®—æœºçš„æ§åˆ¶æƒå°±è¦è½¬äº¤ç»™ç¡¬ç›˜çš„æŸä¸ªåˆ†åŒºäº†</li><li>å››ä¸ªä¸»åˆ†åŒºé‡Œé¢ï¼Œåªæœ‰ä¸€ä¸ªæ˜¯æ¿€æ´»çš„ã€‚è®¡ç®—æœºä¼šè¯»å–æ¿€æ´»åˆ†åŒºçš„ç¬¬ä¸€ä¸ªæ‰‡åŒºï¼Œå«åš&quot;å·å¼•å¯¼è®°å½•&quot;ï¼ˆVolume boot recordï¼Œç¼©å†™ä¸ºVBRï¼‰</li><li>&quot;å·å¼•å¯¼è®°å½•&quot;çš„ä¸»è¦ä½œç”¨æ˜¯ï¼Œå‘Šè¯‰è®¡ç®—æœºï¼Œæ“ä½œç³»ç»Ÿåœ¨è¿™ä¸ªåˆ†åŒºé‡Œçš„ä½ç½®ã€‚ç„¶åï¼Œè®¡ç®—æœºå°±ä¼šåŠ è½½æ“ä½œç³»ç»Ÿäº†ã€‚</li></ul><h2 id="7-æ“ä½œç³»ç»Ÿ"><a class="markdownIt-Anchor" href="#7-æ“ä½œç³»ç»Ÿ"></a> 7. æ“ä½œç³»ç»Ÿ</h2><ul><li>æ§åˆ¶æƒè½¬äº¤ç»™æ“ä½œç³»ç»Ÿåï¼Œæ“ä½œç³»ç»Ÿçš„å†…æ ¸é¦–å…ˆè¢«è½½å…¥å†…å­˜ã€‚</li><li>ä»¥Linuxç³»ç»Ÿä¸ºä¾‹ï¼Œå…ˆè½½å…¥<code>/boot</code>ç›®å½•ä¸‹é¢çš„<code>kernel</code>ã€‚å†…æ ¸åŠ è½½æˆåŠŸåï¼Œç¬¬ä¸€ä¸ªè¿è¡Œçš„ç¨‹åºæ˜¯<code>/sbin/init</code>ã€‚å®ƒæ ¹æ®é…ç½®æ–‡ä»¶ï¼ˆDebianç³»ç»Ÿæ˜¯/etc/initabï¼‰äº§ç”Ÿinitè¿›ç¨‹ã€‚è¿™æ˜¯Linuxå¯åŠ¨åçš„ç¬¬ä¸€ä¸ªè¿›ç¨‹ï¼Œpidè¿›ç¨‹ç¼–å·ä¸º1ï¼Œå…¶ä»–è¿›ç¨‹éƒ½æ˜¯å®ƒçš„åä»£</li><li>ç„¶åï¼Œ<code>init</code>çº¿ç¨‹åŠ è½½ç³»ç»Ÿçš„å„ä¸ªæ¨¡å—ï¼Œæ¯”å¦‚çª—å£ç¨‹åºå’Œç½‘ç»œç¨‹åºï¼Œç›´è‡³æ‰§è¡Œ<code>/bin/login</code>ç¨‹åºï¼Œè·³å‡ºç™»å½•ç•Œé¢ï¼Œç­‰å¾…ç”¨æˆ·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ã€‚</li></ul><hr /><section class="footnotes"><h1>å¤‡æ³¨/å‚è€ƒ</h1><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a href="https://www.cnblogs.com/zxRPI/p/7872413.html">ctrl+z ä»¥åæ€ä¹ˆæ¢å¤æŒ‚èµ·çš„è¿›ç¨‹</a><a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a href="https://www.jianshu.com/p/745a4cb32c47">linux è¿œç¨‹ä¸»æœºåå°è¿è¡Œä»»åŠ¡ æŒ‚èµ·è„šæœ¬</a><a href="#fnref:2" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:3" class="footnote-text"><span><a href="https://mp.weixin.qq.com/s/UwgHGSSnJhiYnDISxGQXag">Linuxå¼€å‘å°æŠ€å·§</a><a href="#fnref:3" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:4" class="footnote-text"><span><a href="https://www.phpernote.com/linux/1431.html">linuxä¸­ç»™ alias æ·»åŠ è‡ªå®šä¹‰çš„å‚æ•°</a><a href="#fnref:4" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:5" class="footnote-text"><span><a href="https://mp.weixin.qq.com/s/QyERReOEIBC5T4580ffVHw">linuxæ€»ç»“</a><a href="#fnref:5" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:6" class="footnote-text"><span><a href="https://www.linuxprobe.com/soft-and-hard-links.html">è½¯é“¾æ¥å’Œç¡¬é“¾æ¥çš„åŒºåˆ«</a><a href="#fnref:6" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:7" class="footnote-text"><span><a href="http://www.178linux.com/53101">linuxä¸­ç¡¬é“¾æ¥ä¸è½¯é“¾æ¥çš„åŒºåˆ«</a><a href="#fnref:7" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:8" class="footnote-text"><span><a href="http://www.ruanyifeng.com/blog/2013/02/booting.html">è®¡ç®—æœºæ˜¯å¦‚ä½•å¯åŠ¨çš„</a><a href="#fnref:8" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºçŸ¥è¯†</category>
      
      <category>linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>é™¤å¤•å¤œæµ…è°ˆ</title>
    <link href="/2022/01/31/2022-01/2022-01-31%20%E9%99%A4%E5%A4%95%E5%A4%9C%E6%B5%85%E8%B0%88/"/>
    <url>/2022/01/31/2022-01/2022-01-31%20%E9%99%A4%E5%A4%95%E5%A4%9C%E6%B5%85%E8%B0%88/</url>
    
    <content type="html"><![CDATA[<p>å“ˆå“ˆï¼Œè¿™è¿˜æ˜¯ç¬¬ä¸€æ¬¡åœ¨é™¤å¤•å¤œå†™ç‚¹ä¸œè¥¿å‘¢ï¼Œä¹Ÿç®—æ˜¯åˆ›çºªå½•å§ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/2017zhangyuxuan/picture_backend@master//img/202201312130421.jpeg" alt="" /></p><p>ä¸»è¦å‰ä¸€å‘¨åˆšæŠŠå­¦æ ¡é‡Œçš„ä½œä¸šå¿™å®Œï¼Œç„¶åè¿™ä¸€å‘¨å°±æœ¬æ€§æš´éœ²ï¼Œå¼€å§‹æ‘†çƒ‚èººå¹³ï¼Œç–¯ç‹‚æ²‰è¿·æ¸¸æˆï¼Œè‚†æ„åœ°æŒ¥éœæ—¶é—´ï¼Œæ˜æ˜ä¹‹å‰éƒ½åˆ¶å®šå¥½å‡æœŸè®¡åˆ’ï¼Œè¦åŠ å¼ºè‡ªæˆ‘çš„ï¼Œå¯æ¶ï¼Œéš¾é“ï¼Œwa ta shiï¼Œåˆè¦é‡è¹ˆè¦†è¾™å—ï¼Ÿ</p><p><img src="https://cdn.jsdelivr.net/gh/2017zhangyuxuan/picture_backend@master//img/202201312139874.jpeg" alt="" /></p><p>æ˜å¤©å¤§å¹´åˆä¸€ï¼Œæ–°çš„ä¸€å¹´ï¼Œæ–°çš„å¼€å§‹ï¼Œå°±ç®—ä¼¤ç—•ç´¯ç´¯ï¼Œå°±ç®—è·Œå€’å¤±è´¥ï¼Œæˆ‘ä¹Ÿè¦å‰è¿›ï¼Œæˆ‘ä¹Ÿè¦æˆ˜æ–—ï¼Œta ta kai, yi zi mo ta ta kai !</p><p>è‡³äºä»Šæ™šçš„å‰©ä½™æ—¶é—´ï¼Œæ™šä¸Šå¹´å¤œé¥­ä¹Ÿå–äº†é…’ï¼Œå°±å¥½å¥½ä¼‘æ¯å§ï¼Œçœ‹çœ‹bilibiliçš„æ‹œå¹´çºªï¼Œå†æŠŠå¤©é™ä¹‹ç‰©çš„å‰§åœºç‰ˆç»™è¡¥äº†ï¼Œç¡ä¸ªå¥½è§‰ï¼Œæ˜å¤©å†å‡ºå‘~</p><p>æœ€åï¼Œç¥å¤§å®¶æ–°æ˜¥å¿«ä¹ï¼Œè™å¹´å¤§å‰~</p><img src="https://cdn.jsdelivr.net/gh/2017zhangyuxuan/picture_backend@master//img/202202010930000.jpeg" alt="è™å¹´" style="zoom:67%;" />]]></content>
    
    
    <categories>
      
      <category>ç”Ÿæ´»</category>
      
      <category>éšç¬”</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ‚è°ˆ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>C++æŒ‡é’ˆé‚£äº›äº‹</title>
    <link href="/2022/01/17/2022-01/2022-01-17%20C++%E6%8C%87%E9%92%88%E9%82%A3%E4%BA%9B%E4%BA%8B/"/>
    <url>/2022/01/17/2022-01/2022-01-17%20C++%E6%8C%87%E9%92%88%E9%82%A3%E4%BA%9B%E4%BA%8B/</url>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a class="markdownIt-Anchor" href="#å‰è¨€"></a> å‰è¨€</h1><p>æŒ‡é’ˆçœŸçš„è®©äººåˆçˆ±åˆæ¨ï¼Œæ¯å½“è‡ªå·±è®¤ä¸ºå·²ç»å‚æ‚Ÿä¸€äºŒï¼Œç°å®æ€»æ˜¯ç‹ ç‹ åœ°æ‰“äº†æˆ‘è„¸ï¼Œä¸æ˜¯å¿˜äº†è¿™ä¸ªï¼Œå°±æ˜¯å¿˜äº†é‚£ä¸ªã€‚å› æ­¤è¶è¿™ä¸ªæœºä¼šï¼Œå†æ¸©ä¹ å›é¡¾ä¸‹C/C++é‡ŒæŒ‡é’ˆçš„ç›¸å…³è¯­æ³•çŸ¥è¯†ï¼Œå¹¶è®°å½•ä¸‹æ¥ä»¥ä¾¿æ—¥åå¤ä¹ ã€‚</p><h1 id="åŸºæœ¬çŸ¥è¯†"><a class="markdownIt-Anchor" href="#åŸºæœ¬çŸ¥è¯†"></a> åŸºæœ¬çŸ¥è¯†</h1><h2 id="æŒ‡é’ˆåŸºæœ¬æ¦‚å¿µ"><a class="markdownIt-Anchor" href="#æŒ‡é’ˆåŸºæœ¬æ¦‚å¿µ"></a> æŒ‡é’ˆåŸºæœ¬æ¦‚å¿µ</h2><p>åœ¨Cè¯­è¨€ä¸­ï¼Œæ¯å®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œç³»ç»Ÿå°±ä¼šä¸ºå˜é‡åˆ†é…ä¸€å—å†…å­˜ï¼Œè€Œå†…å­˜æ˜¯æœ‰åœ°å€çš„ã€‚Cè¯­è¨€ä¸­ï¼Œé‡‡ç”¨è¿ç®—ç¬¦ &amp; æ¥è·å–å˜é‡çš„åœ°å€ã€‚</p><p><strong>æŒ‡é’ˆæ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„å˜é‡ï¼Œç”¨äºå­˜å‚¨å˜é‡çš„åœ°å€</strong>ã€‚å½“æŒ‡é’ˆå˜é‡èµ‹å€¼ä¹‹åï¼Œå°±å¯ä»¥ä½¿ç”¨è¿ç®—ç¬¦ * ï¼ˆè§£å¼•ç”¨è¿ç®—ç¬¦ï¼‰ï¼Œå–å¾—æŒ‡é’ˆæ‰€æŒ‡å‘åœ°å€çš„å€¼ï¼Œç®€å•ç”¨æ³•å¦‚ä¸‹æ‰€ç¤ºã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-keyword">int</span>* p;  <span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªæŒ‡é’ˆpï¼Œç±»å‹ä¸º int;</span><br><span class="hljs-keyword">int</span> num = <span class="hljs-number">10</span>;<span class="hljs-comment">// å®šä¹‰ä¸€ä¸ª int å˜é‡</span><br><br>p = &amp;b;<span class="hljs-comment">//å°† p æŒ‡å‘ b</span><br><br>cout &lt;&lt; <span class="hljs-string">&quot;å˜é‡ num çš„åœ°å€ä¸º &quot;</span> &lt;&lt; p &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;å˜é‡ num çš„åœ°å€ä¸º &quot;</span> &lt;&lt; (&amp;num) &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;å˜é‡ num çš„å€¼ä¸º&quot;</span> &lt;&lt; num &lt;&lt; endl;<br>cout &lt;&lt; <span class="hljs-string">&quot;å˜é‡ num çš„å€¼ä¸º&quot;</span> &lt;&lt; *p &lt;&lt; endl; <span class="hljs-comment">// *p è¡¨ç¤ºæŒ‡é’ˆpä¸­å­˜å‚¨çš„åœ°å€æ‰€å¯¹åº”çš„å€¼ï¼›</span><br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong>ï¼šåœ¨ C++ åˆ›å»ºæŒ‡é’ˆæ—¶ï¼Œè®¡ç®—æœºå°†ä¼šåˆ†é…ç”¨æ¥å­˜å‚¨åœ°å€çš„å†…å­˜ï¼Œä½†ä¸ä¼šåˆ†é…ç”¨æ¥å­˜å‚¨æŒ‡é’ˆæ‰€æŒ‡å‘çš„æ•°æ®çš„å†…å­˜ ï¼Œä¸ºæ•°æ®åˆ†é…çš„ç©ºé—´æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ç©ºé—´ï¼Œä¸å¯çœç•¥ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-keyword">int</span> *pt;<span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªæŒ‡å‘ int ç±»å‹çš„æŒ‡é’ˆ pt;</span><br>*pt = <span class="hljs-number">23</span>;<span class="hljs-comment">// é”™è¯¯ï¼ŒæŒ‡é’ˆ pt æœªæŒ‡å‘ä»»ä½•åœ°å€ï¼Œ</span><br></code></pre></td></tr></table></figure><p>æ‰€ä»¥éœ€è¦è°¨è®°ä¸€ç‚¹ï¼Œåœ¨å¯¹æŒ‡é’ˆåº”ç”¨è§£å¼•ç”¨è¿ç®—ç¬¦(*) ä¹‹å‰ï¼Œå°†æŒ‡é’ˆåˆå§‹åŒ–ä¸ºä¸€ä¸ªç¡®å®šçš„ï¼Œé€‚å½“çš„åœ°å€ã€‚</p><h2 id="ç©ºæŒ‡é’ˆä¸é‡æŒ‡é’ˆ"><a class="markdownIt-Anchor" href="#ç©ºæŒ‡é’ˆä¸é‡æŒ‡é’ˆ"></a> ç©ºæŒ‡é’ˆä¸é‡æŒ‡é’ˆ</h2><p>ç©ºæŒ‡é’ˆï¼šæ²¡æœ‰èµ‹å€¼çš„æŒ‡é’ˆå˜é‡ï¼ˆæ²¡æœ‰æŒ‡å‘å†…å­˜å˜é‡çš„åœ°å€ï¼‰ï¼Œå¯¹ç©ºæŒ‡é’ˆè¿›è¡Œæ“ä½œä¼šé€ æˆç¨‹åºçš„Core dumpï¼ˆæ®µé”™è¯¯ï¼‰ã€‚å¦‚ä¸‹ä»£ç æ‰€ç¤ºã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-keyword">int</span>* p = <span class="hljs-number">0</span>;<br>*p = <span class="hljs-number">10</span>;<span class="hljs-comment">// è¿è¡ŒæŠ¥é”™</span><br></code></pre></td></tr></table></figure><p>é‡æŒ‡é’ˆï¼šæŒ‡é’ˆæŒ‡å‘å†…å­˜å·²é‡Šæ”¾ï¼Œä½†æŒ‡é’ˆçš„å€¼ä¸ä¼šè¢«æ¸…é›¶ï¼Œå¯¹é‡æŒ‡é’ˆæ“ä½œçš„ç»“æœä¸å¯é¢„çŸ¥ã€‚å¦‚ä¸‹ä»£ç æ‰€ç¤ºã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-keyword">int</span>* p = <span class="hljs-keyword">new</span> <span class="hljs-built_in"><span class="hljs-keyword">int</span></span>(<span class="hljs-number">3</span>);<br><span class="hljs-keyword">delete</span> p ;<br><span class="hljs-keyword">if</span> (p !=  <span class="hljs-literal">nullptr</span>) &#123;<span class="hljs-comment">// å·²ç»é‡Šæ”¾äº†å¯¹åº”å†…å­˜ç©ºé—´ï¼Œä½†æŒ‡é’ˆçš„å€¼è¿˜æ²¡æœ‰æ¸…é›¶ï¼Œæ­¤æ—¶æˆä¸ºé‡æŒ‡é’ˆ</span><br>    cout &lt;&lt; <span class="hljs-string">&quot;not nullptr&quot;</span> &lt;&lt; endl;<br>&#125;<br>p = <span class="hljs-literal">nullptr</span>;<span class="hljs-comment">// é‡Šæ”¾æŒ‡é’ˆåï¼Œåº”å½“æ‰‹åŠ¨ç½®æŒ‡é’ˆä¸ºnullptr</span><br></code></pre></td></tr></table></figure><h2 id="sizeofçš„å‘"><a class="markdownIt-Anchor" href="#sizeofçš„å‘"></a> sizeofçš„å‘</h2><p>sizeof(x) ï¼Œå½“ x ä¸ºæŒ‡é’ˆå˜é‡æ—¶ï¼Œæ±‚å¾—çš„æ˜¯æŒ‡é’ˆç±»å‹çš„å¤§å°ï¼›å½“ x ä¸ºæ•°ç»„åæ—¶ï¼Œæ±‚å¾—çš„æ˜¯æ•°ç»„çš„å¤§å°ï¼ˆæ•°ç»„å…ƒç´ ä¸ªæ•° * æ•°ç»„å…ƒç´ ç±»å‹å¤§å°ï¼‰ã€‚</p><p><strong>æ³¨æ„</strong>ï¼šå½“æ•°ç»„ä½œä¸ºå‡½æ•°çš„å‚æ•°è¿›è¡Œä¼ é€’æ—¶ï¼Œæ•°ç»„è‡ªåŠ¨é€€åŒ–ä¸ºåŒç±»å‹çš„æŒ‡é’ˆã€‚å‚è€ƒä¸‹é¢ç¤ºä¾‹ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">get_size</span><span class="hljs-params">(<span class="hljs-keyword">int</span> data[])</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in"><span class="hljs-keyword">sizeof</span></span>(data);<br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">int</span> data1[] = &#123;<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>&#125;;<br>    <span class="hljs-keyword">int</span> size1 = <span class="hljs-built_in"><span class="hljs-keyword">sizeof</span></span>(data1);    <span class="hljs-comment">// 20 ï¼ˆè¾“å‡ºçš„æ˜¯æ•°ç»„å¤§å°)</span><br>    <br>    <span class="hljs-keyword">int</span>* data2 = data1;<br>    <span class="hljs-keyword">int</span> size2 = <span class="hljs-built_in"><span class="hljs-keyword">sizeof</span></span>(data2);    <span class="hljs-comment">// 8 (64ä½æœºå™¨ï¼‰ è¾“å‡ºçš„æ˜¯æŒ‡é’ˆå¤§å°</span><br>    <br>    <span class="hljs-keyword">int</span> size3 = <span class="hljs-built_in">get_size</span>(data1);  <span class="hljs-comment">// 8 (64ä½æœºå™¨ï¼‰</span><br>&#125;<br></code></pre></td></tr></table></figure><h1 id="æŒ‡é’ˆä¸æ•°ç»„"><a class="markdownIt-Anchor" href="#æŒ‡é’ˆä¸æ•°ç»„"></a> æŒ‡é’ˆä¸æ•°ç»„</h1><ul><li>æ•°ç»„åç”¨æ³•ä¸Š ç±»ä¼¼äºä¸€ä¸ªæŒ‡é’ˆå¸¸é‡ï¼ŒæŒ‡å‘æ•°ç»„é¦–å…ƒç´ çš„åœ°å€</li><li>å¯¹äºæŒ‡é’ˆpï¼Œ p+1 çš„è·¨åº¦ï¼Œå³ç§»åŠ¨pä¸€æ¬¡å¢åŠ çš„å­—èŠ‚æ•°å¤§å°ï¼Œç­‰äºæŒ‡é’ˆpæ‰€æŒ‡å…ƒç´ ç±»å‹çš„å¤§å°<ul><li>å¯¹äºint *pï¼Œå¢åŠ 4å­—èŠ‚</li><li>å¯¹äºdouble *p ï¼Œå¢åŠ 8å­—èŠ‚</li><li>å¯¹äºint (* p)[3)ï¼Œå¢åŠ  3 * 4 = 12 å­—èŠ‚ï¼Œå› ä¸ºpæŒ‡å‘çš„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ•´ä¸ªæ•°ç»„çš„å¤§å°ä¸º3ã€*4 = 12å­—èŠ‚</li><li>å¯¹äºint* * pï¼Œå¢åŠ 8å­—èŠ‚ï¼ˆ64ä½ç³»ç»Ÿï¼‰ï¼Œå› ä¸ºpæŒ‡å‘çš„æ˜¯ä¸€ä¸ªint*æŒ‡é’ˆï¼Œè€ŒæŒ‡é’ˆå¤§å°ä¸º8å­—èŠ‚</li></ul></li><li>å¯¹äºnewçš„ä½¿ç”¨ï¼Œé€šå¸¸æ˜¯å’ŒæŒ‡é’ˆç»“åˆåœ¨ä¸€èµ·ï¼Œå¯¹äº Type* p ï¼ˆTypeä»£è¡¨æŸç§ç±»å‹ï¼‰ï¼Œé€šå¸¸newæ˜¯æœ‰ä¸¤ç§ç”¨æ³•<ul><li><code>Type* p = new Type( )</code>ï¼Œåªåˆ†é…å•ä¸ªTypeçš„å†…å­˜ï¼Œnewè¿”å›çš„ä¹Ÿæ˜¯è¿™ä¸ªTypeçš„å†…å­˜åœ°å€<ul><li>è·å–å¯¹åº”å…ƒç´ ï¼Œé€šå¸¸ä½¿ç”¨ *pï¼Œä½†æ˜¯ p[0] ä¹Ÿæ˜¯åŒæ ·çš„æ•ˆæœï¼›ä½¿ç”¨ p[1] çš„è¯ï¼Œä¼šè®¿é—®è¶…å‡ºäº†æˆ‘ä»¬åˆ†é…çš„å†…å­˜ï¼Œå¯èƒ½å¸¦æ¥ä¸å¯é¢„çŸ¥çš„åæœ</li></ul></li><li><code>Type* p = new Type[n]</code>ï¼Œåˆ†é…nä¸ª Typeçš„å†…å­˜ï¼Œnewè¿”å›çš„æ˜¯Typeæ•°ç»„é¦–å…ƒç´ çš„åœ°å€<ul><li>è·å–å¯¹åº”å…ƒç´ ï¼Œé€šå¸¸ä½¿ç”¨ p[i]ï¼Œè·å–ä¸‹æ ‡ä¸º i çš„å…ƒç´ </li></ul></li></ul></li></ul><hr /><p>è¿™æ ·çš„è¯æœ‰è¿™æ ·ä¸€ä¸ªç–‘æƒ‘ï¼Œå¦‚ä¸‹æ–¹å›¾ç‰‡ä¸­æ ‡çº¢åŒºåŸŸï¼Œå¯ä»¥æœ‰ç”³è¯·ä¸€ä¸ªintçš„å¤§å°ï¼Œç”³è¯·ä¸€ä¸ªæŒ‡é’ˆçš„å¤§å°ï¼Œå¦‚ä½•å•ç‹¬ç”³è¯·ä¸€ä¸ªæ•°ç»„å¯¹è±¡ï¼Ÿ</p><center><img src="https://cdn.jsdelivr.net/gh/2017zhangyuxuan/picture_backend@master//img/202201221755705.png" alt="" style="zoom: 50%;" /></center><p>ä¼¼ä¹å¹¶æ²¡æœ‰ç›¸å¯¹åº”çš„æ–¹å¼ï¼Œå› ä¸ºç”³è¯·ä¸€ä¸ªæ•°ç»„çš„ç©ºé—´å·²ç»ç”¨ <code>int* p = new int[3]</code> è¡¨è¾¾äº†ï¼Œå…¶å®è¿™ä¸ªé—®é¢˜æœ‰ç‚¹ç±»ä¼¼é’»ç‰›è§’å°–ï¼Œæˆ–è€…è¯´è‡ªä»¥ä¸ºæœ‰è¿™æ ·çš„å¯¹ç§°è§„å¾‹åœ¨ã€‚ä½†åœ¨å®é™…ä½¿ç”¨ä¸­å¹¶ä¸æ¨èä½¿ç”¨new å’Œ deleteï¼Œå¯¹äºæ•°ç»„çš„éœ€æ±‚ï¼Œä½¿ç”¨vector&lt; T&gt; å°±è¡Œäº†ï¼›è¿™é‡Œåªæ˜¯ä¸ºäº†æ¢è®¨ç ”ç©¶è¯­æ³•é—®é¢˜ã€‚</p><h1 id="æŒ‡é’ˆå¸¸é‡ä¸å¸¸é‡æŒ‡é’ˆ"><a class="markdownIt-Anchor" href="#æŒ‡é’ˆå¸¸é‡ä¸å¸¸é‡æŒ‡é’ˆ"></a> æŒ‡é’ˆå¸¸é‡ä¸å¸¸é‡æŒ‡é’ˆ</h1><p><strong>æŒ‡é’ˆå¸¸é‡</strong>ï¼šæŒ‡é’ˆç±»å‹çš„å¸¸é‡ã€‚è¡¨ç¤ºè¿™ä¸ªæŒ‡é’ˆå˜é‡ç”¨constä¿®é¥°åæˆäº†å¸¸é‡ï¼Œå˜é‡çš„å€¼ä¸èƒ½æ”¹å˜å³ä¸èƒ½æŒ‡å‘å…¶ä»–åœ°å€ï¼Œä½†æ˜¯æŒ‡é’ˆæ‰€æŒ‡å‘åœ°å€é‡Œçš„å€¼æ˜¯å¯ä»¥ä¿®æ”¹çš„ã€‚åŒæ—¶æ³¨æ„è¿™æ˜¯ä¸ªå¸¸é‡ï¼Œæ‰€ä»¥åœ¨å®šä¹‰çš„æ—¶å€™è¦åˆå§‹åŒ–ã€‚</p><p><strong>å¸¸é‡æŒ‡é’ˆ</strong>ï¼šæŒ‡é’ˆå˜é‡æŒ‡å‘çš„ç±»å‹ä¸ºå¸¸é‡ç±»å‹ï¼Œå³æŒ‡é’ˆæŒ‡å‘åœ°å€é‡Œçš„å€¼ä¸å¯ä»¥ä¿®æ”¹ã€‚</p><p>å…·ä½“ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-keyword">int</span> a = <span class="hljs-number">10</span>, b = <span class="hljs-number">20</span>;<br><span class="hljs-keyword">int</span> * <span class="hljs-keyword">const</span> p1 = &amp;a;<span class="hljs-comment">// p1æ˜¯æŒ‡é’ˆå¸¸é‡</span><br>*p1 = <span class="hljs-number">30</span>;   <span class="hljs-comment">// p1æŒ‡å‘çš„åœ°å€æ˜¯ä¸€å®šçš„ï¼Œä½†å…¶å†…å®¹å¯ä»¥ä¿®æ”¹</span><br><span class="hljs-comment">// p1 = &amp;b;// p1æŒ‡é’ˆå¸¸é‡ä¸èƒ½æŒ‡å‘å…¶ä»–å˜é‡çš„åœ°å€</span><br><br><span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> *p2 = &amp;a; <span class="hljs-comment">// p2æ˜¯å¸¸é‡æŒ‡é’ˆ</span><br><span class="hljs-comment">// int const *p2 = &amp;a; // å’Œä¸Šä¸€è¡Œç­‰ä»·</span><br>p2 = &amp;b; <span class="hljs-comment">// p2å¯ä»¥æŒ‡å‘å…¶ä»–åœ°å€ï¼Œä½†æ˜¯å†…å®¹ä¸å¯ä»¥æ”¹å˜</span><br><span class="hljs-comment">// *p2 = 10; // p2å¸¸é‡æŒ‡é’ˆï¼Œæ‰€æŒ‡å‘åœ°å€çš„å€¼ä¸å¯ä»¥ä¿®æ”¹</span><br><br><span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> * <span class="hljs-keyword">const</span> p3 = &amp;a;<span class="hljs-comment">// p3æ—¢æ˜¯æŒ‡é’ˆå¸¸é‡åˆæ˜¯å¸¸é‡æŒ‡é’ˆ</span><br><span class="hljs-comment">// p3 = &amp;b;// p3ä¸èƒ½æŒ‡å‘å…¶ä»–åœ°å€</span><br><span class="hljs-comment">// *p3 = 30;// p3æ‰€æŒ‡å‘åœ°å€çš„å€¼ä¸èƒ½ä¿®æ”¹</span><br></code></pre></td></tr></table></figure><p>æœ‰æ—¶å€™æŒ‡é’ˆå¸¸é‡å’Œå¸¸é‡æŒ‡é’ˆå‚»å‚»åˆ†ä¸æ¸…ï¼Œæ•™å¤§å®¶ä¸€ä¸ªå°æŠ€å·§ï¼Œ<strong>å°±æ˜¯çœ‹ const  åœ¨ * çš„å“ªä¸€ä¾§</strong>ï¼Œå¦‚æœconst åœ¨ * å·¦ä¾§ï¼Œè¡¨æ˜const é è¿‘æ‰€æŒ‡å‘çš„å˜é‡ç±»å‹ï¼Œå³æ‰€æŒ‡å‘çš„å˜é‡æ˜¯ä¸ªå¸¸é‡ï¼Œä¹Ÿå°±æ˜¯å¸¸é‡æŒ‡é’ˆï¼›å¦‚æœ const åœ¨ * çš„å³ä¾§ï¼Œè¡¨æ˜ const é è¿‘æŒ‡é’ˆå˜é‡åï¼Œæ‰€ä»¥è¿™ä¸ªæŒ‡é’ˆå˜é‡æ˜¯ä¸ªå¸¸é‡ï¼Œä¹Ÿå°±æ˜¯æŒ‡é’ˆå¸¸é‡ã€‚</p><h1 id="å‡½æ•°åä¸å‡½æ•°æŒ‡é’ˆ"><a class="markdownIt-Anchor" href="#å‡½æ•°åä¸å‡½æ•°æŒ‡é’ˆ"></a> å‡½æ•°åä¸å‡½æ•°æŒ‡é’ˆ</h1><p>å°±åƒå®šä¹‰ int å˜é‡æ—¶ï¼Œä¼šåœ¨å†…å­˜é‡Œåˆ†é…ä¸€ä¸ª4å­—èŠ‚çš„ç©ºé—´å­˜å‚¨è¯¥å˜é‡ï¼Œå¯¹åº”æœ‰ä¸€ä¸ªåœ°å€ï¼›å½“å®šä¹‰äº†ä¸€ä¸ªå‡½æ•°åï¼ŒåŒæ ·éœ€è¦åœ¨å†…å­˜ä¸­åˆ†é…ç©ºé—´è¿›è¡Œå­˜å‚¨ï¼Œè°ƒç”¨å‡½æ•°å°±åƒä½¿ç”¨å˜é‡ä¸€æ ·éœ€è¦ä¸€ä¸ªåœ°å€æ¥å”¯ä¸€çš„æŒ‡å‘å®ƒï¼Œæ‰€ä»¥æ¯ä¸ªå‡½æ•°éƒ½éœ€è¦ä¸€ä¸ªåœ°å€æ¥å”¯ä¸€æ ‡è¯†è‡ªå·±ï¼Œä¹Ÿå°±æ˜¯æ‰€è¯´çš„å…¥å£åœ°å€ã€‚</p><p>å‡½æ•°åæ ‡è¯†æ˜ å°„è¯¥å‡½æ•°çš„å…¥å£åœ°å€ï¼Œè€Œå‡½æ•°æŒ‡é’ˆæ˜¯æŒ‡å‘å‡½æ•°å…¥å£åœ°å€çš„æŒ‡é’ˆå˜é‡ï¼ˆè®°ä½äº†å‡½æ•°åæœ¬èº«å¹¶ä¸æ˜¯ä¸€ä¸ªæŒ‡é’ˆç±»å‹ï¼‰ã€‚</p><p>æœ‰äº†æŒ‡å‘å‡½æ•°çš„æŒ‡é’ˆå˜é‡åï¼Œå¯ä»¥ç”¨å‡½æ•°æŒ‡é’ˆå˜é‡è°ƒç”¨å‡½æ•°ï¼Œå°±åƒç”¨æŒ‡é’ˆå˜é‡æ“ä½œå…¶ä»–ç±»å‹å˜é‡ä¸€æ ·ã€‚å‡½æ•°æŒ‡é’ˆä¸»è¦æœ‰ä¸¤ä¸ªç”¨é€”ï¼šè°ƒç”¨å‡½æ•°å’Œåšå‡½æ•°çš„å‚æ•°ã€‚</p><hr /><p>æˆ‘ä»¬éƒ½çŸ¥é“åœ¨è°ƒç”¨å‡½æ•°çš„æ—¶å€™æœ‰å‡½æ•°åå°±å¤Ÿäº†ï¼Œæ¯”å¦‚fun(2)ï¼Œä½†ç¼–è¯‘å™¨åœ¨ç¼–è¯‘çš„æ—¶å€™ä¼šè¿›è¡Œæ‰€è°“çš„&quot;<strong>Function-to-pointer conversion</strong>&quot;ï¼Œä¹Ÿå°±æ˜¯æŠŠå‡½æ•°åéšå¼è½¬æ¢æˆå‡½æ•°æŒ‡é’ˆç±»å‹ï¼Œä¹Ÿå°±æ˜¯è¦é€šè¿‡å‡½æ•°æŒ‡é’ˆæ¥è°ƒç”¨å‡½æ•°ï¼Œæ‰€ä»¥å¦‚æœä½ åœ¨è°ƒç”¨å‡½æ•°çš„æ—¶å€™å†™æˆ(&amp;fun)(2)ä¹Ÿæ˜¯ä¸€æ ·èƒ½å·¥ä½œçš„ï¼Œå› ä¸º&amp;funå®é™…ä¸Šå°±æ˜¯è¿”å›ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆã€‚å‚ç…§ä¸‹é¢ä¾‹å­ï¼Œåªæ˜¯è¿™ç§å†™æ³•å¾ˆä¸å¸¸è§ï¼Œå³ä½¿ä½ ä¸æ˜¾å¼çš„å†™å‡º&amp;çš„è¯ç¼–è¯‘å™¨ä¹Ÿä¼šéšå¼çš„è¿›è¡Œè½¬æ¢ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">fun</span><span class="hljs-params">(<span class="hljs-keyword">int</span> a)</span></span><br><span class="hljs-function"></span>&#123;<br>    cout&lt;&lt;<span class="hljs-string">&quot;fun&quot;</span>&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;fun=%p\n&quot;</span>,fun);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;*fun=%p\n&quot;</span>,*fun);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;&amp;fun=%p\n&quot;</span>,&amp;fun);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;*******fun=%p\n&quot;</span>,*******fun);<br><br>    <span class="hljs-built_in"><span class="hljs-keyword">void</span></span>(*p1)(<span class="hljs-keyword">int</span>)=fun;<span class="hljs-comment">// å‡½æ•°æŒ‡é’ˆp1ï¼Œfunè¿›è¡Œä¸€æ¬¡éšå¼è½¬æ¢</span><br>    <span class="hljs-built_in"><span class="hljs-keyword">void</span></span>(*p2)(<span class="hljs-keyword">int</span>)=*fun;<span class="hljs-comment">// funè¿›è¡Œäº†ä¸¤æ¬¡éšå¼è½¬æ¢</span><br>    <span class="hljs-built_in"><span class="hljs-keyword">void</span></span>(*p3)(<span class="hljs-keyword">int</span>)=&amp;fun;<span class="hljs-comment">// æ˜¾ç¤ºè½¬æ¢æˆå‡½æ•°æŒ‡é’ˆ</span><br><span class="hljs-comment">//    void(*p4)(int)=&amp;&amp;fun; // ä¸å¯ä»¥ï¼Œè¿ç»­å–ä¸¤æ¬¡åœ°å€ï¼Œå°±å˜æˆäº†å‡½æ•°æŒ‡é’ˆçš„æŒ‡é’ˆç±»å‹</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;p1=%p\n&quot;</span>, p1);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;p2=%p\n&quot;</span>, p2);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;p3=%p\n&quot;</span>, p3);<br>&#125;<br></code></pre></td></tr></table></figure><p>æ­£å¦‚ä¸Šé¢ä»£ç ç¤ºä¾‹æ‰€ç¤ºï¼Œå…¶å®å³ä½¿ä½ å†™æˆ(* fun)(2)ä¹Ÿæ˜¯å¯ä»¥æ­£å¸¸è¿è¡Œçš„ï¼Œè¿™æ˜¯å› ä¸ºå½“ç¼–è¯‘å™¨çœ‹åˆ°funçš„æ—¶å€™å‘ç°å®ƒå‰é¢æ²¡æœ‰&amp;ï¼Œ<strong>ä¹Ÿå°±æ˜¯å¦‚æœæ²¡æœ‰å°†å‡½æ•°åæ˜¾ç¤ºåœ°è½¬æ¢æˆæŒ‡é’ˆï¼Œé‚£ä¹ˆä»–å°±ä¼šéšå¼åœ°è½¬æ¢æˆæŒ‡é’ˆ</strong>ï¼Œå½“è½¬æ¢å®Œä¹‹åå‘ç°å‰é¢åˆæœ‰ä¸€ä¸ª * è¿™æ—¶å€™ä¹Ÿå°±æ˜¯è¦è¿›è¡Œæ‰€è°“çš„&quot;è§£å¼•ç”¨&quot;æ“ä½œï¼Œä¹Ÿå°±æ˜¯å–å‡º * æŒ‡é’ˆé‡Œçš„å€¼ï¼Œè€Œé‚£ä¹ˆå€¼å®é™…ä¸Šä¹Ÿå°±å‡½æ•°åfunï¼Œè¿™æ ·ä¸€æ¬¡éšå¼æ¢ç„¶åå†æ¥ä¸€æ¬¡è§£å¼•ç”¨å®é™…ä¸Šç›¸å½“äºä»€ä¹ˆä¹Ÿæ²¡åšï¼Œæ‰€ä»¥ç³»ç»Ÿè¿˜ä¼šå†è¿›è¡Œä¸€æ¬¡éšå¼çš„&quot;Function-to-pointer conversion&quot;ï¼Œæ‰€ä»¥å³ä½¿ä½ å†™æˆ(************fun)(2)ä¹Ÿä¼šæ­£å¸¸è¿è¡Œï¼Œå’Œåˆšæ‰çš„ä¸€ä¸ªé“ç†ï¼Œåªæ˜¯å¤šåšäº†å‡ æ¬¡åå¤çš„è½¬è§£æ“ä½œè€Œå·²ï¼Œéƒ½æ˜¯ç¼–è¯‘å™¨è‡ªå·±å®Œæˆçš„ã€‚</p><h1 id="å‚è€ƒèµ„æ–™"><a class="markdownIt-Anchor" href="#å‚è€ƒèµ„æ–™"></a> å‚è€ƒèµ„æ–™</h1><p>[1] <a href="https://www.cnblogs.com/Esfog/archive/2012/04/23/2467249.html">C/C++çš„å‡½æ•°åå’Œå‡½æ•°æŒ‡é’ˆçš„å…³ç³»å‰–æ - Esfog - åšå®¢å›­</a></p><p>[2] <a href="https://www.jb51.net/article/54220.htm">æ•°ç»„åä¸æ•°ç»„æŒ‡é’ˆã€æŒ‡é’ˆæ•°ç»„</a></p><p>[3] <a href="https://juejin.cn/post/6923743288407097351">C++ æŒ‡é’ˆè¯¦è®²ã€åŠæŒ‡é’ˆä¸æ•°ç»„ - æ˜é‡‘</a></p><p>[4] <a href="https://www.bilibili.com/video/BV16T4y1w7wm?p=7">è§£å†³å…¨éƒ¨Cè¯­è¨€æŒ‡é’ˆçš„é—®é¢˜_å“”å“©å“”å“©</a></p>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºçŸ¥è¯†</category>
      
      <category>C++</category>
      
    </categories>
    
    
    <tags>
      
      <tag>C++</tag>
      
      <tag>æŒ‡é’ˆ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>2021å¹´ç»ˆæ€»ç»“</title>
    <link href="/2021/12/31/2021-12/2021-12-31%202021%E5%B9%B4%E7%BB%88%E6%80%BB%E7%BB%93/"/>
    <url>/2021/12/31/2021-12/2021-12-31%202021%E5%B9%B4%E7%BB%88%E6%80%BB%E7%BB%93/</url>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a class="markdownIt-Anchor" href="#å‰è¨€"></a> å‰è¨€</h1><p>ç°åœ¨æ˜¯2021å¹´12æœˆ31æ—¥19ç‚¹45åˆ†ï¼Œåå¤©çš„è¿™ä¸ªæ—¶å€™æˆ‘åº”è¯¥åœ¨è€ƒäº‘è®¡ç®—ï¼Œæ‰€ä»¥ä¿é™©èµ·è§ï¼Œæˆ‘è¿˜æ˜¯å…ˆå»å¤ä¹ å§ï¼Œå¹´ç»ˆæ€»ç»“å°±æ”¾åˆ°è€ƒå®Œè¯•å†è¡¥ä¸Š~</p><center><img src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2F5b0988e595225.cdn.sohucs.com%2Fimages%2F20190816%2Fc1bb1f88cc334de5bfdb433c1766f830.png&refer=http%3A%2F%2F5b0988e595225.cdn.sohucs.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1643543259&t=b6769fbb96552656e2b401a1e9d5feea" alt="" style="zoom:50%;" /></center><hr /><p>ä»Šå¤©æ˜¯2022å¹´1æœˆ2æ—¥ï¼Œç°åœ¨æˆ‘å·²ç»è€ƒå®Œäº†å²è¯—çº§éš¾åº¦çš„ç®—æ³•åˆ†æä¸è®¾è®¡ï¼Œä»¥åŠå·®ç‚¹æ²¡å†™å®Œçš„äº‘è®¡ç®—ã€‚ç­‰åˆ°æˆ‘å¿ƒæƒ…å¹³å¤ä¸‹æ¥ï¼Œä¹Ÿæ—¶å€™è¡¥äº¤è¿™ä»½å¹´ç»ˆæ€»ç»“äº†ã€‚</p><center><img src="https://cdn.jsdelivr.net/gh/2017zhangyuxuan/picture_backend@master//img/202201022151747.jpeg" alt="çœ‹å¼€äº†" style="zoom:40%;" /></center><h1 id="å®ä¹ "><a class="markdownIt-Anchor" href="#å®ä¹ "></a> å®ä¹ </h1><h2 id="å®ä¹ ç»å†ç®€ä»‹"><a class="markdownIt-Anchor" href="#å®ä¹ ç»å†ç®€ä»‹"></a> å®ä¹ ç»å†ç®€ä»‹</h2><p>ä»å»å¹´11æœˆå¼€å§‹ï¼Œæˆ‘å°±å»äº†å­—èŠ‚å®ä¹ ï¼Œè€Œæˆªè‡³ä»Šå¹´å¼€å­¦9æœˆä»½æ‰ç¦»èŒï¼Œå†é™¤å»ä¸­é—´è¯·å‡ä¸€ä¸ªå¤šæœˆå›å­¦æ ¡åšæ¯•è®¾ï¼Œç®—èµ·æ¥ä¹Ÿå¿«å®ä¹ äº†9ä¸ªæœˆï¼Œä¸ç¦ä»¤äººæ„Ÿå¹æ—¶é—´çœŸçš„è¿‡å¾—å¤ªå¿«äº†ï¼Œä¸‹é¢æˆ‘å°±ç®€å•ä»‹ç»ä¸€ä¸‹è‡ªå·±çš„å®ä¹ ç»å†å§ã€‚æˆ‘æ‰€åœ¨éƒ¨é—¨æ˜¯æŠ–éŸ³å›½é™…ç‰ˆï¼ˆä¹Ÿå°±æ˜¯Tiktokï¼‰çš„å¹¿å‘Šä¸­å°Global Ads Infraï¼Œè´Ÿè´£å¹¿å‘ŠæŠ•æ”¾çš„ç›¸å…³ä¸šåŠ¡ï¼Œä¹Ÿç®—æ˜¯æ¯”è¾ƒæ ¸å¿ƒçš„éƒ¨é—¨äº†ï¼Œæ¯•ç«Ÿå¹¿å‘Šè¥æ”¶æ˜¯æµé‡å˜ç°çš„é‡è¦é€”ç»ã€‚</p><p>åœ¨å®ä¹ æœŸé—´ï¼Œçš„ç¡®æ˜¯å­¦ä¹ åˆ°äº†ä¸å°‘å¹¿å‘Šçš„ç›¸å…³çŸ¥è¯†ï¼Œä»é›¶å¼€å§‹äº†è§£ç›¸å…³ä¸šåŠ¡ï¼Œè®°å¾—ä¸€å¼€å§‹ç¢°åˆ°çš„å¹¿å‘Šç›¸å…³çš„é™Œç”Ÿåè¯æœ‰æ»¡æ»¡ä¸€é¡µï¼Œå¯¹å…·ä½“çš„å¹¿å‘ŠæŠ•æ”¾æµç¨‹ä¹Ÿæ˜¯äº‘é‡Œé›¾é‡Œï¼Œä¸çŸ¥æ‰€è¸ªã€‚åˆ°åæ¥ï¼Œå¾…ä¹…äº†ï¼Œä¹Ÿæ¸æ¸ç†Ÿæ‚‰èµ·æ¥ï¼Œæ˜ç™½äº†å¤§è‡´æµç¨‹ï¼Œå¤§ä½“çš„æ¨¡å—æ¶æ„ï¼Œå½“ç„¶ä¹Ÿéå¸¸æµ…æ˜¾ï¼Œåªæ˜¯å¯¹å„ä¸ªåŠŸèƒ½æ¨¡å—äº†è§£ä¸ªå¤§æ¦‚ã€‚ä»ç¡¬çœ‹æºç ï¼Œåˆ°å¢åŠ åŠŸèƒ½ç‚¹ï¼Œè¿›è¡Œæµ‹è¯•ï¼Œå¼€ABæµ‹è¯•å®éªŒï¼Œå†åˆ°æäº¤è‡ªå·±çš„PRé€šè¿‡Reviewï¼Œæœ€ç»ˆä»£ç ä¸Šçº¿ï¼Œè¿™ä¸€è¿‡ç¨‹ä¸‹æ¥ä¹Ÿè®©æˆ‘äº›è®¸äº†è§£äº†å¤§å‚çš„é¡¹ç›®å¼€å‘æµç¨‹ã€‚</p><p>ç„¶åå†è°ˆè°ˆæˆ‘ä¸ªäººçš„å·¥ä½œå§ï¼Œä¸€å¼€å§‹æˆ‘æ˜¯ç»´æŠ¤ä¸€ä¸ªçº¿ä¸ŠæœåŠ¡çš„ç›‘æ§ç³»ç»Ÿï¼Œç®€å•æ¥è¯´å°±æ˜¯åœ¨çº¿ä¸ŠæœåŠ¡é‡Œå¢åŠ æ‰“ç‚¹é€»è¾‘ï¼Œç„¶åå†å¦ä¸€ä¸ªç¨‹åºé‡Œè¿›è¡Œæµå¤„ç†ï¼Œå®æ—¶è¾“å‡ºç›¸å…³ç›‘æ§æŒ‡æ ‡ï¼Œä¸è¿‡å› ä¸ºä»£ç ä½¿ç”¨scalaå†™çš„ï¼Œæˆ‘ä¹Ÿä¸æ˜¯å¾ˆç†Ÿï¼Œæ‰€ä»¥åªæ˜¯ç®€å•ä¿®æ”¹äº†ä¸€ä¸‹é€»è¾‘ï¼Œä¿®å¤Bugã€‚è€å®è¯´ï¼Œå› ä¸ºè¿™ä¸ªé¡¹ç›®æ˜¯2å¹´å‰çš„é¡¹ç›®äº†ï¼Œå¤§æ¦‚å¿«ä¸€å¹´æ²¡äººåœ¨ç»´æŠ¤äº†ï¼Œæ‰€ä»¥æ„Ÿè§‰é—®é¢˜è¿˜æ˜¯å¾ˆå¤§çš„ï¼Œä½†æˆ‘ä¸ªäººåˆå› ä¸ºå®åŠ›ä¸è¶³ï¼Œæ— æ³•è¿›è¡Œé‡æ„ï¼Œå°±æ˜¯é‚£ç§çŸ¥é“æœ‰é—®é¢˜ï¼Œä½†åˆç»™ä¸å‡ºè§£å†³æ–¹æ¡ˆï¼Œå¯ä»¥è¯´æ˜¯èœé¸¡è½æ³ªäº†ï¼Œæ‰€ä»¥æœ€åè¿™ä¸ªé¡¹ç›®ä¹Ÿå°±æ˜¯åšåˆ°äº†èƒ½è·‘çš„æ•ˆæœã€‚ä¸è¿‡è¿™ä¸ªç›‘æ§æœåŠ¡åæ¥ä¹Ÿæ²¡æœ‰è¢«æ€ä¹ˆé‡è§†ï¼Œæ²¡æœ‰ä»€ä¹ˆäººç”¨ï¼Œæ‰€ä»¥ä¹Ÿå°±è¿™æ ·äº†ï¼Œå› ä¸ºåæ¥æœ‰äº†æ›´é‡è¦çš„éœ€æ±‚è¦åšã€‚</p><p>ä¹‹åä¸»è¦è´Ÿè´£çš„å·¥ä½œæ˜¯æ­å»ºå®éªŒæŒ‡æ ‡ï¼Œä¸ºå¼€å‘åŒå­¦å®éªŒæµ‹è¯•æä¾›æŒ‡æ ‡å‚è€ƒï¼Œæµ‹è¯•æ–°å¢åŠŸèƒ½æ˜¯å¦å­˜åœ¨å¼‚å¸¸ã€‚å…·ä½“æ¥è¯´ï¼Œæˆ‘å°±æ˜¯æ”¶é›†å„ä¸ªæœåŠ¡Ownerçš„éœ€æ±‚ï¼Œåœ¨å¯¹åº”æœåŠ¡çš„ä»£ç é‡Œå¢åŠ ç›¸å…³é€»è¾‘ï¼Œç„¶åæäº¤éœ€æ±‚ç»™å®éªŒæŒ‡æ ‡å¹³å°ï¼Œå†è®©ä»–ä»¬åšå®Œæˆå®éªŒå¹³å°ä¸Šçš„å¼€å‘å·¥ä½œã€‚è¿™ä¸ªå·¥ä½œçš„ä¸»è¦éš¾ç‚¹ï¼Œå°±åœ¨äºè¦å»çœ‹å„ä¸ªæœåŠ¡çš„ä»£ç ï¼Œå¾—ç¨å¾®æ‡‚ç‚¹å…¶ä¸­è¿è¡Œæµç¨‹å’Œé€»è¾‘ï¼Œç„¶åå†åˆé€‚çš„åœ°æ–¹åŠ ä¸Šæ•°æ®æ‰“ç‚¹ï¼Œå†™çš„ä»£ç å…¶å®ä¸å¤šï¼Œè¿˜æœ‰å°±æ˜¯å¤„ç†é€»è¾‘éœ€è¦å†™ä¸ªFlink SQLï¼Œç„¶åå†æŠŠéœ€æ±‚æ•´ç†ç»™æ–‡æ¡£æäº¤ç»™å®éªŒå¹³å°çš„åŒå­¦ã€‚è¿™ä¸ªè¿‡ç¨‹æ˜¯æ”¶é›†éœ€æ±‚ï¼Œçœ‹ä»£ç äº†è§£é€»è¾‘ï¼Œä»¥åŠå’Œå…¶ä»–éƒ¨é—¨çš„åŒå­¦æ‰“äº¤é“ï¼Œå¯¹æ¥å·¥ä½œéœ€æ±‚ï¼Œè™½ç„¶é‡å¤æ€§å·¥ä½œæŒºå¤šï¼Œä½†ä¹Ÿæœ‰ä¸€å®šçš„æ”¶è·ã€‚</p><p>æœ€åçš„è¯ï¼Œæ˜¯å¯¹ä¸€ä¸ªçº¿ä¸ŠæœåŠ¡åšäº†å°ä¼˜åŒ–ï¼Œä¸»è¦åœ¨mentorçš„æŒ‡å¯¼ä¸‹ï¼Œä¼˜åŒ–äº†Goè¯­è¨€é‡ŒMapåºåˆ—åŒ–çš„é—®é¢˜ï¼Œç•¥å¾®é™ä½äº†åœ¨çº¿æœåŠ¡æœºå™¨çš„CPUå’Œå†…å­˜ä½¿ç”¨ç‡ã€‚è¿™ä¸ªå·¥ä½œå¯¹æˆ‘æ¥è¯´ï¼Œæ„Ÿè§‰å—ç›ŠåŒªæµ…ï¼Œå­¦ä¹ åˆ°äº†æ€ä¹ˆå»è¿›è¡Œæµ‹è¯•ï¼Œæ€§èƒ½ä¼˜åŒ–çœ‹å“ªäº›æŒ‡æ ‡ï¼Œæ€ä¹ˆçœ‹ï¼Œæœ€åå‡ºäº†ä¸€ä»½æ–¹æ¡ˆæŠ¥å‘Šï¼Œè™½ç„¶ä¹Ÿæ¯”è¾ƒç®€å•å§ï¼Œä½†ä¹Ÿå—åˆ°äº†å¤§å®¶çš„è‚¯å®šï¼Œå¯¹æˆ‘æ¥è¯´ï¼Œæ„Ÿè§‰è¿˜æ˜¯å¾ˆä¸é”™çš„ï¼Œå°±æ˜¯é‚£ç§ä½ åšçš„å·¥ä½œåˆ‡å®æœ‰æ•ˆï¼Œæ˜¯è‚‰çœ¼å¯è§çš„ï¼Œè€Œæ²¡æœ‰ç™½è´¹ï¼Œå°±æ„Ÿè§‰å®ç°äº†è‡ªå·±çš„ä¸€ç‚¹ä»·å€¼ã€‚</p><h2 id="å®ä¹ æ”¶è·ä¸æ„Ÿå—"><a class="markdownIt-Anchor" href="#å®ä¹ æ”¶è·ä¸æ„Ÿå—"></a> å®ä¹ æ”¶è·ä¸æ„Ÿå—</h2><p>æ€»çš„æ¥è¯´ï¼Œè¿™ä»½å®ä¹ ç»å†æˆ‘è®¤ä¸ºè¿˜æ˜¯éå¸¸å®è´µçš„ï¼Œæ— è®ºæ˜¯mentorè¿˜æ˜¯å…¶ä»–åŒäº‹ï¼Œéƒ½ååˆ†å‹å–„ï¼Œä¹Ÿéƒ½å¾ˆæœ‰èƒ½åŠ›ï¼Œç»™äº†æˆ‘ä¸å°‘å¸®åŠ©å’ŒæŒ‡å¯¼ã€‚ä¸è¿‡å®ä¹ æœŸé—´ï¼Œä»£ç å†™çš„ä¸å¤šï¼Œæ–‡æ¡£å€’æ˜¯å†™äº†ä¸å°‘â€¦â€¦æ‰€ä»¥æˆ‘æ„Ÿè§‰è‡ªå·±çš„ä»£ç èƒ½åŠ›æˆ–è®¸æ²¡æœ‰æå‡å¤šå°‘ï¼Œä½†æ˜¯çœ¼ç•Œå’Œè§†é‡æ˜¯æ‹“å±•å¼€é˜”äº†ï¼Œæ¥è§¦äº†è§£åˆ°é¡¹ç›®çš„å¼€å‘æµç¨‹ï¼Œå­¦ä¹ å¦‚ä½•ä¸äººåˆä½œæ²Ÿé€šäº¤æµï¼Œæ€ç»´æ–¹å¼ä¹Ÿå‘ç”Ÿäº†æ”¹å˜ï¼Œå¼€å§‹é‡è§†æ—¶é—´è§„åˆ’ï¼Œä¼°ç®—å·¥ä½œé‡ï¼Œå…³æ³¨å·¥ä½œäº§å‡ºã€‚è¿˜æœ‰ä¸€ä¸ªå¾ˆå¤§çš„æ”¶è·å°±æ˜¯å­¦ä¹ ä½¿ç”¨é£ä¹¦äº†ï¼Œåˆ°ç°åœ¨ï¼Œé£ä¹¦ä¹Ÿæˆäº†æˆ‘çš„ç¬”è®°ä¸»åŠ›ï¼Œæå‡äº†æˆ‘ä¸å°‘å­¦ä¹ æ•ˆç‡ã€‚</p><p>è¿˜æœ‰ç‰¹åˆ«æ·±çš„æ„Ÿè§¦å°±æ˜¯ï¼Œæ„Ÿè§‰è‡ªå·±çœŸçš„å¥½èœï¼Œå¾ˆå¤šåœ°æ–¹éƒ½ä¸ä¼šï¼Œä¸æ‡‚ï¼Œæ²¡å•¥çªå‡ºçš„èƒ½åŠ›ï¼Œè·Ÿæ­£å¼å‘˜å·¥çœŸçš„å·®è·å¾ˆå¤§ï¼Œè§‰å¾—è‡ªå·±åœ¨å­¦æ ¡é‡Œè™½ç„¶è€ƒè¯•èƒ½æ‹¿é«˜åˆ†ï¼Œä½†æ˜¯åˆ°äº†å®é™…å¼€å‘ä¸­ï¼Œè‡ªå·±çš„èƒ½åŠ›çœŸçš„æ˜¯è¿œè¿œä¸è¶³ï¼Œæ²¡æœ‰è¿‡ç¡¬çš„ä»£ç èƒ½åŠ›ï¼Œä¹Ÿæ²¡æœ‰ä»€ä¹ˆæ¶æ„æ€ç»´ï¼Œå¯èƒ½ä¹Ÿå°±åŸºç¡€é©¬é©¬è™è™å§ã€‚ä¹Ÿæ­£æ˜¯å¦‚æ­¤ï¼Œè®©æˆ‘ä¸‹å®šå†³å¿ƒï¼Œå›åˆ°å­¦æ ¡åï¼Œä¸€å®šè¦å»æŠŠè¿™äº›æ¬ ç¼ºçš„èƒ½åŠ›éƒ½ç»™è¡¥èµ·æ¥ã€‚</p><h2 id="è‡ªæˆ‘åæ€ä¸æ€»ç»“"><a class="markdownIt-Anchor" href="#è‡ªæˆ‘åæ€ä¸æ€»ç»“"></a> è‡ªæˆ‘åæ€ä¸æ€»ç»“</h2><p>åœ¨å®ä¹ çš„å¤´ä¸¤ä¸ªæœˆè¿˜å¥½ï¼Œè¿˜ä¿æŒç€ä¸€ç§æ¯”è¾ƒé«˜æ˜‚çš„æ–—å¿—ï¼Œä½†æ˜¯ä¹‹åå¯èƒ½æ˜¯çƒ­æƒ…æ•£å»äº†ï¼Œå°±é™·å…¥äº†ä¸€ç§æ‡’æ•£çš„çŠ¶æ€ï¼Œæ¯å¤©ç›¸å½“äºæ˜¯æ‰“å¡ä¸Šç­å®ä¹ ï¼ŒæŒ‰éƒ¨å°±ç­å®Œæˆè‡ªå·±çš„å·¥ä½œä»»åŠ¡ï¼Œä¹Ÿæ²¡æœ‰æƒ³ç€å†å¤šå»å­¦ä¹ æ–°æŠ€æœ¯å•¥çš„ï¼Œå¯èƒ½å°±å¯¼è‡´æˆ‘æˆé•¿å¾—æ¯”è¾ƒæ…¢ï¼ˆè‡ªæˆ‘æ„Ÿè§‰ï¼‰ã€‚</p><p>åœ¨å®ä¹ æœŸé—´ï¼Œæˆ‘è¿˜æŸ“ä¸Šäº†ä¸€å¤§æ¶ä¹ ï¼Œé‚£å°±æ˜¯ç†¬å¤œç©æ‰‹æœºã€ç©ç”µè„‘ã€‚æ›¾ç»æˆ‘ä¹Ÿè®¤ä¸ºè¶…è¿‡12ç‚¹ä¸ç¡è§‰å°±æ˜¯ç½ªå¤§æ¶æï¼Œå¯¹èº«ä½“ä¼šé€ æˆæå¤§å±å®³ï¼Œä¼šç»™è‡ªå·±å¸¦æ¥æå¤§çš„è´Ÿç½ªæ„Ÿã€‚ä½†æ˜¯åœ¨å®ä¹ ç‹¬å±…æœŸé—´ï¼Œå„ç§ç†¬å¤œåˆ°2ã€3ç‚¹ï¼Œç”šè‡³å¥½å‡ æ¬¡ç†¬å¤œåˆ°6ç‚¹å¤šç¡ï¼Œ10ç‚¹èµ·ä¸Šç­ï¼Œè®°å¾—æƒ…å†µæœ€ä¸¥é‡çš„ä¸€æ¬¡ï¼Œå½“æ—¶æ•´ä¸ªäººè„‘è¢‹æ˜æ˜æ²‰æ²‰çš„ï¼Œåˆ°äº†å…¬å¸ä¸€ç‚¹çŠ¶æ€éƒ½æ²¡æœ‰ï¼Œå·¥ä½œæ•ˆç‡æå·®ã€‚è€Œç†¬å¤œå¸¦æ¥çš„è¿é”ååº”å°±æ˜¯ï¼Œç¡çœ ä¸è¶³ï¼Œæ™šèµ·ä¸åƒæ—©é¥­ï¼Œä¸æˆ‘ä¹‹å‰çš„ä½œæ¯å¤§ç›¸å¾„åº­ï¼Œä¹Ÿé€ æˆäº†æˆ‘å®ä¹ æœŸé—´çŠ¶æ€ä¸ä½³ï¼Œéƒ½æ²¡å……æ²›çš„ç²¾ç¥ï¼Œè¿˜è°ˆä½•å­¦ä¹ å’Œå·¥ä½œå‘¢ï¼Ÿå†åŠ ä¸Šæ¯é€¢å‘¨æœ«å¿…ç‚¹å¤–å–ï¼Œä¸å¤ªæ³¨æ„é¥®é£Ÿï¼Œå¯¼è‡´é‚£æ®µæœŸé—´èº«ä½“çŠ¶å†µä¸å®¹ä¹è§‚ï¼Œæ˜æ˜¾å¯ä»¥æ„Ÿè§‰åˆ°ä¸å¦‚ä»å‰ã€‚</p><p>æ€»ç»“æ¥è¯´ï¼Œè¯¥åæ€çš„æœ‰ä¸¤ç‚¹ï¼Œä¸€ä¸ªæ˜¯å¿ƒæ€ä¸Šï¼Œå®ä¹ æœŸé—´è¿˜æ˜¯ç¼ºä¹ä¸€ç§ç§¯æå­¦ä¹ çš„æ€åº¦ï¼Œæˆ–è€…è¯´å½“æ—¶ä¹Ÿæ²¡æœ‰æ˜ç¡®çš„ç›®æ ‡ï¼Œä¸çŸ¥é“è¦å­¦ä»€ä¹ˆï¼Œå¯ä»¥å­¦ä»€ä¹ˆï¼Œæ¯å¤©å°±åªæ˜¯å®Œæˆå·¥ä½œä»»åŠ¡ï¼Œæ²¡æœ‰èŠ±æ›´å¤šçš„æ—¶é—´æ¥æ‹“å±•å­¦ä¹ ï¼Œçš„ç¡®è¯¥å¥½å¥½åæ€åæ€ã€‚å¦ä¸€ä¸ªå°±æ˜¯èº«ä½“ä¸Šï¼Œå¦‚æœè¿è‡ªå·±çš„èº«ä½“ç…§é¡¾ä¸å¥½ï¼Œé‚£è¿˜è°ˆä»€ä¹ˆå…¶ä»–çš„å‘¢ï¼Ÿèº«ä½“æ˜¯é©å‘½çš„æœ¬é’±ï¼ŒåŒæ—¶è‰¯å¥½çš„å¥åº·çŠ¶æ€ä¹Ÿæ‰èƒ½æ›´å¥½åœ°æ”¯æ’‘å·¥ä½œå­¦ä¹ ï¼Œæé«˜æ•ˆç‡ï¼Œä»¥åçœŸçš„æ˜¯éœ€è¦ä¿æŒå¥åº·çš„ç”Ÿæ´»ä½œæ¯ï¼Œå¤šè¿åŠ¨ï¼Œå¤šå¥èº«ã€‚</p><h1 id="ç ”ç©¶ç”Ÿ"><a class="markdownIt-Anchor" href="#ç ”ç©¶ç”Ÿ"></a> ç ”ç©¶ç”Ÿ</h1><p>ä»Šå¹´ä¸‹åŠå¹´ï¼Œæˆ‘æˆä¸ºäº†åŒ—äº¬å¤§å­¦è½¯ä»¶ä¸å¾®ç”µå­å­¦é™¢çš„ç ”ç©¶ç”Ÿã€‚è€å®è¯´ï¼Œæ²¡æœ‰å¤ªå¤šå®æ„Ÿï¼Œå°±åƒæ˜¯è¢«ä¸€è‚¡æ½®æµæ¨è‡³æ­¤åœ°ã€‚ç®€å•è°ˆè°ˆåœ¨è½¯å¾®çš„å­¦ä¹ ç”Ÿæ´»å§ï¼Œè½¯å¾®åœ°æ–¹å¾ˆå°ï¼Œæˆ‘ä½çš„5å·æ¥¼ç¦»é£Ÿå ‚å’Œå®¿èˆéƒ½å¾ˆè¿‘ï¼Œä¸‹ä¸ªæ¥¼æ‹ä¸ªå¼¯å°±åˆ°äº†ï¼Œå¾ˆæ–¹ä¾¿ã€‚è½¯å¾®çš„é£Ÿå ‚æ¯”è¾ƒå°ï¼Œèœå¼ä¹Ÿæ¯”è¾ƒå›ºå®šï¼Œå‡ ä¸ªæœˆä¸‹æ¥ï¼Œæˆ‘çš„æ—©é¥­åŸºæœ¬ä¸Šå°±æ˜¯è‚‰é¥¼ã€ç´ é¥¼ã€åœŸè±†é¥¼ã€é…±é¦™é¥¼ã€åŸ¹æ ¹ç…é¸¡è›‹ã€è±†æµ†è¿™äº”æ ·é‡Œæ’åˆ—ç»„åˆï¼Œä¸è¿‡æˆ‘å¯¹åƒé¥­ä¹Ÿæ²¡è¿‡é«˜çš„è¦æ±‚ï¼Œæ‰€ä»¥ä¹Ÿéƒ½è¿˜èƒ½æ¥å—å§ã€‚</p><p>è½¯å¾®çš„è¯¾ç¨‹ï¼Œæ„Ÿè§‰æ€»ä½“ä¸Šå’Œ æœ¬ç§‘å·®åˆ«ä¸å¤§å§ï¼Œæ¯”è¾ƒå¤§çš„åŒºåˆ«å¯èƒ½å°±æ˜¯ï¼Œæˆäº†ç ”ç©¶ç”Ÿä¹‹åï¼Œè‡ªå­¦çš„æ—¶é—´å äº†å¤§é‡çš„è¯¾åæ—¶é—´ï¼Œé™¤äº†ä¸€äº›æ ¸å¿ƒè¯¾éœ€è¦è€ƒè¯•è€ƒæ ¸ï¼Œå…¶ä»–å¤šæ•°è¯¾ç¨‹æ˜¯ç±»ä¼¼äºå¤§ä½œä¸šçš„å½¢å¼è¿›è¡Œè€ƒæŸ¥ã€‚åœ¨è½¯å¾®ï¼Œä½ ä¼šé‡åˆ°å¤§ä½¬ï¼Œé‡åˆ°<s>å·ç‹</s>ï¼ˆåºŸå¯å¿˜é£Ÿçš„äººï¼‰ï¼Œé‡åˆ°åƒæˆ‘è¿™æ ·çš„ä½›ç³»çš„äººï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯å„å…·ç‰¹è‰²äº†ã€‚æˆ–è®¸æ˜¯ä¹‹å‰æœ‰è¿‡å®ä¹ ç»å†å§ï¼Œå’Œè®¸å¤šèƒ½äººã€ä¸“å®¶å…±äº‹è¿‡ï¼Œæ‰€ä»¥è™½ç„¶ä¹ŸçŸ¥é“è‡ªå·±å’Œåˆ«äººçš„å·®è·å¾ˆå¤§ï¼Œå€’ä¹Ÿæ²¡æœ‰å¤ªå¤§çš„å¿ƒç†å‹åŠ›äº†ï¼Œä¸€æ­¥ä¸€æ­¥è„šå°å˜›ï¼Œæ…¢æ…¢æ¥å§ï¼ŒæŠ—å‹è¿™ä¸€å—æˆ‘ä¸€ç›´å¯ä»¥çš„ï¼ˆå“ˆå“ˆï¼Œèººå¹³å°±ç›´è¯´~ï¼‰ã€‚</p><p>æ­¤å¤–ï¼Œæˆ‘åˆé‡è§†å…¶è‡ªå·±çš„å¥åº·äº†ã€‚å¼€å­¦ä»¥æ¥ï¼Œæˆ‘å°±åœ¨ç§¯æé”»ç‚¼äº†ï¼Œåœ¨å®¿èˆé‡ŒåšKeepï¼Œå®¤å¤–è·‘æ­¥ï¼Œå…¥å†¬ä¹‹åå°±åªå‰©ä¸‹å®¤å†…è¿åŠ¨äº†ã€‚ä½†ä¸å¹¸çš„æ—¶å€™ï¼Œ12æœˆåˆè…°éƒ¨å‡ºäº†ç‚¹é—®é¢˜ï¼Œä¹…åä¹‹åæ„Ÿåˆ°ç–¼ï¼Œå¯èƒ½æ˜¯è…°è‚ŒåŠ³æŸäº†ï¼Œåæ¥å»çœ‹äº†åŒ»ç”Ÿï¼Œå¼€äº†è¯è†å’Œè¯ä¸¸ï¼Œå‘Šè¯«æˆ‘ä¹‹åä¸èƒ½ä¹…åï¼Œæ¯åä¸€å°æ—¶ï¼Œå°±éœ€è¦èµ·æ¥æ´»åŠ¨ä¸€ä¼šå„¿ã€‚ä¹Ÿæ˜¯å› ä¸ºè¿™ä¸ªåŸå› ï¼Œæˆ‘çš„å¥èº«è®¡åˆ’ä¹Ÿä¸å¾—å·²æç½®äº†ï¼Œä¸è¿‡ä¹Ÿç®—æ˜¯ç»™æˆ‘æ•²å“äº†è­¦é’Ÿï¼Œæˆ‘çš„èº«ä½“çœŸçš„æ²¡æœ‰æˆ‘æƒ³è±¡ä¸­é‚£ä¹ˆä¹è§‚äº†ï¼Œå„ä½æœ‹å‹ï¼Œä¹Ÿè¦å¤šå¤šä¿é‡è‡ªå·±çš„èº«ä½“å•Šã€‚</p><h1 id="ç”Ÿæ´»"><a class="markdownIt-Anchor" href="#ç”Ÿæ´»"></a> ç”Ÿæ´»</h1><p>å†æ¥è°ˆè°ˆè¿™ä¸€å¹´æ¥çš„ç”Ÿæ´»å§ï¼Œå¹´åˆå› ä¸ºç–«æƒ…åŸå› æ²¡æœ‰é€‰æ‹©å›å®¶è¿‡å¹´ï¼Œäººç”Ÿç¬¬ä¸€æ¬¡åœ¨å¤–åœ°å’Œé©°å“¥ä¸€èµ·åœ¨è¿‡æ˜¥èŠ‚ï¼Œè®°å¾—åˆä¸€è¿˜æ˜¯åˆäºŒï¼Œåƒçš„è¿˜æ˜¯æ³¡é¢å“ˆå“ˆã€‚å¹´ååˆæ˜¯è¿‘3ä¸ªæœˆçš„å®ä¹ ï¼Œç„¶åå°±è¯·å‡ä¸€ä¸ªå¤šæœˆï¼Œå›å­¦æ ¡åšæ¯•è®¾å»äº†ã€‚åœ¨æœ€åçŸ­æš‚çš„æ—¥å­é‡Œï¼Œå’Œå¤§å­¦åŒå­¦ä»¬ç›¸æ‹¥è¿™æœ€åçš„æ—¶å…‰ï¼Œæ¯•ç«Ÿæ¯•ä¸šä¹‹åï¼Œå†æ¬¡ç›¸è§ä¸çŸ¥ä½•å¹´ä½•æœˆäº†ï¼Œä½†ç›¸ä¿¡æ€»ä¼šæœ‰é‡é€¢çš„ä¸€å¤©ï¼Œå°±è®©æˆ‘ä»¬åœ¨é‚£ä¸€å¤©åˆ°æ¥ä¹‹å‰ï¼Œå„è‡ªåŠªåŠ›æˆä¸ºæ›´å¥½çš„è‡ªå·±å§~</p><p>æ¯•ä¸šä¹‹åï¼Œåœ¨å®¶å‘†äº†ä¸€æ˜ŸæœŸä¹‹ååˆå›å…¬å¸å®ä¹ å»äº†ã€‚å†æ­¤åï¼Œå°±æ˜¯9æœˆä»½ç ”ç©¶ç”Ÿå¼€å­¦ï¼Œæ­£å¼æ‹‰å¼€äº†æˆ‘ç ”ç©¶ç”Ÿç”Ÿæ´»çš„åºå¹•ã€‚è¿˜è®°å¾—å½“æ—¶ä¸Šå­¦å‰ï¼Œç«‹ä¸‹ä¸€ä¸ªflagï¼Œ10æœˆå‰å¿…è„±å•ï¼Œæˆ–è®¸æ˜¯çœ‹åˆ°å‘¨å›´èº«è¾¹çš„äººéƒ½è„±å•è€Œæ„Ÿåˆ°ç„¦è™‘äº†ï¼Œæˆ–è®¸æ˜¯æ„Ÿåˆ°å¯‚å¯äº†ï¼Œæˆ–è®¸æ˜¯è®¤ä¸ºå†ä¸è°ˆä¸€åœºæ ¡å›­æ‹çˆ±ä»¥åå†ä¹Ÿæ²¡æœ‰æœºä¼šã€‚ä½†ç»“æœæ¥è¯´ï¼Œæˆ‘å¤±è´¥äº†ã€‚ç„¶åï¼Œç„¶åå°±æ²¡æœ‰åæ–‡äº†ã€‚æˆ–è®¸çœŸçš„æ˜¯å•èº«å¤ªä¹…äº†ï¼Œä¸çŸ¥é“å¿ƒåŠ¨åˆ°åº•æ˜¯æ€æ ·ä¸€ç§æ„Ÿè§‰ï¼Œä¸çŸ¥é“å–œæ¬¢ä¸€ä¸ªäººä½ è¯¥å»æ€ä¹ˆè¡ŒåŠ¨ï¼Œä¸çŸ¥é“æ€ä¹ˆå»çˆ±ä¸€ä¸ªäººã€‚æƒ³æƒ³è‡ªèº«çš„åŸå› ï¼Œé•¿ç›¸ä¸€èˆ¬ï¼Œèº«é«˜ä¸€èˆ¬ï¼Œä¸å¤ªä¼šè£…æ‰®ï¼Œç”Ÿæ´»å¸¸è¯†ä¹Ÿæœ‰æ¬ ç¼ºï¼ŒåŒæ—¶è¿˜æ˜¯ä¸ªçœ‹åŠ¨æ¼«çš„å®…ç”·ï¼Œè¿˜å¸¦æœ‰ç•¥å¾®çš„ä¸­äºŒï¼Œè¿˜å–œæ¬¢æ‰“æ¸¸æˆï¼Œé™¤äº†ç¨å¾®ï¼Œä¸€ä¸¢ä¸¢å¯¹å­¦ä¹ ä¸Šç‚¹å¿ƒå¤–ï¼Œä¼¼ä¹æ²¡æœ‰åˆ«çš„ä»€ä¹ˆç‰¹åˆ«ä¹‹å¤„ï¼Œè¿™æ ·çš„äººè®¾çš„ç¡®å¸å¼•ä¸äº†åˆ«äººå•Šã€‚ä¸è¿‡åæ¥æˆ‘ä¹Ÿçœ‹å¼€äº†ï¼Œå†é‡åˆ°å¥¹ä¹‹å‰ï¼Œæˆ‘è¿˜æ˜¯ç»§ç»­åŠªåŠ›ï¼Œå¤šå¤šæå‡è‡ªå·±å§ï¼Œæˆä¸ºæ›´ä¼˜ç§€çš„äººã€‚</p><p>æ¥ç€è°ˆè°ˆæ¸¸æˆå§ï¼Œè¿™ä¸€å¹´ä¸»è¦ç©çš„è¿˜æ˜¯è‹±é›„è”ç›Ÿï¼Œæ¯å‘¨å…­æ™šæ›´æ˜¯æˆäº†å¼€é»‘æ—¶æ®µï¼Œä¹Ÿå°±ç©ç©å¤§ä¹±æ–—äº†ï¼Œä¸å…¶è¯´æ˜¯ç©æ¸¸æˆï¼Œæˆ–è®¸æ›´å¤šçš„æ˜¯äº«å—å’Œæœ‹å‹å¹æ°´æ—¶åˆ»å§ã€‚æ­¤å¤–è¿˜ç”¨æ¨¡æ‹Ÿå™¨ç©äº†å¥³ç¥å¼‚é—»å½•p5ä»¥åŠå…«æ–¹æ—…äººï¼Œæ„Ÿè§‰éƒ½æ˜¯ä¸é”™çš„æ¸¸æˆã€‚ä»¥åçš„è¯ï¼Œæ‰“ç®—æ˜¯ç­‰æœ‰é’±äº†ï¼Œæ•´ä¸Šå°å¼æœºï¼Œpsä¸»æœºï¼ŒSwitchï¼Œå¤§å±æ˜¾ç¤ºå™¨ï¼Œä¸è¿‡å¯èƒ½åˆ°äº†é‚£ä¸ªæ—¶å€™å¯èƒ½åè€Œæ²¡æœ‰ç©æ¸¸æˆçš„å¿ƒæ€äº†ï¼Œæƒ³ç©çš„æ—¶å€™ç©ä¸äº†ï¼Œèƒ½ç©çš„æ—¶å€™ä¸æƒ³ç©äº†æˆ–è€…è¿˜æ˜¯ç©ä¸äº†ï¼Œè¿™ä¹ˆæƒ³æ¥ï¼Œè¿˜æ˜¯æœ‰äº›è®¸çš„æ‚²ä¼¤å‘¢ã€‚</p><p>è¿˜èƒ½è¯´ç‚¹ä»€ä¹ˆå‘¢ï¼Œå“¦ï¼Œå¯¹äº†ï¼Œé‚£å°±æ˜¯æˆ‘æ„Ÿè§‰è‡ªå·±è¿˜æ˜¯æ²¡æœ‰é•¿å¤§ï¼Œæˆ–è€…è¯´ä¸å¤Ÿæˆç†Ÿï¼Œå¯¹äºäººæƒ…ä¸–æ•…ä¸å¤ªæ“…é•¿ï¼Œä¸æ“…äº¤é™…ï¼Œå¯¹ç”Ÿæ´»çš„ä¸€äº›å¸¸è¯†æˆ–è€…è¯´æ˜¯ç»†èŠ‚è¿˜ä¸äº†è§£ï¼Œæ„Ÿè§‰è‡ªå·±çš„å¿ƒæ€è¿˜æ˜¯å­©å­ä¸€æ ·ï¼Œä¸æ„¿å»æ€è€ƒæ›´å¤šçš„ä¸œè¥¿ï¼Œæˆ–è€…è¯´ä¸æƒ³å»æ‰¿æ‹…æŸäº›è´£ä»»ï¼Œåªæ˜¯ä»»ç”±ç”Ÿæ´»æ¨ç€è‡ªå·±å¾€å‰èµ°ï¼Œè€Œä¸æ˜¯è‡ªå·±æŒ‘èµ·æ‹…å­å¾€å‰è·‘ï¼Œå½“ç„¶ä¹Ÿæœ‰åšåŠªåŠ›åœ¨æ”¹å˜ï¼Œä½†ä¼¼ä¹è¿œè¿œä¸å¤Ÿã€‚å°±åƒæ˜¯å‘¨å›´çš„æœ‹å‹éƒ½æœ‰äº†å¤§äººæ¨¡æ ·ï¼Œè€Œæˆ‘è¿˜æ˜¯é‚£ä¸ªæ²‰æµ¸åœ¨è‡ªå·±ä¸–ç•Œé‡Œçš„å°‘å¹´ã€‚æˆ‘å¸Œæœ›è‡ªå·±èƒ½é•¿å¤§ï¼Œä½†ä¹Ÿç•æƒ§ç€é•¿å¤§ã€‚æˆ‘å¾ˆç„¦è™‘ï¼Œä½†åˆå¾ˆä½›ç³»ï¼Œå°±åƒæ˜¯è–›å®šè°”çš„çŒ«ä¸€èˆ¬ï¼Œå¤„åœ¨ä¸€ä¸ªå åŠ æ€ã€‚</p><p>å†è°ˆè°ˆä¸€äº›ä¸ªäººçš„ä½“ä¼šæ„Ÿæ‚Ÿå§ï¼š</p><ol><li>èº«ä½“å¥åº·æ˜¯ç¬¬ä¸€ä½ã€‚</li><li>å¤šå…³çˆ±è‡ªå·±çš„çˆ¶æ¯ã€‚</li><li>å¤šçè§†è‡ªå·±çš„æœ‹å‹ã€‚</li><li>å­¦ä¼šæ¢ä½æ€è€ƒã€‚</li><li>ä¸€æ—¥ä¸‰çœå¾èº«ã€‚</li><li>å­¦æ— æ­¢å¢ƒï¼Œç»ˆèº«å­¦ä¹ ã€‚</li></ol><h1 id="ç›®æ ‡"><a class="markdownIt-Anchor" href="#ç›®æ ‡"></a> ç›®æ ‡</h1><p>æœ€åè‡ªç„¶æ˜¯è®¾å®šæ¥å¹´çš„ç›®æ ‡å•¦ï¼Œè¿™é‡Œç®€ç•¥åœ°åˆ—å‡ºäº†ä¸€äº›ç›®æ ‡ï¼š</p><ol><li>æ­å»ºå¥½è‡ªå·±çš„åšå®¢ç½‘ç«™ï¼›</li><li>æŒç»­å†™åšå®¢ï¼Œå°½é‡ä¿æŒæ¯å‘¨ä¸€ç¯‡ï¼Œç›®æ ‡å…¨å¹´50ç¯‡ä»¥ä¸Šï¼›</li><li>å†™ç•ªå‰§å›é¡¾ï¼Œå›é¡¾è‡ªå·±çš„çœ‹ç•ªå†å²ï¼Œä¹Ÿç®—æ˜¯ç»™è‡ªå·±çƒ­çˆ±è¿™ä¹ˆä¹…çš„äºŒæ¬¡å…ƒä¸€ä¸ªæ€»ç»“äº¤ä»£å§ã€‚å¯ä»¥çš„è¯å†å‰ªè¾‘ä¸€äº›ç‰‡æ®µï¼Œæœ€ååšä¸€ä¸ªAMVæˆ–è€…MADå‡ºæ¥ï¼›</li><li>C++ å¼€å‘å­¦ä¹ ï¼ŒåŒ…æ‹¬è¯­æ³•å’Œé¡¹ç›®ï¼ˆæ¯”å¦‚å†™ä¸€ä¸ªç½‘ç«™ï¼ŒæœåŠ¡å™¨ï¼‰ï¼›stackflowä¸Šè§£å†³C++ é—®é¢˜ï¼Œæ£€éªŒè‡ªå·±çš„çŸ¥è¯†æˆæœï¼Œç›®æ ‡Reputation è¿‡500ï¼›</li><li>ç®—æ³•å¼ºåŒ–ï¼Œåˆ·é¢˜ï¼Œç›®æ ‡Leecode 300é¢˜ï¼›</li><li>ä¹¦ç±é˜…è¯»</li></ol><ul><li>è®¡ç®—æœºç›¸å…³ä¹¦ç± 10æœ¬ï¼›;</li><li>æ–‡å­¦ç±»å°è¯´ç­‰ 5æœ¬ï¼›</li><li>å…¶ä»–æ‚é¡¹ï¼ˆé‡‘èç†è´¢ã€ä¼ è®°ã€ä¸ºäººå¤„ä¸–ç­‰ï¼‰3~5æœ¬ï¼›</li></ul><ol start="7"><li>å¥èº«ï¼Œç›®æ ‡æ‹¥æœ‰è…¹è‚Œï¼›å¢å¼ºä¸Šè‚¢åŠ›é‡ï¼Œå¢å¼ºèƒŒéƒ¨ã€æ ¸å¿ƒåŠ›é‡ï¼Œç›®æ ‡å¼•ä½“å‘ä¸Šåš10ä¸ªä»¥ä¸Šï¼›</li><li>å‚åŠ ä¸€æ¬¡å¤§å‹æ¯”èµ›å¹¶è·å¥–ï¼Œæ»¡è¶³æ¯•ä¸šèµ„æ ¼ï¼›</li><li>æ—¥è¯­ç»§ç»­å­¦ä¹ ï¼Œå¯ä»¥åšåˆ°åŸºæœ¬çš„å¬å’Œè¯´ã€‚</li></ol><h1 id="ç»“è¯­"><a class="markdownIt-Anchor" href="#ç»“è¯­"></a> ç»“è¯­</h1><p>å†™å†™åœåœï¼Œç¼ç¼è¡¥è¡¥ï¼Œæœ€åæ˜¯åœ¨2022å¹´1æœˆ7æ—¥å›å®¶çš„é«˜é“ä¸Šï¼Œå®Œæˆäº†è¿™ç¯‡å¹´åº¦æ€»ç»“ï¼Œçªç„¶æ„Ÿè§‰è‡ªå·±åˆè¡Œäº†å‘¢ï¼Œå“ˆå“ˆã€‚å¸Œæœ›åœ¨æ–°çš„ä¸€å¹´äº†ï¼Œè‡ªå·±èƒ½æœ‰æ›´å¤§çš„æˆé•¿å§ï¼Œä¹Ÿè¡·åœ°ç¥æ„¿å„ä½æˆä¸ºæ›´å¥½çš„è‡ªå·±~</p>]]></content>
    
    
    <categories>
      
      <category>ç”Ÿæ´»</category>
      
      <category>å¹´åº¦æ€»ç»“</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ‚è°ˆ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æˆ‘çš„æœ€ä½³æ—¥å¿—å®è·µ</title>
    <link href="/2021/12/25/2021-12/2021-12-25%20%E6%88%91%E7%9A%84%E6%9C%80%E4%BD%B3%E6%97%A5%E5%BF%97%E5%AE%9E%E8%B7%B5/"/>
    <url>/2021/12/25/2021-12/2021-12-25%20%E6%88%91%E7%9A%84%E6%9C%80%E4%BD%B3%E6%97%A5%E5%BF%97%E5%AE%9E%E8%B7%B5/</url>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a class="markdownIt-Anchor" href="#å‰è¨€"></a> å‰è¨€</h1><blockquote><p>æœ¬æ–‡è¯‘è‡ªï¼š<a href="https://tuhrig.de/my-logging-best-practices/">https://tuhrig.de/my-logging-best-practices/</a></p></blockquote><p>å¦‚æœä½ æ˜¯ä¸€ååç«¯å¼€å‘è€…ï¼Œé‚£ä¹ˆæ—¥å¿—å°±ç›¸å½“äºä½ çš„åº”ç”¨çš„çª—å£ã€‚ä¸åƒå‰ç«¯ï¼Œé™¤äº†æ—¥å¿—æ¶ˆæ¯å¤–æ²¡æœ‰å¤ªå¤šåˆ«çš„ä¸œè¥¿ã€‚æ¥ä¸‹æ¥å°†ä»‹ç»ä¸€äº›æˆ‘ä¸ªäººå†™æ—¥å¿—æ—¶çš„æŒ‡å¯¼æ€æƒ³ã€‚</p><h1 id="log-after-not-before"><a class="markdownIt-Anchor" href="#log-after-not-before"></a> Log After, not before</h1><p>å›æƒ³ä»¥ä¸‹ä»¥å‰ï¼Œæ¯è‰˜èˆ¹éƒ½ä¼šæœ‰ä¸€æœ¬èˆªæµ·æ—¥å¿—ï¼Œå°±åƒæ—¥è®°ä¸€æ ·ï¼Œè®°å½•ç€æ¯å¤©å‘ç”Ÿçš„é‡è¦äº‹æƒ…ã€‚å°±åƒä¸€æœ¬ä¼ ç»Ÿçš„èˆªæµ·æ—¥å¿—ï¼Œæˆ‘ä»¬åº”è¯¥è®°å½•å·²ç»å‘ç”Ÿçš„äº‹æƒ…ï¼Œè€Œä¸æ˜¯æˆ‘ä»¬å°†è¦åšçš„äº‹æƒ…ã€‚</p><p>ä¸¾ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">// don&#x27;t do that</span><br>log.<span class="hljs-built_in">info</span>(<span class="hljs-string">&quot;Making request to REST API&quot;</span>)<br>restClient.<span class="hljs-built_in">makeRequest</span>()<br> <br><span class="hljs-comment">// do that</span><br>restClient.<span class="hljs-built_in">makeRequest</span>()<br>log.<span class="hljs-built_in">info</span>(<span class="hljs-string">&quot;Made request to REST API&quot;</span>)<br></code></pre></td></tr></table></figure><p>ç¬¬ä¸€ä¸ª log å£°æ˜å¹¶æ²¡æœ‰ç»™å‡ºå¤ªå¤šä¿¡æ¯ã€‚å½“è¯»åˆ°å®ƒçš„æ—¶å€™ï¼Œä½ å¹¶ä¸çŸ¥é“RESTè°ƒç”¨æ˜¯å¦æˆåŠŸã€‚è€Œä¸ºäº†çŸ¥é“æ˜¯å¦è°ƒç”¨æˆåŠŸï¼Œä½ å¿…é¡»å¯»æ‰¾æ˜¯å¦å­˜åœ¨å¼‚å¸¸ã€‚å½“ä½ è¯»åˆ°è¿™æ¡logï¼Œä½†æ˜¯å´æ²¡æœ‰æ‰¾åˆ°ç›¸åº”çš„ exception å¼‚å¸¸ï¼Œä½ å°†ä¼šå›°æƒ‘ä¸€æ•´å¤©ã€‚</p><blockquote><p>è¿™é‡Œæ„Ÿè§‰æ²¡å¤ªç¿»è¯‘æ˜ç™½ï¼Œå¯ä»¥å¯¹ç…§åŸæ–‡çœ‹ï¼šThe first log statement doesnâ€™t tell much. When reading it, you will not know if the REST call was successful or not. To do so you must look for the absence of an exception. And if you read this log but miss the subsequent exception you will be confused for the rest of the day (trust me).</p></blockquote><p>ç¬¬äºŒä¸ª log æ–¹å¼åˆ™å¥½äº†è®¸å¤šã€‚å®ƒæ¸…æ¥šåœ°è¡¨æ˜äº†åˆšåˆšçš„æ“ä½œæˆåŠŸäº†ã€‚å¦‚æœRESTè°ƒç”¨å¤±è´¥äº†ï¼Œä½ å°†çœ‹ä¸åˆ°è¿™æ¡ logï¼Œè€Œæ˜¯ä¼šæœ‰ä¸€ä¸ª exceptionã€‚</p><p>æˆ‘å°†å¯¹æ‰€æœ‰ <strong>INFO</strong> æ—¥å¿—éµå®ˆè¿™æ¡è§„åˆ™ï¼Œç„¶åå¯¹äº <strong>DEBUG</strong> æ¥è¯´ä¼šç”Ÿæˆ exceptionsã€‚</p><h1 id="separate-parameters-and-messages"><a class="markdownIt-Anchor" href="#separate-parameters-and-messages"></a> Separate parameters and messages</h1><p>ä¸€ä¸ªå…¸å‹çš„ log å°å¿ƒåŒ…å«ä¸¤ç§ç±»å‹çš„æ•°æ®ï¼Œä¸€ç§æ˜¯æ‰‹å†™çš„æ¶ˆæ¯ï¼Œæ¥å£°æ˜æ¥ä¸‹æ¥çš„æ¶ˆæ¯å†…å®¹ã€‚å¦ä¸€ç§ç±»å‹æ•°æ®åˆ™æ˜¯ä¸€ç³»åˆ—åŒ…å«åœ¨ä¹‹å‰æ“ä½œä¸­çš„å‚æ•°ã€‚ä½ åº”è¯¥åŒºåˆ†è¿™ä¸¤éƒ¨åˆ†ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">// don&#x27;t do that</span><br>restClient.<span class="hljs-built_in">makeRequest</span>()<br>log.<span class="hljs-built_in">info</span>(<span class="hljs-string">&quot;Made request to &#123;&#125; on REST API.&quot;</span>, url)<br> <br><span class="hljs-comment">// do that</span><br>restClient.<span class="hljs-built_in">makeRequest</span>()<br>log.<span class="hljs-built_in">info</span>(<span class="hljs-string">&quot;Made request to REST API. [url=&#123;&#125;]&quot;</span>, url)<br></code></pre></td></tr></table></figure><p>ç¬¬ä¸€ç§ log æ¶ˆæ¯æœ‰ä¸€äº›ç¼ºç‚¹ã€‚å®ƒæ˜¯éš¾ä»¥è§£æçš„ï¼Œæ¯”å¦‚ä»–å¯¹äº Grok pattern</p><p>æ¥è¯´ã€‚æ‰€ä»¥åœ¨æˆ‘ä»¬çš„æ—¥å¿—å·¥å…·ä¸­ï¼Œè‡ªåŠ¨æŠ½å– IDs æˆ–è€…å…¶ä»–å‚æ•°å°±ä¼šå˜å¾—æ›´å›°éš¾ã€‚å¹¶ä¸”å®ƒä¹Ÿæ˜¯éš¾ä»¥é˜…è¯»çš„ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œä¸€ä¸ªéå¸¸é•¿çš„ URL åœ¨æœ«ç«¯å¸¦æœ‰ä¸€ç³»åˆ—å‚æ•°ã€‚è¯¥æ¡ log æ¶ˆæ¯çš„ä¸€åŠå°±è¶…è¿‡äº†ä½ çš„å±å¹•ã€‚åŒæ—¶ï¼Œè¿™ä¸ª log ä¹Ÿæ˜¯éš¾ä»¥æ‰©å±•çš„ã€‚å¦‚æœä½ æƒ³æ·»åŠ å¦ä¸€ä¸ªå‚æ•°ï¼ˆæ¯”å¦‚ä½¿ç”¨çš„ HTTP æ–¹æ³•ï¼‰ä½ å°±å¿…é¡»é‡å†™æ•´ä¸ªå¥å­ã€‚</p><p>ç¬¬äºŒä¸ªç‰ˆæœ¬å°±æ²¡æœ‰ä»¥ä¸Šçš„ç¼ºç‚¹ã€‚å®ƒæ˜¯éå¸¸å®¹æ˜“è§£æçš„ï¼Œå› ä¸ºå®ƒæœ‰æ¸…æ™°çš„ç»“æ„ã€‚ä½ åœ¨å¥å­çš„å‰éƒ¨åˆ†å°±èƒ½çœ‹åˆ°æ•´ä¸ªå¥å­çš„å†…å®¹ã€‚å¹¶ä¸”ä¹Ÿååˆ†å®¹æ˜“æ‰©å±•ï¼Œåªéœ€è¦åœ¨åˆ—è¡¨é‡Œæ·»åŠ å¦ä¸€ä¸ªå‚æ•°ã€‚</p><h1 id="distinguish-between-warning-and-error"><a class="markdownIt-Anchor" href="#distinguish-between-warning-and-error"></a> Distinguish between WARNING and ERROR</h1><p>æ˜¾ç„¶ï¼Œæœ‰å¤šç§çº§åˆ«çš„ log æ˜¯æœ‰å®ƒå­˜åœ¨çš„åŸå› çš„ï¼Œä½ åº”è¯¥é€‚å½“åœ°ä½¿ç”¨å®ƒä»¬ã€‚åœ¨ <strong>WARNING</strong> å’Œ <strong>ERROR</strong> ä¹‹é—´å­˜åœ¨æ˜æ˜¾çš„åŒºåˆ«ã€‚</p><p>å¦‚æœä½ åšä¸€äº›æ“ä½œå¹¶ä¸”åˆ‡å®ç”Ÿæ•ˆäº†ï¼Œä½†æ˜¯ä¾ç„¶å­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œè¿™å°±æ˜¯ WARNINGã€‚å½“å¦‚æœä½ åšäº†ä¸€äº›æ“ä½œï¼Œå®ƒå¹¶æ²¡æœ‰ç”Ÿæ•ˆï¼Œé‚£å°±æ˜¯ä¸€ä¸ª ERRORã€‚</p><p>å†æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-keyword">try</span> &#123;<br>    restClient.<span class="hljs-built_in">makeRequest</span>()<br>    log.<span class="hljs-built_in">info</span>(<span class="hljs-string">&quot;Made request to REST API. [url=&#123;&#125;]&quot;</span>, url)<br>&#125; <span class="hljs-built_in"><span class="hljs-keyword">catch</span></span>(e: UnauthorizedException) &#123;<br>    log.<span class="hljs-built_in">warn</span>(<span class="hljs-string">&quot;Request to REST API was rejected because user is unauthorized. [url=&#123;&#125;, result=&#123;&#125;]&quot;</span>, url, result)<br>&#125; <span class="hljs-built_in"><span class="hljs-keyword">catch</span></span>(e: Exception) &#123;<br>    log.<span class="hljs-built_in">error</span>(<span class="hljs-string">&quot;Request to REST API failed. [url=&#123;&#125;, exception=&#123;&#125;]&quot;</span>, url, exception)<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™ä¸ª REST è°ƒç”¨å¯èƒ½æœ‰ä¸‰ç§è¾“å‡ºæƒ…å†µï¼š</p><ul><li>å®ƒå¯ä»¥æ­£å¸¸å·¥ä½œã€‚é‚£å°±ä¼šæœ‰ä¸€ä¸ª INFO è¾“å‡ºã€‚</li><li>å½“å®ƒå¤±è´¥äº†ï¼Œé‡åˆ°äº†ä¸€ä¸ªé¢„æœŸå¤–çš„å¼‚å¸¸ï¼Œé‚£å°±æ˜¯ä¸€ä¸ª ERRORã€‚</li><li>å½“å®ƒå¯¼è‡´äº†ä¸€äº›é¢„æœŸå†…çš„å¼‚å¸¸ï¼Œé‚£å°±æ˜¯ WARNINGã€‚</li></ul><p>æ‰€ä»¥åœ¨ WARNING çš„ä¾‹å­ä¸­ï¼Œä½ åšäº†ä¸€äº›äº‹æƒ…ï¼Œä½†ä½ æ²¡æœ‰å®Œç¾åœ°åšå¥½ã€‚è€Œåœ¨ ERROR ä¸­ï¼Œä½ å¹¶æ²¡æœ‰åšäº‹æƒ…ã€‚</p><p>å¦å¤–æ³¨æ„ï¼Œä¸€ä¸ª WARNINGï¼ˆå½“ç„¶ ERROR ä¹Ÿæ˜¯ï¼‰æ˜¯ä¸€ä¸ªè°ƒç”¨åŠ¨ä½œã€‚å¦‚æœæ²¡æœ‰äººéœ€è¦å¯¹æ­¤åšå‡ºååº”æˆ–è€…è¦åšäº›ä»€ä¹ˆï¼Œé‚£ä¹ˆä½ ä¹Ÿå°±ä¸å¿…å» log è¾“å‡º WARNINGã€‚</p><h1 id="info-is-for-business-debug-for-technology"><a class="markdownIt-Anchor" href="#info-is-for-business-debug-for-technology"></a> INFO is for business, DEBUG for technology</h1><p>INFO æ—¥å¿—åº”è¯¥çœ‹èµ·æ¥åƒä¸€æœ¬ä¹¦ï¼Œå®ƒå‘Šè¯‰ä½ å‘ç”Ÿäº†ä»€ä¹ˆï¼Œè€Œä¸æ˜¯å¦‚ä½•å‘ç”Ÿçš„ã€‚è¿™æ„å‘³ç€ INFO æ›´é€‚åˆäºä¸šåŠ¡é€»è¾‘æ¶ˆæ¯ï¼Œç›¸æ¯”äºæŠ€æœ¯ç»†èŠ‚æ¥è¯´ã€‚æŠ€æœ¯ç›¸å…³çš„æ¶ˆæ¯åº”è¯¥ä½¿ç”¨ DEBUGã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">INFO  | User registered <span class="hljs-keyword">for</span> newsletter. [user=<span class="hljs-string">&quot;Thomas&quot;</span>, email=<span class="hljs-string">&quot;thomas@tuhrig.de&quot;</span>]<br>INFO  | Newsletter send to user. [user=<span class="hljs-string">&quot;Thomas&quot;</span>]<br>INFO  | User unsubscribed from newsletter. [user=<span class="hljs-string">&quot;Thomas&quot;</span>, email=<span class="hljs-string">&quot;thomas@tuhrig.de&quot;</span>]<br></code></pre></td></tr></table></figure><p>ä¸Šé¢ INFO ç±»å‹çš„æ—¥å¿—ï¼Œä»æˆ‘ä»¬ä¸šåŠ¡é€»è¾‘çš„è§†è§’å‘Šè¯‰ä½ å‘ç”Ÿäº†ä»€ä¹ˆã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">DEBUG | Saved user to newsletter list. [user=<span class="hljs-string">&quot;Thomas&quot;</span>, email=<span class="hljs-string">&quot;thomas@tuhrig.de&quot;</span>]<br>DEBUG | Send welcome mail. [user=<span class="hljs-string">&quot;Thomas&quot;</span>, email=<span class="hljs-string">&quot;thomas@tuhrig.de&quot;</span>]<br>INFO  | User registered <span class="hljs-keyword">for</span> newsletter. [user=<span class="hljs-string">&quot;Thomas&quot;</span>, email=<span class="hljs-string">&quot;thomas@tuhrig.de&quot;</span>]<br>DEBUG | Started cron job to send newsletter of the day. [subscribers=24332]<br>INFO  | Newsletter send to user. [user=<span class="hljs-string">&quot;Thomas&quot;</span>]<br>INFO  | User unsubscribed from newsletter. [user=<span class="hljs-string">&quot;Thomas&quot;</span>, email=<span class="hljs-string">&quot;thomas@tuhrig.de&quot;</span>]<br></code></pre></td></tr></table></figure><p>æ¯ä¸ªä¸šåŠ¡ç”¨ä¾‹éƒ½ä¼šå¯¼è‡´ä¸€æ¡ INFO æ—¥å¿—è¾“å‡ºã€‚æ­¤å¤–ï¼Œä¼šæœ‰ DEBUG æ—¥å¿—æ¥ç»™å‡ºæ›´å¤šç»†èŠ‚ä¿¡æ¯ï¼Œæ¥æè¿°å¤„ç†è¿‡ç¨‹ã€‚</p><h1 id="much-more"><a class="markdownIt-Anchor" href="#much-more"></a> Much more</h1><p>å½“ç„¶ï¼Œå¯¹äºå¥½çš„æ—¥å¿—æ¥è¯´è¿˜æœ‰è®¸å¤šå€¼å¾—åšçš„ã€‚ä½ è¿˜éœ€è¦è€ƒè™‘ tracing, log aggregation and metrics ã€‚ä½†å½“æåŠå¦‚ä½•ä¹¦å†™æ—¶ï¼Œæˆ‘éå¸¸æ¨èä¸Šé¢çš„è§„åˆ™ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºçŸ¥è¯†</category>
      
      <category>ç¼–ç¨‹æŠ€å·§</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ—¥å¿—</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä½è¿ç®—çš„â€œå¥‡æ·«æŠ€å·§â€</title>
    <link href="/2021/12/18/2021-12/2021-12-18%20%E4%BB%8B%E7%BB%8D%E4%BD%8D%E8%BF%90%E7%AE%97/"/>
    <url>/2021/12/18/2021-12/2021-12-18%20%E4%BB%8B%E7%BB%8D%E4%BD%8D%E8%BF%90%E7%AE%97/</url>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a class="markdownIt-Anchor" href="#å‰è¨€"></a> å‰è¨€</h1><blockquote><p>åŸæ–‡æ¥æºï¼š<a href="https://catonmat.net/low-level-bit-hacks">https://catonmat.net/low-level-bit-hacks</a></p></blockquote><p>ä»‹ç»ä¸€äº›ä½è¿ç®—çš„æŠ€å·§ï¼Œæ¯”å¦‚å¯¹åº”è®¡ç®—ä¸€ä¸ªäºŒè¿›åˆ¶æ•´æ•°ä¸­ 1 bitçš„ä¸ªæ•°ï¼Œä¸æ˜¯é€šè¿‡å¾ªç¯éå†æ¯ä¸€bit æ˜¯å¦ä¸º1ï¼Œè€Œæ˜¯å¯ä»¥é€‰æ‹©ä¸€äº› tricky çš„ä½è¿ç®—æ¥å®Œæˆã€‚</p><p>å…ˆæ¥ä»‹ç»ä¸€ä¸‹æœ¬æ–‡ä¸­æ‰€ä½¿ç”¨çš„ä¸€äº›ä½è¿ç®—æ“ä½œç¬¦ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell">&amp;    -  bitwise and  ä½ä¸<br>|    -  bitwise or     ä½æˆ–<br>^    -  bitwise xor    å¼‚æˆ–<br>~    -  bitwise not    å–å<br>&lt;&lt;   -  bitwise shift left    å·¦ç§»<br><span class="hljs-meta">&gt;</span><span class="bash">&gt;   -  bitwise <span class="hljs-built_in">shift</span> right  å³ç§»</span><br></code></pre></td></tr></table></figure><p>åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œè¡¨ç¤ºçš„æ•°å­—å‡ä¸º 8 bit æœ‰ç¬¦å·æ•´æ•°ï¼ˆä½†æ˜¯ä¸Šè¿°è¿™äº›æ“ä½œæ˜¯å¯ä»¥åœ¨ä»»æ„é•¿åº¦çš„æœ‰ç¬¦å·æ•´æ•°ä¸Šæ‰§è¡Œçš„ï¼‰ï¼Œå¹¶ç”¨ â€˜xâ€™ æ¥è¡¨ç¤ºï¼Œè€Œä½è¿ç®—è®¡ç®—åçš„ç»“æœç”¨ â€˜yâ€™ æ¥è¡¨ç¤ºã€‚ å…¶ä¸­ â€˜xâ€™ çš„æ¯ä¸€bitï¼Œä½¿ç”¨ b<sub>7</sub>, b<sub>6</sub>, b<sub>5</sub>, b<sub>4</sub>, b<sub>3</sub>, b<sub>2</sub>, b<sub>1</sub>, b<sub>0</sub> æ¥è¡¨ç¤ºï¼Œb<sub>7</sub> æ˜¯æƒé‡æœ€é«˜ä½ï¼ˆåœ¨ç¬¦å·æ•°é‡Œå°±æ˜¯ç¬¦å·ä½ï¼‰ï¼Œb<sub>0</sub> æ˜¯æƒé‡æœ€å°çš„ä½ã€‚</p><p>æ¥ä¸‹æ¥ä¼šå…ˆåŸºæœ¬çš„bit hacks ä»‹ç»ï¼Œç„¶åé€æ¸æ·±å…¥åˆ°æ›´é«˜æ•ˆçš„æ–¹æ³•ã€‚</p><h1 id="1-æ£€éªŒä¸€ä¸ªæ•´æ•°çš„å¥‡å¶æ€§"><a class="markdownIt-Anchor" href="#1-æ£€éªŒä¸€ä¸ªæ•´æ•°çš„å¥‡å¶æ€§"></a> 1. æ£€éªŒä¸€ä¸ªæ•´æ•°çš„å¥‡å¶æ€§</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs C#">if ((x &amp; 1) == 0) &#123;<br>  x is even<br>&#125;<br>else &#123;<br>  x is odd<br>&#125;<br></code></pre></td></tr></table></figure><p>ç›¸ä¿¡å¾ˆå¤šäººéƒ½å·²ç»çœ‹åˆ°è¿‡ä¸Šè¿°çš„æŠ€å·§ï¼Œå…¶æœ€åŸºæœ¬çš„æ€æƒ³å°±æ˜¯å¦‚æœä¸€ä¸ªæ•´æ•°æ˜¯å¥‡æ•°ï¼Œé‚£ä¹ˆå®ƒçš„æœ€ä½ä½ b<sub>0</sub> å°±ä¸º1ã€‚é€šè¿‡ å°† â€˜xâ€™ å’Œ 1 è¿›è¡Œ <strong>AND-ing</strong> æ“ä½œï¼Œå¿½ç•¥å…¶ä»–bitsï¼Œåªå…³æ³¨ b<sub>0</sub> å³å¯ï¼Œå¦‚æœç»“æœä¸º0 è¡¨ç¤º â€˜xâ€™ æ˜¯å¶æ•°ï¼Œç»“æœä¸º1 è¡¨ç¤º â€˜xâ€™ æ˜¯å¥‡æ•°ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚æ•°å­—43ï¼ŒäºŒè¿›åˆ¶è¡¨ç¤ºä¸º00101011ï¼Œé€šè¿‡ä¸ 1 è¿›è¡Œ <strong>AND-ing</strong> æ“ä½œï¼Œæ¸…é™¤æ›´é«˜ä½çš„æ•°å€¼è€Œåªä¿ç•™ b<sub>0</sub> ï¼Œæœ€ç»ˆå‰©ä½™ç»“æœä¸º 1 å°±è¡¨ç¤ºæ•´æ•°ä¸ºå¥‡æ•°ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs C#">    00101011<br>&amp;   00000001   (note: 1 is the same as 00000001)<br>    --------<br>    00000001<br></code></pre></td></tr></table></figure><p>å†ä¸¾ä¸€ä¸ªå¶æ•°çš„ä¾‹å­98ï¼Œå…¶äºŒè¿›åˆ¶è¡¨ç¤ºä¸º1100010ã€‚åœ¨ <strong>AND-ing</strong> æ“ä½œåï¼Œæœ€ç»ˆç»“æœä¸º0ï¼Œå› æ­¤98æ˜¯ä¸€ä¸ªå¶æ•°ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs C#">    01100010<br>&amp;   00000001<br>    --------<br>    00000000<br></code></pre></td></tr></table></figure><h1 id="2-æ£€éªŒç¬¬nä½-bit-æ˜¯å¦ç½®1"><a class="markdownIt-Anchor" href="#2-æ£€éªŒç¬¬nä½-bit-æ˜¯å¦ç½®1"></a> 2. æ£€éªŒç¬¬nä½ bit æ˜¯å¦ç½®1</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs C#">if (x &amp; (1&lt;&lt;n)) &#123;<br>  n-th bit is set<br>&#125;<br>else &#123;<br>  n-th bit is not set<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨å…ˆå‰çš„ç¬¬ä¸€ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†é€šè¿‡ <code>ï¼ˆx &amp; 1ï¼‰</code>æ¥æ£€éªŒç¬¬ä¸€ä½ b0 æ˜¯å¦ç½®1ï¼Œè¿™ä¸ªæŠ€å·§å¯ä»¥é€šè¿‡æ”¹å–„å®ç°æ£€éªŒç¬¬nä½æ˜¯å¦ç½®1ã€‚ä¸»è¦åšæ³•å°±æ˜¯å°† 1 å·¦ç§»nä¸ªä½ç½®ï¼Œç„¶ååšç›¸åŒçš„<strong>AND</strong> æ“ä½œï¼Œå°†é™¤äº†ç¬¬nä½çš„å…¶ä»–bitsæ¸…0ã€‚</p><p>ä¸‹é¢æ¼”ç¤ºäº†å½“ä½ å°† 1 å·¦ç§»ä¸åŒä½æ•°çš„ç»“æœï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs C#">1         00000001    (same as 1&lt;&lt;0)<br>1&lt;&lt;1      00000010<br>1&lt;&lt;2      00000100<br>1&lt;&lt;3      00001000<br>1&lt;&lt;4      00010000<br>1&lt;&lt;5      00100000<br>1&lt;&lt;6      01000000<br>1&lt;&lt;7      10000000<br></code></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œæˆ‘ä»¬å°† â€˜xâ€™ ä¸  å·¦ç§»nä½çš„ æ•°å­—1 è¿›è¡Œ AND æ“ä½œï¼Œå°±å¯ä»¥ä¿ç•™ 'xâ€™ä¸Šç¬¬nä½bit ï¼ˆå¯¹äº b0 æ¥è¯´æ˜¯ç¬¬0ä½ï¼‰è€Œå°†å…¶ä»–bit æ¸…é›¶ã€‚æ‰€ä»¥å¦‚æœæœ€ç»ˆç»“æœä¸º0ï¼Œè¡¨æ˜å¯¹åº”bit æ˜¯0ï¼Œæœ€ç»ˆç»“æœä¸ä¸º0ï¼Œè¡¨æ˜å¯¹åº”bitç½®ä¸º1ã€‚</p><p>æ¥ä¸‹æ¥ç»™å‡ºä¸€äº›ä¾‹å­ï¼Œæ¯”å¦‚è¯´ 122 çš„ç¬¬3rd bit æ˜¯å¦ç½®ä¸º1ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡<code>122 &amp; (1&lt;&lt;3)</code>æ¥å®ç°ï¼Œå…·ä½“æ¥è¯´å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs C#">    01111010<br>&amp;   00001000<br>    --------<br>    00001000<br></code></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°æœ€ç»ˆç»“æœä¸ä¸º0ï¼Œå› æ­¤122 å¯¹åº”çš„ 3rd bit æ˜¯ç½®ä¸º1çš„ã€‚</p><p>æ³¨æ„ï¼šåœ¨æœ¬æ–‡ä¸­ï¼Œbit çš„ä½æ•°ä¸‹æ ‡ä»0å¼€å§‹ï¼Œä¹Ÿå°±æ˜¯ç¬¬0ä½bitï¼Œç¬¬1ä½bit ï¼Œâ€¦ï¼Œ ç¬¬7ä½ bitã€‚</p><h1 id="3-å°†ç¬¬nä½-bit-ç½®-1"><a class="markdownIt-Anchor" href="#3-å°†ç¬¬nä½-bit-ç½®-1"></a> 3. å°†ç¬¬nä½ bit ç½® 1</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs C#">y = x | (1 &lt;&lt; n)<br></code></pre></td></tr></table></figure><p>è¿™ä¸ª bit hack ç»“åˆäº†å·¦ç§» (1&lt;&lt;n) å’Œ <strong>OR</strong> è¿ç®—çš„æŠ€å·§ï¼Œ<code>y = x | (1&lt;&lt;n)</code>é€šè¿‡å’Œä¸€ä¸ªç¬¬nä½ ç½®1 çš„æ•°å€¼è¿›è¡Œ <strong>OR</strong> è¿ç®—å°±å¯ä»¥ä½¿å¾— â€˜xâ€™ çš„ç¬¬nä½ ç½®1ã€‚å› ä¸ºå’Œ 0 è¿›è¡Œ OR-ing æ•°å€¼ä¿æŒä¸å˜ï¼Œå’Œ 1 è¿›è¡Œ OR-ing å¯¹åº”bitå˜ä¸º1ï¼ˆå¦‚æœä¸æ˜¯1çš„è¯ï¼‰ã€‚</p><p>åŒæ ·ç»™å‡ºä¸€ä¸ªä¾‹å­ï¼Œå¯¹äºæ•°120ï¼Œæˆ‘ä»¬å¸Œæœ›å°†å…¶ 2nd bit ç½®ä¸º1ï¼Œå¦‚ä¸‹æ‰€ç¤º</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs C#">    01111000    (120 in binary)<br>|   00000100    (1&lt;&lt;2)<br>    --------<br>    01111100<br></code></pre></td></tr></table></figure><h1 id="4-å°†ç¬¬nä½-bit-ç½®-0"><a class="markdownIt-Anchor" href="#4-å°†ç¬¬nä½-bit-ç½®-0"></a> 4. å°†ç¬¬nä½ bit ç½® 0</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs C#">y = x &amp; ~(1&lt;&lt;n)<br></code></pre></td></tr></table></figure><p>è¿™ä¸ªbit hack ä¸»è¦é€šè¿‡<code>y = x &amp; ~(1&lt;&lt;n)</code>å®ç°ï¼Œ<code>~(1&lt;&lt;n)</code>èµ·åˆ°çš„ä½œç”¨æ˜¯å°†é™¤äº†ç¬¬nä½ç½®0ï¼Œå…¶ä½™ä½ç½®1ï¼Œæ¯”å¦‚ä¸‹é¢è¿™æ ·ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs C#">~1        11111110  (same as ~(1&lt;&lt;0))<br>~(1&lt;&lt;1)   11111101<br>~(1&lt;&lt;2)   11111011<br>~(1&lt;&lt;3)   11110111<br>~(1&lt;&lt;4)   11101111<br>~(1&lt;&lt;5)   11011111<br>~(1&lt;&lt;6)   10111111<br>~(1&lt;&lt;7)   01111111<br></code></pre></td></tr></table></figure><p>å†é€šè¿‡ AND-ing æ“ä½œï¼Œå°±å¯ä»¥ä½¿å¾—å°† â€˜xâ€™ çš„ç¬¬nä½ç½®0ï¼Œå› ä¸º AND-ing ä¸­æœ‰ä¸ª bit ä¸º0ï¼Œç»“æœ bit å°±ä¸º0ã€‚ä¸‹é¢ç»™å‡ºæ•°127ï¼Œå°†ç¬¬4ä½ bit ç½®0çš„ä¾‹å­ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs C#">    01111111    (127 in binary)<br>&amp;   11101111    (~(1&lt;&lt;4))<br>    --------<br>    01101111<br></code></pre></td></tr></table></figure><h1 id="5-åè½¬ç¬¬nä½-bit"><a class="markdownIt-Anchor" href="#5-åè½¬ç¬¬nä½-bit"></a> 5. åè½¬ç¬¬nä½ bit</h1><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">y</span> = x ^ (<span class="hljs-number">1</span>&lt;&lt;n)<br></code></pre></td></tr></table></figure><p>è¿™ä¸ªbit hack ä¸»è¦å®ç°æ–¹å¼ä¸º<code>y = x ^ (1&lt;&lt;n)</code>ï¼Œç»“åˆäº†å·¦ç§»å’ŒXOR è¿ç®—ã€‚<code>(1&lt;&lt;n)</code>å°†å¯¹åº”çš„ç¬¬nä½ç½®1ï¼Œè€Œé€šè¿‡ XOR è¿ç®—ï¼Œå¦‚æœ â€˜xâ€™ ç¬¬nä½ä¸º0ï¼Œå°±ä¼šå˜ä¸º1ï¼Œå¦‚æœç¬¬nä½ä¸º1ï¼Œå°±ä¼šå˜ä¸º0ï¼Œä»è€Œå®ç°åè½¬çš„æ•ˆæœã€‚</p><p>ä¸‹é¢ç»™å‡ºä¸€ä¸ªä¾‹å­ï¼Œå°† 01110101 çš„ç¬¬5ä½è¿›è¡Œåè½¬ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs C#">    01110101<br>^   00100000<br>    --------<br>    01010101<br></code></pre></td></tr></table></figure><h1 id="6-å°†æœ€å³è¾¹çš„1-bitç½®ä¸º0"><a class="markdownIt-Anchor" href="#6-å°†æœ€å³è¾¹çš„1-bitç½®ä¸º0"></a> 6. å°†æœ€å³è¾¹çš„1-bitç½®ä¸º0</h1><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">y</span> = x &amp; (x-<span class="hljs-number">1</span>)<br></code></pre></td></tr></table></figure><p>è¯¥æ–¹å¼ä¸»è¦é€šè¿‡<code>y = x &amp; (x-1)</code>æ¥å®ç°ã€‚æ¯”å¦‚å¯¹äºä¸€ä¸ªæ•´æ•° 001010<strong>1</strong>0ï¼ˆæœ€å³è¾¹çš„1ç”¨é»‘ä½“æ ‡å‡ºï¼‰ï¼Œå½“å°†æœ€åè¾¹çš„1-bitç½®ä¸º0åï¼Œå°±å˜æˆäº†001010<strong>0</strong>0ï¼ˆå¯¹åº”ä½å˜æˆäº†0ï¼‰ã€‚</p><p>è¿™é‡Œç»™å‡ºæ›´å¤šçš„ä¾‹å­ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs C#">    01011000    (x)<br>&amp;   01010111    (x-1)<br>    --------<br>    01010000<br><br>    10000000    (x = -128)<br>&amp;   01111111    (x-1 = 127 (with overflow))<br>    --------<br>    00000000<br><br>    11111111    (x = all bits 1)<br>&amp;   11111110    (x-1)<br>    --------<br>    11111110<br><br>    00000000    (x = no rightmost 1-bits)<br>&amp;   11111111    (x-1)<br>    --------<br>    00000000<br></code></pre></td></tr></table></figure><p>è¿™æ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Œä¸»è¦æœ‰ä¸¤ä¸ªå¯èƒ½çš„åœºæ™¯ï¼š</p><ol><li>è¯¥æ•´æ•°å€¼å­˜åœ¨ä¸€ä¸ªæœ€å³è¾¹çš„1-bitã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå½“è¯¥æ•°å€¼å‡å»1åï¼Œä¼šå°†è¯¥äºŒè¿›åˆ¶æ•°çš„æœ€å³è¾¹çš„1-bitç½®ä¸º0ï¼ŒåŒæ—¶å…¶å³è¾¹æ‰€æœ‰ä½ä½çš„0å˜æˆ1ï¼ˆå°±æ˜¯ä¸€ä¸ªå‡æ³•å¾—åˆ°çš„ç»“æœï¼‰ã€‚è¿™ä¸ªå‡æ³•æ“ä½œå¾—åˆ°çš„ç»“æœï¼Œç›¸å½“äºå·²ç»æŠŠæœ€å³è¾¹çš„1-bitç½®0ï¼Œç„¶åå†é€šè¿‡å’ŒåŸå§‹å€¼è¿›è¡ŒAND-ing æ“ä½œï¼Œå°±å¯ä»¥æŠŠä½ä½çš„1éƒ½ç½®ä¸º0ã€‚</li><li>å½“è¯¥äºŒè¿›åˆ¶æ•°ä¸å­˜åœ¨ä¸€ä¸ªæœ€å³è¾¹çš„ 1-bitï¼ˆå…¨ä¸º0ï¼‰ã€‚é‚£ä¹ˆåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå‡1åä¼šä¸‹æº¢ï¼Œå³æ‰€æœ‰ bit ç½®ä¸º 1 ï¼Œé‚£ä¹ˆå†å’ŒåŸå§‹å€¼ï¼ˆå…¨0ï¼‰è¿›è¡ŒAND-ingæ“ä½œå¾—åˆ°çš„ä¹Ÿè¿˜æ˜¯0ã€‚</li></ol><h1 id="7-åªä¿ç•™æœ€å³è¾¹çš„-1-bit"><a class="markdownIt-Anchor" href="#7-åªä¿ç•™æœ€å³è¾¹çš„-1-bit"></a> 7. åªä¿ç•™æœ€å³è¾¹çš„ 1-bit</h1><p class='note note-info'>y = x & (-x)</p><p>è¯¥æ–¹æ³•é€šè¿‡<code>y = x &amp; (-x)</code>å®ç°ï¼Œå°†åªä¿ç•™ x çš„æœ€å³è¾¹çš„ 1-bit ï¼ŒæŠŠå…¶ä»–ä½éƒ½ç½®ä¸º0ã€‚æ¯”å¦‚å¯¹äº 01010<strong>1</strong>00 (æœ€å³ä¾§ 1 ç”¨é»‘ä½“æ ‡å‡º)ï¼Œå¾—åˆ°çš„ç»“æœä¸º 00000<strong>1</strong>00ã€‚</p><p>è¿™é‡Œå†ç»™å‡ºæ›´å¤šçš„ä¾‹å­ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs C#">    01110000  (x)<br>&amp;   10010000  (-x)<br>    --------<br>    00010000<br><br>    00000001  (x)<br>&amp;   11111111  (-x)<br>    --------<br>    00000001<br><br>    10000000  (x = -128)<br>&amp;   10000000  (-x = -128)<br>    --------<br>    10000000<br><br>    11111111  (x = all bits one)<br>&amp;   00000001  (-x)<br>    --------<br>    00000001<br><br>    00000000  (x = all bits 0, no rightmost 1-bit)<br>&amp;   00000000  (-x)<br>    --------<br>    00000000<br></code></pre></td></tr></table></figure><p><strong>æ¥ä¸‹æ¥æ¢è®¨å…¶å®ç°åŸç†ã€‚ä¸»è¦å°±æ˜¯ä¾èµ–äºåœ¨è®¡ç®—æœºä¸­ï¼Œ -x ï¼ˆå¯¹åº”çš„è´Ÿæ•°ï¼‰è·Ÿ ~x+1 ï¼ˆæŒ‰ä½å–åååŠ 1ï¼‰ æ˜¯ä¸€æ ·çš„ã€‚</strong></p><p>ä¸å¦¨è®¾ x æœ€å³è¾¹çš„ 1-bit ä¸ºb<sub>i</sub>ï¼Œä»¥ä¸‹æ ‡ i ä¸ºç•Œï¼Œå°† b<sub>i</sub> å·¦ä¾§çš„ bits ä½è®¾ä¸º b<sub>i+1</sub>, â€¦, b<sub>n</sub>ï¼Œå°† b<sub>i</sub> å³ä¾§çš„æ‰€æœ‰ bits ä½è®¾ä¸º b<sub>i-1</sub>, b<sub>i-2</sub> , â€¦ , b<sub>0</sub> ï¼ˆä½äºå³ä¾§çš„å…¨ä¸º 0 ï¼Œå› ä¸º b<sub>i</sub> æ˜¯æœ€å³ä¾§çš„ 1 ï¼‰ã€‚</p><p>ç°åœ¨å½“æˆ‘è®¡ç®— -x ï¼Œé¦–å…ˆåšå–åæ“ä½œ ~x ï¼Œä¹Ÿå°±æ˜¯å°† b<sub>i</sub> ç½®ä¸º0ï¼Œ b<sub>i-1</sub>â€¦b<sub>0</sub> éƒ½ç½®ä¸º 1ï¼Œå°† b<sub>i+1</sub> â€¦ b<sub>n</sub> ç­‰ä½è¿›è¡Œåè½¬ã€‚ç„¶ååšåŠ  1 æ“ä½œã€‚å› ä¸º b<sub>i-1</sub>â€¦b<sub>0</sub> éƒ½ä¸º1ï¼Œæ‰€ä»¥åŠ  1 åä¼šæƒ³ b<sub>i</sub> è¿›ä½ï¼ˆå› ä¸º b<sub>i</sub> æ˜¯ç¬¬ä¸€ä¸ª 0 bit ï¼‰ã€‚</p><p>æ­¤æ—¶æˆ‘ä»¬ä¸éš¾å‘ç°ï¼Œå¯¹äº -x ï¼Œb<sub>i+1</sub> â€¦ b<sub>n</sub> ç­‰ä½åè½¬äº†ï¼Œ b<sub>i</sub> ä¾ç„¶ä¿æŒä¸å˜ï¼Œb<sub>i-1</sub>â€¦b<sub>0</sub> ä¹Ÿä¾ç„¶å…¨ä¸º 0 ã€‚æ‰€ä»¥ç°åœ¨å°† x ä¸ -x è¿›è¡Œ AND-ing æ“ä½œï¼Œå°±å¯ä»¥ä½¿å¾— b<sub>i+1</sub> â€¦ b<sub>n</sub> ç½®ä¸º 0 ï¼Œb<sub>i</sub> ä¿æŒ 1ï¼Œ b<sub>i-1</sub>â€¦b<sub>0</sub> ä¹Ÿå…¨ä¸º 0 ã€‚åªæœ‰ä¸€ä¸ª bit ä¿ç•™äº†ä¸‹æ¥ï¼Œå°±æ˜¯æœ€å³è¾¹çš„ 1-bit ã€‚</p><h1 id="8-å°†æœ€å³è¾¹-1-bit-å³ä¾§çš„æ‰€æœ‰ä½ä½-bit-ç½®-1"><a class="markdownIt-Anchor" href="#8-å°†æœ€å³è¾¹-1-bit-å³ä¾§çš„æ‰€æœ‰ä½ä½-bit-ç½®-1"></a> <strong>8. å°†æœ€å³è¾¹ 1-bit å³ä¾§çš„æ‰€æœ‰ä½ä½ bit ç½® 1</strong></h1><p class='note note-info'>y = x | (x-1)</p><p>å…·ä½“å®ç°å°±æ˜¯ <code>y = x | (x-1)</code> ã€‚è¿™ä¸ªç¿»è¯‘è¿‡æ¥æœ‰ç‚¹æ‹—å£ï¼Œç»™ä¸ªä¾‹å­å°±èƒ½ç†è§£äº†ï¼Œç»™å‡ºæ•° 010<strong>1</strong>0000 ï¼Œæ‰§è¡Œåå°±å¾—åˆ° 010<strong>11111</strong>ï¼ŒåŸæ¥æœ€å³è¾¹ 1-bit å³è¾¹çš„ä½ä½éƒ½ç½®ä¸º1 ã€‚æ¥ä¸‹æ¥çœ‹æ›´å¤šçš„ä¸€äº›ä¾‹å­ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs C#">    10111100  (x)<br>|   10111011  (x-1)<br>    --------<br>    10111111<br><br>    01110111  (x)<br>|   01110110  (x-1)<br>    --------<br>    01110111<br><br>    00000001  (x)<br>|   00000000  (x-1)<br>    --------<br>    00000001<br><br>    10000000  (x = -128)<br>|   01111111  (x-1 = 127)<br>    --------<br>    11111111<br><br>    11111111  (x = -1)<br>|   11111110  (x-1 = -2)<br>    --------<br>    11111111<br><br>    00000000  (x)<br>|   11111111  (x-1)<br>    --------<br>    11111111<br></code></pre></td></tr></table></figure><p>è¿™ä¸ªæ–¹æ³•çš„å®ç°åŸç†è·Ÿæ–¹æ³•6å¾ˆåƒï¼Œæ‰€ä»¥è¿™é‡Œå°±ä¸å†è¯æ˜äº†ã€‚</p><h1 id="9-ä¿ç•™æœ€å³è¾¹çš„-0-bit"><a class="markdownIt-Anchor" href="#9-ä¿ç•™æœ€å³è¾¹çš„-0-bit"></a> <strong>9. ä¿ç•™æœ€å³è¾¹çš„ 0-bit</strong></h1><p class='note note-info'>y = ~x & (x+1)</p><p>è¯¥æ–¹æ³•çš„å®ç°ä¸º<code>y = ~x &amp; (x+1)</code> ã€‚è¯¥æ–¹æ³•ä¸æ–¹æ³•7æ­£å¥½ç›¸åï¼Œå®ƒæ˜¯æ‰¾åˆ°æœ€å³ä¾§çš„ 0-bitï¼Œå°†å…¶ä»–ä½éƒ½ç½®ä¸º0ï¼Œå°†è¯¥ bit ç½®ä¸º 1 ã€‚è·ç¦»æ¥è¯´ï¼Œç»™å®šæ•° 10101<strong>0</strong>11ï¼Œç»è¿‡å¤„ç†åçš„ç»“æœä¸ºï¼Œ00000<strong>1</strong>00ã€‚å†ç»™å‡ºæ›´å¤šçš„ä¾‹å­ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs C#">    01110111  (x)<br>    --------<br>    10001000  (~x)<br>&amp;   01111000  (x+1)<br>    --------<br>    00001000<br><br>    00000001  (x)<br>    --------<br>    11111110  (~x)<br>&amp;   00000010  (x+1)<br>    --------<br>    00000010<br><br>    10000000  (x = -128)<br>    --------<br>    01111111  (~x)<br>&amp;   10000001  (x+1)<br>    --------<br>    00000001<br><br>    11111111  (x = no rightmost 0-bit)<br>    --------<br>    00000000  (~x)<br>&amp;   00000000  (x+1)<br>    --------<br>    00000000<br><br>    00000000  (x)<br>    --------<br>    11111111  (~x)<br>&amp;   00000001  (x+1)<br>    --------<br>    00000001<br></code></pre></td></tr></table></figure><p><strong>æ¥ä¸‹æ¥ç»™å‡ºè¯æ˜</strong>ã€‚ä¸ä¹‹å‰ç±»ä¼¼ï¼Œä¸å¦¨è®¾æœ€å³è¾¹çš„ 0-bit è®¾ç½®ä¸º b<sub>i</sub> ï¼Œå°† b<sub>i</sub> å·¦ä¾§çš„ bits ä½è®¾ä¸º b<sub>i+1</sub>, â€¦, b<sub>n</sub>ï¼Œå°† b<sub>i</sub> å³ä¾§çš„æ‰€æœ‰ bits ä½è®¾ä¸º b<sub>i-1</sub>, b<sub>i-2</sub> , â€¦ , b<sub>0</sub> ï¼ˆä½äºå³ä¾§çš„å…¨ä¸º 1 ï¼Œå› ä¸º b<sub>i</sub> æ˜¯æœ€å³ä¾§çš„ 0 ï¼‰ã€‚</p><p>é‚£ä¹ˆå¯¹äº ~x æ¥è¯´ï¼Œå°†æ‰€æœ‰ä½è¿›è¡Œåè½¬ï¼ŒåŒ…æ‹¬æœ€å³ä¾§çš„ 0-bitï¼Œb<sub>i</sub> ä¹Ÿä» 0 å˜æˆäº† 1 ã€‚</p><p>å¯¹äº x+1 æ¥è¯´ï¼Œå› ä¸º b<sub>i-1</sub>, b<sub>i-2</sub> , â€¦ , b<sub>0</sub> å…¨ä¸º1ï¼ŒåŠ  1 ä¹‹åä¼šå‘ b<sub>i</sub> è¿›ä½ï¼Œå› æ­¤ b<sub>i</sub> ä¹Ÿå˜æˆäº† 1ï¼Œb<sub>i-1</sub>, b<sub>i-2</sub> , â€¦ , b<sub>0</sub> éƒ½å˜æˆäº†0ï¼Œè€Œé«˜ä½  b<sub>i+1</sub>, â€¦, b<sub>n</sub> ä¿æŒä¸å˜ã€‚</p><p>æ­¤æ—¶å†å°† ~x ä¸ x+1 è¿›è¡Œ AND-ing æ“ä½œï¼Œå°±åªæœ‰ b<sub>i</sub> ä½ä¿ç•™ä¸‹æ¥ï¼Œå…¶ä»–ä½å‡ä¸º 0 ã€‚</p><h1 id="10-å°†æœ€å³ä¾§çš„-0-bit-ç½®ä¸º1"><a class="markdownIt-Anchor" href="#10-å°†æœ€å³ä¾§çš„-0-bit-ç½®ä¸º1"></a> <strong>10. å°†æœ€å³ä¾§çš„ 0-bit ç½®ä¸º1</strong></h1><p class='note note-info'>y = x | (x+1)</p>è¯¥æ–¹æ³•å®ç°ä¸º `y = x | (x+1)`ã€‚ä¸»è¦å°±æ˜¯å°†æœ€å³ä¾§çš„ 0-bit ç½®ä¸º1ï¼Œä¾‹å¦‚å¯¹äºæ•° 10100**0**11 ç»è¿‡è¿ç®—åï¼Œå¾—åˆ°ç»“æœ 10100**1**11ã€‚ç»™å‡ºæ›´å¤šçš„ä¾‹å­ï¼š<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs C#">    10111100  (x)<br>|   10111101  (x+1)<br>    --------<br>    10111101<br><br>    01110111  (x)<br>|   01111000  (x+1)<br>    --------<br>    01111111<br><br>    00000001  (x)<br>|   00000010  (x+1)<br>    --------<br>    00000011<br><br>    10000000  (x = -128)<br>|   10000001  (x+1)<br>    --------<br>    10000001<br><br>    11111111  (x = no rightmost 0-bit)<br>|   00000000  (x+1)<br>    --------<br>    11111111<br><br>    00000000  (x)<br>|   00000001  (x+1)<br>    --------<br>    00000001<br></code></pre></td></tr></table></figure><p>æ­£ç¡®æ€§ä¹Ÿéå¸¸å¥½ç†è§£ã€‚x+1 çš„æ“ä½œå°†åŸæ¥ x çš„æœ€å³ä¾§çš„ 0-bitï¼Œ b<sub>i</sub> ç½®ä¸º1ï¼Œb<sub>i-1</sub>, b<sub>i-2</sub> , â€¦ , b<sub>0</sub> éƒ½å˜æˆäº†0ï¼Œè€Œé«˜ä½  b<sub>i+1</sub>, â€¦, b<sub>n</sub> ä¿æŒä¸å˜ã€‚æ­¤æ—¶å†å’Œ x åš OR-ing è¿ç®—ï¼Œå°±å¯ä»¥ä½¿å¾—åŸæ¥ x çš„æœ€å³ä¾§ 0-bit  b<sub>i</sub> ç½®ä¸º 1ã€‚</p><h1 id="bonus"><a class="markdownIt-Anchor" href="#bonus"></a> Bonus</h1><p>ä¸€ä¸ªç®€å•çš„Cè¯­è¨€å‡½æ•°ï¼Œå®ç°æ‰“å°ä¸€ä¸ªæ•°å­—çš„ä½8ä½ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs C"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">int_to_bin</span><span class="hljs-params">(<span class="hljs-keyword">int</span> num)</span> </span>&#123;<br>  <span class="hljs-keyword">char</span> str[<span class="hljs-number">9</span>] = &#123;<span class="hljs-number">0</span>&#125;;<br>  <span class="hljs-keyword">int</span> i;<br>  <span class="hljs-keyword">for</span> (i=<span class="hljs-number">7</span>; i&gt;=<span class="hljs-number">0</span>; i--) &#123;<br>    str[i] = (num&amp;<span class="hljs-number">1</span>)?<span class="hljs-string">&#x27;1&#x27;</span>:<span class="hljs-string">&#x27;0&#x27;</span>;<br>    num &gt;&gt;= <span class="hljs-number">1</span>;<br>  &#125;<br>  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%s\n&quot;</span>, str);<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºçŸ¥è¯†</category>
      
      <category>ç¼–ç¨‹æŠ€å·§</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ä½è¿ç®—</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ¤­åœ†æ›²çº¿å…¬é’¥æ¢å¤ç®—æ³•ä¸SM2ç¼–ç¨‹å®ç°</title>
    <link href="/2021/12/13/2021-12/2021-12-13%20%E6%A4%AD%E5%9C%86%E6%9B%B2%E7%BA%BF%E5%85%AC%E9%92%A5%E6%81%A2%E5%A4%8D%E7%AE%97%E6%B3%95%E4%B8%8ESM2%E7%BC%96%E7%A8%8B%E5%AE%9E%E7%8E%B0/"/>
    <url>/2021/12/13/2021-12/2021-12-13%20%E6%A4%AD%E5%9C%86%E6%9B%B2%E7%BA%BF%E5%85%AC%E9%92%A5%E6%81%A2%E5%A4%8D%E7%AE%97%E6%B3%95%E4%B8%8ESM2%E7%BC%96%E7%A8%8B%E5%AE%9E%E7%8E%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="æ¤­åœ†æ›²çº¿å…¬é’¥æ¢å¤ç®—æ³•"><a class="markdownIt-Anchor" href="#æ¤­åœ†æ›²çº¿å…¬é’¥æ¢å¤ç®—æ³•"></a> æ¤­åœ†æ›²çº¿å…¬é’¥æ¢å¤ç®—æ³•</h1><p>åœ¨ä»¥å¤ªåŠä¸­ï¼Œäº¤æ˜“æ¶ˆæ¯ä¸­ä¸åŒ…å«â€œfromâ€å­—æ®µï¼ˆå³äº¤æ˜“å‘èµ·è€…çš„åœ°å€ï¼‰ï¼Œè¿™æ˜¯å› ä¸ºäº¤æ˜“å‘èµ·è€…çš„å…¬é’¥å¯ä»¥ç›´æ¥ä»ECDSAç­¾åä¸­è®¡ç®—å‡ºæ¥ã€‚è€Œä¸€æ—¦ä½ æœ‰å…¬é’¥ï¼Œå°±å¯ä»¥å¾ˆå®¹æ˜“åœ°è®¡ç®—å‡ºå¯¹åº”çš„åœ°å€ã€‚æ¢å¤ç­¾åè€…å…¬é’¥çš„è¿‡ç¨‹ç§°ä¸ºå…¬é’¥æ¢å¤ï¼Œå¯¹åº”çš„ç®—æ³•å³ä¸ºå…¬é’¥æ¢å¤ç®—æ³•ã€‚</p><p>æ¥ä¸‹æ¥æè¿°ä»¥å¤ªåŠä¸­å…¬é’¥æ¢å¤ç®—æ³•çš„è¿‡ç¨‹ã€‚</p><p>é¦–å…ˆæ ¹æ®ç»™å®š ECDSAç­¾åç®—æ³• ä¸­è®¡ç®—çš„å€¼ <strong>r</strong> å’Œ <strong>s</strong>ï¼Œæˆ‘ä»¬å¯ä»¥è®¡ç®—å¾—åˆ°ä¸¤ä¸ªå¯èƒ½çš„å…¬é’¥ã€‚æˆ‘ä»¬æ ¹æ®ç­¾åä¸­çš„ <strong>x</strong> åæ ‡ <strong>r</strong> å€¼è®¡ç®—ä¸¤ä¸ªæ¤­åœ†æ›²çº¿ç‚¹ <strong>R</strong> å’Œ <strong>Râ€™</strong>ã€‚å¯¹äº r å€¼ï¼Œè®¡ç®—å®ƒå…³äº n çš„é€†å…ƒ <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>r</mi><mrow><mo>âˆ’</mo><mn>1</mn></mrow></msup></mrow><annotation encoding="application/x-tex">r^{-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span>ï¼Œå…¶ä¸­ n æ˜¯æ¤­åœ†æ›²çº¿çš„é˜¶æ•°ã€‚æœ€åè®¡ç®— e ï¼Œå®ƒæ˜¯æ¶ˆæ¯çš„æ•£åˆ—å€¼ã€‚ç„¶åå¯ä»¥å¾—åˆ°ä¸¤ä¸ªå¯èƒ½çš„å…¬é’¥ï¼š</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>K</mi><mn>1</mn></msub><mo>=</mo><msup><mi>r</mi><mrow><mo>âˆ’</mo><mn>1</mn></mrow></msup><mo stretchy="false">(</mo><mi>s</mi><mi>R</mi><mo>âˆ’</mo><mi>e</mi><mi>G</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">K_1 = r^{-1} (sR - eG)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.1141079999999999em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.864108em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">s</span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">e</span><span class="mord mathdefault">G</span><span class="mclose">)</span></span></span></span></span></p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>K</mi><mn>2</mn></msub><mo>=</mo><msup><mi>r</mi><mrow><mo>âˆ’</mo><mn>1</mn></mrow></msup><mo stretchy="false">(</mo><mi>s</mi><msup><mi>R</mi><mo mathvariant="normal">â€²</mo></msup><mo>âˆ’</mo><mi>e</mi><mi>G</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">K_2 = r^{-1} (sR&#x27; - eG)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.1141079999999999em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.864108em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">s</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.801892em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">e</span><span class="mord mathdefault">G</span><span class="mclose">)</span></span></span></span></span></p><p>å…¶ä¸­:</p><ul><li><p>K<sub>1</sub> å’Œ K<sub>2</sub> æ˜¯ç­¾åè€…å…¬é’¥çš„ä¸¤ç§å¯èƒ½æ€§</p></li><li><p>r<sup>-1</sup>æ˜¯ç­¾åçš„ r å€¼çš„é€†å…ƒ</p></li><li><p>s æ˜¯ç­¾åçš„ s å€¼</p></li><li><p>R å’Œ Râ€™ æ˜¯ä¸´æ—¶å…¬é’¥ Q çš„ä¸¤ç§å¯èƒ½æ€§</p></li><li><p>e æ˜¯æ¶ˆæ¯æ•£åˆ—çš„æœ€ä½ä½</p></li><li><p>G æ˜¯æ¤­åœ†æ›²çº¿ç”Ÿæˆç‚¹</p></li></ul><p>ä¸ºäº†ä½¿è®¡ç®—æ›´æœ‰æ•ˆç‡ï¼Œåœ¨ä»¥å¤ªåŠäº¤æ˜“ç­¾åé‡ŒåŒ…æ‹¬ä¸€ä¸ªå‰ç¼€å€¼ vï¼Œå®ƒå‘Šè¯‰æˆ‘ä»¬ä¸¤ä¸ªå¯èƒ½çš„Rå€¼ä¸­å“ªä¸€ä¸ªæ˜¯çœŸæ­£ä¸´æ—¶çš„å…¬é’¥ã€‚å¦‚æœ v æ˜¯å¶æ•°ï¼Œé‚£ä¹ˆRæ˜¯æ­£ç¡®çš„å€¼ã€‚å¦‚æœ v æ˜¯å¥‡æ•°ï¼Œé‚£ä¹ˆé€‰æ‹©Râ€™ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬åªéœ€è¦è®¡ç®—Rçš„ä¸€ä¸ªå€¼ã€‚è¿™ä¹Ÿå°±æ˜¯ä»¥å¤ªåŠäº¤æ˜“ä¸­ç­¾åæ•°æ®çš„ï¼ˆv, r, sï¼‰ã€‚</p><h2 id="æ¤­åœ†æ›²çº¿ä¸Šç‚¹çš„å‹ç¼©"><a class="markdownIt-Anchor" href="#æ¤­åœ†æ›²çº¿ä¸Šç‚¹çš„å‹ç¼©"></a> æ¤­åœ†æ›²çº¿ä¸Šç‚¹çš„å‹ç¼©</h2><p>åœ¨ä¸Šè¿°è¿‡ç¨‹ï¼Œæœ‰ä¸€ä¸ªåœ°æ–¹å¯èƒ½è¿˜æ²¡æœ‰è§£é‡Šæ¸…æ¥šï¼Œé‚£å°±æ˜¯ä¸ºä»€ä¹ˆä¸€ä¸ª x åæ ‡ä¼šå¯¹åº”æœ‰ä¸¤ä¸ªæ¤­åœ†æ›²çº¿ä¸Šçš„ç‚¹ï¼Ÿå…¶å®è¿™é‡Œç”¨åˆ°äº†æ¤­åœ†æ›²çº¿ä¸Šç‚¹çš„å‹ç¼©å’Œè§£å‹ç¼©æ–¹æ³•ã€‚</p><p>æ ¹æ®æ¤­åœ†æ›²çº¿æ–¹ç¨‹ï¼Œæˆ‘ä»¬åªéœ€è¦çŸ¥é“ x åæ ‡ï¼Œå°±å¯ä»¥é€šè¿‡æ–¹ç¨‹è®¡ç®—å‡º y åæ ‡ï¼Œè¿™æ ·å°±ä¸ç”¨åŒæ—¶ä¿å­˜xï¼Œyçš„å€¼ï¼Œå‡å°‘äº†å­˜å‚¨å’Œå¸¦å®½ã€‚ä½†æ˜¯å¦‚æœåªçŸ¥é“xï¼Œå¸¦å…¥æ–¹ç¨‹ä¼šæ±‚å‡ºä¸¤ä¸ªyï¼Œä¸€æ­£ä¸€è´Ÿï¼Œå¯¹åº”ä¸¤ä¸ªä¸åŒçš„ç‚¹ï¼Œæ‰€ä»¥è¿˜å¿…é¡»æœ‰ä¸€ä¸ªæ ‡å¿—æ¥åŒºåˆ«å®é™…ä½¿ç”¨çš„æ˜¯å“ªä¸ªã€‚åœ¨ä»¥å¤ªåŠä¸­å°±é‡‡ç”¨äº†å‹ç¼©å…¬é’¥æ ¼å¼ï¼Œå…·ä½“æ ¼å¼ä¸ºï¼š</p><ul><li>å‰ç¼€02 + x ï¼ˆå½“yä¸ºå¶æ•°ï¼‰</li><li>å‰ç¼€03 + x ï¼ˆå½“yä¸ºå¥‡æ•°ï¼‰</li></ul><p>ä¸ºä»€ä¹ˆyä¸€å®šæ˜¯ä¸€å¥‡ä¸€å¶å‘¢ï¼Œåˆšåˆšä¸æ˜¯è¯´ä¸€æ­£ä¸€è´Ÿå—ï¼Ÿ</p><p>å‡è®¾ y æ˜¯æ–¹ç¨‹çš„ä¸€ä¸ªè§£ï¼Œé‚£ä¹ˆ -y ä¹Ÿæ˜¯æ–¹ç¨‹çš„ä¸€ä¸ªè§£ï¼Œä½†åœ¨æ¨¡è¿ç®—çš„è§„åˆ™ä¸‹ï¼Œ<code>-y â‰¡ p - y (mod p)</code>ï¼Œæ‰€ä»¥ p-y ä¹Ÿæ˜¯æ–¹ç¨‹çš„è§£ï¼Œy-p ä¹Ÿæ˜¯æ–¹ç¨‹çš„è§£ï¼Œä½†æ˜¯åœ¨mod p çš„æœ‰é™åŸŸä¸­ï¼Œå–å€¼èŒƒå›´æ˜¯[0, p-1]ï¼Œæ²¡æœ‰è´Ÿæ•°ï¼Œæ‰€ä»¥ -y å’Œ y-p åœ¨æ¤­åœ†æ›²çº¿ä¸Šå–ä¸åˆ°ï¼Œæœ€ç»ˆå¾—åˆ°å°±æ˜¯ä¸¤ä¸ªè§£ y å’Œ p-yï¼Œå› ä¸ºpæ˜¯å¤§ç´ æ•°ï¼Œæ‰€ä»¥ y å’Œ p-y ä¸€å®šæ˜¯ä¸€å¥‡ä¸€å¶ã€‚</p><p>åœ¨<a href="http://www.oscca.gov.cn/sca/xxgk/2010-12/17/1002386/files/b791a9f908bb4803875ab6aeeb7b4e03.pdf">ã€ŠSM2æ¤­åœ†æ›²çº¿å…¬é’¥å¯†ç ç®—æ³•ã€‹</a>ä¸­ä¹Ÿè°ˆåŠäº†æ¤­åœ†æ›²çº¿ä¸Šç‚¹çš„å‹ç¼©å’Œè§£å‹ç¼©æ–¹æ³•ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/2017zhangyuxuan/picture_backend@master//img/202112132204090.(null)" alt="æ¤­åœ†æ›²çº¿ä¸Šç‚¹çš„å‹ç¼©ä¸è§£å‹ç¼©" /></p><h2 id="æ¤­åœ†æ›²çº¿ç­¾åè¿‡ç¨‹"><a class="markdownIt-Anchor" href="#æ¤­åœ†æ›²çº¿ç­¾åè¿‡ç¨‹"></a> æ¤­åœ†æ›²çº¿ç­¾åè¿‡ç¨‹</h2><p>åœ¨æ¨å¯¼æ¤­åœ†æ›²çº¿å…¬é’¥ç®—æ³•ä¹‹å‰ï¼Œè¿˜éœ€è¦å…ˆå›é¡¾äº†è§£ä¸‹æ¤­åœ†æ›²çº¿çš„ç­¾åè¿‡ç¨‹ã€‚</p><img src="https://cdn.jsdelivr.net/gh/2017zhangyuxuan/picture_backend@master//img/202112132204793.(null)" alt="æ¤­åœ†æ›²çº¿ç­¾åè¿‡ç¨‹" style="zoom:67%;" /><ol><li>éšæœºé€‰æ‹©ä¸€ä¸ªä¸´æ—¶ç§é’¥ k å€¼ï¼ŒèŒƒå›´åœ¨ [1, n-1]ï¼Œå…¶ä¸­ n ä¸ºæ¤­åœ†æ›²çº¿çš„é˜¶æ•°</li><li>è®¡ç®—ä¸´æ—¶å…¬é’¥ kG = (x , y)</li><li>è®¡ç®— r å€¼ï¼Œ r = x mod nï¼Œå¦‚æœ r ä¸º0åˆ™è¿”å›ç¬¬1æ­¥é‡æ–°é€‰æ‹©ç§é’¥ k</li><li>è®¡ç®—æ¶ˆæ¯æ•£åˆ—å€¼ï¼Œe = H(m)</li><li>è®¡ç®— s å€¼ï¼Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mo>=</mo><msup><mi>k</mi><mrow><mo>âˆ’</mo><mn>1</mn></mrow></msup><mo stretchy="false">(</mo><mi>e</mi><mo>+</mo><mi>d</mi><mi>r</mi><mo stretchy="false">)</mo><mtext>Â </mtext><mi>m</mi><mi>o</mi><mi>d</mi><mtext>Â </mtext><mi>n</mi></mrow><annotation encoding="application/x-tex">s = k^{-1} (e + dr) \ mod \ n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">e</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">d</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mclose">)</span><span class="mspace">Â </span><span class="mord mathdefault">m</span><span class="mord mathdefault">o</span><span class="mord mathdefault">d</span><span class="mspace">Â </span><span class="mord mathdefault">n</span></span></span></span>ï¼Œå…¶ä¸­ d æ˜¯ç­¾åè€…çš„ç§é’¥ï¼Œå¦‚æœç®—å¾— s ä¸º0åˆ™è¿”å›ç¬¬ä¸€æ­¥é‡æ–°é€‰æ‹© k</li><li>æœ€ç»ˆå¾—åˆ°ç­¾å (r, s)</li></ol><p>å¯¹åº”ç­¾åçš„éªŒè¯è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><img src="https://cdn.jsdelivr.net/gh/2017zhangyuxuan/picture_backend@master//img/202112132204418.(null)" alt="æ¤­åœ†æ›²çº¿ç­¾åçš„éªŒè¯è¿‡ç¨‹" style="zoom:67%;" /><ol><li>æ£€éªŒ r, s æ˜¯å¦æ»¡è¶³å–å€¼èŒƒå›´ [1, n-1]</li><li>è®¡ç®—æ¶ˆæ¯æ•£åˆ—å€¼ï¼Œ e  = H(m)</li><li>è®¡ç®— s çš„é€†å…ƒï¼Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>w</mi><mo>=</mo><msup><mi>s</mi><mrow><mo>âˆ’</mo><mn>1</mn></mrow></msup><mtext>Â </mtext><mi>m</mi><mi>o</mi><mi>d</mi><mtext>Â </mtext><mi>n</mi></mrow><annotation encoding="application/x-tex">w = s^{-1} \ mod\  n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace">Â </span><span class="mord mathdefault">m</span><span class="mord mathdefault">o</span><span class="mord mathdefault">d</span><span class="mspace">Â </span><span class="mord mathdefault">n</span></span></span></span></li><li>è®¡ç®— <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>u</mi><mn>1</mn></msub><mo>=</mo><mi>e</mi><mi>w</mi><mtext>Â </mtext><mi>m</mi><mi>o</mi><mi>d</mi><mtext>Â </mtext><mi>n</mi><mi mathvariant="normal">ï¼Œ</mi><msub><mi>u</mi><mn>2</mn></msub><mo>=</mo><mi>r</mi><mi>w</mi><mtext>Â </mtext><mi>m</mi><mi>o</mi><mi>d</mi><mtext>Â </mtext><mi>n</mi></mrow><annotation encoding="application/x-tex">u_1 = ew \ mod \ nï¼Œu_2 = rw \ mod \ n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="mspace">Â </span><span class="mord mathdefault">m</span><span class="mord mathdefault">o</span><span class="mord mathdefault">d</span><span class="mspace">Â </span><span class="mord mathdefault">n</span><span class="mord cjk_fallback">ï¼Œ</span><span class="mord"><span class="mord mathdefault">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="mspace">Â </span><span class="mord mathdefault">m</span><span class="mord mathdefault">o</span><span class="mord mathdefault">d</span><span class="mspace">Â </span><span class="mord mathdefault">n</span></span></span></span></li><li>è®¡ç®— $ X = (x, y) = u_1G + u_2Q$ã€‚ å…¶ä¸­Gæ˜¯ç”Ÿæˆå…ƒï¼ŒQæ˜¯ç­¾åè€…çš„å…¬é’¥ã€‚å¦‚æœXä¸ºæ— ç©·è¿œç‚¹åˆ™éªŒç­¾å¤±è´¥ã€‚</li><li>è®¡ç®— v = x mod n</li><li>å¦‚æœ v = r åˆ™éªŒç­¾æˆåŠŸï¼Œå¦åˆ™å¤±è´¥</li></ol><p>æ¤­åœ†æ›²çº¿ç­¾åå’ŒéªŒè¯çš„æ­£ç¡®æ€§è¯æ˜å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>k</mi><mo>â‰¡</mo><msup><mi>s</mi><mrow><mo>âˆ’</mo><mn>1</mn></mrow></msup><mo stretchy="false">(</mo><mi>e</mi><mo>+</mo><mi>d</mi><mi>r</mi><mo stretchy="false">)</mo><mo>â‰¡</mo><msup><mi>s</mi><mrow><mo>âˆ’</mo><mn>1</mn></mrow></msup><mi>e</mi><mo>+</mo><msup><mi>s</mi><mrow><mo>âˆ’</mo><mn>1</mn></mrow></msup><mi>r</mi><mi>d</mi><mo>â‰¡</mo><mi>w</mi><mi>e</mi><mo>+</mo><mi>w</mi><mi>r</mi><mi>d</mi><mo>â‰¡</mo><msub><mi>u</mi><mn>1</mn></msub><mo>+</mo><msub><mi>u</mi><mn>2</mn></msub><mi>d</mi><mo stretchy="false">(</mo><mi>m</mi><mi>o</mi><mi>d</mi><mtext>Â </mtext><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">k â‰¡ s^{-1}(e + dr) â‰¡ s^{-1}e + s^{-1}rd â‰¡we + wrd â‰¡ u_1 + u_2d (mod \ n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¡</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.1141079999999999em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.864108em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">e</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">d</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¡</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.947438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathdefault">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.864108em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mord mathdefault">e</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.864108em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.864108em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">d</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¡</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="mord mathdefault">e</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">d</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">â‰¡</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.73333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault">d</span><span class="mopen">(</span><span class="mord mathdefault">m</span><span class="mord mathdefault">o</span><span class="mord mathdefault">d</span><span class="mspace">Â </span><span class="mord mathdefault">n</span><span class="mclose">)</span></span></span></span></span></p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo>=</mo><msub><mi>u</mi><mn>1</mn></msub><mi>G</mi><mo>+</mo><msub><mi>u</mi><mn>2</mn></msub><mi>Q</mi><mo>=</mo><mo stretchy="false">(</mo><msub><mi>u</mi><mn>1</mn></msub><mo>+</mo><msub><mi>u</mi><mn>2</mn></msub><mi>d</mi><mo stretchy="false">)</mo><mi>G</mi><mo>=</mo><mi>k</mi><mi>G</mi></mrow><annotation encoding="application/x-tex">X = u_1G + u_2Q = (u_1+u_2d)G = kG</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault">G</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault">Q</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathdefault">d</span><span class="mclose">)</span><span class="mord mathdefault">G</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mord mathdefault">G</span></span></span></span></span></p><p>å³éªŒç­¾æ—¶è®¡ç®—çš„Xä¸ç­¾åæ—¶çš„ä¸´æ—¶å…¬é’¥æ˜¯ç›¸ç­‰çš„ï¼Œå¯¹åº”çš„ x åæ ‡ä¹Ÿç›¸ç­‰ï¼Œæ‰€ä»¥éªŒç­¾æ—¶åˆ¤æ–­ v å€¼æ˜¯å¦ç­‰äº r å€¼å³å¯ã€‚</p><h2 id="æ¤­åœ†æ›²çº¿å…¬é’¥æ¢å¤ç®—æ³•æ¨å¯¼"><a class="markdownIt-Anchor" href="#æ¤­åœ†æ›²çº¿å…¬é’¥æ¢å¤ç®—æ³•æ¨å¯¼"></a> æ¤­åœ†æ›²çº¿å…¬é’¥æ¢å¤ç®—æ³•æ¨å¯¼</h2><p>å¥½çš„ï¼Œå‰åºå‡†å¤‡éƒ½å·²ç»å®Œæˆï¼Œç°åœ¨æ¥æ¨å¯¼å…¬é’¥æ¢å¤ç®—æ³•ï¼Œè¿™é‡Œä¸»è¦ç”¨åˆ°äº†ç­¾åè¿‡ç¨‹ä¸­çš„ç›¸å…³è®¡ç®—ã€‚</p><p>è®¾ä¸´æ—¶å…¬é’¥ä¸ºRï¼Œå³R = kG</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mo>=</mo><msup><mi>k</mi><mrow><mo>âˆ’</mo><mn>1</mn></mrow></msup><mo stretchy="false">(</mo><mi>e</mi><mo>+</mo><mi>d</mi><mi>r</mi><mo stretchy="false">)</mo><mtext>Â </mtext><mi>m</mi><mi>o</mi><mi>d</mi><mtext>Â </mtext><mi>n</mi><mspace width="1em"/><mo>â‡’</mo><mspace width="1em"/><mi>k</mi><mo>=</mo><msup><mi>s</mi><mrow><mo>âˆ’</mo><mn>1</mn></mrow></msup><mo stretchy="false">(</mo><mi>e</mi><mo>+</mo><mi>d</mi><mi>r</mi><mo stretchy="false">)</mo><mtext>Â </mtext><mi>m</mi><mi>o</mi><mi>d</mi><mtext>Â </mtext><mi>n</mi></mrow><annotation encoding="application/x-tex">s = k^{-1} (e + dr) \ mod \ n  \quad â‡’ \quad k = s^{-1} (e + dr) \ mod \ n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.1141079999999999em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.864108em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">e</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">d</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mclose">)</span><span class="mspace">Â </span><span class="mord mathdefault">m</span><span class="mord mathdefault">o</span><span class="mord mathdefault">d</span><span class="mspace">Â </span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mspace" style="margin-right:1em;"></span><span class="mrel">â‡’</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mspace" style="margin-right:1em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.1141079999999999em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.864108em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">e</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">d</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mclose">)</span><span class="mspace">Â </span><span class="mord mathdefault">m</span><span class="mord mathdefault">o</span><span class="mord mathdefault">d</span><span class="mspace">Â </span><span class="mord mathdefault">n</span></span></span></span></span></p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>k</mi><mi>G</mi><mo>=</mo><msup><mi>s</mi><mrow><mo>âˆ’</mo><mn>1</mn></mrow></msup><mo stretchy="false">(</mo><mi>e</mi><mo>+</mo><mi>d</mi><mi>r</mi><mo stretchy="false">)</mo><mtext>Â </mtext><mi>G</mi><mspace width="1em"/><mo>â‡’</mo><mspace width="1em"/><mi>R</mi><mo>=</mo><msup><mi>s</mi><mrow><mo>âˆ’</mo><mn>1</mn></mrow></msup><mo stretchy="false">(</mo><mi>e</mi><mi>G</mi><mo>+</mo><mi>r</mi><mi>Q</mi><mo stretchy="false">)</mo><mspace width="1em"/><mo>â‡’</mo><mspace width="1em"/><mi>Q</mi><mo>=</mo><msup><mi>r</mi><mrow><mo>âˆ’</mo><mn>1</mn></mrow></msup><mo stretchy="false">(</mo><mi>s</mi><mi>R</mi><mo>âˆ’</mo><mi>e</mi><mi>G</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">kG = s^{-1} (e + dr) \ G  \quad â‡’ \quad R = s^{-1}(eG+rQ) \quad â‡’ \quad Q = r^{-1}(sR-eG)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mord mathdefault">G</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.1141079999999999em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.864108em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">e</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">d</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mclose">)</span><span class="mspace">Â </span><span class="mord mathdefault">G</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mspace" style="margin-right:1em;"></span><span class="mrel">â‡’</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mspace" style="margin-right:1em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.1141079999999999em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.864108em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">e</span><span class="mord mathdefault">G</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">Q</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mspace" style="margin-right:1em;"></span><span class="mrel">â‡’</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mspace" style="margin-right:1em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">Q</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.1141079999999999em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.864108em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">s</span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">e</span><span class="mord mathdefault">G</span><span class="mclose">)</span></span></span></span></span></p><p>å› ä¸ºé€šè¿‡ r å€¼å¯ä»¥è®¡ç®—é€†å…ƒ r<sup>-1</sup>ï¼Œs å€¼å·²çŸ¥ï¼Œæ¶ˆæ¯æ•£åˆ—eå’Œç”Ÿæˆå…ƒGå·²çŸ¥ï¼Œä¸´æ—¶å…¬é’¥ R å¯ä»¥é€šè¿‡ rï¼ˆå¯¹åº”å…¬é’¥çš„xåæ ‡ï¼‰åˆ©ç”¨æ¤­åœ†æ›²çº¿ä¸Šç‚¹çš„è§£å‹ç¼©æ–¹æ³•æ±‚è§£ï¼Œå› æ­¤å…¬é’¥ Q æ˜¯å¯ä»¥è¢«è®¡ç®—å‡ºæ¥çš„ã€‚</p><p>åœ¨ <a href="http://www.secg.org/sec1-v2.pdf">æ¤­åœ†æ›²çº¿æ ‡å‡†</a> ä¸­ä¹Ÿæè¿°äº†æ™®é€šæ¤­åœ†æ›²çº¿å…¬é’¥æ¢å¤ç®—æ³•çš„å®ç°ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/2017zhangyuxuan/picture_backend@master//img/202112132204527.(null)" alt="æ¤­åœ†æ›²çº¿æ ‡å‡†ä¸­å®šä¹‰çš„å…¬é’¥æ¢å¤ç®—æ³•" /></p><h1 id="sm2å…¬é’¥æ¢å¤ç®—æ³•ç¼–ç¨‹å®ç°"><a class="markdownIt-Anchor" href="#sm2å…¬é’¥æ¢å¤ç®—æ³•ç¼–ç¨‹å®ç°"></a> SM2å…¬é’¥æ¢å¤ç®—æ³•ç¼–ç¨‹å®ç°</h1><p>å› ä¸ºSM2å…¬é’¥ç­¾åç®—æ³•å’Œä»¥å¤ªåŠä¸Šæ¤­åœ†æ›²çº¿çš„ç­¾åç®—æ³•ä¸å¤ªä¸€æ ·ï¼Œæ‰€ä»¥éœ€è¦å…ˆäº†è§£SM2çš„ç­¾åè¿‡ç¨‹ï¼Œç„¶åå†æ¨å¯¼SM2å¯¹åº”çš„å…¬é’¥æ¢å¤ç®—æ³•ã€‚</p><h2 id="sm2ç­¾åä¸éªŒè¯è¿‡ç¨‹"><a class="markdownIt-Anchor" href="#sm2ç­¾åä¸éªŒè¯è¿‡ç¨‹"></a> SM2ç­¾åä¸éªŒè¯è¿‡ç¨‹</h2><p>æ ¹æ®å®˜æ–¹çš„ <a href="http://www.oscca.gov.cn/sca/xxgk/2010-12/17/1002386/files/b791a9f908bb4803875ab6aeeb7b4e03.pdf">SM2 æ¤­åœ†æ›²çº¿å…¬é’¥å¯†ç ç®—æ³•</a> å¯ä»¥æ‰¾åˆ°SM2ç®—æ³•çš„ç­¾åè¿‡ç¨‹ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/2017zhangyuxuan/picture_backend@master//img/202112132204885.(null)" alt="SM2ç­¾åè®¡ç®—è¿‡ç¨‹" /></p><ul><li>è®¾å¾…ç­¾åçš„æ¶ˆæ¯ä¸ºMï¼Œä¸ºäº†è·å–æ¶ˆæ¯Mçš„æ•°å­—ç­¾å(r,s)ï¼Œä½œä¸ºç­¾åè€…çš„ç”¨æˆ·Aåº”å®ç°ä»¥ä¸‹è¿ç®—æ­¥éª¤ï¼š</li></ul><ol><li>ç½®  <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mover accent="true"><mi>M</mi><mo stretchy="true">â€¾</mo></mover><mo>=</mo><msub><mi>Z</mi><mi>A</mi></msub><mi mathvariant="normal">âˆ£</mi><mi mathvariant="normal">âˆ£</mi><mi>M</mi></mrow><annotation encoding="application/x-tex">\overline{M} = Z_A || M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8833300000000001em;vertical-align:0em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833300000000001em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span><span style="top:-3.80333em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">Z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">A</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord">âˆ£</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span></li><li>è®¡ç®—æ¶ˆæ¯æ•£åˆ—å€¼ï¼Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>e</mi><mo>=</mo><mi>H</mi><mo stretchy="false">(</mo><mover accent="true"><mi>M</mi><mo stretchy="true">â€¾</mo></mover><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">e = H(\overline{M})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">e</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.13333em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="mopen">(</span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833300000000001em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span><span style="top:-3.80333em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>ï¼Œå¹¶å°†eçš„æ•°æ®ç±»å‹è½¬æ¢ä¸ºæ•´æ•°</li><li>ç”¨éšæœºæ•°å‘ç”Ÿå™¨äº§ç”Ÿéšæœºæ•° kï¼Œå–å€¼èŒƒå›´ [1, n-1]</li><li>è®¡ç®—æ¤­åœ†æ›²çº¿ä¸Šçš„ç‚¹ï¼ˆä¹Ÿå°±æ˜¯ä¸´æ—¶å…¬é’¥ï¼‰ï¼Œ<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>y</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mo>=</mo><mi>k</mi><mi>G</mi></mrow><annotation encoding="application/x-tex">(x_1,y_1) = kG</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mord mathdefault">G</span></span></span></span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">ï¼Œ</mi><mi mathvariant="normal">å¹¶</mi><mi mathvariant="normal">å°†</mi></mrow><annotation encoding="application/x-tex">ï¼Œå¹¶å°†</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0em;vertical-align:0em;"></span><span class="mord cjk_fallback">ï¼Œ</span><span class="mord cjk_fallback">å¹¶</span><span class="mord cjk_fallback">å°†</span></span></span></span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>x</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">x_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>$æ•°æ®ç±»å‹è½¬æ¢ä¸ºæ•´æ•°</li><li>è®¡ç®— <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>r</mi><mo>=</mo><mo stretchy="false">(</mo><mi>e</mi><mo>+</mo><msub><mi>x</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mtext>Â </mtext><mi>m</mi><mi>o</mi><mi>d</mi><mtext>Â </mtext><mi>n</mi></mrow><annotation encoding="application/x-tex">r = (e+x_1) \ mod \ n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">e</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace">Â </span><span class="mord mathdefault">m</span><span class="mord mathdefault">o</span><span class="mord mathdefault">d</span><span class="mspace">Â </span><span class="mord mathdefault">n</span></span></span></span>ï¼Œè‹¥ r = 0 æˆ– r+k = n åˆ™ è¿”å›ç¬¬3æ­¥ï¼Œé‡æ–°é€‰æ‹©k</li><li>è®¡ç®— <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mo>=</mo><mo stretchy="false">(</mo><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><msub><mi>d</mi><mi>A</mi></msub><msup><mo stretchy="false">)</mo><mrow><mo>âˆ’</mo><mn>1</mn></mrow></msup><mtext>Â </mtext><mo separator="true">â‹…</mo><mtext>Â </mtext><mo stretchy="false">(</mo><mi>k</mi><mo>âˆ’</mo><mi>r</mi><mtext>Â </mtext><mo separator="true">â‹…</mo><mtext>Â </mtext><msub><mi>d</mi><mi>A</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mtext>Â </mtext><mi>m</mi><mi>o</mi><mi>d</mi><mtext>Â </mtext><mi>n</mi></mrow><annotation encoding="application/x-tex">s = ((1 + d_A)^{-1} \ Â· \ (k-r\ Â·\ d_A ) ) \ mod \ n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">A</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace">Â </span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace">Â </span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mspace">Â </span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace">Â </span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">A</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mclose">)</span><span class="mspace">Â </span><span class="mord mathdefault">m</span><span class="mord mathdefault">o</span><span class="mord mathdefault">d</span><span class="mspace">Â </span><span class="mord mathdefault">n</span></span></span></span>ï¼Œè‹¥s = 0 åˆ™è¿”å›ç¬¬3æ­¥</li><li>å°†rã€sç±»å‹è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œå¾—åˆ°æ¶ˆæ¯Mçš„ç­¾å(r, s)</li></ol><p>SM2æ•°å­—ç­¾åçš„ç®—æ³•æµç¨‹å›¾å¦‚ä¸‹æ‰€ç¤ºã€‚</p><center><img src="https://cdn.jsdelivr.net/gh/2017zhangyuxuan/picture_backend@master//img/202112132204893.(null)" width="60%" height="60%" align="middle" > </center><p><strong>SM2éªŒè¯è¿‡ç¨‹</strong></p><ul><li>ä¸ºäº†æ£€éªŒæ”¶åˆ°æ¶ˆæ¯Mâ€™åŠå…¶æ•°å­—ç­¾å(râ€™,sâ€™)ï¼Œä½œä¸ºéªŒè¯è€…çš„ç”¨æˆ·Båº”å®ç°ä»¥ä¸‹è¿ç®—æ­¥éª¤ï¼š</li></ul><ol><li>æ£€éªŒ râ€™ æ˜¯å¦åœ¨ [1, n-1] èŒƒå›´å†…</li><li>æ£€éªŒ sâ€™ æ˜¯å¦åœ¨ [1, n-1] èŒƒå›´å†…</li><li>ç½®$$\overline{M}â€™ = Z_A \ || \  Mâ€™$$</li><li>è®¡ç®—æ¶ˆæ¯æ•£åˆ—å€¼ï¼Œ$$e = H(\overline{M}â€™)$$ï¼Œå¹¶å°†eçš„æ•°æ®ç±»å‹è½¬æ¢ä¸ºæ•´æ•°</li><li>å°† râ€™ , sâ€™ æ•°æ®ç±»å‹è½¬æ¢ä¸ºæ•´æ•°ï¼Œè®¡ç®— $$t = (râ€™ + sâ€™) \ mod \ n$$</li><li>è®¡ç®—æ¤­åœ†æ›²çº¿ç‚¹ $$(x_1â€™, y_1â€™) = [sâ€™]G + [t]P_A$$</li><li>è®¡ç®—$$R = (eâ€™ + x_1â€™) \ mod \ n$$ï¼Œæ£€éªŒ R = râ€™ æ˜¯å¦æˆç«‹ï¼Œå¦‚æœæˆç«‹åˆ™éªŒè¯é€šè¿‡ï¼Œå¦åˆ™éªŒè¯ä¸é€šè¿‡</li></ol><p>SM2æ•°å­—ç­¾åçš„éªŒè¯è¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><center><img src="https://kwaj2xdt3y.feishu.cn/space/api/box/stream/download/asynccode/?code=NDYyZjBkZGZiODc4OWE3Y2E3YTc2YmJlYWIwMTY0OThfa1FUVDVtZzNubmI4bVh4cVd5SzA2OFhoa2xQVW1NWnRfVG9rZW46Ym94Y25OckpUY3E0c3gzRmVSUGh0N1hRbzBjXzE2Mzk0MDQyNTM6MTYzOTQwNzg1M19WNA" width="60%" height="60%" align="middle" > </center><h2 id="sm2å…¬é’¥æ¢å¤ç®—æ³•"><a class="markdownIt-Anchor" href="#sm2å…¬é’¥æ¢å¤ç®—æ³•"></a> SM2å…¬é’¥æ¢å¤ç®—æ³•</h2><p>è·Ÿæ¤­åœ†æ›²çº¿ä¸­æ–¹æ³•ç±»ä¼¼ï¼Œä»SM2ç­¾åç®—æ³•çš„ç›¸å…³è®¡ç®—ä¸­ï¼Œå¯ä»¥æ¨å¯¼å‡ºå¯¹åº”çš„å…¬é’¥æ¢å¤ç®—æ³• ã€‚</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mo>=</mo><mo stretchy="false">(</mo><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><msub><mi>d</mi><mi>A</mi></msub><msup><mo stretchy="false">)</mo><mrow><mo>âˆ’</mo><mn>1</mn></mrow></msup><mtext>Â </mtext><mo separator="true">â‹…</mo><mtext>Â </mtext><mo stretchy="false">(</mo><mi>k</mi><mo>âˆ’</mo><mi>r</mi><mtext>Â </mtext><mo separator="true">â‹…</mo><mtext>Â </mtext><msub><mi>d</mi><mi>A</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mtext>Â </mtext><mi>m</mi><mi>o</mi><mi>d</mi><mtext>Â </mtext><mi>n</mi><mspace width="1em"/><mo>â‡’</mo></mrow><annotation encoding="application/x-tex">s = ((1 + d_A)^{-1} \ Â· \ (k-r\ Â·\ d_A ) ) \ mod \ n \quad â‡’  </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.1141079999999999em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">A</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.864108em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace">Â </span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace">Â </span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mspace">Â </span><span class="mpunct">â‹…</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace">Â </span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">A</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mclose">)</span><span class="mspace">Â </span><span class="mord mathdefault">m</span><span class="mord mathdefault">o</span><span class="mord mathdefault">d</span><span class="mspace">Â </span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mspace" style="margin-right:1em;"></span><span class="mrel">â‡’</span></span></span></span></span></p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mspace width="1em"/><mi>k</mi><mo>=</mo><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><msub><mi>d</mi><mi>A</mi></msub><mo stretchy="false">)</mo><mi>s</mi><mo>+</mo><mi>r</mi><msub><mi>d</mi><mi>A</mi></msub><mo>=</mo><mo stretchy="false">(</mo><mi>s</mi><mo>+</mo><mo stretchy="false">(</mo><mi>s</mi><mo>+</mo><mi>r</mi><mo stretchy="false">)</mo><msub><mi>d</mi><mi>A</mi></msub><mo stretchy="false">)</mo><mtext>Â </mtext><mi>m</mi><mi>o</mi><mi>d</mi><mtext>Â </mtext><mi>n</mi></mrow><annotation encoding="application/x-tex">\quad k= (1+d_A)s + rd_A = (s + (s+r)d_A) \ mod \ n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mspace" style="margin-right:1em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">A</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">A</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mclose">)</span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">A</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace">Â </span><span class="mord mathdefault">m</span><span class="mord mathdefault">o</span><span class="mord mathdefault">d</span><span class="mspace">Â </span><span class="mord mathdefault">n</span></span></span></span></span></p><p>è®¾ <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>R</mi><mo>=</mo><mi>k</mi><mi>G</mi><mspace width="1em"/><mspace width="1em"/><mi>t</mi><mo>=</mo><mi>r</mi><mo>+</mo><mi>s</mi></mrow><annotation encoding="application/x-tex">R = kG \quad\quad t = r+s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mord mathdefault">G</span><span class="mspace" style="margin-right:1em;"></span><span class="mspace" style="margin-right:1em;"></span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">s</span></span></span></span>ï¼Œ</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>k</mi><mi>G</mi><mo>=</mo><mo stretchy="false">(</mo><mi>s</mi><mo>+</mo><mo stretchy="false">(</mo><mi>s</mi><mo>+</mo><mi>r</mi><mo stretchy="false">)</mo><msub><mi>d</mi><mi>A</mi></msub><mo stretchy="false">)</mo><mi>G</mi><mspace width="1em"/><mo>â‡’</mo><mspace width="1em"/><mi>R</mi><mo>=</mo><mi>s</mi><mi>G</mi><mo>+</mo><mi>t</mi><msub><mi>P</mi><mi>A</mi></msub><mspace width="1em"/><mo>â‡’</mo><mspace width="1em"/><msub><mi>P</mi><mi>A</mi></msub><mo>=</mo><msup><mi>t</mi><mrow><mo>âˆ’</mo><mn>1</mn></mrow></msup><mo stretchy="false">(</mo><mi>R</mi><mo>âˆ’</mo><mi>s</mi><mi>G</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">kG = (s+(s+r)d_A)G \quad â‡’ \quad R = sG+tP_A \quad â‡’ \quad P_A = t^{-1}(R-sG)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mord mathdefault">G</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mclose">)</span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">A</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord mathdefault">G</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mspace" style="margin-right:1em;"></span><span class="mrel">â‡’</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mspace" style="margin-right:1em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">s</span><span class="mord mathdefault">G</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord mathdefault">t</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">A</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mspace" style="margin-right:1em;"></span><span class="mrel">â‡’</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mspace" style="margin-right:1em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">A</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.1141079999999999em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.864108em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">s</span><span class="mord mathdefault">G</span><span class="mclose">)</span></span></span></span></span></p><p>å› ä¸ºrï¼Œså€¼å¯ä»¥è®¡ç®—å¾—åˆ°tï¼Œè¿›è€Œå¾—åˆ°tçš„é€†å…ƒ <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>t</mi><mrow><mo>âˆ’</mo><mn>1</mn></mrow></msup></mrow><annotation encoding="application/x-tex">t^{-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span>ï¼ŒR å¯ä»¥é€šè¿‡<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>x</mi><mn>1</mn></msub><mo>=</mo><mi>r</mi><mo>âˆ’</mo><mi>e</mi><mtext>Â </mtext><mi>m</mi><mi>o</mi><mi>d</mi><mtext>Â </mtext><mi>n</mi></mrow><annotation encoding="application/x-tex">x_1 = r - e \ mod \ n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">e</span><span class="mspace">Â </span><span class="mord mathdefault">m</span><span class="mord mathdefault">o</span><span class="mord mathdefault">d</span><span class="mspace">Â </span><span class="mord mathdefault">n</span></span></span></span>ï¼Œå¹¶åˆ©ç”¨æ¤­åœ†æ›²çº¿çš„å‹ç¼©æ–¹æ³•è®¡ç®—å¾—åˆ°ã€‚så’ŒGä¹Ÿéƒ½å·²çŸ¥ï¼Œå› æ­¤ï¼Œæ˜¯å¯ä»¥è®¡ç®—å¾—åˆ°å…¬é’¥<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>P</mi><mi>A</mi></msub></mrow><annotation encoding="application/x-tex">P_A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">A</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></p><h2 id="ä»£ç ç»“æ„è¯´æ˜"><a class="markdownIt-Anchor" href="#ä»£ç ç»“æ„è¯´æ˜"></a> ä»£ç ç»“æ„è¯´æ˜</h2><center><img src="https://cdn.jsdelivr.net/gh/2017zhangyuxuan/picture_backend@master//img/202112132204132.(null)" width="30%" height="30%" align="middle" > </center>é™„ä»¶ä»£ç ç»“æ„å¦‚ä¸Šå›¾æ‰€ç¤ºï¼š<ul><li>cryptoppï¼šè¯¥ç›®å½•æ˜¯å¼€æºåº“CryptoPP çš„æ–‡ä»¶ç›®å½•</li><li>testï¼šæµ‹è¯•æ–‡ä»¶ç›®å½•ï¼Œå­˜æ”¾æµ‹è¯•ç±»TestCryptoï¼Œä¸»è¦æµ‹è¯•CryptoPPçš„ç›¸å…³APIï¼Œæ¨¡æ‹Ÿæ¤­åœ†æ›²çº¿çš„ç­¾åã€éªŒè¯ä»¥åŠå…¬é’¥æ¢å¤ç®—æ³•ï¼›è¿˜æœ‰å°±æ˜¯æµ‹è¯•è‡ªå®šä¹‰å®ç°çš„SM2 çš„ç­¾åã€éªŒè¯ä»¥åŠå…¬é’¥æ¢å¤ç®—æ³•</li><li>utilï¼šè¯¥ç›®å½•ä¸‹ï¼Œutilç±»æ˜¯cryptoppæ–¹æ³•çš„å°è£…ï¼ŒSM2æ˜¯è‡ªå®šä¹‰å®ç°ç±»</li><li>main.cppï¼šå®ç°æµ‹è¯•å‡½æ•°</li></ul><h2 id="ç¼–ç¨‹å®ç°è¯´æ˜"><a class="markdownIt-Anchor" href="#ç¼–ç¨‹å®ç°è¯´æ˜"></a> ç¼–ç¨‹å®ç°è¯´æ˜</h2><p>å½“äº†è§£äº†ç®—æ³•åŸç†ä¹‹åï¼Œå®ç°èµ·æ¥å°±æ¯”è¾ƒå®¹æ˜“äº†ï¼Œåªè¦æ ¹æ®å…¬å¼è¿›è¡Œç¼–ç¨‹å³å¯ã€‚åœ¨å®ç°ä¸Šå€ŸåŠ©äº†å¼€æºçš„CryptoPPåº“ï¼Œæ¥æ”¯æŒå¯†ç å­¦é‡Œä¸­åŸè¯­æ“ä½œï¼Œæ¯”å¦‚æœ‰é™åŸŸä¸Šçš„è®¡ç®—ï¼Œæ¤­åœ†æ›²çº¿ä¸Šç‚¹çš„è¿ç®—ç­‰ã€‚ä»£ç ä¸Šä¸»è¦æ˜¯å®ç°äº†ä¸€ä¸ª<code>SM2</code>ç±»ï¼Œå®šä¹‰äº†ç­¾åï¼ŒéªŒè¯å’Œå…¬é’¥æ¢å¤ç®—æ³•ï¼Œå…·ä½“çš„ä»£ç å®ç°è¿™é‡Œä¸å†å±•ç¤ºï¼Œå¯è§ä»£ç é™„ä»¶ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">// å€ŸåŠ©CryptoPPå¼€æºåº“ å®ç° SM2ç®—æ³•</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SM2</span> &#123;</span><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-comment">// ç­¾åï¼šè¾“å…¥çš„æ¶ˆæ¯å’Œè¾“å‡ºçš„ç­¾åæ•°æ®  å‡ä¸ºå­—èŠ‚æ ¼å¼ï¼Œç­¾åæ˜¯ç”±(r,s)å„32å­—èŠ‚æ‹¼æ¥å¾—åˆ°çš„</span><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Sign</span><span class="hljs-params">(<span class="hljs-keyword">const</span> std::string &amp;message, std::string &amp;signature)</span></span>;<br>    <span class="hljs-comment">// éªŒè¯ï¼šè¾“å…¥çš„æ¶ˆæ¯å’Œç­¾åå‡ä¸ºå­—èŠ‚æ ¼å¼ï¼Œè¾“å‡ºä¸ºboolå€¼</span><br>    <span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">Verify</span><span class="hljs-params">(<span class="hljs-keyword">const</span> std::string &amp;message, <span class="hljs-keyword">const</span> std::string &amp;signature)</span></span>;<br>    <span class="hljs-comment">// å…¬é’¥æ¢å¤ç®—æ³•ï¼Œè¾“å…¥æ¶ˆæ¯ï¼Œç­¾åï¼ˆr,sï¼‰ï¼Œyå€¼æ˜¯å¦ä¸ºå¥‡æ•°ï¼Œ è¾“å‡ºpubKey å­—èŠ‚æ ¼å¼ï¼Œç”±(x,y) å„32å­—èŠ‚æ‹¼æ¥è€Œæˆ</span><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">RecoverPublicKey</span><span class="hljs-params">(<span class="hljs-keyword">const</span> std::string &amp;message, <span class="hljs-keyword">bool</span> isOdd,</span></span><br><span class="hljs-params"><span class="hljs-function">                                 <span class="hljs-keyword">const</span> Integer &amp;r, <span class="hljs-keyword">const</span> Integer &amp;s, std::string &amp;pubKey)</span></span><br><span class="hljs-function"></span><br><span class="hljs-function"><span class="hljs-keyword">private</span>:</span><br><span class="hljs-function">    std::shared_ptr&lt;ECP&gt; ecp;</span>                   <span class="hljs-comment">// SM2 å¯¹åº”çš„æ¤­åœ†æ›²çº¿</span><br>    std::shared_ptr&lt;Integer&gt; p;<br>    std::shared_ptr&lt;Integer&gt; a;<br>    std::shared_ptr&lt;Integer&gt; b;<br>    std::shared_ptr&lt;Integer&gt; privateKey;        <span class="hljs-comment">// ç§é’¥</span><br>    std::shared_ptr&lt;ECPPoint&gt; publicKey;        <span class="hljs-comment">// å…¬é’¥ï¼Œä»¥Pointè¡¨ç¤º</span><br>    std::shared_ptr&lt;ECPPoint&gt; generator;        <span class="hljs-comment">// ç”Ÿæˆå…ƒ ç‚¹</span><br>    std::shared_ptr&lt;Integer&gt; n;                 <span class="hljs-comment">// ç”Ÿæˆå…ƒ å¯¹åº”çš„é˜¶æ•°</span><br>    std::string ZA;                             <span class="hljs-comment">// æ‚å‡‘å€¼ï¼Œå­—èŠ‚å½¢å¼ ï¼šZA = H256(ENTL_A âˆ¥ ID_A âˆ¥ a âˆ¥ b âˆ¥ xG âˆ¥ yG âˆ¥ xA âˆ¥ yA)</span><br><br>    <span class="hljs-comment">// é»˜è®¤æ„é€ å‡½æ•°ï¼Œä½¿ç”¨å®˜æ–¹å‚æ•°</span><br>    <span class="hljs-built_in">SM2</span>();<br>    <span class="hljs-comment">// åˆå§‹åŒ–æ›²çº¿å‚æ•°ï¼Œä½¿ç”¨å®˜æ–¹å‚æ•°</span><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">init</span><span class="hljs-params">()</span></span>;<br>    <span class="hljs-comment">// è®¡ç®—æ‚å‡‘å€¼ ZA</span><br>    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">ComputeZA</span><span class="hljs-params">()</span></span>;<br>&#125;;<br></code></pre></td></tr></table></figure><p>æµ‹è¯•ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">// æµ‹è¯• SM2 ç±»</span><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">TestCrypto::Test_SM2</span><span class="hljs-params">()</span> </span>&#123;<br>    SM2 sm2;<br>    std::string message = <span class="hljs-string">&quot;message digest&quot;</span>;<br>    std::string signature;<br>    Integer k = Util::<span class="hljs-built_in">StringToInteger</span>(<span class="hljs-string">&quot;59276E27D506861A16680F3AD9C02DCCEF3CC1FA3CDBE4CE6D54B80DEAC1BC21&quot;</span>);<br>    sm2.<span class="hljs-built_in">Sign</span>(message, signature, k);<br><br>    Integer r = Util::<span class="hljs-built_in">StringToInteger</span>(Util::<span class="hljs-built_in">HexEncode</span>(signature.<span class="hljs-built_in">substr</span>(<span class="hljs-number">0</span>,<span class="hljs-number">32</span>)));<br>    Integer s = Util::<span class="hljs-built_in">StringToInteger</span>(Util::<span class="hljs-built_in">HexEncode</span>(signature.<span class="hljs-built_in">substr</span>(<span class="hljs-number">32</span>,<span class="hljs-number">32</span>)));<br><br>    <span class="hljs-comment">// æ‰“å°è¾“å‡ºï¼Œå¯¹ç…§çœŸå®æ•°æ®</span><br>    cout &lt;&lt; <span class="hljs-string">&quot;â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”æµ‹è¯•SM2 ç­¾åç®—æ³•â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”&quot;</span> &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;çœŸå® r:&quot;</span> &lt;&lt; <span class="hljs-string">&quot;F5A03B0648D2C4630EEAC513E1BB81A15944DA3827D5B74143AC7EACEEE720B3&quot;</span> &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;è®¡ç®— r:&quot;</span> &lt;&lt; Util::<span class="hljs-built_in">HexEncode</span>(signature.<span class="hljs-built_in">substr</span>(<span class="hljs-number">0</span>,<span class="hljs-number">32</span>)) &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;çœŸå® s:&quot;</span> &lt;&lt; <span class="hljs-string">&quot;B1B6AA29DF212FD8763182BC0D421CA1BB9038FD1F7F42D4840B69C485BBC1AA&quot;</span> &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;è®¡ç®— s:&quot;</span> &lt;&lt; Util::<span class="hljs-built_in">HexEncode</span>(signature.<span class="hljs-built_in">substr</span>(<span class="hljs-number">32</span>,<span class="hljs-number">32</span>)) &lt;&lt; endl;<br><br><br>    cout &lt;&lt; <span class="hljs-string">&quot;â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”æµ‹è¯•SM2 éªŒè¯ç­¾åâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”&quot;</span> &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;message: &quot;</span> &lt;&lt; message &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;r: &quot;</span> &lt;&lt; Util::<span class="hljs-built_in">IntegerToString</span>(r) &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;s: &quot;</span> &lt;&lt; Util::<span class="hljs-built_in">IntegerToString</span>(s) &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;ç­¾åéªŒè¯ç»“æœ: &quot;</span> &lt;&lt; boolalpha &lt;&lt; sm2.<span class="hljs-built_in">Verify</span>(message, signature ) &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”æµ‹è¯•SM2 å…¬é’¥æ¢å¤ç®—æ³•â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”&quot;</span> &lt;&lt; endl;<br><br>    std::string pubKey;<br>    sm2.<span class="hljs-built_in">RecoverPublicKey</span>(message,<span class="hljs-literal">false</span>, r, s,pubKey);<br>    <span class="hljs-function">ECP::Point <span class="hljs-title">P</span><span class="hljs-params">(Util::StringToInteger(Util::HexEncode(pubKey.substr(<span class="hljs-number">0</span>,<span class="hljs-number">32</span>))),</span></span><br><span class="hljs-params"><span class="hljs-function">                 Util::StringToInteger(Util::HexEncode(pubKey.substr(<span class="hljs-number">32</span>,<span class="hljs-number">32</span>))))</span></span>;<br>    cout &lt;&lt; <span class="hljs-string">&quot;çœŸå®å…¬é’¥ P.x:&quot;</span> &lt;&lt; <span class="hljs-string">&quot;09F9DF311E5421A150DD7D161E4BC5C672179FAD1833FC076BB08FF356F35020&quot;</span> &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;æ¢å¤å…¬é’¥ P.x:&quot;</span> &lt;&lt; Util::<span class="hljs-built_in">IntegerToString</span>(P.x) &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;çœŸå®å…¬é’¥ P.y:&quot;</span> &lt;&lt; <span class="hljs-string">&quot;CCEA490CE26775A52DC6EA718CC1AA600AED05FBF35E084A6632F6072DA9AD13&quot;</span> &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;æ¢å¤å…¬é’¥ P.y:&quot;</span> &lt;&lt; Util::<span class="hljs-built_in">IntegerToString</span>(P.y) &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure><p>æµ‹è¯•æ•°æ®æ¥è‡ªï¼š<a href="https://blog.csdn.net/beebeeyoung/article/details/91063358">SM2 è‡ªæ£€æ•°æ®</a></p><p>æµ‹è¯•ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/2017zhangyuxuan/picture_backend@master//img/202112132204273.(null)" alt="æµ‹è¯•ç»“æœè¾“å‡º" /></p><p class="note note-primary">ä»£ç ä¸Šä¼ è‡³Githubä»“åº“ï¼šhttps://github.com/2017zhangyuxuan/Learn-Blockchain</p><h1 id="å‚è€ƒèµ„æ–™"><a class="markdownIt-Anchor" href="#å‚è€ƒèµ„æ–™"></a> å‚è€ƒèµ„æ–™</h1><p><a href="http://www.oscca.gov.cn/sca/xxgk/2010-12/17/1002386/files/b791a9f908bb4803875ab6aeeb7b4e03.pdf">SM2 æ¤­åœ†æ›²çº¿å…¬é’¥å¯†ç ç®—æ³•</a></p><p><a href="https://blog.csdn.net/beebeeyoung/article/details/91063358">SM2 è‡ªæ£€æ•°æ®</a></p><p><a href="http://www.gmbz.org.cn/main/viewfile/2018010802371372251.html">SM2 å®˜æ–¹å‚æ•°å®šä¹‰</a></p><p><a href="https://github.com/inoutcode/ethereum_book/blob/master/%E7%AC%AC%E4%B8%83%E7%AB%A0.asciidoc#%E7%AD%BE%E5%90%8D%E5%89%8D%E7%BC%80%E5%80%BCv%E5%92%8C%E5%85%AC%E9%92%A5%E6%81%A2%E5%A4%8D">ä»¥å¤ªåŠï¼šç­¾åå‰ç¼€å€¼ï¼ˆvï¼‰å’Œå…¬é’¥æ¢å¤</a></p><p><a href="https://www.cryptopp.com/docs/ref/class_integer.html">CryptoPP å®˜æ–¹æ–‡æ¡£</a></p><p><a href="http://www.secg.org/sec1-v2.pdf">æ¤­åœ†æ›²çº¿æ ‡å‡†</a></p>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºçŸ¥è¯†</category>
      
      <category>å¯†ç å­¦</category>
      
    </categories>
    
    
    <tags>
      
      <tag>SM2</tag>
      
      <tag>æ¤­åœ†æ›²çº¿å¯†ç ç®—æ³•</tag>
      
      <tag>å…¬é’¥æ¢å¤ç®—æ³•</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€æ¯”ç‰¹å¸ä¸“é¢˜04ã€‘æ¤­åœ†æ›²çº¿å¯†ç ç®—æ³•åœ¨æ¯”ç‰¹å¸ä¸­çš„åº”ç”¨</title>
    <link href="/2021/11/27/2021-11/2021-11-27%20%E6%AF%94%E7%89%B9%E5%B8%81%E4%B8%93%E9%A2%9804-%E6%A4%AD%E5%9C%86%E6%9B%B2%E7%BA%BF%E5%AF%86%E7%A0%81%E7%AE%97%E6%B3%95%E5%9C%A8%E6%AF%94%E7%89%B9%E5%B8%81%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8/"/>
    <url>/2021/11/27/2021-11/2021-11-27%20%E6%AF%94%E7%89%B9%E5%B8%81%E4%B8%93%E9%A2%9804-%E6%A4%AD%E5%9C%86%E6%9B%B2%E7%BA%BF%E5%AF%86%E7%A0%81%E7%AE%97%E6%B3%95%E5%9C%A8%E6%AF%94%E7%89%B9%E5%B8%81%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<h1 id="ç®€ä»‹"><a class="markdownIt-Anchor" href="#ç®€ä»‹"></a> ç®€ä»‹</h1><ul><li>ä¸åŒäºä»¥å¤ªåŠçš„è´¦æˆ·æ¨¡å‹ï¼Œæ¯”ç‰¹å¸é‡‡ç”¨çš„æ˜¯UTXOæ¨¡å‹ï¼Œæ¯”ç‰¹å¸çš„æ‰€æœ‰æƒæ˜¯é€šè¿‡<em>æ•°å­—å¯†é’¥ã€æ¯”ç‰¹å¸åœ°å€å’Œæ•°å­—ç­¾å</em>æ¥ç¡®å®šçš„ã€‚æ•°å­—å¯†é’¥å®é™…ä¸Šå¹¶ä¸å­˜å‚¨åœ¨ç½‘ç»œä¸­ï¼Œè€Œæ˜¯ç”±ç”¨æˆ·ç”Ÿæˆä¹‹åï¼Œå­˜å‚¨åœ¨ä¸€ä¸ªå«åš<em>é’±åŒ…</em>çš„æ–‡ä»¶æˆ–ç®€å•çš„æ•°æ®åº“ä¸­ã€‚ç”¨æˆ·é’±åŒ…ä¸­çš„æ•°å­—å¯†é’¥å®Œå…¨ç‹¬ç«‹äºæ¯”ç‰¹å¸åè®®ï¼Œå¯ç”±ç”¨æˆ·çš„é’±åŒ…è½¯ä»¶ç”Ÿæˆå¹¶ç®¡ç†ï¼Œè€Œæ— éœ€å‚ç…§åŒºå—é“¾æˆ–è®¿é—®äº’è”ç½‘ã€‚</li><li>å¯†é’¥æ˜¯æˆå¯¹å‡ºç°çš„ï¼Œç”±ç§é’¥å’Œå…¬é’¥æ‰€ç»„æˆã€‚å…¬é’¥å°±åƒé“¶è¡Œçš„å¸å·ï¼Œè€Œç§é’¥å°±åƒé“¶è¡Œå¡çš„å¯†ç æˆ–æ”¯ç¥¨çš„ç­¾åã€‚æ¯”ç‰¹å¸çš„ç”¨æˆ·å¾ˆå°‘ä¼šç›´æ¥çœ‹åˆ°æ•°å­—å¯†é’¥ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå®ƒä»¬å­˜å‚¨åœ¨é’±åŒ…æ–‡ä»¶å†…ï¼Œç”±æ¯”ç‰¹å¸é’±åŒ…è½¯ä»¶è¿›è¡Œç®¡ç†ã€‚</li><li>åœ¨æ¯”ç‰¹å¸äº¤æ˜“çš„æ”¯ä»˜ç¯èŠ‚ï¼Œæ”¶æ¬¾äººçš„å…¬é’¥ç”±æ•°å­—æŒ‡çº¹è¡¨ç¤ºï¼Œç§°ä¸º<em>æ¯”ç‰¹å¸åœ°å€</em>ï¼Œå°±åƒæ”¯ç¥¨ä¸Šæ”¶æ¬¾äººåç§° ï¼ˆå³â€œä»˜ç»™è°çš„è´¦æˆ·â€ï¼‰ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæ¯”ç‰¹å¸åœ°å€ç”±å…¬é’¥ç”Ÿæˆå¹¶ä¸ä¹‹å¯¹åº”ã€‚ç„¶è€Œï¼Œå¹¶éæ‰€æœ‰æ¯”ç‰¹å¸åœ°å€éƒ½ä»£è¡¨å…¬é’¥ï¼› ä¹Ÿå¯ä»¥ä»£è¡¨å…¶ä»–æ”¯ä»˜å¯¹è±¡ï¼Œè­¬å¦‚è„šæœ¬ã€‚è¿™æ ·ä¸€æ¥ï¼Œæ¯”ç‰¹å¸åœ°å€å°±å¯ä»¥æŠ½è±¡æˆèµ„é‡‘æ¥æ”¶è€…ï¼Œä½¿å¾—äº¤æ˜“æ›´çµæ´»ï¼Œå°±åƒçº¸è´¨æ”¯ç¥¨ï¼šå¯ä»¥æ”¯ä»˜åˆ°ä¸ªäººè´¦æˆ·æˆ–å…¬å¸è´¦æˆ·ï¼Œä¹Ÿå¯ä»¥æ”¯ä»˜è´¦å•å’Œç°é‡‘ã€‚æ¯”ç‰¹å¸åœ°å€æ˜¯å¯†é’¥è¢«ç”¨æˆ·èƒ½å¤Ÿçœ‹åˆ°çš„å”¯ä¸€å½¢å¼ï¼Œå› ä¸ºè¿™ä¸ªåœ°å€å°±æ˜¯éœ€è¦å‘Šè¯‰åˆ«äººçš„ã€‚</li><li>ä»¥ä¸Šæ˜¯å¯¹æ¯”ç‰¹å¸å’Œå¯†ç å­¦åº”ç”¨çš„ç®€å•æ¦‚è¿°ï¼Œè€Œæœ¬ç¯‡æ–‡ç« å°†é‡ç‚¹å…³æ³¨æ¤­åœ†æ›²çº¿å¯†ç ç®—æ³•åœ¨æ¯”ç‰¹å¸ä¸­çš„åº”ç”¨ï¼Œå°†ä»ä¸ä¹‹å¯†åˆ‡ç›¸å…³çš„å¯†é’¥ä¸åœ°å€ã€é’±åŒ…ã€äº¤æ˜“ä¸‰éƒ¨åˆ†ä»‹ç»ç›¸å…³å†…å®¹ã€‚</li></ul><h1 id="å¯†é’¥ä¸åœ°å€"><a class="markdownIt-Anchor" href="#å¯†é’¥ä¸åœ°å€"></a> å¯†é’¥ä¸åœ°å€</h1><ul><li>åœ¨æ¯”ç‰¹å¸ç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬ç”¨å…¬é’¥å¯†ç å­¦æŠ€æœ¯åˆ›å»ºä¸€ä¸ªå¯†é’¥å¯¹ï¼Œç”¨äºæ§åˆ¶å¯¹æ¯”ç‰¹å¸çš„è®¿é—®ã€‚å¯†é’¥å¯¹åŒ…æ‹¬ä¸€ä¸ªç§é’¥ï¼Œå’Œç”±å…¶è¡ç”Ÿå‡ºçš„å”¯ä¸€çš„å…¬é’¥ã€‚å…¬é’¥ç”¨äºæ¥æ”¶æ¯”ç‰¹å¸ï¼Œè€Œç§é’¥ç”¨äºæ”¯ä»˜æ—¶è¿›è¡Œäº¤æ˜“ç­¾åã€‚</li><li>æ¯”ç‰¹å¸æ­£æ˜¯ä½¿ç”¨æ¤­åœ†æ›²çº¿å¯†ç ç®—æ³•ä½œä¸ºå…¶å…¬é’¥å¯†ç å­¦çš„åŸºç¡€ã€‚</li></ul><h2 id="ç§é’¥ä¸å…¬é’¥ä¸åœ°å€"><a class="markdownIt-Anchor" href="#ç§é’¥ä¸å…¬é’¥ä¸åœ°å€"></a> ç§é’¥ä¸å…¬é’¥ä¸åœ°å€</h2><p>ä¸€ä¸ªæ¯”ç‰¹å¸é’±åŒ…ä¸­åŒ…å«ä¸€ç³»åˆ—çš„å¯†é’¥å¯¹ï¼Œæ¯ä¸ªå¯†é’¥å¯¹åŒ…æ‹¬ä¸€ä¸ªç§é’¥å’Œä¸€ä¸ªå…¬é’¥ã€‚ç§é’¥ï¼ˆ<em>k</em>ï¼‰æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œé€šå¸¸æ˜¯éšæœºé€‰å‡ºçš„ã€‚åŸºäºç§é’¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨æ¤­åœ†æ›²çº¿ä¹˜æ³•è¿™ä¸ªå•å‘å¯†ç å‡½æ•°äº§ç”Ÿä¸€ä¸ªå…¬é’¥ï¼ˆ<em>K</em>ï¼‰ã€‚åŸºäºå…¬é’¥ï¼ˆ<em>K</em>ï¼‰ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå•å‘å¯†ç å“ˆå¸Œå‡½æ•°ç”Ÿæˆæ¯”ç‰¹å¸åœ°å€ï¼ˆ<em>A</em>ï¼‰ã€‚ç§é’¥ã€å…¬é’¥å’Œæ¯”ç‰¹å¸åœ°å€ä¹‹é—´çš„å…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/2017zhangyuxuan/picture_backend@master//img/202111271547812.(null)" alt="ç§é’¥ã€å…¬é’¥å’Œæ¯”ç‰¹å¸åœ°å€ä¹‹é—´çš„å…³ç³»" /></p><h2 id="ç§é’¥"><a class="markdownIt-Anchor" href="#ç§é’¥"></a> ç§é’¥</h2><ul><li><p>ç§é’¥å°±æ˜¯ä¸€ä¸ªéšæœºé€‰å‡ºçš„æ•°å­—è€Œå·²ã€‚æ‹¥æœ‰å’Œæ§åˆ¶äº†ç§é’¥ï¼Œå°±ç›¸å½“äºæ§åˆ¶äº†è¯¥ç§é’¥å¯¹åº”çš„æ¯”ç‰¹å¸åœ°å€ä¸­çš„æ‰€æœ‰èµ„é‡‘ã€‚é€šè¿‡è¯æ˜æ¯”ç‰¹å¸äº¤æ˜“ä¸­èµ„é‡‘çš„æ‰€æœ‰æƒï¼Œç§é’¥å¯ä»¥ç”ŸæˆèŠ±è´¹è¯¥ç¬”èµ„é‡‘çš„ç­¾åã€‚</p></li><li><p><em><strong>ä»ä¸€ä¸ªéšæœºæ•°ç”Ÿæˆç§é’¥</strong></em> æ˜¯ç”Ÿæˆå¯†é’¥çš„ç¬¬ä¸€æ­¥ä¹Ÿæ˜¯æœ€é‡è¦çš„ä¸€æ­¥ï¼Œæ˜¯è¦æ‰¾åˆ°è¶³å¤Ÿå®‰å…¨çš„ç†µæºï¼Œå³éšæœºæ€§æ¥æºã€‚ç”Ÿæˆä¸€ä¸ªæ¯”ç‰¹å¸ç§é’¥åœ¨æœ¬è´¨ä¸Šä¸â€œåœ¨1åˆ°2<sup>256</sup>ä¹‹é—´é€‰ä¸€ä¸ªæ•°å­—â€æ— å¼‚ã€‚åªè¦é€‰å–çš„ç»“æœæ˜¯ä¸å¯é¢„æµ‹æˆ–ä¸å¯é‡å¤çš„ï¼Œé‚£ä¹ˆé€‰å–æ•°å­—çš„å…·ä½“æ–¹æ³•å¹¶ä¸é‡è¦ã€‚æ¯”ç‰¹å¸è½¯ä»¶ä½¿ç”¨æ“ä½œç³»ç»Ÿåº•å±‚çš„éšæœºæ•°ç”Ÿæˆå™¨æ¥äº§ç”Ÿ256ä½çš„ç†µï¼ˆéšæœºæ€§ï¼‰ã€‚</p></li><li><p>æ›´å‡†ç¡®åœ°è¯´ï¼Œç§é’¥å¯ä»¥æ˜¯1å’Œn-1ä¹‹é—´çš„ä»»ä½•æ•°å­—ï¼Œå…¶ä¸­næ˜¯ä¸€ä¸ªå¸¸æ•°ï¼ˆn=1.158 * 10<sup>77</sup>ï¼Œç•¥å°äº2<sup>256</sup>ï¼‰ï¼Œå¹¶è¢«å®šä¹‰ä¸ºç”±æ¯”ç‰¹å¸æ‰€ä½¿ç”¨çš„æ¤­åœ†æ›²çº¿çš„é˜¶ï¼ˆæ¯”ç‰¹å¸ä½¿ç”¨çš„æ˜¯ <strong>secp256k1</strong> æ ‡å‡†æ‰€å®šä¹‰çš„ä¸€ç§ç‰¹æ®Šçš„æ¤­åœ†æ›²çº¿å’Œä¸€ç³»åˆ—æ•°å­¦å¸¸æ•°ã€‚è¯¥æ ‡å‡†ç”±ç¾å›½å›½å®¶æ ‡å‡†ä¸æŠ€æœ¯ç ”ç©¶é™¢ ï¼ˆNISTï¼‰å»ºç«‹ï¼‰ã€‚è¦ç”Ÿæˆè¿™æ ·çš„ä¸€ä¸ªç§é’¥ï¼Œæˆ‘ä»¬éšæœºé€‰æ‹©ä¸€ä¸ª256ä½çš„æ•°å­—ï¼Œå¹¶æ£€æŸ¥å®ƒæ˜¯å¦å°äºn-1ã€‚ä»ç¼–ç¨‹çš„è§’åº¦æ¥çœ‹ï¼Œä¸€èˆ¬æ˜¯é€šè¿‡åœ¨ä¸€ä¸ªå¯†ç å­¦å®‰å…¨çš„éšæœºæºä¸­å–å‡ºä¸€é•¿ä¸²éšæœºå­—èŠ‚ï¼Œå¯¹å…¶ä½¿ç”¨SHA256å“ˆå¸Œç®—æ³•è¿›è¡Œè¿ç®—ï¼Œè¿™æ ·å°±å¯ä»¥æ–¹ä¾¿åœ°äº§ç”Ÿä¸€ä¸ª256ä½çš„æ•°å­—ã€‚å¦‚æœè¿ç®—ç»“æœå°äºnï¼Œæˆ‘ä»¬å°±æœ‰äº†ä¸€ä¸ªåˆé€‚çš„ç§é’¥ã€‚å¦åˆ™ï¼Œæˆ‘ä»¬å°±ç”¨å¦ä¸€ä¸ªéšæœºæ•°å†é‡å¤ä¸€æ¬¡ã€‚</p></li><li><h2 id="å…¬é’¥"><a class="markdownIt-Anchor" href="#å…¬é’¥"></a> å…¬é’¥</h2></li></ul><p>ä»¥ä¸€ä¸ªéšæœºç”Ÿæˆçš„ç§é’¥<em>k</em>ä¸ºèµ·ç‚¹ï¼Œå°†å…¶ä¹˜ä»¥æ›²çº¿ä¸Šä¸€ä¸ªé¢„å®šçš„ç‚¹ï¼Œå«åš<em>ç”Ÿæˆç‚¹G</em>å¾—åˆ°æ›²çº¿ä¸Šçš„å¦ä¸€ç‚¹ï¼Œè¿™å°±æ˜¯ç›¸åº”çš„å…¬é’¥ <em>K</em>ã€‚ç”Ÿæˆç‚¹æ˜¯secp256k1æ ‡å‡†çš„ä¸€éƒ¨åˆ†ï¼Œæ¯”ç‰¹å¸å¯†é’¥çš„ç”Ÿæˆç‚¹éƒ½æ˜¯ç›¸åŒçš„ï¼š</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>K</mi><mo>=</mo><mi>k</mi><mo>âˆ—</mo><mi>G</mi></mrow><annotation encoding="application/x-tex">K = k * G</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">G</span></span></span></span></span></p><p>å…¶ä¸­<em>k</em>æ˜¯ç§é’¥ï¼Œ<em>G</em>æ˜¯ç”Ÿæˆç‚¹ï¼Œåœ¨è¯¥æ›²çº¿ä¸Šæ‰€å¾—çš„ç‚¹<em>K</em>æ˜¯å…¬é’¥ã€‚å› ä¸ºæ‰€æœ‰æ¯”ç‰¹å¸ç”¨æˆ·çš„ç”Ÿæˆç‚¹æ˜¯ç›¸åŒçš„ï¼Œä¸€ä¸ªç§é’¥<em>k</em>ä¹˜ä»¥<em>G</em>å°†å¾—åˆ°ç›¸åŒçš„å…¬é’¥<em>K</em>ã€‚<em>k</em>å’Œ<em>K</em>ä¹‹é—´çš„å…³ç³»æ˜¯å›ºå®šçš„ï¼Œä½†åªèƒ½å•å‘è¿ç®—ï¼Œå³ä»<em>k</em>å¾—åˆ°<em>K</em>ã€‚è¿™å°±æ˜¯å¯ä»¥æŠŠæ¯”ç‰¹å¸åœ°å€ï¼ˆ<em>K</em>çš„è¡ç”Ÿï¼‰ ä¸ä»»ä½•äººå…±äº«è€Œä¸ä¼šæ³„éœ²ç§é’¥ï¼ˆ<em>k</em>ï¼‰çš„åŸå› ã€‚</p><p>å®ç°äº†æ¤­åœ†æ›²çº¿ä¹˜æ³•ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨éšæœºäº§ç”Ÿçš„ç§é’¥<em>k</em>å’Œä¸ç”Ÿæˆç‚¹<em>G</em>ç›¸ä¹˜å¾—åˆ°å…¬é’¥<em>K</em>ã€‚ä¸‹é¢ç»™å‡ºä¸€ä¸ªç®€å•ä¾‹å­ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs Bash">k = 1E99423A4ED27608A15A2616A2B0E9E52CED330AC530EDCC32C8FFC6A526AEDD <br>K = k * G<br><br>å…¬é’¥Kè¢«å®šä¹‰ä¸ºä¸€ä¸ªç‚¹ K = (x, y) ï¼Œå…¶ä¸­ï¼š<br>x = F028892BAD7ED57D2FB57BF33081D5CFCF6F9ED3D3D7F159C2E2FFF579DC341A <br>y = 07CF33DA18BD734C600B96A72BBC4749D5141C90EC8AC328AE52DDFE2E505BDB<br></code></pre></td></tr></table></figure><h2 id="æ¯”ç‰¹å¸åœ°å€"><a class="markdownIt-Anchor" href="#æ¯”ç‰¹å¸åœ°å€"></a> æ¯”ç‰¹å¸åœ°å€</h2><p>æ¯”ç‰¹å¸åœ°å€å¯ç”±å…¬é’¥ç»è¿‡å•å‘å“ˆå¸Œç®—æ³•å¾—åˆ°ã€‚å¯†ç å­¦å“ˆå¸Œç®—æ³•æ˜¯ä¸€ç§å•å‘å‡½æ•°ï¼Œæ¥æ”¶ä»»æ„é•¿åº¦çš„è¾“å…¥äº§ç”ŸæŒ‡çº¹æˆ–å“ˆå¸Œã€‚å“ˆå¸Œå‡½æ•°åœ¨æ¯”ç‰¹å¸ä¸­è¢«å¹¿æ³›ä½¿ç”¨ ï¼šæ¯”ç‰¹å¸åœ°å€ã€è„šæœ¬åœ°å€ä»¥åŠåœ¨æŒ–çŸ¿ä¸­çš„å·¥ä½œé‡è¯æ˜ç®—æ³•ã€‚ç”±å…¬é’¥ç”Ÿæˆæ¯”ç‰¹å¸åœ°å€æ—¶ä½¿ç”¨çš„ç®—æ³•æ˜¯Secure Hash Algorithm (SHA)å’Œthe RACE Integ rity Primitives Evaluation Message Digest (RIPEMD)ï¼Œå…·ä½“æ¥è¯´æ˜¯SHA256å’ŒRIPEMD160ã€‚</p><p>ä»¥å…¬é’¥ <em>K</em> ä¸ºè¾“å…¥ï¼Œè®¡ç®—å…¶SHA256å“ˆå¸Œå€¼ï¼Œå¹¶ä»¥æ­¤ç»“æœè®¡ç®—RIPEMD160 å“ˆå¸Œå€¼ï¼Œå¾—åˆ°ä¸€ä¸ªé•¿åº¦ä¸º160ä½ï¼ˆ20å­—èŠ‚ï¼‰çš„æ•°å­—ï¼š</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><mo>=</mo><mi>R</mi><mi>I</mi><mi>P</mi><mi>E</mi><mi>M</mi><mi>D</mi><mn>160</mn><mo stretchy="false">(</mo><mi>S</mi><mi>H</mi><mi>A</mi><mn>256</mn><mo stretchy="false">(</mo><mi>K</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">A = RIPEMD160(SHA256(K))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mord">1</span><span class="mord">6</span><span class="mord">0</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="mord mathdefault">A</span><span class="mord">2</span><span class="mord">5</span><span class="mord">6</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="mclose">)</span><span class="mclose">)</span></span></span></span></span></p><p>å…¬å¼ä¸­ï¼Œ<em>K</em>æ˜¯å…¬é’¥ï¼Œ<em>A</em>æ˜¯ç”Ÿæˆçš„æ¯”ç‰¹å¸åœ°å€ã€‚</p><p>é€šå¸¸ç”¨æˆ·è§åˆ°çš„æ¯”ç‰¹å¸åœ°å€æ˜¯ç»è¿‡â€œ<strong>Base58Check</strong>â€ç¼–ç çš„ï¼ˆå‚è§ä¸‹é¢çš„â€œBase58Check Encodingâ€ä¸€å›¾ï¼‰ï¼Œè¿™ç§ç¼–ç ä½¿ç”¨äº†58ä¸ªå­—ç¬¦ï¼ˆBase58æ•°å­—ç³»ç»Ÿï¼‰å’Œæ ¡éªŒç ï¼Œæé«˜äº†å¯è¯»æ€§ã€é¿å…æ­§ä¹‰å¹¶æœ‰æ•ˆé˜²æ­¢äº†åœ¨åœ°å€è½¬å½•å’Œè¾“å…¥ä¸­äº§ç”Ÿçš„é”™è¯¯ã€‚Base58Checkç¼–ç ä¹Ÿè¢«ç”¨äºæ¯”ç‰¹å¸çš„å…¶å®ƒåœ°æ–¹ï¼Œä¾‹å¦‚æ¯”ç‰¹å¸åœ°å€ã€ç§é’¥ã€åŠ å¯†çš„å¯†é’¥å’Œè„šæœ¬å“ˆå¸Œä¸­ï¼Œç”¨æ¥æé«˜å¯è¯»æ€§å’Œå½•å…¥çš„æ­£ç¡®æ€§ã€‚</p><center class="half"> <img src="https://cdn.jsdelivr.net/gh/2017zhangyuxuan/picture_backend@master//img/202111271513682.(null)" width="300"></img><img src="https://cdn.jsdelivr.net/gh/2017zhangyuxuan/picture_backend@master//img/202111271513117.(null)" width="400"></img></center><hr /><ul><li><strong>WIF(Wallet import format)</strong> é’±åŒ…å¯¼å…¥æ ¼å¼ï¼Œ(ä¹Ÿè¢«ç§°ä¸ºç”µå­é’±åŒ…çš„å¯¼å‡ºæ ¼å¼)æ˜¯ä¸€ç§ç§æœ‰çš„ ESCDSA (æ¤­åœ†æ›²çº¿ç­¾åç®—æ³•) ç§˜é’¥ï¼Œæ„åœ¨ä½¿ç§é’¥æ›´å®¹æ˜“å¤åˆ¶ï¼Œç§é’¥çš„å„ç§å½¢å¼å¦‚ä¸‹è¡¨æ‰€ç¤ºã€‚</li></ul><table><thead><tr><th>Type</th><th>Prefix</th><th>Description</th></tr></thead><tbody><tr><td>Raw</td><td>None</td><td>32å­—èŠ‚</td></tr><tr><td>Hex</td><td>None</td><td>64ä½Hexç¼–ç </td></tr><tr><td>WIF</td><td>5</td><td>ä½¿ç”¨Base58Checkè¿›è¡Œç¼–ç </td></tr><tr><td>WIF-compressed</td><td>K or L</td><td>ä½¿ç”¨Base58Checkè¿›è¡Œç¼–ç ï¼Œä½†åœ¨ç¼–ç å‰å¢åŠ åç¼€0x01</td></tr></tbody></table><table><thead><tr><th style="text-align:left">Format</th><th>Private key</th></tr></thead><tbody><tr><td style="text-align:left">Hex</td><td>1e99423a4ed27608a15a2616a2b0e9e52ced330ac530edcc32c8ffc6a526aedd</td></tr><tr><td style="text-align:left">WIF</td><td>5J3mBbAH58CpQ3Y5RNJpUKPE62SQ5tfcvU2JpbnkeyhfsYB1Jcn</td></tr><tr><td style="text-align:left">WIF-compressed</td><td>KxFC1jmwwCoACiCAWZ3eXa96mBM6tb3TYzGmf6YwgdGWZgawvrtJ</td></tr></tbody></table><ul><li>å…¬é’¥ä¹Ÿå¯ä»¥ç”¨å¤šç§ä¸åŒæ ¼å¼æ¥è¡¨ç¤ºï¼Œé€šå¸¸åˆ†ä¸ºéå‹ç¼©æ ¼å¼æˆ–å‹ç¼©æ ¼å¼å…¬é’¥è¿™ä¸¤ç§å½¢å¼ã€‚</li><li>æˆ‘ä»¬ä»å‰æ–‡å¯çŸ¥ï¼Œå…¬é’¥æ˜¯åœ¨æ¤­åœ†æ›²çº¿ä¸Šçš„ä¸€ä¸ªç‚¹ï¼Œç”±ä¸€å¯¹åæ ‡ï¼ˆxï¼Œyï¼‰ç»„æˆã€‚å…¬é’¥é€šå¸¸è¡¨ç¤ºä¸ºå‰ç¼€04ç´§æ¥ç€ä¸¤ä¸ª256ä½çš„æ•°å­—ã€‚å…¶ä¸­ä¸€ä¸ª256ä½æ•°å­—æ˜¯å…¬é’¥çš„xåæ ‡ï¼Œå¦ä¸€ä¸ª256ä½æ•°å­—æ˜¯yåæ ‡ã€‚å‰ç¼€04æ˜¯æ˜¯éå‹ç¼©æ ¼å¼å…¬é’¥ï¼Œ å‹ç¼©æ ¼å¼å…¬é’¥æ˜¯ä»¥02æˆ–è€…03å¼€å¤´ã€‚</li><li>æ­£å¦‚å‰é¢æ‰€è¯´ï¼Œä¸€ä¸ªå…¬é’¥æ˜¯ä¸€ä¸ªæ¤­åœ†æ›²çº¿ä¸Šçš„ç‚¹(x, y)ã€‚è€Œæ¤­åœ†æ›²çº¿å®é™…æ˜¯ä¸€ä¸ªæ•°å­¦æ–¹ç¨‹ï¼Œæ›²çº¿ä¸Šçš„ç‚¹å®é™…æ˜¯è¯¥æ–¹ç¨‹çš„ä¸€ä¸ªè§£ã€‚å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬çŸ¥é“äº†å…¬é’¥çš„xåæ ‡ï¼Œå°±å¯ä»¥é€šè¿‡è§£æ–¹ç¨‹æ¥å¾—åˆ°yåæ ‡ã€‚è¿™å¯ä»¥è®©æˆ‘ä»¬åªå­˜å‚¨å…¬é’¥çš„xåæ ‡ï¼Œç•¥å»yåæ ‡ï¼Œä»è€Œå°†å…¬é’¥çš„å¤§å°å’Œå­˜å‚¨ç©ºé—´å‡å°‘äº†256ä½ã€‚è¿™æ ·æ¯ç¬”äº¤æ˜“éœ€è¦çš„å­—èŠ‚æ•°å°±ä¼šå‡å°‘è®¸å¤šï¼Œéšç€æ—¶é—´æ¨ç§»ï¼Œå°±èƒ½ä¿å­˜æ›´å¤šçš„äº¤æ˜“æ•°æ®ã€‚</li><li>æœªå‹ç¼©æ ¼å¼å…¬é’¥ä½¿ç”¨04ä½œä¸ºå‰ç¼€ï¼Œè€Œå‹ç¼©æ ¼å¼å…¬é’¥æ˜¯ä»¥02æˆ–03ä½œä¸ºå‰ç¼€ã€‚ä¸ºä»€ä¹ˆä¼šæœ‰ä¸¤ä¸ªå‰ç¼€ï¼šå½“<strong>æˆ‘ä»¬åœ¨ç´ æ•°pé˜¶çš„æœ‰é™åŸŸä¸Šä½¿ç”¨äºŒè¿›åˆ¶ç®—æœ¯è®¡ç®—æ¤­åœ†æ›²çº¿çš„æ—¶å€™ï¼Œyåæ ‡å¯èƒ½æ˜¯å¶æ•°æˆ–è€…å¥‡æ•°</strong>ã€‚å› æ­¤ï¼Œä¸ºäº†åŒºåˆ†yåæ ‡çš„ä¸¤ç§å¯èƒ½å€¼ï¼Œåœ¨ç”Ÿæˆå‹ç¼©æ ¼å¼å…¬é’¥æ—¶ï¼Œå¦‚æœyæ˜¯å¶æ•°ï¼Œåˆ™ä½¿ç”¨02ä½œä¸ºå‰ç¼€ï¼›å¦‚æœyæ˜¯å¥‡æ•°ï¼Œåˆ™ä½¿ç”¨03ä½œä¸ºå‰ç¼€ã€‚è¿™æ ·å°±å¯ä»¥è®©è½¯ä»¶èƒ½å¤Ÿæ ¹æ®xåæ ‡ï¼Œæ­£ç¡®æ¨å¯¼å‡ºå¯¹åº”çš„yåæ ‡ï¼Œä»è€Œå°†å…¬é’¥è§£å‹ç¼©ä¸ºåœ¨æ¤­åœ†æ›²çº¿ä¸Šç‚¹çš„å®Œæ•´åæ ‡ã€‚ä¸‹å›¾é˜é‡Šäº†å…¬é’¥å‹ç¼©çš„è¿‡ç¨‹ï¼š</li></ul><p><img src="https://cdn.jsdelivr.net/gh/2017zhangyuxuan/picture_backend@master//img/202111271547830.(null)"  height="50%" width="50%" align="center"> </img></p><p class="note note-primary"> æ³¨æ„ï¼šå®é™…ä¸Šâ€œå‹ç¼©æ ¼å¼ç§é’¥â€æ˜¯ä¸€ç§åç§°ä¸Šçš„è¯¯å¯¼ï¼Œå› ä¸ºå½“ç§é’¥ä½¿ç”¨WIFå‹ç¼©æ ¼å¼å¯¼å‡ºæ—¶ï¼Œä¸ä½†æ²¡æœ‰å‹ç¼©ï¼Œåè€Œæ¯”â€œéå‹ç¼©æ ¼å¼â€ç§é’¥é•¿å‡ºä¸€ä¸ªå­—èŠ‚ã€‚è¿™ä¸ªå¤šå‡ºæ¥çš„ä¸€ä¸ªå­—èŠ‚æ˜¯ç§é’¥è¢«åŠ äº†åç¼€01ï¼Œç”¨ä»¥è¡¨æ˜è¯¥ç§é’¥æ˜¯æ¥è‡ªäºä¸€ä¸ªè¾ƒæ–°çš„é’±åŒ…ï¼Œåªèƒ½è¢«ç”¨æ¥ç”Ÿæˆå‹ç¼©å…¬é’¥ã€‚ç§é’¥å¹¶æ²¡æœ‰å‹ç¼©çš„ï¼Œä¹Ÿä¸èƒ½è¢«å‹ç¼©ã€‚â€œå‹ç¼©ç§é’¥â€å®é™…ä¸Šè¡¨ç¤ºâ€œåªèƒ½ç”Ÿæˆå‹ç¼©å…¬é’¥çš„ç§é’¥â€ï¼Œè€Œâ€œéå‹ç¼©ç§é’¥â€ç”¨æ¥è¡¨æ˜â€œåªèƒ½ç”Ÿæˆéå‹ç¼©å…¬é’¥çš„ç§é’¥â€ã€‚ä¸ºé¿å…æ›´å¤šè¯¯è§£ï¼Œåº”è¯¥åªå¯ä»¥è¯´å¯¼å‡ºæ ¼å¼ æ˜¯â€œWIFå‹ç¼©æ ¼å¼â€æˆ–è€…â€œWIFâ€ï¼Œè€Œä¸èƒ½è¯´è¿™ä¸ªç§é’¥æ˜¯â€œå‹ç¼©â€çš„ã€‚</p><h1 id="é’±åŒ…"><a class="markdownIt-Anchor" href="#é’±åŒ…"></a> é’±åŒ…</h1><ul><li>å¹¿ä¹‰ä¸Šï¼Œé’±åŒ…æ˜¯ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œä¸ºç”¨æˆ·æä¾›äº¤äº’ç•Œé¢ã€‚é’±åŒ…æ§åˆ¶ç”¨æˆ·èµ„é‡‘è®¿é—®æƒé™ï¼Œç®¡ç†å¯†é’¥å’Œåœ°å€ï¼Œè·Ÿè¸ªä½™é¢ä»¥åŠåˆ›å»ºå’Œç­¾åäº¤æ˜“ã€‚</li><li>ç‹­ä¹‰ä¸Šï¼Œâ€œé’±åŒ…â€æ˜¯æŒ‡ç”¨äºå­˜å‚¨å’Œç®¡ç†ç”¨æˆ·å¯†é’¥çš„æ•°æ®ç»“æ„ã€‚</li><li>åœ¨è¿™ä¸€å°èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†æ›´å…³æ³¨é’±åŒ…æ˜¯å¯†é’¥å®¹å™¨çš„è¿™ä¸€è§’åº¦ï¼Œæ¢ç´¢æ¤­åœ†æ›²çº¿ç®—æ³•åœ¨å…¶ä¸­çš„åº”ç”¨ã€‚</li></ul><h2 id="hdåˆ†å±‚é’±åŒ…"><a class="markdownIt-Anchor" href="#hdåˆ†å±‚é’±åŒ…"></a> HDåˆ†å±‚é’±åŒ…</h2><p>æ ¹æ®é’±åŒ…åŒ…å«çš„å¤šä¸ªå¯†é’¥ä¹‹é—´æ˜¯å¦æœ‰å…³ç³»ï¼Œä¸»è¦åˆ†ä¸ºä¸¤ç§ç±»å‹ï¼š</p><ul><li><p>ç¬¬ä¸€ç§ç±»å‹æ˜¯<em>éç¡®å®šæ€§é’±åŒ…ï¼ˆnondeterministic walletï¼‰</em>ï¼Œå…¶ä¸­æ¯ä¸ªå¯†é’¥éƒ½æ˜¯ä»éšæœºæ•°ç‹¬ç«‹ç”Ÿæˆçš„ã€‚å¯†é’¥å½¼æ­¤æ— å…³ã€‚</p></li><li><p>ç¬¬äºŒç§ç±»å‹æ˜¯ç¡®å®šæ€§é’±åŒ…ï¼ˆdeterministic walletï¼‰ï¼Œå…¶ä¸­æ‰€æœ‰çš„å¯†é’¥éƒ½æ˜¯ä»ä¸€ä¸ªä¸»å¯†é’¥æ´¾ç”Ÿå‡ºæ¥ï¼Œè¿™ä¸ªä¸»å¯†é’¥å³ä¸ºç§å­ï¼ˆseedï¼‰ã€‚è¯¥ç±»å‹é’±åŒ…ä¸­æ‰€æœ‰å¯†é’¥éƒ½ç›¸äº’å…³è”ï¼Œå¦‚æœæœ‰åŸå§‹ç§å­ï¼Œåˆ™å¯ä»¥å†æ¬¡ç”Ÿæˆå…¨éƒ¨å¯†é’¥ã€‚ç¡®å®šæ€§é’±åŒ…ä¸­ä½¿ç”¨äº†è®¸å¤šä¸åŒçš„å¯†é’¥æ¨å¯¼æ–¹æ³•ã€‚æœ€å¸¸ç”¨çš„æ¨å¯¼æ–¹æ³•æ˜¯ä½¿ç”¨æ ‘çŠ¶ç»“æ„ï¼Œç§°ä¸ºåˆ†å±‚ç¡®å®šæ€§ï¼ˆhierarchical deterministicï¼‰é’±åŒ…æˆ–HDé’±åŒ…ã€‚</p><ul><li>ç›¸æ¯”éšæœºï¼ˆä¸ç¡®å®šæ€§ï¼‰å¯†é’¥ï¼ŒHDé’±åŒ…æœ‰ä¸¤ä¸ªä¸»è¦çš„ä¼˜åŠ¿ã€‚ç¬¬ä¸€ï¼Œæ ‘çŠ¶ç»“æ„å¯ä»¥è¢«ç”¨æ¥è¡¨è¾¾é™„åŠ çš„ç»„ç»‡å«ä¹‰ï¼Œæ¯”å¦‚å­å¯†é’¥çš„ç‰¹å®šåˆ†æ”¯ç”¨æ¥æ¥æ”¶äº¤æ˜“æ”¶å…¥æ¬¾é¡¹ï¼Œå¦ä¸€ä¸ªåˆ†æ”¯ç”¨æ¥è´Ÿè´£æ¥æ”¶å¯¹å¤–ä»˜æ¬¾çš„æ‰¾é›¶ã€‚å¯†é’¥çš„åˆ†æ”¯ä¹Ÿå¯ä»¥ç”¨äºå…¬å¸è®¾ç½®ï¼Œå°†ä¸åŒçš„åˆ†æ”¯åˆ†é…ç»™éƒ¨é—¨ã€å­å…¬å¸ã€ç‰¹å®šåŠŸèƒ½æˆ–ä¼šè®¡ç±»åˆ«ã€‚</li><li>HDé’±åŒ…çš„ç¬¬äºŒä¸ªå¥½å¤„æ˜¯ï¼Œç”¨æˆ·å¯ä»¥åˆ›å»ºä¸€ç³»åˆ—å…¬é’¥ï¼Œè€Œä¸éœ€è¦è®¿é—®å¯¹åº”çš„ç§é’¥ã€‚è¿™æ ·ï¼ŒHDé’±åŒ…å°±èƒ½ç”¨åœ¨ä¸å®‰å…¨çš„æœåŠ¡å™¨ä¸Šï¼Œæˆ–è€…ä»…ä½œä¸ºæ¥æ”¶ç”¨é€”ï¼Œå®ƒä¸ºæ¯ä¸ªäº¤æ˜“å‘å¸ƒä¸åŒçš„å…¬é’¥ã€‚å…¬é’¥ä¸éœ€è¦è¢«é¢„å…ˆåŠ è½½æˆ–è€…æå‰è¡ç”Ÿï¼ŒæœåŠ¡å™¨ä¹Ÿä¸éœ€è¦æœ‰ç”¨æ¥æ”¯ä»˜çš„ç§é’¥ã€‚</li></ul></li></ul><hr /><p>HDé’±åŒ…å¯†é’¥çš„ç”Ÿæˆè¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼šé€šè¿‡è®°åŠ©è¯å’Œ Salt ç”ŸæˆRoot Seedç§å­ï¼Œå†é€šè¿‡HMAC-SHA512ï¼ˆå•å‘å“ˆå¸Œï¼‰ï¼Œè¾“å‡º512ä½bitsï¼Œå…¶ä¸­å·¦256ä½ä½œä¸ºä¸»ç§é’¥ï¼ˆé€šè¿‡æ¤­åœ†æ›²çº¿å¯†ç ç®—æ³•å¯ç”Ÿæˆä¸»å…¬é’¥ï¼Œé‡‡ç”¨çš„æ˜¯å‹ç¼©å…¬é’¥æ ¼å¼264bitsï¼‰ï¼Œå³256ä½ä½œä¸ºä¸»é“¾ç ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/2017zhangyuxuan/picture_backend@master//img/202111271513500.(null)" width="70%" height="70%" alight="center"> </img></p><blockquote><p>HDé’±åŒ…çš„ç§å­ç”Ÿæˆè¿‡ç¨‹ï¼Œå¹¶æ²¡æœ‰æ¶‰åŠæ¤­åœ†æ›²çº¿å¯†ç ç®—æ³•ï¼Œå› æ­¤è¿™é‡Œä¸å†å±•å¼€ä»‹ç»ï¼Œå…·ä½“è¿‡ç¨‹å¯å‚è€ƒï¼š<br /><a href="https://github.com/tianmingyun/MasterBitcoin2CN/blob/master/ch05.md#523-%E4%BB%8E%E5%8A%A9%E8%AE%B0%E8%AF%8D%E7%94%9F%E6%88%90%E7%A7%8D%E5%AD%90">HDåˆ†å±‚é’±åŒ… ç§å­ç”Ÿæˆè¿‡ç¨‹</a></p></blockquote><h2 id="è¡ç”Ÿå­ç§˜é’¥"><a class="markdownIt-Anchor" href="#è¡ç”Ÿå­ç§˜é’¥"></a> è¡ç”Ÿå­ç§˜é’¥</h2><p><img src="https://cdn.jsdelivr.net/gh/2017zhangyuxuan/picture_backend@master//img/202111271513760.(null)" width="60%" height="60%" aligh="center"> </img></p><ul><li>å­ç§˜é’¥çš„è¡ç”Ÿæ¨å¯¼å¦‚ä¸Šå›¾æ‰€ç¤ºï¼šçˆ¶å…¬é’¥ + çˆ¶é“¾ç  + ç´¢å¼•ä½œä¸ºè¾“å…¥ï¼Œ è¾“å‡º512bitsï¼Œå³256bitsä½œä¸ºå­é“¾ç ï¼›å·¦256bits ä¸ çˆ¶ç§˜é’¥ç»“åˆå¾—åˆ°å­ç§˜é’¥</li><li>è¡ç”Ÿå¾—åˆ°çš„å­ç§é’¥ï¼Œæ¨æ–­ä¸å‡ºå…„å¼Ÿå§å¦¹çš„ç§é’¥ï¼›å¦‚æœæ²¡æœ‰å­é“¾ç ï¼Œä¹Ÿæ— æ³•æ¨æ–­å‡ºå­™å¯†é’¥</li><li>å¯ä»¥å¾—åˆ°å¦‚ä¸‹çš„æ¨å¯¼å…¬å¼ï¼š</li></ul><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs PowerShell">child_private_key == (parent_private_key + lefthand_hash_output) % G<br>child_public_key  == point( (parent_private_key + lefthand_hash_output) % G )<br>child_public_key  == point(child_private_key) == parent_public_key + point(lefthand_hash_output)<br></code></pre></td></tr></table></figure><ul><li><p>å¯ä»¥çœ‹åˆ°ï¼Œå­å…¬é’¥çš„æ¨å¯¼æœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ä¸ªæ˜¯é€šè¿‡ç§é’¥æ¨å¯¼ï¼Œä¸€ä¸ªæ˜¯ç›´æ¥é€šè¿‡å…¬é’¥æ¨å¯¼</p></li><li><p>æ­£å¦‚æˆ‘ä»¬ä¹‹å‰çœ‹åˆ°çš„ï¼Œå¯†é’¥è¡ç”Ÿå‡½æ•°å¯ä»¥è¢«ç”¨æ¥åˆ›é€ å¯†é’¥æ ‘ä¸Šä»»ä½•å±‚çº§çš„å­å¯†é’¥ï¼ŒåŸºäºä»¥ä¸‹ä¸‰ä¸ªè¾“å…¥é‡ï¼šå¯†é’¥ï¼Œé“¾ç ä»¥åŠæƒ³è¦çš„å­å¯†é’¥çš„ç´¢å¼•ã€‚</p><p>å¯†é’¥ä»¥åŠé“¾ç è¿™ä¸¤ä¸ªé‡è¦çš„éƒ¨åˆ†è¢«ç»“åˆä¹‹åï¼Œå°±å«åš</p><p><em>æ‰©å±•å¯†é’¥ï¼ˆextended keyï¼‰</em></p><p>ã€‚æœ¯è¯­â€œæ‰©å±•å¯†é’¥â€ä¹Ÿè¢«è®¤ä¸ºæ˜¯â€œå¯æ‰©å±•çš„å¯†é’¥â€ï¼Œå› ä¸ºè¿™ç§å¯†é’¥å¯ä»¥ç”¨æ¥è¡ç”Ÿå­å¯†é’¥ã€‚</p><ul><li>æ‰©å±•å¯†é’¥ç¼–ç ç”¨çš„ Base58Checkä½¿ç”¨ç‰¹æ®Šçš„ç‰ˆæœ¬å·ï¼ŒBase58ç¼–ç å­—ç¬¦å‰ç¼€åˆ†åˆ«ä¸ºâ€œxprvâ€å’Œâ€œxpubâ€</li></ul></li></ul><center class="half"> <img src="https://cdn.jsdelivr.net/gh/2017zhangyuxuan/picture_backend@master//img/202111271513936.(null)" width="300"></img><img src="https://kwaj2xdt3y.feishu.cn/space/api/box/stream/download/asynccode/?code=MDYwZjYzODI5NTFjOThiYTQ3MzZiM2JhMjAyNWIxNTBfazRleGFLaGlDbFVMOHlsZzllb01uelhQVkJ3SUo5RnJfVG9rZW46Ym94Y256d2Z4M2ZhWWR1NDZmeEtiV2hJOHRlXzE2Mzc5OTcyMDk6MTYzODAwMDgwOV9WNA" width="300"></img></center><ul><li>ä¸Šé¢å·¦å›¾ä¸ºå¸¸è§„è¡ç”Ÿï¼Œç›´æ¥ä½¿ç”¨çˆ¶å…¬é’¥è¡ç”Ÿå­å…¬é’¥ï¼Œè¿™æ ·æ¨å¯¼çš„å¥½å¤„å°±æ˜¯ä¸ç”¨è®¿é—®ç§é’¥ï¼Œå°±èƒ½è¡ç”Ÿæ‰©å±•å‡ºå­å…¬é’¥ï¼Œç”¨äºæ”¶æ¬¾ï¼Œå¯ä»¥ç”¨åœ¨å®‰å…¨æ€§è¾ƒå¼±çš„webæœåŠ¡å™¨ä¸Š<ul><li>ä½†æ˜¯è¿™ç§å¸¸è§„çš„æ‰©å±•æ–¹å¼å­˜åœ¨çš„é—®é¢˜æ˜¯ï¼Œå½“ä¸€ä¸ªæ”»å‡»è€…å¾—åˆ°çˆ¶å…¬é’¥å’Œå¯¹åº”çš„é“¾ç æ—¶ï¼Œä»–å¯ä»¥è¡ç”Ÿæ‰©å±•å‡ºä¹‹åæ‰€æœ‰çš„å­å…¬é’¥å’Œå¯¹åº”é“¾ç ï¼Œå¦‚æœæ­¤æ—¶å†è·å¾—å­ç§é’¥ï¼Œé‚£ä¹ˆå°±å¯ä»¥æ¨å¯¼å‡ºè¿™ä¸ªå­ç§é’¥ä¹‹åæ‰€æœ‰çš„ç§é’¥ï¼ˆå­™ç§é’¥ç­‰ï¼‰ï¼Œç”šè‡³å¯èƒ½ä¼šæ¨å¯¼å‡ºçˆ¶ç§é’¥</li></ul></li></ul><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gcode">child_private_key == <span class="hljs-comment">(parent_private_key + lefthand_hash_output)</span> <span class="hljs-meta">%</span> G<br></code></pre></td></tr></table></figure><ul><li>å³å›¾ä¸ºå¼ºåŒ–è¡ç”Ÿï¼Œä¸ä½¿ç”¨çˆ¶å…¬é’¥ï¼Œç›´æ¥ç”¨çˆ¶ç§é’¥ + çˆ¶é“¾ç  + ç´¢å¼• ä½œä¸ºè¾“å…¥ï¼Œå¾—åˆ°è¾“å‡ºï¼ˆè¿™æ ·å°±ç®—å­å…¬é’¥å’Œå­é“¾ç æš´éœ²äº†ï¼Œä¹Ÿä¸èƒ½æ¨å¯¼å‡ºçˆ¶ç§é’¥ï¼‰<ul><li>ç®€å•æ¥è¯´ï¼Œå¦‚æœæƒ³åˆ©ç”¨xpubçš„ä¾¿æ·æ¥è¡ç”Ÿå…¬é’¥çš„åˆ†æ”¯ï¼Œåˆä¸æƒ³å†’æ³„éœ²é“¾ç çš„é£é™©ï¼Œ å°±è¯¥ä»å¼ºåŒ–çˆ¶å¯†é’¥ï¼Œè€Œä¸æ˜¯å¸¸è§„çˆ¶å¯†é’¥è¡ç”Ÿã€‚æœ€å¥½çš„æ–¹å¼æ˜¯ï¼Œä¸ºäº†é¿å…ä¸»å¯†é’¥æ³„éœ²ï¼Œä¸»å¯†é’¥æ‰€è¡ç”Ÿçš„ç¬¬ä¸€å±‚çº§çš„å­å¯†é’¥æ€»æ˜¯é€šè¿‡å¼ºåŒ–è¡ç”Ÿå¾—æ¥ã€‚</li></ul></li></ul><h1 id="äº¤æ˜“"><a class="markdownIt-Anchor" href="#äº¤æ˜“"></a> äº¤æ˜“</h1><ul><li>æ¯”ç‰¹å¸äº¤æ˜“æ˜¯æ¯”ç‰¹å¸ç³»ç»Ÿä¸­æœ€é‡è¦çš„éƒ¨åˆ†ã€‚æ¯”ç‰¹å¸ä¸­çš„å…¶ä»–ä¸€åˆ‡éƒ½æ˜¯ä¸ºäº†ç¡®ä¿äº¤æ˜“å¯ä»¥è¢«åˆ›å»ºã€åœ¨ç½‘ç»œä¸Šä¼ æ’­ã€éªŒè¯ï¼Œå¹¶æœ€ç»ˆæ·»åŠ åˆ°å…¨å±€äº¤æ˜“åˆ†ç±»è´¦æœ¬ï¼ˆåŒºå—é“¾ï¼‰ä¸­ã€‚æ¯”ç‰¹å¸äº¤æ˜“çš„æœ¬è´¨æ˜¯æ•°æ®ç»“æ„ï¼Œè¿™äº›æ•°æ®ç»“æ„æ˜¯å¯¹æ¯”ç‰¹å¸äº¤æ˜“å‚ä¸è€…ä»·å€¼ä¼ é€’çš„ç¼–ç ã€‚æ¯”ç‰¹å¸åŒºå—é“¾æ˜¯ä¸€æœ¬å…¨å±€å¤å¼è®°è´¦æ€»è´¦ç°¿ï¼Œæ¯ä¸ªæ¯”ç‰¹å¸äº¤æ˜“éƒ½æ˜¯åœ¨æ¯”ç‰¹å¸åŒºå—é“¾ä¸Šçš„ä¸€ä¸ªå…¬å¼€è®°å½•ã€‚</li><li>äº¤æ˜“ä¸»è¦çš„åŠŸèƒ½å°±æ˜¯å®ç°æ¯”ç‰¹å¸çš„è½¬ç§»ï¼Œè€Œå…¶å®ç°è¿‡ç¨‹å°±ç”¨åˆ°äº†å¯†ç å­¦æŠ€æœ¯ã€‚æ”¯ä»˜æ¯”ç‰¹å¸æ—¶ï¼Œæ¯”ç‰¹å¸çš„å½“å‰æ‰€æœ‰è€…éœ€è¦åœ¨äº¤æ˜“ä¸­æäº¤å…¶å…¬é’¥å’Œç­¾åï¼ˆæ¯æ¬¡äº¤æ˜“çš„ç­¾åéƒ½ä¸åŒï¼Œä½†éƒ½ç”±åŒä¸€ä¸ªç§é’¥ç”Ÿæˆï¼‰ã€‚é’ˆå¯¹å±•ç¤ºçš„å…¬é’¥å’Œç­¾åï¼Œæ¯”ç‰¹å¸ç½‘ç»œä¸­çš„æ‰€æœ‰äººéƒ½å¯ä»¥éªŒè¯è¯¥äº¤æ˜“æœ‰æ•ˆå¹¶äºˆä»¥æ¥å—ï¼Œä»è€Œç¡®è®¤æ”¯ä»˜è€…å¯¹è¯¥äº¤æ˜“ä¸­çš„æ¯”ç‰¹å¸çš„æ‰€æœ‰æƒã€‚</li><li>è¿™ä¸€å°èŠ‚ä¸­ï¼Œå°†ä»‹ç»äº¤æ˜“çš„åŸºæœ¬æ•°æ®ç»“æ„ï¼Œå…³æ³¨æ¯”ç‰¹å¸äº¤æ˜“è¿‡ç¨‹çš„å®ç°ï¼Œå¹¶èšç„¦å¯†ç å­¦æŠ€æœ¯çš„ä½¿ç”¨ã€‚</li></ul><h2 id="äº¤æ˜“çš„è¾“å‡º"><a class="markdownIt-Anchor" href="#äº¤æ˜“çš„è¾“å‡º"></a> äº¤æ˜“çš„è¾“å‡º</h2><p>æ¯ä¸€ç¬”æ¯”ç‰¹å¸äº¤æ˜“éƒ½ä¼šåˆ›é€ è¾“å‡ºï¼Œå¹¶è¢«æ¯”ç‰¹å¸æ­£æœ¬è®°å½•ä¸‹æ¥ã€‚å‡ ä¹æ‰€æœ‰çš„è¾“å‡ºï¼Œé™¤äº†ä¸€ä¸ªä¾‹å¤–ï¼ˆè§â€œæ•°æ®è¾“å‡ºæ“ä½œç¬¦â€ï¼ˆOP_RETURNï¼‰ï¼‰ï¼Œéƒ½èƒ½åˆ›é€ ç§°ä¸ºUTXOçš„æ¯”ç‰¹å¸å—ï¼Œç„¶åè¢«æ•´ä¸ªç½‘ç»œè¯†åˆ«ï¼Œä¾›æ‰€æœ‰è€…åœ¨æœªæ¥äº¤æ˜“ä¸­ä½¿ç”¨ã€‚</p><p>äº¤æ˜“è¾“å‡ºåŒ…å«ä¸¤éƒ¨åˆ†ï¼š</p><ul><li><p>ä¸€å®šé‡çš„æ¯”ç‰¹å¸ï¼Œé¢å€¼ä¸ºâ€œèªâ€ï¼ˆsatoshisï¼‰ ï¼Œæ˜¯æœ€å°çš„æ¯”ç‰¹å¸å•ä½ï¼›</p></li><li><p>ç¡®å®šèŠ±è´¹è¾“å‡ºæ‰€éœ€æ¡ä»¶çš„åŠ å¯†éš¾é¢˜ï¼ˆcryptographic puzzleï¼‰ï¼Œè¿™ä¸ªåŠ å¯†éš¾é¢˜ä¹Ÿè¢«ç§°ä¸ºé”å®šè„šæœ¬(locking script), è§è¯è„šæœ¬(witness script), æˆ–è„šæœ¬å…¬é’¥ (scriptPubKey)ã€‚</p><ul><li>åªæœ‰å‡ºç¤ºå¯¹åº”çš„è§£é”è„šæœ¬ï¼ŒæˆåŠŸæ‰§è¡Œé”å®šè„šæœ¬ï¼ˆç›¸å½“äºè¿›è¡Œç­¾åéªŒè¯çš„è¿‡ç¨‹ï¼‰ï¼Œæ‰èƒ½èŠ±è´¹è¿™ç¬”è¾“å‡º</li></ul></li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs JSON"><span class="hljs-string">&quot;vout&quot;</span>: [<br>  &#123;<br>    <span class="hljs-attr">&quot;value&quot;</span>: <span class="hljs-number">0.01500000</span>,<br>    <span class="hljs-attr">&quot;scriptPubKey&quot;</span>: <span class="hljs-string">&quot;OP_DUP OP_HASH160 ab68025513c3dbd2f7b92a94e0581f5d50f654e7 OP_EQUALVERIFY OP_CHECKSIG&quot;</span><br>  &#125;,<br>  &#123;<br>    <span class="hljs-attr">&quot;value&quot;</span>: <span class="hljs-number">0.08450000</span>,<br>    <span class="hljs-attr">&quot;scriptPubKey&quot;</span>: <span class="hljs-string">&quot;OP_DUP OP_HASH160 7f9b1a7fb68d60c536c2fd8aeaa53a8f3cc025a8 OP_EQUALVERIFY OP_CHECKSIG&quot;</span>,<br>  &#125;<br>]<br></code></pre></td></tr></table></figure><h2 id="äº¤æ˜“çš„è¾“å…¥"><a class="markdownIt-Anchor" href="#äº¤æ˜“çš„è¾“å…¥"></a> äº¤æ˜“çš„è¾“å…¥</h2><p>äº¤æ˜“çš„è¾“å…¥åŒ…å«å››ä¸ªå…ƒç´ ï¼š</p><ul><li><p>ä¸€ä¸ªäº¤æ˜“IDï¼Œå¼•ç”¨åŒ…å«å°†è¦æ¶ˆè´¹çš„UTXOçš„äº¤æ˜“</p></li><li><p>ä¸€ä¸ªè¾“å‡ºç´¢å¼•ï¼ˆvoutï¼‰ï¼Œç”¨äºæ ‡è¯†æ¥è‡ªè¯¥äº¤æ˜“çš„å“ªä¸ªUTXOè¢«å¼•ç”¨ï¼ˆç¬¬ä¸€ä¸ªä¸ºé›¶ï¼‰</p></li><li><p>ä¸€ä¸ª scriptSigï¼ˆè§£é”è„šæœ¬ï¼‰ï¼Œæ»¡è¶³UTXOçš„æ¶ˆè´¹æ¡ä»¶ï¼Œè§£é”ç”¨äºæ”¯å‡º</p></li><li><p>ä¸€ä¸ªåºåˆ—å·ï¼Œç”¨äºæŒ‡å®šè¿™ç¬”è¾“å…¥çš„ç”Ÿæ•ˆæ—¶é—´</p></li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs JSON"><span class="hljs-string">&quot;vin&quot;</span>: [<br>  &#123;<br>    <span class="hljs-attr">&quot;txid&quot;</span>: <span class="hljs-string">&quot;7957a35fe64f80d234d76d83a2a8f1a0d8149a41d81de548f0a65a8a999f6f18&quot;</span>,<br>    <span class="hljs-attr">&quot;vout&quot;</span>: <span class="hljs-number">0</span>,<br>    <span class="hljs-attr">&quot;scriptSig&quot;</span> : <span class="hljs-string">&quot;3045022100884d142d86652a3f47ba4746ec719bbfbd040a570b1deccbb6498c75c4ae24cb02204b9f039ff08df09cbe9f6addac960298cad530a863ea8f53982c09db8f6e3813[ALL] 0484ecc0d46f1918b30928fa0e4ed99f16a0fb4fde0735e7ade8416ab9fe423cc5412336376789d172787ec3457eee41c04f4938de5cc17b4a10fa336a8d752adf&quot;</span>,<br>    <span class="hljs-attr">&quot;sequence&quot;</span>: <span class="hljs-number">4294967295</span><br>  &#125;<br>]<br></code></pre></td></tr></table></figure><h2 id="æ•°å­—ç­¾å"><a class="markdownIt-Anchor" href="#æ•°å­—ç­¾å"></a> æ•°å­—ç­¾å</h2><p>åœ¨ä¸Šè¿°äº¤æ˜“çš„è¾“å…¥ä¸­æåˆ°äº†ä¸€ä¸ªå…³é”®å…ƒç´ è§£é”è„šæœ¬ï¼Œå®é™…ä¸Šè¿™å°±æ˜¯åº”ç”¨äº†æ¤­åœ†æ›²çº¿å¯†ç ç®—æ³•çš„æ•°å­—ç­¾åã€‚åœ¨æ¯”ç‰¹å¸çš„ECDSAç®—æ³•çš„å®ç°ä¸­ï¼Œè¢«ç­¾åçš„â€œæ¶ˆæ¯â€æ˜¯äº¤æ˜“ï¼Œæˆ–æ›´ç¡®åˆ‡åœ°è¯´æ˜¯äº¤æ˜“ä¸­ç‰¹å®šæ•°æ®å­é›†çš„å“ˆå¸Œå€¼ã€‚ç­¾åå¯†é’¥æ˜¯ç”¨æˆ·çš„ç§é’¥ï¼Œç»“æœå°±æ˜¯ç­¾åï¼š</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>i</mi><mi>g</mi><mo>=</mo><msub><mi>F</mi><mrow><mi>s</mi><mi>i</mi><mi>g</mi></mrow></msub><mo stretchy="false">(</mo><msub><mi>F</mi><mrow><mi>h</mi><mi>a</mi><mi>s</mi><mi>h</mi></mrow></msub><mo stretchy="false">(</mo><mi>m</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><msub><mi>d</mi><mi>A</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Sig = F_{sig}(F_{hash}(m),  d_A)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">i</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">s</span><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight" style="margin-right:0.03588em;">g</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">h</span><span class="mord mathdefault mtight">a</span><span class="mord mathdefault mtight">s</span><span class="mord mathdefault mtight">h</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">m</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">A</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p><ul><li><p><em>dA</em> æ˜¯ç­¾åç§é’¥</p></li><li><p><em>m</em> æ˜¯äº¤æ˜“ï¼ˆæˆ–å…¶éƒ¨åˆ†æ•°æ®ï¼‰</p></li><li><p><em>Fhash</em> æ˜¯æ•£åˆ—å‡½æ•°</p></li><li><p><em>Fsig</em> æ˜¯ç­¾åç®—æ³•</p></li><li><p><em>Sig</em> æ˜¯ç»“æœç­¾å</p></li></ul><p>å‡½æ•°<em>Fsig</em> äº§ç”Ÿç”±ä¸¤ä¸ªå€¼ç»„æˆçš„ç­¾åSigï¼Œé€šå¸¸ç§°ä¸ºRå’ŒSï¼š</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>i</mi><mi>g</mi><mo>=</mo><mi mathvariant="normal">ï¼ˆ</mi><mi>R</mi><mi mathvariant="normal">ï¼Œ</mi><mi>S</mi><mi mathvariant="normal">ï¼‰</mi></mrow><annotation encoding="application/x-tex">Sig = ï¼ˆRï¼ŒSï¼‰</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">i</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord cjk_fallback">ï¼ˆ</span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord cjk_fallback">ï¼Œ</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord cjk_fallback">ï¼‰</span></span></span></span></span></p><p>ç°åœ¨å·²ç»è®¡ç®—äº†ä¸¤ä¸ªå€¼Rå’ŒSï¼Œå®ƒä»¬å°±ä½¿ç”¨ä¸€ç§ç§°ä¸º<em>å¯åˆ†è¾¨ç¼–ç è§„åˆ™Distinguished Encoding Rules</em>æˆ–<em>DER</em>çš„å›½é™…æ ‡å‡†ç¼–ç æ–¹æ¡ˆï¼Œåºåˆ—åŒ–ä¸ºå­—èŠ‚æµï¼Œæ­£å¦‚æˆ‘ä»¬åœ¨äº¤æ˜“è¾“å…¥çš„JSONå­—ç¬¦ä¸²ä¸­çœ‹åˆ°çš„é‚£æ ·ã€‚</p><hr /><p><strong>ç­¾ååºåˆ—åŒ–ï¼ˆDERï¼‰</strong></p><p>æˆ‘ä»¬å†æ¥ä¹‹å‰åœ¨äº¤æ˜“è¾“å…¥ä¸­å±•ç¤ºçš„ä¸€ä¸ªè§£é”è„šæœ¬ï¼Œå…¶ä¸­ä»¥ä¸‹DERç¼–ç ç­¾åï¼š</p><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs llvm"><span class="hljs-number">3045022100884</span>d<span class="hljs-number">142</span>d<span class="hljs-number">86652</span>a<span class="hljs-number">3</span>f<span class="hljs-number">47</span>ba<span class="hljs-number">4746</span>ec<span class="hljs-number">719</span>bbfbd<span class="hljs-number">040</span>a<span class="hljs-number">570</span>b<span class="hljs-number">1</span>deccbb<span class="hljs-number">6498</span><span class="hljs-keyword">c</span><span class="hljs-number">75</span><span class="hljs-keyword">c</span><span class="hljs-number">4</span>ae<span class="hljs-number">24</span>cb<span class="hljs-number">02204</span>b<span class="hljs-number">9</span>f<span class="hljs-number">039</span>ff<span class="hljs-number">08</span>df<span class="hljs-number">09</span>cbe<span class="hljs-number">9</span>f<span class="hljs-number">6</span>addac<span class="hljs-number">960298</span>cad<span class="hljs-number">530</span>a<span class="hljs-number">863</span>ea<span class="hljs-number">8</span>f<span class="hljs-number">53982</span><span class="hljs-keyword">c</span><span class="hljs-number">09</span>db<span class="hljs-number">8</span>f<span class="hljs-number">6e381301</span><br></code></pre></td></tr></table></figure><p>è¯¥ç­¾åæ˜¯ç”¨æˆ·é’±åŒ…ç”Ÿæˆçš„Rå’ŒSå€¼çš„åºåˆ—åŒ–å­—èŠ‚æµï¼Œè¯æ˜å¯¹åº”ç”¨æˆ·æ‹¥æœ‰æˆæƒèŠ±è´¹è¯¥è¾“å‡ºçš„ç§é’¥ã€‚ åºåˆ—åŒ–æ ¼å¼åŒ…å«ä»¥ä¸‹9ä¸ªå…ƒç´ ï¼š</p><ul><li><p><em>0x30</em>è¡¨ç¤ºDERåºåˆ—çš„å¼€å§‹</p></li><li><p><em>0x45</em> - åºåˆ—çš„é•¿åº¦ï¼ˆ69å­—èŠ‚ï¼‰</p></li><li><p><em>0x02</em> - ä¸€ä¸ªæ•´æ•°å€¼</p></li><li><p><em>0x21</em> - æ•´æ•°çš„é•¿åº¦ï¼ˆ33å­—èŠ‚ï¼‰</p></li><li><p><em>00884d142d86652a3f47ba4746ec719bbfbd040a570b1deccbb6498c75c4ae24cb</em> - Rå€¼</p></li><li><p><em>0x02</em> - æ¥ä¸‹æ¥æ˜¯ä¸€ä¸ªæ•´æ•°</p></li><li><p><em>0x20</em> - æ•´æ•°çš„é•¿åº¦ï¼ˆ32å­—èŠ‚ï¼‰</p></li><li><p><em>4b9f039ff08df09cbe9f6addac960298cad530a863ea8f53982c09db8f6e3813</em> - Så€¼</p></li><li><p>åç¼€ï¼ˆ<em>0x01</em>ï¼‰æŒ‡ç¤ºä½¿ç”¨çš„å“ˆå¸Œçš„ç±»å‹ï¼ˆSIGHASH_ALLï¼‰</p></li></ul><hr /><p><strong>éªŒè¯ç­¾å</strong></p><ul><li>è¦éªŒè¯ç­¾åï¼Œå¿…é¡»æœ‰ç­¾åï¼ˆ<em>R</em>å’Œ<em>S</em>ï¼‰ã€åºåˆ—åŒ–äº¤æ˜“å’Œå…¬é’¥ï¼ˆå¯¹åº”äºç”¨äºåˆ›å»ºç­¾åçš„ç§é’¥ï¼‰ã€‚æœ¬è´¨ä¸Šï¼Œç­¾åçš„éªŒè¯æ„å‘³ç€â€œåªæœ‰ç”Ÿæˆæ­¤å…¬é’¥çš„ç§é’¥çš„æ‰€æœ‰è€…ï¼Œæ‰èƒ½åœ¨æ­¤äº¤æ˜“ä¸Šäº§ç”Ÿæ­¤ç­¾åã€‚â€</li><li>ç­¾åéªŒè¯ç®—æ³•é‡‡ç”¨æ¶ˆæ¯ï¼ˆäº¤æ˜“æˆ–å…¶éƒ¨åˆ†çš„å“ˆå¸Œå€¼ï¼‰ã€ç­¾åè€…çš„å…¬é’¥å’Œç­¾åï¼ˆRå’ŒSå€¼ï¼‰ï¼Œå¦‚æœç­¾åå¯¹è¯¥æ¶ˆæ¯å’Œå…¬é’¥æœ‰æ•ˆï¼Œåˆ™è¿”å› TRUE å€¼ã€‚</li></ul><h2 id="äº¤æ˜“è„šæœ¬"><a class="markdownIt-Anchor" href="#äº¤æ˜“è„šæœ¬"></a> äº¤æ˜“è„šæœ¬</h2><p>æ­£å¦‚ä¹‹å‰å†…å®¹æåˆ°çš„ï¼Œé”å®šè„šæœ¬å’Œè§£é”è„šæœ¬æ­£æ˜¯ç»„æˆæ•°å­—ç­¾åå’Œç­¾åéªŒè¯è¿‡ç¨‹çš„å…³é”®æ•°æ®ã€‚</p><ul><li>é”å®šè„šæœ¬ï¼šé”å®šè„šæœ¬æ˜¯ä¸€ä¸ªæ”¾ç½®åœ¨äº¤æ˜“è¾“å‡ºä¸Šé¢çš„èŠ±è´¹æ¡ä»¶â€”â€”å®ƒæŒ‡å®šäº†ä»ŠåèŠ±è´¹è¿™ç¬”è¾“å‡ºå¿…é¡»è¦æ»¡è¶³çš„æ¡ä»¶ã€‚ ç”±äºé”å®šè„šæœ¬å¾€å¾€å«æœ‰ä¸€ä¸ªå…¬é’¥æˆ–æ¯”ç‰¹å¸åœ°å€ï¼ˆå…¬é’¥å“ˆå¸Œå€¼ï¼‰ï¼Œåœ¨å†å²ä¸Šå®ƒæ›¾è¢«ç§°ä¸º<em>è„šæœ¬å…¬é’¥scriptPubKey</em>ã€‚</li><li>è§£é”è„šæœ¬ï¼šè§£é”è„šæœ¬æ˜¯è¿™æ ·ä¸€ä¸ªè„šæœ¬ï¼Œå®ƒâ€œè§£å†³â€æˆ–æ»¡è¶³ç”±é”å®šè„šæœ¬æ”¾ç½®åœ¨è¾“å‡ºä¸Šçš„æ¡ä»¶ï¼Œå¹¶å…è®¸ä½¿ç”¨è¾“å‡ºã€‚è§£é”è„šæœ¬æ˜¯æ¯ä¸€ç¬”æ¯”ç‰¹å¸äº¤æ˜“è¾“å…¥çš„ä¸€éƒ¨åˆ†ï¼Œè€Œä¸”å¾€å¾€å«æœ‰ä¸€ä¸ªç”±ç”¨æˆ·çš„æ¯”ç‰¹å¸é’±åŒ…ï¼ˆé€šè¿‡ç”¨æˆ·çš„ç§é’¥ï¼‰ç”Ÿæˆçš„æ•°å­—ç­¾åã€‚ç”±äºè§£é”è„šæœ¬å¸¸å¸¸åŒ…å«ä¸€ä¸ªæ•°å­—ç­¾åï¼Œå› æ­¤å®ƒæ›¾è¢«ç§°ä½œ<em>è„šæœ¬ç­¾åScriptSig</em>ã€‚</li><li>å½“ç»“åˆé”å®šè„šæœ¬å’Œè§£é”è„šæœ¬ï¼Œåœ¨å †æ ˆä¸­æ‰§è¡Œè„šæœ¬ï¼Œå¦‚æœå †æ ˆä¸­æœ€åå‰©ä½™çš„ç»“æœä¸ºâ€œTRUEâ€ï¼Œè¡¨æ˜è§£é”è„šæœ¬ä¸­ç­¾åè·Ÿé”å®šè„šæœ¬ä¸­çš„å…¬é’¥å“ˆå¸Œæ˜¯ç›¸åŒ¹é…çš„ï¼Œå³ç”¨äºç­¾åçš„ç§é’¥è·Ÿå…¬é’¥æ˜¯åŒ¹é…çš„ã€‚å…¶ä¸­ï¼Œç­¾åéªŒè¯çš„è¿™ä¸ªéªŒè¯æ“ä½œæ­£æ˜¯é”å®šè„šæœ¬ä¸­ â€œ<strong>OP_CHECKSIG</strong>â€ æ‰€æ‰§è¡Œçš„ï¼Œå³æ¯”å¯¹æ¶ˆæ¯ï¼ˆäº¤æ˜“æˆ–å…¶éƒ¨åˆ†çš„å“ˆå¸Œå€¼ï¼‰ã€ç­¾åè€…çš„å…¬é’¥å’Œç­¾åï¼ˆRå’ŒSå€¼ï¼‰ã€‚</li></ul><hr /><p><strong>è„šæœ¬æ‰§è¡Œ</strong></p><ul><li>åœ¨æœ€åˆç‰ˆæœ¬çš„æ¯”ç‰¹å¸å®¢æˆ·ç«¯ä¸­ï¼Œè§£é”è„šæœ¬å’Œé”å®šè„šæœ¬æŒ‰é¡ºåºè¿èµ·æ¥æ‰§è¡Œã€‚å‡ºäºå®‰å…¨å› ç´ è€ƒè™‘ï¼Œåœ¨2010å¹´å‘ç”Ÿäº†æ”¹å˜ï¼Œå› ä¸ºå­˜åœ¨ä¸€ä¸ªæ¼æ´ï¼Œå…è®¸æ ¼å¼é”™è¯¯çš„è§£é”è„šæœ¬å°†æ•°æ®æ¨é€åˆ°å †æ ˆå¹¶æŸåé”å®šè„šæœ¬ã€‚è€Œåœ¨å½“å‰çš„æ–¹æ¡ˆä¸­ï¼Œè„šæœ¬æ˜¯å•ç‹¬æ‰§è¡Œçš„ï¼Œåœ¨ä¸¤æ¬¡æ‰§è¡Œä¹‹é—´ä¼ è¾“å †æ ˆï¼Œå¦‚ä¸‹æ‰€è¿°ã€‚<ul><li>é¦–å…ˆï¼Œä½¿ç”¨å †æ ˆæ‰§è¡Œå¼•æ“æ‰§è¡Œè§£é”è„šæœ¬ã€‚å¦‚æœè§£é”è„šæœ¬åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­æœªæŠ¥é”™ï¼ˆä¾‹å¦‚ï¼šæ²¡æœ‰ç•™ä¸‹â€œdanglingâ€æ“ä½œç ï¼‰ï¼Œåˆ™å¤åˆ¶ä¸»å †æ ˆï¼Œå¹¶æ‰§è¡Œé”å®šè„šæœ¬ã€‚å¦‚æœä»è§£é”è„šæœ¬ä¸­å¤åˆ¶è€Œæ¥çš„å †æ ˆæ•°æ®æ‰§è¡Œé”å®šè„šæœ¬çš„ç»“æœä¸ºâ€œTRUE&quot;ï¼Œé‚£ä¹ˆè§£é”è„šæœ¬å°±æˆåŠŸåœ°æ»¡è¶³äº†é”å®šè„šæœ¬æ‰€è®¾ç½®çš„æ¡ä»¶ï¼Œå› æ­¤ï¼Œè¯¥è¾“å…¥æ˜¯ä¸€ä¸ªèƒ½ä½¿ç”¨è¯¥UTXOçš„æœ‰æ•ˆæˆæƒã€‚å¦‚æœåˆå¹¶è„šæœ¬æ‰§è¡Œåçš„ç»“æœæ˜¯â€TRUEâ€œä»¥å¤–çš„ä»»ä½•ç»“æœï¼Œè¾“å…¥éƒ½æ˜¯æ— æ•ˆçš„ï¼Œå› ä¸ºå®ƒä¸èƒ½æ»¡è¶³UTXOä¸­æ‰€è®¾ç½®çš„ä½¿ç”¨è¯¥ç¬”èµ„é‡‘çš„æ¡ä»¶ã€‚</li></ul></li></ul><p><img src="https://cdn.jsdelivr.net/gh/2017zhangyuxuan/picture_backend@master//img/202111271513603.(null)" alt="ç»“åˆscriptSigå’ŒscriptPubKeyæ‰§è¡Œè„šæœ¬" /></p><p class="note note-info"> å…·ä½“è„šæœ¬åœ¨å †æ ˆä¸­çš„æ‰§è¡Œè¿‡ç¨‹ï¼Œå¯å‚è€ƒï¼š<a href="https://github.com/tianmingyun/MasterBitcoin2CN/blob/master/ch06.md#644-p2pkhpay-to-public-key-hash">P2PKH è„šæœ¬æ‰§è¡Œæµç¨‹</a></p><h1 id="æ€»ç»“"><a class="markdownIt-Anchor" href="#æ€»ç»“"></a> æ€»ç»“</h1><p>æ¯”ç‰¹å¸ç³»ç»Ÿä¸­å¤§é‡ä½¿ç”¨äº†å¯†ç å­¦æŠ€æœ¯ï¼Œä¾‹å¦‚ä½¿ç”¨æ¤­åœ†æ›²çº¿å¯†ç ç®—æ³•ç”Ÿæˆå¯†é’¥å’Œå…¬é’¥ï¼Œä»¥åŠäº¤æ˜“ä¸­çš„æ•°å­—ç­¾åå’ŒéªŒè¯ï¼Œç¡®ä¿æ¯”ç‰¹å¸çš„æ‰€æœ‰è€…åœ¨è¿›è¡Œè½¬è´¦æ“ä½œã€‚å¯†ç å­¦å®ç°äº†æ¯”ç‰¹å¸çš„è®¸å¤šæœ‰è¶£ç‰¹æ€§ï¼ŒåŒ…æ‹¬å»ä¸­å¿ƒåŒ–ä¿¡ä»»å’Œæ§åˆ¶ã€æ‰€æœ‰æƒè®¤è¯å’ŒåŸºäºå¯†ç å­¦è¯æ˜çš„å®‰å…¨æ¨¡å‹ã€‚å¯ä»¥è¯´ï¼Œå¯†ç å­¦æ˜¯æ¯”ç‰¹å¸å®ç°çš„ä¸€å¤§åŸºçŸ³ã€‚</p><p class="note note-success"> æ›´å¤šæ¯”ç‰¹å¸çŸ¥è¯†å¯å‚è€ƒæˆ‘çš„è¿™ä¸ªGithubé¡¹ç›®ï¼š<a href="https://github.com/2017zhangyuxuan/Learn-Blockchain">æ¯”ç‰¹å¸ç³»ç»Ÿ C++ å®ç°</a></p><h1 id="å‚è€ƒèµ„æ–™é™„å½•"><a class="markdownIt-Anchor" href="#å‚è€ƒèµ„æ–™é™„å½•"></a> å‚è€ƒèµ„æ–™é™„å½•</h1><p><a href="https://github.com/tianmingyun/MasterBitcoin2CN">ã€Šç²¾é€šæ¯”ç‰¹å¸ã€‹ä¸­æ–‡ç”µå­ä¹¦</a></p><p><a href="https://zhuanlan.zhihu.com/p/21298725">æ¯”ç‰¹å¸ï¼ˆåœ°å€ã€ç§é’¥ï¼‰å‹ç¼©ä¸éå‹ç¼©çš„åŒºåˆ«</a></p><p><a href="https://github.com/tianmingyun/MasterBitcoin2CN/blob/master/ch05.md#523-%E4%BB%8E%E5%8A%A9%E8%AE%B0%E8%AF%8D%E7%94%9F%E6%88%90%E7%A7%8D%E5%AD%90">HDåˆ†å±‚é’±åŒ… ç§å­ç”Ÿæˆè¿‡ç¨‹</a></p><p><a href="https://github.com/tianmingyun/MasterBitcoin2CN/blob/master/ch06.md#644-p2pkhpay-to-public-key-hash">P2PKH è„šæœ¬æ‰§è¡Œæµç¨‹</a></p><p><a href="https://bitcoin.stackexchange.com/questions/72657/signature-verification-in-python-using-compressed-public-key">Signature verification in python using compressed public key</a></p><p><a href="https://medium.com/@bitaps.com/exploring-bitcoin-signing-the-p2pkh-input-b8b4d5c4809c">Exploring Bitcoin: signing the P2PKH input</a></p><p><a href="https://www.jianshu.com/p/a560e0605ff2">æ¯”ç‰¹å¸ç§é’¥ï¼Œå…¬é’¥å’Œåœ°å€çš„å…³ç³»</a></p><p><a href="https://live.blockcypher.com/">åœ¨çº¿æœç´¢äº¤æ˜“è®°å½•ã€åŒºå—ä¿¡æ¯ï¼ˆå„ç§æ•°å­—è´§å¸ï¼‰</a></p>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºçŸ¥è¯†</category>
      
      <category>å¯†ç å­¦</category>
      
      <category>æ¯”ç‰¹å¸</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Bitcoin</tag>
      
      <tag>ECDSA</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SM4ç®—æ³•ä»‹ç»ä¸ä»£ç å®ç°</title>
    <link href="/2021/11/13/2021-11/2021-11-13%20SM4/"/>
    <url>/2021/11/13/2021-11/2021-11-13%20SM4/</url>
    
    <content type="html"><![CDATA[<h1 id="sm4ç®—æ³•ä»‹ç»"><a class="markdownIt-Anchor" href="#sm4ç®—æ³•ä»‹ç»"></a> SM4ç®—æ³•ä»‹ç»</h1><h2 id="åŠ å¯†è¿‡ç¨‹"><a class="markdownIt-Anchor" href="#åŠ å¯†è¿‡ç¨‹"></a> åŠ å¯†è¿‡ç¨‹</h2><p><img src="https://cdn.jsdelivr.net/gh/2017zhangyuxuan/picture_backend@master//img/202111131454563.(null)" alt="SM4åŠ å¯†è¿‡ç¨‹" /></p><ul><li>é¦–å…ˆå·¦ä¾§æè¿°äº†SM4åŠ å¯†çš„æ•´ä½“æµç¨‹ï¼š</li></ul><ol><li>è¾“å…¥çš„ä¸€ä¸ªæ¶ˆæ¯åˆ†ç»„ä¸º128bitsï¼Œåˆ’åˆ†æˆ4ä¸ªå°å—ï¼Œæ¯ä¸ªå°å—32bits</li><li>è¿™å››ä¸ªå°å—ç»è¿‡32è½®åŠ å¯†å¤„ç†</li><li>åŠ å¯†å¤„ç†åï¼Œå†ç»è¿‡ä¸€æ¬¡Permutationç½®æ¢ï¼Œå¾—åˆ°æœ€ç»ˆåŠ å¯†ç»“æœ</li></ol><ul><li>å³ä¾§æè¿°å…¶ä¸­ä¸€è½®çš„åŠ å¯†è¿‡ç¨‹ï¼Œå…¶ä»–è½®å‡½æ•°åŠ å¯†è¿‡ç¨‹æ˜¯ç±»ä¼¼çš„ï¼Œåªæ˜¯è½®å¯†é’¥ä¸åŒï¼š</li></ul><ol><li>X_3 å…ˆåè·Ÿ X_2 ã€X_1 è¿›è¡Œå¼‚æˆ–  â€”â€” â‘ </li><li>â‘  å¾—åˆ°çš„ç»“æœå†ä¸è½®å¯†é’¥ RK_i è¿›è¡Œå¼‚æˆ–  â€”â€” â‘¡</li><li>â‘¡ å¾—åˆ°çš„è®°è¿‡ä¸º32bitsï¼Œå†åˆ†æˆ4ç»„8bitsï¼Œæ¯ä¸€ç»„8bits ä½¿ç”¨ç›¸åŒçš„S-Boxè¿›è¡Œæ›¿æ¢ï¼Œå¾—åˆ°æ–°çš„8bits   â€”â€” â‘¢</li><li>â‘¢ å¾—åˆ°çš„4ç»„8bitsé‡æ–°æ‹¼æ¥å¾—åˆ°32bitsï¼Œå°†è¿™32bitså¤åˆ¶æˆ5ä»½è¾“å…¥ï¼Œç¬¬1ä»½å¾ªç¯å·¦ç§»2ä½ï¼Œç¬¬2ä»½å¾ªç¯å·¦ç§»10ä½ï¼Œç¬¬3ä»½å¾ªç¯å·¦ç§»18ä½ï¼Œç¬¬4ä»½å¾ªç¯å·¦ç§»24ä½ï¼Œç¬¬5ä»½ä¸æ”¹åŠ¨ç›´æ¥è¾“å‡º â€”â€” â‘£</li><li>â‘£ çš„å¾—åˆ°çš„5ä»½è¾“å‡ºçš„32bitsä¸X_0 ä¸€èµ·è¿›è¡Œå¼‚æˆ– â€”â€” â‘¤</li><li>æœ€ç»ˆå¾—åˆ°è¾“å‡º Xâ€™_3 å°±æ˜¯ â‘¤ çš„è¾“å‡ºï¼Œå…¶ä»–è¾“å‡ºXâ€™_0 = X_1 ï¼Œ Xâ€™_1 = X_2ï¼Œ Xâ€™_2 = X_3</li></ol><p>ç”¨å…¬å¼è¿›è¡Œæè¿°å¦‚ä¸‹æ‰€ç¤ºï¼Œå…¶ä¸­Sä»£è¡¨ä½¿ç”¨S-boxè¿›è¡Œæ›¿æ¢ï¼ŒLè¡¨ç¤ºçº¿æ€§å‡½æ•°æ‰§è¡Œå¾ªç¯å·¦ç§»çš„æ“ä½œ</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msubsup><mi>X</mi><mn>0</mn><mo mathvariant="normal">â€²</mo></msubsup><mo>=</mo><msub><mi>X</mi><mn>1</mn></msub><mspace linebreak="newline"></mspace><msubsup><mi>X</mi><mn>1</mn><mo mathvariant="normal">â€²</mo></msubsup><mo>=</mo><msub><mi>X</mi><mn>2</mn></msub><mspace linebreak="newline"></mspace><msubsup><mi>X</mi><mn>2</mn><mo mathvariant="normal">â€²</mo></msubsup><mo>=</mo><msub><mi>X</mi><mn>3</mn></msub></mrow><annotation encoding="application/x-tex">X&#x27;_0 = X_1  \\X&#x27;_1 = X_2\\X&#x27;_2 = X_3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.048892em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8018919999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:1.048892em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8018919999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:1.048892em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8018919999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msubsup><mi>X</mi><mn>3</mn><mo mathvariant="normal">â€²</mo></msubsup><mo>=</mo><msub><mi>X</mi><mn>0</mn></msub><mo>âŠ•</mo><mi>L</mi><mo stretchy="false">(</mo><mi>S</mi><mo stretchy="false">(</mo><msub><mi>X</mi><mn>3</mn></msub><mo>âŠ•</mo><msub><mi>X</mi><mn>2</mn></msub><mo>âŠ•</mo><msub><mi>X</mi><mn>1</mn></msub><mo>âŠ•</mo><mi>R</mi><msub><mi>K</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">X&#x27;_3 =X_0âŠ• L( S (X_3 âŠ• X_2 âŠ• X_1 âŠ• RK_i))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.048892em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8018919999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âŠ•</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">L</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âŠ•</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âŠ•</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âŠ•</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mclose">)</span></span></span></span></span></p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi mathvariant="normal">æ›¿</mi><mi mathvariant="normal">æ¢</mi><mi mathvariant="normal">æ“</mi><mi mathvariant="normal">ä½œ</mi><mi mathvariant="normal">è¾“</mi><mi mathvariant="normal">å…¥</mi><mi>A</mi><mo>=</mo><mo stretchy="false">(</mo><msub><mi>a</mi><mn>0</mn></msub><mo separator="true">,</mo><msub><mi>a</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>a</mi><mn>2</mn></msub><mo separator="true">,</mo><msub><mi>a</mi><mn>3</mn></msub><mo stretchy="false">)</mo><mi mathvariant="normal">ï¼Œ</mi><mi mathvariant="normal">è¾“</mi><mi mathvariant="normal">å‡º</mi><mi mathvariant="normal">ä¸º</mi><mi>B</mi><mo>=</mo><mo stretchy="false">(</mo><msub><mi>b</mi><mn>0</mn></msub><mo separator="true">,</mo><msub><mi>b</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>b</mi><mn>2</mn></msub><mo separator="true">,</mo><msub><mi>b</mi><mn>3</mn></msub><mo stretchy="false">)</mo><mi mathvariant="normal">ï¼Œ</mi><mi mathvariant="normal">åˆ™</mi><mi mathvariant="normal">æœ‰</mi><mi mathvariant="normal">ï¼š</mi><mspace linebreak="newline"></mspace><mo stretchy="false">(</mo><msub><mi>b</mi><mn>0</mn></msub><mo separator="true">,</mo><msub><mi>b</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>b</mi><mn>2</mn></msub><mo separator="true">,</mo><msub><mi>b</mi><mn>3</mn></msub><mo stretchy="false">)</mo><mo>=</mo><mi>S</mi><mo stretchy="false">(</mo><mi>A</mi><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">(</mo><mi>S</mi><mi>b</mi><mi>o</mi><mi>x</mi><mo stretchy="false">(</mo><msub><mi>a</mi><mn>0</mn></msub><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>S</mi><mi>b</mi><mi>o</mi><mi>x</mi><mo stretchy="false">(</mo><msub><mi>a</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>S</mi><mi>b</mi><mi>o</mi><mi>x</mi><mo stretchy="false">(</mo><msub><mi>a</mi><mn>2</mn></msub><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>S</mi><mi>b</mi><mi>o</mi><mi>x</mi><mo stretchy="false">(</mo><msub><mi>a</mi><mn>3</mn></msub><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Sæ›¿æ¢æ“ä½œè¾“å…¥A=(a_0,a_1,a_2,a_3)ï¼Œè¾“å‡ºä¸ºB=(b_0,b_1,b_2,b_3)ï¼Œåˆ™æœ‰ï¼š \\ (b_0,b_1,b_2,b_3) = S(A)= (Sbox(a_0),Sbox(a_1),Sbox(a_2),Sbox(a_3))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord cjk_fallback">æ›¿</span><span class="mord cjk_fallback">æ¢</span><span class="mord cjk_fallback">æ“</span><span class="mord cjk_fallback">ä½œ</span><span class="mord cjk_fallback">è¾“</span><span class="mord cjk_fallback">å…¥</span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord cjk_fallback">ï¼Œ</span><span class="mord cjk_fallback">è¾“</span><span class="mord cjk_fallback">å‡º</span><span class="mord cjk_fallback">ä¸º</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord cjk_fallback">ï¼Œ</span><span class="mord cjk_fallback">åˆ™</span><span class="mord cjk_fallback">æœ‰</span><span class="mord cjk_fallback">ï¼š</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mopen">(</span><span class="mord mathdefault">A</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">b</span><span class="mord mathdefault">o</span><span class="mord mathdefault">x</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">b</span><span class="mord mathdefault">o</span><span class="mord mathdefault">x</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">b</span><span class="mord mathdefault">o</span><span class="mord mathdefault">x</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">b</span><span class="mord mathdefault">o</span><span class="mord mathdefault">x</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mclose">)</span></span></span></span></span></p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>L</mi><mi mathvariant="normal">çº¿</mi><mi mathvariant="normal">æ€§</mi><mi mathvariant="normal">å‡½</mi><mi mathvariant="normal">æ•°</mi><mi mathvariant="normal">è¾“</mi><mi mathvariant="normal">å…¥</mi><mi>B</mi><mo>=</mo><mo stretchy="false">(</mo><msub><mi>b</mi><mn>0</mn></msub><mo separator="true">,</mo><msub><mi>b</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>b</mi><mn>2</mn></msub><mo separator="true">,</mo><msub><mi>b</mi><mn>3</mn></msub><mo stretchy="false">)</mo><mo separator="true">,</mo><mi mathvariant="normal">è¾“</mi><mi mathvariant="normal">å‡º</mi><mi mathvariant="normal">ä¸º</mi><mi>C</mi><mo stretchy="false">(</mo><mn>32</mn><mi>b</mi><mi>i</mi><mi>t</mi><mi>s</mi><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace><mi>C</mi><mo>=</mo><mi>L</mi><mo stretchy="false">(</mo><mi>B</mi><mo stretchy="false">)</mo><mo>=</mo><mi>B</mi><mo>âŠ•</mo><mo stretchy="false">(</mo><mi>B</mi><mo>&lt;</mo><mo>&lt;</mo><mn>2</mn><mo stretchy="false">)</mo><mo>âŠ•</mo><mo stretchy="false">(</mo><mi>B</mi><mo>&lt;</mo><mo>&lt;</mo><mn>10</mn><mo stretchy="false">)</mo><mo>âŠ•</mo><mo stretchy="false">(</mo><mi>B</mi><mo>&lt;</mo><mo>&lt;</mo><mn>18</mn><mo stretchy="false">)</mo><mo>âŠ•</mo><mo stretchy="false">(</mo><mi>B</mi><mo>&lt;</mo><mo>&lt;</mo><mn>24</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Lçº¿æ€§å‡½æ•°è¾“å…¥B=(b_0,b_1,b_2,b_3),è¾“å‡ºä¸ºC (32bits) \\ C = L(B) = B âŠ• (B&lt;&lt;2) âŠ•(B&lt;&lt;10) âŠ•(B&lt;&lt;18)âŠ•(B&lt;&lt;24)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">L</span><span class="mord cjk_fallback">çº¿</span><span class="mord cjk_fallback">æ€§</span><span class="mord cjk_fallback">å‡½</span><span class="mord cjk_fallback">æ•°</span><span class="mord cjk_fallback">è¾“</span><span class="mord cjk_fallback">å…¥</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord cjk_fallback">è¾“</span><span class="mord cjk_fallback">å‡º</span><span class="mord cjk_fallback">ä¸º</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mopen">(</span><span class="mord">3</span><span class="mord">2</span><span class="mord mathdefault">b</span><span class="mord mathdefault">i</span><span class="mord mathdefault">t</span><span class="mord mathdefault">s</span><span class="mclose">)</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">L</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âŠ•</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span></span><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âŠ•</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span></span><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âŠ•</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span></span><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord">8</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âŠ•</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span></span><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mord">4</span><span class="mclose">)</span></span></span></span></span></p><p class='note note-success'>  é€šè¿‡è§‚å¯ŸSM4åŠ å¯†è¿‡ç¨‹å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ä¸€è½®åŠ å¯†ä¸­ï¼Œæœ‰3ä¸ªè¾“å‡ºå®Œå…¨ç­‰åŒäº3ä¸ªè¾“å…¥ï¼Œåªæœ‰ä¸€ä¸ªè¾“å‡ºéœ€è¦ç»è¿‡ä¸€äº›å¤æ‚æ“ä½œï¼Œå³è®¡ç®—X'_3ï¼Œæ‰€ä»¥åœ¨è¿›è¡Œè§£å¯†æ—¶ï¼Œåªéœ€è¦è®¡ç®—åŸæ¥çš„X_0ï¼Œè€Œè¿™å¯ä»¥é€šè¿‡ç°æœ‰çš„è¾“å‡ºå¾—åˆ°çš„ï¼ˆå…·ä½“æ“ä½œè§ä¸‹é¢çš„è§£å¯†è¿‡ç¨‹ï¼‰ã€‚</p><h2 id="è§£å¯†è¿‡ç¨‹"><a class="markdownIt-Anchor" href="#è§£å¯†è¿‡ç¨‹"></a> è§£å¯†è¿‡ç¨‹</h2><ul><li>åœ¨äº†è§£äº†SM4ä¸€è½®çš„åŠ å¯†è¿‡ç¨‹åï¼Œä¸éš¾å¾—å‡ºä¸€è½®çš„è§£å¯†è¿‡ç¨‹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º</li></ul><p><img src="https://cdn.jsdelivr.net/gh/2017zhangyuxuan/picture_backend@master//img/202111131519980.png" alt="SM4è§£å¯†è¿‡ç¨‹" /></p><ul><li>åŒæ ·å·¦ä¾§æè¿°äº†SM4è§£å¯†çš„æ•´ä½“æµç¨‹ï¼š</li></ul><ol><li>è¾“å…¥çš„ä¸€ä¸ªå¯†æ–‡Cä¸º128bitsï¼Œåˆ’åˆ†æˆ4ä¸ªå°å—ï¼Œæ¯ä¸ªå°å—32bits</li><li>å¯¹è¿™å››ä¸ªå°å—ç»è¿‡ä¸€æ¬¡Permutationç½®æ¢</li><li>å¯¹ç½®æ¢ç»“æœè¿›è¡Œ32è½®ç±»ä¼¼çš„è§£å¯†å¤„ç†ï¼Œå¾—åˆ°æœ€ç»ˆçš„æ˜æ–‡è¾“å‡º</li></ol><ul><li>å…·ä½“æè¿°ä¸€è½®çš„è§£å¯†è¿‡ç¨‹ï¼Œè¿›è¡Œ32è½®ç±»ä¼¼çš„è§£å¯†æ“ä½œï¼Œå…¶ä¸­Xâ€™_0å¯¹åº”åŠ å¯†è¿‡ç¨‹ä¸­çš„è¾“å…¥X_1ï¼ŒXâ€™_1å¯¹åº”è¾“å…¥X_2ï¼ŒXâ€™_2å¯¹åº”è¾“å…¥X_3ï¼Œæ‰€ä»¥é‡ç‚¹è®¡ç®—å¾—åˆ°åŸæ¥è¾“å…¥çš„X_0ï¼Œä¸‹é¢ç›´æ¥ç”¨å…¬å¼æ¥è¡¨ç¤ºè®¡ç®—è¿‡ç¨‹</li></ul><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>X</mi><mn>1</mn></msub><mo>=</mo><msubsup><mi>X</mi><mn>0</mn><mo mathvariant="normal">â€²</mo></msubsup><mspace width="2em"/><msub><mi>X</mi><mn>2</mn></msub><mo>=</mo><msubsup><mi>X</mi><mn>1</mn><mo mathvariant="normal">â€²</mo></msubsup><mspace width="2em"/><msub><mi>X</mi><mn>3</mn></msub><mo>=</mo><msubsup><mi>X</mi><mn>2</mn><mo mathvariant="normal">â€²</mo></msubsup></mrow><annotation encoding="application/x-tex">X_1 = X&#x27;_0     \qquad X_2 = X&#x27;_1 \qquad X_3 = X&#x27;_2     </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.048892em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8018919999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:2em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.048892em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8018919999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:2em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.048892em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8018919999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span></span></span></span></span></p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>X</mi><mn>0</mn></msub><mo>=</mo><msubsup><mi>X</mi><mn>3</mn><mo mathvariant="normal">â€²</mo></msubsup><mo>âŠ•</mo><mi>L</mi><mo stretchy="false">(</mo><mi>S</mi><mo stretchy="false">(</mo><msubsup><mi>X</mi><mn>2</mn><mo mathvariant="normal">â€²</mo></msubsup><mo>âŠ•</mo><msubsup><mi>X</mi><mn>1</mn><mo mathvariant="normal">â€²</mo></msubsup><mo>âŠ•</mo><msubsup><mi>X</mi><mn>0</mn><mo mathvariant="normal">â€²</mo></msubsup><mo>âŠ•</mo><mi>R</mi><msub><mi>K</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">X_0 =X&#x27;_3âŠ• L( S (X&#x27;_2 âŠ• X&#x27;_1 âŠ• X&#x27;_0 âŠ• RK_i))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.048892em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8018919999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âŠ•</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.051892em;vertical-align:-0.25em;"></span><span class="mord mathdefault">L</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8018919999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âŠ•</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.048892em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8018919999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âŠ•</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.048892em;vertical-align:-0.247em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8018919999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âŠ•</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mclose">)</span></span></span></span></span></p><p><strong>å…¶ä¸­Lçº¿æ€§å‡½æ•°è·ŸS-boxç½®æ¢ éƒ½è·ŸåŠ å¯†è¿‡ç¨‹ä¸­ä¸€è‡´ï¼›ä½†éœ€è¦æ³¨æ„çš„æ˜¯è§£å¯†è¿‡ç¨‹ä¸­ï¼Œè½®å¯†é’¥çš„ä½¿ç”¨æ¬¡åºæ˜¯ï¼ˆ31, 30, â€¦, 1,0ï¼‰ï¼Œè·ŸåŠ å¯†è¿‡ç¨‹ä½¿ç”¨çš„è½®å¯†é’¥æ¬¡åºæ­£å¥½æ˜¯ç›¸åçš„</strong></p><h2 id="è½®å¯†é’¥ç”Ÿæˆ"><a class="markdownIt-Anchor" href="#è½®å¯†é’¥ç”Ÿæˆ"></a> è½®å¯†é’¥ç”Ÿæˆ</h2><p><img src="https://cdn.jsdelivr.net/gh/2017zhangyuxuan/picture_backend@master//img/202111131454839.(null)" alt="è½®å¯†é’¥ç”Ÿæˆ" /></p><ul><li>è½®å¯†é’¥ç”Ÿæˆè¿‡ç¨‹å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå…¶ä¸­Kä»£è¡¨çš„æ˜¯16å­—èŠ‚çš„å¯†é’¥ï¼Œå…¬å¼é‡Œçš„Sç”¨çš„å’ŒåŠ å¯†è¿‡ç¨‹ä¸­ç›¸åŒçš„Sbox</li></ul><h1 id="cå®ç°sm4åŠ å¯†ä¸è§£å¯†"><a class="markdownIt-Anchor" href="#cå®ç°sm4åŠ å¯†ä¸è§£å¯†"></a> C++å®ç°SM4åŠ å¯†ä¸è§£å¯†</h1><h2 id="å®ç°ç›®æ ‡"><a class="markdownIt-Anchor" href="#å®ç°ç›®æ ‡"></a> å®ç°ç›®æ ‡</h2><ol><li>ä½¿ç”¨C++å®ç°SM4ç®—æ³•çš„åŠ å¯†å’Œç»“æœï¼Œå®ç°åŒ…æ‹¬ECBã€CBCä¸¤ç§åŠ å¯†æ¨¡å¼ã€‚å¹¶æä¾›å‘½ä»¤â¾æ¥â¼å¯¹â¼†è¿›åˆ¶â½‚ä»¶ è¿›â¾åŠ /è§£å¯†ã€‚</li><li>å®ç°å¯¹pngå›¾åƒæ–‡ä»¶çš„åŠ å¯†ï¼Œåªå¯¹å›¾åƒæ•°æ®éƒ¨åˆ†è¿›è¡ŒåŠ å¯†ï¼Œä½¿å¾—å¯¹åŠ å¯†pngæ–‡ä»¶åä»èƒ½ä»¥pngæ ¼å¼æ‰“å¼€</li></ol><h2 id="å‘½ä»¤è¡Œæ ¼å¼è¯´æ˜"><a class="markdownIt-Anchor" href="#å‘½ä»¤è¡Œæ ¼å¼è¯´æ˜"></a> å‘½ä»¤è¡Œæ ¼å¼è¯´æ˜</h2><ul><li>ç”Ÿæˆçš„äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ä¸º AppliedCryptographyï¼Œå…±æœ‰ä»¥ä¸‹å‡ ç§å¯é€‰é…ç½®<ul><li>-encï¼šè¿›è¡ŒåŠ å¯†æ“ä½œ</li><li>-decï¼šè¿›è¡Œè§£å¯†æ“ä½œ</li><li>-modeï¼šæŒ‡å®šåŠ å¯†/è§£å¯†æ“ä½œï¼Œå…¶åè·Ÿç€ecbæˆ–è€…cbcï¼ˆå¦‚æœæ²¡æœ‰æŒ‡å®šï¼Œé»˜è®¤ä¸ºecbæ¨¡å¼ï¼‰</li><li>-pngï¼šæŒ‡å®šè¾“å…¥å’Œè¾“å‡ºæ–‡ä»¶ä¸ºpngæ ¼å¼ï¼ˆå¯¹pngæ–‡ä»¶åšç‰¹æ®Šå¤„ç†ï¼ŒåªåŠ å¯†æ•°æ®å—éƒ¨åˆ†ï¼‰ï¼›å¦‚æœæŒ‡å®šäº†ï¼Œè¯·ä¿è¯æ–‡ä»¶çš„åç¼€åä»¥.pngæ ¼å¼ç»“å°¾</li><li>-inï¼šè¾“å…¥æ–‡ä»¶çš„è·¯å¾„ï¼Œè¯·ä½¿ç”¨ç›¸å¯¹è·¯å¾„</li><li>-outï¼šè¾“å‡ºæ–‡ä»¶çš„è·¯å¾„ï¼Œè¯·ä½¿ç”¨ç›¸å¯¹è·¯å¾„</li><li>-keyï¼šæŒ‡å®šå¯†é’¥ï¼Œé»˜è®¤ä¸º&quot;123456&quot;</li><li>-ivï¼šæŒ‡å®šåˆå§‹åŒ–å‘é‡ï¼Œé»˜è®¤ä¸º&quot;123456&quot;</li><li>-testï¼šå¦‚æœæŒ‡å®šäº†ï¼Œæ‰§è¡Œæµ‹è¯•å‡½æ•°</li></ul></li></ul><p class='note note-warning'>1. é…ç½®çš„å‘½ä»¤è¯·ç”¨å°å†™ <br>2. ä¸€äº›é…ç½®ä¹‹åè¯·ç´§è·Ÿå¯¹åº”çš„å‚æ•°å€¼ <br>3. è¾“å…¥å’Œè¾“å‡ºçš„è·¯å¾„è¯·ç”¨ç›¸å¯¹è·¯å¾„ <br></p><ul><li>å‚è€ƒçš„æµ‹è¯•å‘½ä»¤å¦‚ä¸‹</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> æµ‹è¯•cbcæ¨¡å¼åŠ å¯†pngæ–‡ä»¶</span><br>./AppliedCryptography -enc -mode cbc -png -in logo.png -out test.png -iv 123456 -key 123456<br>./AppliedCryptography -dec -mode cbc -png -in test.png -out dec_test.png -iv 123456 -key 123456<br><span class="hljs-meta">#</span><span class="bash"> æµ‹è¯•ecbåŠ å¯†æ–‡ä»¶</span><br>./AppliedCryptography -enc -mode ecb -in test.txt -out ecb_test.txt -iv 123456 -key 123456<br>./AppliedCryptography -dec -mode ecb -in ecb_test.txt -out dec_test.txt -iv 123456 -key 123456<br></code></pre></td></tr></table></figure><h2 id="ä»£ç ç»“æ„è¯´æ˜"><a class="markdownIt-Anchor" href="#ä»£ç ç»“æ„è¯´æ˜"></a> ä»£ç ç»“æ„è¯´æ˜</h2><p>é¦–å…ˆè¯´æ˜è¿›è¡Œä»£ç ç›®å½•çš„è¯´æ˜ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><center><img src="https://cdn.jsdelivr.net/gh/2017zhangyuxuan/picture_backend@master//img/202111131454890.(null)" width="40%" height="40%" ></center><p align="middle"><font size="2" color="grey">ä»£ç ç›®å½•ç»“æ„</font></p><ul><li>é¡¹ç›®ä½¿ç”¨CMake æ„å»ºï¼Œbuildç›®å½•æ˜¯æ„å»ºç›®å½•ï¼Œbuild/output/binä¸‹æ˜¯å¯¹åº”å¯æ‰§è¡Œæ–‡ä»¶çš„è¾“å‡ºç›®å½•ï¼Œbuild/output/bin/test ç›®å½•ä¸‹å­˜æ”¾æµ‹è¯•ç”¨çš„ç›¸å…³æ–‡ä»¶</li><li>Cmake-build-debugï¼šä½¿ç”¨CLion ç¼–è¯‘æ„å»ºæ—¶ç”Ÿæˆçš„ç›®å½•</li><li>FirstWorkï¼šä¸»è¦ç›®å½•ï¼Œsm4å¯¹åº”æºä»£ç æ˜¯ç®—æ³•çš„å…·ä½“å®ç°ï¼›testå¯¹åº”çš„æ˜¯æµ‹è¯•ç›¸å…³æ–¹æ³•ï¼Œä¸»è¦ç”¨äºæµ‹è¯•ç®—æ³•çš„æ­£ç¡®æ€§</li><li>hash-libraryï¼šä¸€ä¸ªç®€å•çš„ç¬¬ä¸‰æ–¹åº“ï¼Œå°è£…äº†hashæ“ä½œå’Œhexç¼–ç å’Œè§£ç ç­‰æ“ä½œ</li><li>utilï¼šå…¶ä¸­utilæ˜¯ä¸€ä¸ªå·¥å…·ç±»ï¼Œä¸»è¦å°è£…äº†ä¸€äº›è¾…åŠ©å‡½æ•°</li><li>main.cppï¼šç¨‹åºå…¥å£ï¼Œä¸»è¦å®ç°äº†è§£æå‘½ä»¤è¡Œå‚æ•°ï¼Œæ‰§è¡Œå¯¹åº”çš„æ“ä½œ</li></ul><h2 id="å®ç°ç›¸å…³è¯´æ˜"><a class="markdownIt-Anchor" href="#å®ç°ç›¸å…³è¯´æ˜"></a> å®ç°ç›¸å…³è¯´æ˜</h2><ul><li><p>åœ¨<code>sm4.h</code>å’Œ<code>sm4.cpp</code>ä¸­å®ç°äº†SM4ç®—æ³•ï¼Œå…·ä½“å®ç°é€»è¾‘åªè¦æ˜¯æ‹†åˆ†æˆå¤šä¸ªå­å‡½æ•°</p><ul><li>Lçº¿æ€§å‡½æ•°å’ŒSboxæ›¿æ¢å‡½æ•°å®ç°</li><li>è½®å¯†é’¥ç”Ÿæˆ</li><li><code>SM4EncRound</code>å’Œ<code>SM4DecRound</code>å®ç°ä¸€è½®çš„åŠ å¯†å’Œè§£å¯†</li><li><code>Encryption</code>å’Œ<code>Decryption</code>å®ç°128bitsè¾“å…¥çš„åŠ å¯†å’Œè§£å¯†</li><li><code>EncFile</code>å’Œ<code>DecFile</code>å®ç°æ–‡ä»¶çš„åŠ å¯†å’Œè§£å¯†</li><li><code>EncPNG</code>å’Œ<code>DecPNG</code>å®ç°å¯¹pngæ ¼å¼æ–‡ä»¶çš„åŠ å¯†å’Œè§£å¯†</li></ul></li><li><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œpngå›¾ç‰‡æ–‡ä»¶ï¼Œæœ‰è‡ªå·±çš„å›ºå®šæ ¼å¼ï¼Œä¸»è¦ä¸ºå¤´éƒ¨8å­—èŠ‚å›ºå®šç­¾åï¼ŒåŠ å…¶ä»–æ•°æ®å—çš„ç»“æ„ï¼Œæ‰€ä»¥è§£ææ—¶è¦å¾—åˆ°çœŸæ­£çš„æ•°æ®å—ï¼ˆIDAT)ï¼Œå¯¹è¿™ä¸€éƒ¨åˆ†è¿›è¡ŒåŠ å¯†ï¼Œè¿™æ ·æ‰èƒ½åŠ å¯†åä¾ç„¶èƒ½å¤Ÿä»¥pngæ–¹å¼æ‰“å¼€ï¼Œå…·ä½“çš„PNGæ ¼å¼å‚è€ƒï¼š<a href="https://blog.csdn.net/einsteinlike/article/details/41803193">PNGæ ¼å¼è¯´æ˜</a></p></li><li><p>æµ‹è¯•å‡½æ•°ä¸»è¦æœ‰4ä¸ª</p><ul><li><code>TestAll()</code> ï¼šè¿›è¡Œæ‰€æœ‰æµ‹è¯•</li><li><code>TestEncDec()</code>ï¼š æµ‹è¯•SM4 å•æ¬¡åŠ è§£å¯†128bits</li><li><code>TestEncDecFileECB()</code>ï¼š æµ‹è¯•SM4 åŠ å¯†å’Œè§£å¯†æ–‡ä»¶ ECBæ¨¡å¼</li><li><code>TestEncDecFileCBC()</code>ï¼š æµ‹è¯•SM4 åŠ å¯†å’Œè§£å¯†æ–‡ä»¶ CBCæ¨¡å¼</li><li><code>TestEncDecPNG()</code>ï¼š æµ‹è¯•SM4 åŠ å¯†å’Œè§£å¯†PNGå›¾ç‰‡</li></ul></li></ul><p class='note note-info'>  ä»£ç å·²ä¸Šä¼ Githubä»“åº“ï¼šhttps://github.com/2017zhangyuxuan/AppliedCryptography <br></p><p class='note note-danger'>  ä½†æ˜¯å½“å‰ä»£ç è¿˜å­˜åœ¨é—®é¢˜æ˜¯ï¼Œå¤§ç«¯å’Œå°ç«¯çš„é—®é¢˜æ²¡æœ‰å½»åº•è§£å†³ï¼Œå¦‚æœå¯¹æ¯”ä¸€äº›å®˜æ–¹å®ç°ï¼ŒåŠ å¯†ç»“æœæ˜¯ä¸åŒçš„ï¼Œå› ä¸ºæ—¶é—´åŸå› æ²¡æœ‰èƒ½æ’æŸ¥å‡ºæ¥ï¼Œåªèƒ½ä½œç½¢ã€‚æ‰€ä»¥ä»…ä»…æ˜¯æä¾›ä¸€äº›æ€è·¯ã€‚</p><center><img src="https://cdn.jsdelivr.net/gh/2017zhangyuxuan/picture_backend@master//hexo_img/èœç‹—.jpeg" width="40%" height="40%" align="middle" ></center><h1 id="å‚è€ƒé™„å½•"><a class="markdownIt-Anchor" href="#å‚è€ƒé™„å½•"></a> å‚è€ƒé™„å½•</h1><p>SM4ç®—æ³•åŸç† ï¼š<a href="https://blog.csdn.net/bird_tp/article/details/105988468">https://blog.csdn.net/bird_tp/article/details/105988468</a></p><p>SM4 å®ç°å‚è€ƒï¼š<a href="https://cryptopp.com/docs/ref/class_s_m4_1_1_base.html#details">https://cryptopp.com/docs/ref/class_s_m4_1_1_base.html#details</a></p><p><a href="https://blog.csdn.net/weixin_39672443/article/details/110806799">pngæ–‡ä»¶å¤´_å›¾ç‰‡æ ¼å¼çŸ¥è¯†PNG_weixin_39672443çš„åšå®¢-CSDNåšå®¢</a></p><p><a href="https://blog.csdn.net/einsteinlike/article/details/41803193">PNGæ ¼å¼è¯´æ˜</a></p>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºçŸ¥è¯†</category>
      
      <category>å¯†ç å­¦</category>
      
    </categories>
    
    
    <tags>
      
      <tag>SM4</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€æ¯”ç‰¹å¸ä¸“é¢˜03ã€‘éš”ç¦»è§è¯ã€é—ªç”µç½‘ç»œ</title>
    <link href="/2021/11/13/2021-11/2021-11-13%20%E6%AF%94%E7%89%B9%E5%B8%81%E4%B8%93%E9%A2%9803-%E9%9A%94%E7%A6%BB%E8%A7%81%E8%AF%81%E3%80%81%E9%97%AA%E7%94%B5%E7%BD%91%E7%BB%9C/"/>
    <url>/2021/11/13/2021-11/2021-11-13%20%E6%AF%94%E7%89%B9%E5%B8%81%E4%B8%93%E9%A2%9803-%E9%9A%94%E7%A6%BB%E8%A7%81%E8%AF%81%E3%80%81%E9%97%AA%E7%94%B5%E7%BD%91%E7%BB%9C/</url>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a class="markdownIt-Anchor" href="#å‰è¨€"></a> å‰è¨€</h1><p>æœ€è¿‘é€šè¯»äº†ä¸€éã€Šç²¾é€šæ¯”ç‰¹å¸ã€‹ï¼Œå¯¹æ¯”ç‰¹å¸ä¸­è¿è¡Œæœºåˆ¶å’Œå®ç°åŸç†æœ‰äº†åˆæ­¥çš„è®¤è¯†å’Œäº†è§£ã€‚å…¶ä¸­éš”ç¦»è§è¯å’Œé—ªç”µç½‘ç»œæ˜¯æ­¤å‰å­¦ä¹ ä¸­é‡åˆ°åˆ°ä¸¤ä¸ªå›°æƒ‘ç‚¹ï¼Œç°åœ¨ä¹Ÿå¤§è‡´æœ‰æ‰€äº†è§£ï¼Œæ•…è€Œæœ¬ç¯‡æ–‡ç« å°±æ¥è°ˆè°ˆæˆ‘çš„ä¸ªäººç†è§£ï¼ŒåŸºæœ¬ä¸Šæ˜¯å¯¹ä¹¦é‡Œå…³é”®çŸ¥è¯†ç‚¹çš„æç‚¼å’Œæ€»ç»“ï¼Œä¸‹æ–¹ä¹Ÿç»™å‡ºäº†ç”µå­ä¹¦è¿æ¥ã€‚å¦‚æœ‰ä»»ä½•é”™è¯¯ï¼Œæ¬¢è¿æ‰¹è¯„æŒ‡å‡º~</p><p class='note note-info'><a href=https://github.com/tianmingyun/MasterBitcoin2CN>ç²¾é€šæ¯”ç‰¹å¸ç”µå­ä¹¦é“¾æ¥</a>  </p><h1 id="éš”ç¦»è§è¯"><a class="markdownIt-Anchor" href="#éš”ç¦»è§è¯"></a> éš”ç¦»è§è¯</h1><p>éš”ç¦»è§è¯æå‡ºçš„èƒŒæ™¯ï¼šéšç€æ¯”ç‰¹å¸ç«çƒ­å‘å±•ï¼Œç½‘ç»œä¸Šçš„äº¤æ˜“é‡è¶Šæ¥è¶Šå¤§ï¼Œè€Œç”±äºåŒºå—å¤§å°å—é™ï¼Œä¸€ä¸ªåŒºå—èƒ½æ‰“åŒ…çš„äº¤æ˜“æ•°é‡æ˜¯æœ‰ä¸€å®šé™åˆ¶çš„ï¼Œè€Œå‡ºå—é€Ÿåº¦é™å®šåœ¨10åˆ†é’Ÿä¸€æ¬¡ï¼Œè¿™å°±å¯¼è‡´æ— æ³•æ»¡è¶³äº¤æ˜“ååé‡çš„å¢é•¿ã€‚é‚£ä¹ˆéš”ç¦»è§è¯æå‡ºï¼ŒæŒ‘æˆ˜äº†äº¤æ˜“ç»“æ„ï¼Œä½¿å¾—ä¸€ä¸ªåŒºå—å¯ä»¥å®¹çº³æ›´å¤šçš„äº¤æ˜“ï¼Œä»è€Œæé«˜äº†äº¤æ˜“ååé‡ï¼Œå½“æ—¶éš”ç¦»è§è¯è¿˜æœ‰åˆ«çš„å¥½å¤„ï¼Œå¯ä»¥å»çœ‹ä¹¦ä¸­å†…å®¹<a href="https://github.com/tianmingyun/MasterBitcoin2CN/blob/master/ch07.md#781-%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E7%94%A8%E9%9A%94%E7%A6%BB%E8%A7%81%E8%AF%81">éš”ç¦»è§è¯çš„å¥½å¤„</a>ã€‚å½“ç„¶æé«˜æ¯”ç‰¹å¸æ€§èƒ½ï¼ˆæ¯”å¦‚æé«˜äº¤æ˜“ååé‡ï¼‰çš„æ–¹æ³•è¿˜æœ‰å¾ˆå¤šï¼Œè¿™é‡Œä¸å†å±•å¼€ã€‚</p><p class='note note-primary'>éš”ç¦»è§è¯ç›¸å…³BIPæ–¹æ¡ˆ:<br>  <a href="https://github.com/bitcoin/bips/blob/master/bip-0141.mediawiki">BIP-141 éš”ç¦»è§è¯çš„å®šä¹‰</a>  <br>    <a href="https://github.com/bitcoin/bips/blob/master/bip-0144.mediawiki">BIP-144 éš”ç¦»è§è¯ç½‘ç»œåºåˆ—åŒ–</a></p><h2 id="å…³é”®çŸ¥è¯†"><a class="markdownIt-Anchor" href="#å…³é”®çŸ¥è¯†"></a> å…³é”®çŸ¥è¯†</h2><ul><li>åœ¨æ¯”ç‰¹å¸ç¯å¢ƒä¸­ï¼Œæ•°å­—ç­¾åæ˜¯è§è¯çš„<em>ä¸€ç§ç±»å‹</em>ï¼Œä½†æ›´å¹¿ä¹‰æ¥è¯´ï¼Œè§è¯æ˜¯æŒ‡èƒ½å¤Ÿæ»¡è¶³å¯¹UTXOæ–½åŠ çš„æ¡ä»¶å¹¶è§£é”è¯¥UTXOä»¥ä¾›æ¶ˆè´¹çš„ä»»ä½•è§£å†³æ–¹æ¡ˆã€‚æœ¯è¯­â€œè§è¯â€æ˜¯â€œè§£é”è„šæœ¬â€æˆ–â€œscriptSigâ€çš„æ›´ä¸€èˆ¬çš„æœ¯è¯­ã€‚</li><li>åœ¨å¼•å…¥éš”ç¦»è§è¯ä¹‹å‰ï¼Œäº¤æ˜“ä¸­çš„æ¯ä¸€ä¸ªè¾“å…¥åé¢ç´§è·Ÿç€çš„å°±æ˜¯è§£é”å®ƒçš„è§è¯æ•°æ®ã€‚è§è¯æ•°æ®ä½œä¸ºæ¯ä¸ªè¾“å…¥çš„ä¸€éƒ¨åˆ†åµŒå…¥åˆ°äº¤æ˜“ä¸­ã€‚æœ¯è¯­<em>éš”ç¦»è§è¯</em>ï¼ˆç®€ç§°<em>segwit</em>ï¼‰åªæ˜¯æŒ‡æŠŠç‰¹å®šè¾“å‡ºçš„ç­¾åæˆ–è§£é”è„šæœ¬éš”ç¦»å¼€ã€‚â€œå•ç‹¬çš„scriptSigâ€æˆ–â€œå•ç‹¬çš„ç­¾åâ€å°±æ˜¯å®ƒæœ€ç®€å•çš„å½¢å¼ã€‚</li><li>ä¹ä¸€çœ‹ï¼Œéš”ç¦»è§è¯ä¼¼ä¹åªæ˜¯å¯¹äº¤æ˜“æ„é€ æ–¹å¼çš„æ”¹å˜ï¼Œå±äºäº¤æ˜“çº§ç‰¹æ€§ï¼Œä½†äº‹å®å¹¶éå¦‚æ­¤ã€‚å…¶å®ï¼Œéš”ç¦»è§è¯æ˜¯å¯¹å•ç‹¬çš„UTXOèŠ±è´¹æ–¹å¼çš„æ›´æ”¹ï¼Œå› æ­¤å¯ä»¥è¯´æ˜¯æ¯ä¸ªè¾“å‡ºå±‚é¢çš„ç‰¹æ€§ã€‚</li><li>å½“äº¤æ˜“ä½¿ç”¨UTXOæ—¶ï¼Œå¿…é¡»æä¾›ä¸€ä¸ªè§è¯ã€‚åœ¨ä¼ ç»Ÿçš„UTXOä¸­ï¼Œé”å®šè„šæœ¬è¦æ±‚è§è¯æ•°æ®<em>å†…åµŒ</em>åœ¨èŠ±è´¹UTXOçš„äº¤æ˜“çš„è¾“å…¥éƒ¨åˆ†ã€‚ä½†æ˜¯ï¼Œéš”ç¦»è§è¯UTXOæŒ‡å®šäº†ä¸€ä¸ªé”å®šè„šæœ¬ï¼Œè¯¥è„šæœ¬å¯ä»¥ç”¨è¾“å…¥ä¹‹å¤–çš„è§è¯æ•°æ®ï¼ˆéš”ç¦»ï¼‰æ»¡è¶³ã€‚</li><li><strong>éš”ç¦»è§è¯æ˜¯ä¸€ä¸ªè½¯åˆ†å‰</strong></li></ul><h2 id="txid-å’Œ-wtxid"><a class="markdownIt-Anchor" href="#txid-å’Œ-wtxid"></a> TXID å’Œ WTXID</h2><ul><li>éš”ç¦»è§è¯çš„æœ€å¤§å¥½å¤„ä¹‹ä¸€å°±æ˜¯<strong>æ¶ˆé™¤äº†ç¬¬ä¸‰æ–¹äº¤æ˜“å»¶å±•æ€§</strong>ã€‚</li><li>åœ¨éš”ç¦»è§è¯ä¹‹å‰ï¼Œäº¤æ˜“å¯ä»¥é€šè¿‡ç¬¬ä¸‰æ–¹å·§å¦™åœ°ä¿®æ”¹å…¶ç­¾åï¼Œåœ¨ä¸æ”¹å˜ä»»ä½•åŸºæœ¬å±æ€§ï¼ˆè¾“å…¥ï¼Œè¾“å‡ºï¼Œé‡‘é¢ï¼‰çš„æƒ…å†µä¸‹æ›´æ”¹å…¶äº¤æ˜“IDï¼ˆå“ˆå¸Œï¼‰ã€‚è¿™ä¸ºæ‹’ç»æœåŠ¡DOSæ”»å‡»ï¼Œä»¥åŠå¯¹æœ‰ç¼ºé™·çš„é’±åŒ…è½¯ä»¶çš„æ”»å‡»åˆ›é€ äº†æœºä¼šï¼Œè¿™äº›è½¯ä»¶å‡å®šæœªç»è¯å®çš„äº¤æ˜“å“ˆå¸Œæ˜¯ä¸å¯å˜çš„ã€‚</li><li>é€šè¿‡å¼•å…¥éš”ç¦»è§è¯ï¼Œäº¤æ˜“æœ‰ä¸¤ä¸ªæ ‡è¯†ç¬¦txidå’Œwtxidã€‚ä¼ ç»Ÿçš„txidæ˜¯åºåˆ—åŒ–äº¤æ˜“çš„åŒSHA256å“ˆå¸Œï¼Œæ²¡æœ‰è§è¯æ•°æ®ã€‚äº¤æ˜“çš„wtxidæ˜¯å…·æœ‰è§è¯æ•°æ®çš„äº¤æ˜“çš„æ–°åºåˆ—åŒ–æ ¼å¼çš„åŒSHA256å“ˆå¸Œã€‚</li><li>ä¼ ç»Ÿtxidçš„è®¡ç®—æ–¹å¼ä¸ééš”ç¦»è§è¯äº¤æ˜“å®Œå…¨ç›¸åŒã€‚ä½†æ˜¯ï¼Œç”±äºéš”ç¦»è§è¯äº¤æ˜“åœ¨æ¯ä¸ªè¾“å…¥ä¸­éƒ½æœ‰ç©ºçš„scriptSigï¼Œä¸å­˜åœ¨å¯ç”±ç¬¬ä¸‰æ–¹ä¿®æ”¹çš„äº¤æ˜“éƒ¨åˆ†ã€‚å› æ­¤ï¼Œåœ¨éš”ç¦»äº¤æ˜“ä¸­ï¼Œå³ä½¿äº¤æ˜“æœªç»ç¡®è®¤ï¼Œtxidä¹Ÿæ˜¯ä¸èƒ½è¢«ç¬¬ä¸‰æ–¹ä¿®æ”¹çš„ã€‚</li></ul><blockquote><p><strong>æç¤º</strong> éš”ç¦»è§è¯äº¤æ˜“æœ‰ä¸¤ä¸ªIDï¼štxidå’Œwtxidã€‚txidæ˜¯æ²¡æœ‰è§è¯æ•°æ®çš„äº¤æ˜“çš„å“ˆå¸Œï¼Œwtxidæ˜¯åŒ…å«è§è¯æ•°æ®çš„å“ˆå¸Œã€‚æ‰€æœ‰è¾“å…¥éƒ½æ˜¯éš”ç¦»è§è¯è¾“å…¥çš„äº¤æ˜“ï¼Œä¸å—ç¬¬ä¸‰æ–¹äº¤æ˜“å»¶å±•æ€§å½±å“ã€‚</p></blockquote><hr /><ul><li>TXIDçš„ç”Ÿæˆå’Œä¼ ç»Ÿæ–¹å¼ä¸€è‡´ï¼šæ˜¯å¯¹version, txins, txouts, nLocktimeåºåˆ—åŒ–åçš„æ•°æ®ï¼Œè¿›è¡Œä¸¤æ¬¡SHA256å“ˆå¸Œ</li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs json">[nVersion][txins][txouts][nLockTime]<br></code></pre></td></tr></table></figure><ul><li>WTXIDçš„ç”Ÿæˆï¼šå¯¹version, marker, flag, txins, txouts, witness, nLocktimeåºåˆ—åŒ–åçš„æ•°æ®ï¼Œè¿›è¡Œä¸¤æ¬¡SHA256å“ˆå¸Œ</li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs json">[nVersion][marker][flag][txins][txouts][witness][nLockTime]<br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/2017zhangyuxuan/picture_backend@master//img/202111131049973.png" alt="TXIDä¸WTXIDçš„ç”Ÿæˆ" /></p><h2 id="éš”ç¦»è§è¯çš„æ•°æ®åˆ°åº•æ”¾åœ¨å“ªé‡Œ"><a class="markdownIt-Anchor" href="#éš”ç¦»è§è¯çš„æ•°æ®åˆ°åº•æ”¾åœ¨å“ªé‡Œ"></a> éš”ç¦»è§è¯çš„æ•°æ®åˆ°åº•æ”¾åœ¨å“ªé‡Œ</h2><p>åœ¨äº†è§£éš”ç¦»è§è¯çš„å¤§è‡´åŸç†åï¼Œæˆ‘å…¶å®è¿˜æ˜¯å­˜åœ¨ä¸€ä¸ªç–‘æƒ‘ï¼šæ—¢ç„¶è¯´è§è¯ç›¸å½“äºæ˜¯åŸæ¥çš„ç­¾åæ•°æ®ï¼ˆè§£é”è„šæœ¬ï¼‰ï¼Œä¸åŸæ¥çš„äº¤æ˜“æ•°æ®éš”ç¦»å¼€ï¼Œé‚£ä¹ˆè¿™äº›è§è¯æ•°æ®åˆ°åº•æ”¾åœ¨å“ªé‡Œäº†ï¼Ÿ</p><ul><li><p>é€šè¿‡<a href="https://www.jianshu.com/p/eef8e260b9f7">æ¯”ç‰¹å¸æ¢ç©¶ä¹‹éš”ç¦»è§è¯</a> è¿™ç¯‡æ–‡ç« ï¼Œäº†è§£åˆ°åŸæ¥çš„ç­¾åæ•°æ®æ”¾åˆ°äº†è§è¯æ•°æ®ä¸­ï¼Œè§è¯æ•°æ®åœ¨CTxIn æ˜¯ä¸€ä¸ªæ–°çš„å­—æ®µï¼Œä½†æ˜¯åªæœ‰åœ¨äº¤æ˜“è¢«åºåˆ—åŒ–ç½‘ç»œä¼ è¾“æ—¶æ‰å‚ä¸ï¼Œå‘¼åº”ä¸Šæ–‡è®¡ç®—TXIDæ—¶ï¼Œwitnessæ˜¯ä¸éœ€è¦åºåˆ—åŒ–çš„ï¼›</p></li><li><p>é€šè¿‡<a href="https://boinnex.com/what-is-segwit/">å¤–æ–‡- Segwitå¦‚ä½•å·¥ä½œçš„</a> è¿™ç¯‡æ–‡ç« ï¼Œè¿›ä¸€æ­¥äº†è§£åˆ°åœ¨ç”ŸæˆåŒºå—æ—¶ï¼Œè¾“å…¥çš„è§è¯æ•°æ®åŒæ ·æ„æˆä¸€æ£µMerkle Treeï¼Œå¹¶æŠŠrootæ”¾åˆ°äº†åŒºå—ä¸­çš„å¸åŸºäº¤æ˜“çš„outputçš„é”å®šè„šæœ¬ä¸­ï¼Œå…·ä½“åŸæ–‡æè¿°å¦‚ä¸‹å›¾ã€‚</p></li></ul><p><img src="https://cdn.jsdelivr.net/gh/2017zhangyuxuan/picture_backend@master//img/202111131137534" alt="ScriptPubKey of Witness in coinbase " /></p><h1 id="é—ªç”µç½‘ç»œ"><a class="markdownIt-Anchor" href="#é—ªç”µç½‘ç»œ"></a> é—ªç”µç½‘ç»œ</h1><p>é—ªç”µç½‘ç»œå…¶å®ä¹Ÿæ˜¯ä¸€ç§æé«˜æ¯”ç‰¹å¸äº¤æ˜“æ€§èƒ½çš„æ–¹æ³•ï¼Œç®€å•æ¥è¯´ï¼Œå°±æ˜¯å°†å¤§é‡äº¤æ˜“æ”¾åˆ°æ¯”ç‰¹å¸åŒºå—é“¾ä¹‹å¤–è¿›è¡Œã€‚åœ¨å…·ä½“ä»‹ç»é—ªç”µç½‘ç»œæ˜¯å¦‚ä½•å·¥ä½œè¿è¡Œå‰ï¼Œè¿˜éœ€è¦å…ˆä»‹ç»çŠ¶æ€é€šé“ï¼Œæ”¯ä»˜é€šé“ï¼ŒHTLCå“ˆå¸Œæ—¶é—´é”åˆçº¦ç­‰æ¦‚å¿µã€‚</p><h2 id="çŠ¶æ€é€šé“å’Œæ”¯ä»˜é€šé“"><a class="markdownIt-Anchor" href="#çŠ¶æ€é€šé“å’Œæ”¯ä»˜é€šé“"></a> çŠ¶æ€é€šé“å’Œæ”¯ä»˜é€šé“</h2><p>åŸºæœ¬æ¦‚å¿µï¼š</p><ul><li><em>æ”¯ä»˜é€šé“Payment channels</em>æ˜¯åœ¨æ¯”ç‰¹å¸åŒºå—é“¾ä¹‹å¤–ï¼ŒåŒæ–¹äº¤æ¢æ¯”ç‰¹å¸äº¤æ˜“çš„æ— ä¿¡ä»»æœºåˆ¶ã€‚</li><li>å®é™…ä¸Šï¼Œ<em>é€šé“channel</em> ä¸€è¯æ˜¯ä¸€ä¸ªæ¯”å–»ã€‚çŠ¶æ€é€šé“æ˜¯åŒºå—é“¾å¤–ï¼Œç”±åŒæ–¹ä¹‹é—´çš„äº¤æ¢çŠ¶æ€ä»£è¡¨çš„è™šæ‹Ÿæ„æƒ³ã€‚å®é™…ä¸Šæ²¡æœ‰â€œé€šé“â€ï¼Œåº•å±‚æ•°æ®ä¼ è¾“æœºåˆ¶ä¹Ÿå¹¶ä¸æ˜¯é€šé“ã€‚æˆ‘ä»¬ä½¿ç”¨é€šé“è¿™ä¸ªæœ¯è¯­æ¥è¡¨ç¤ºé“¾å¤–åŒæ–¹ä¹‹é—´çš„å…³ç³»å’Œå…±äº«çŠ¶æ€ã€‚</li><li>æ”¯ä»˜é€šé“æ˜¯æ›´å¹¿æ³›çš„<em>çŠ¶æ€é€šé“state channel</em>æ¦‚å¿µçš„ä¸€éƒ¨åˆ†ï¼ŒçŠ¶æ€é€šé“ä»£è¡¨äº†é“¾å¤–çŠ¶æ€çš„å˜åŒ–ï¼Œé€šè¿‡æœ€ç»ˆåœ¨åŒºå—é“¾ä¸Šç»“ç®—å¾—åˆ°ä¿éšœã€‚æ”¯ä»˜é€šé“æ˜¯ä¸€ç§çŠ¶æ€é€šé“ï¼Œå…¶ä¸­è¢«æ”¹å˜çš„çŠ¶æ€æ˜¯è™šæ‹Ÿè´§å¸ä½™é¢ã€‚</li></ul><hr /><p>ã€Šç²¾é€šæ¯”ç‰¹å¸ã€‹ä¸­å¯¹æ”¯ä»˜é€šé“çš„æè¿°æ„Ÿè§‰è¿‡äºå¤æ‚ï¼Œè¿™é‡Œç”¨Bitcoin Developer Guideé‡Œçš„å¾®æ”¯ä»˜é€šé“æ¥ä¸¾ä¾‹è¯´æ˜ï¼Œåœ¨ä¹‹å‰åšå®¢[ã€æ¯”ç‰¹å¸ä¸“é¢˜02ã€‘Developer Guideå¯¼è¯»](<a href="https://2017zhangyuxuan.github.io/2021/10/11/2021-10-11%E6%AF%94%E7%89%B9%E5%B8%81%E4%B8%93%E9%A2%9802-Developer">https://2017zhangyuxuan.github.io/2021/10/11/2021-10-11æ¯”ç‰¹å¸ä¸“é¢˜02-Developer</a> Guide/) ä¹Ÿæœ‰ä»‹ç»ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/2017zhangyuxuan/picture_backend@master//img/202111131147856.(null)" alt="å¾®æ”¯ä»˜é€šé“" /></p><ul><li>å…¶å·¥ä½œåŸç†å¤§ä½“ä¸Šå¯ä»¥è¿™æ ·æè¿°ï¼šAç»™Bæ‰“å·¥ï¼ŒBé¦–å…ˆä½¿ç”¨Aå’ŒBçš„ç­¾åï¼Œä½¿ç”¨P2SHçš„æ–¹å¼ï¼Œå‘é€ä¸€å®šé‡‘é¢åˆ°è„šæœ¬åœ°å€ï¼Œå¹¶å°†è¯¥äº¤æ˜“ç«‹å³ä¼ æ’­åˆ°æ¯”ç‰¹å¸ç½‘ç»œä¸Šï¼›ç„¶åBåˆ›é€ ç¬¬äºŒä¸ªäº¤æ˜“ï¼Œå¹¶ç”¨åˆ°åˆšåˆšAçš„ç­¾åï¼Œå…¶è¾“å…¥æ˜¯ç¬¬ä¸€ä¸ªäº¤æ˜“çš„è„šæœ¬åœ°å€ï¼Œè¾“å‡ºæ˜¯Bçš„åœ°å€ï¼ˆç›¸å½“äºå…¨é¢è¿”å›ç»™Bï¼‰ï¼Œç„¶åç»™è¿™ä¸ªäº¤æ˜“åŠ ä¸ŠLocktimeï¼Œæ¯”å¦‚è¯´ä¸€å¤©åæ‰èƒ½å¹¿æ’­è¿™ä¸ªäº¤æ˜“ã€‚ç„¶åAç»™Bå·¥ä½œä¸€éƒ¨åˆ†å†…å®¹åï¼ŒAè¦æ±‚Bå…ˆæ”¯ä»˜è¿™ä»½å·¥ä½œé‡çš„è–ªæ°´ï¼Œé‚£ä¹ˆBå°±åˆ›å»ºä¸€ä»½æ–°çš„äº¤æ˜“ï¼Œä»åŸæ¥å…¨é¢ç»™Bå˜æˆåˆ†å‡ºä¸€éƒ¨åˆ†é‡‘é¢ç»™Aï¼Œè¿™ä¸ªæ–°çš„äº¤æ˜“æ‹·è´ç»™Aï¼Œè¿™æ ·Aå°±å¯ä»¥å¹¿æ’­è¿™ä¸ªæ–°çš„äº¤æ˜“ä»è€Œè·å¾—è–ªæ°´ã€‚ï¼ˆå®é™…ä¸ŠAåªéœ€è¦åœ¨locktimeè¿‡æœŸå‰ï¼Œå¹¿æ’­æœ€åç‰ˆæœ¬çš„äº¤æ˜“å³å¯ï¼‰<ul><li>Båˆ›å»ºçš„ç¬¬ä¸€ç¬”äº¤æ˜“å’Œç¬¬äºŒç¬”äº¤æ˜“ï¼Œå¯ä»¥ç†è§£ä¸ºã€Šç²¾é€šæ¯”ç‰¹å¸ã€‹ä¸­çš„<em>æ³¨èµ„äº¤æ˜“funding transaction</em>æˆ–<em>é”šç‚¹äº¤æ˜“anchor transaction</em>ï¼šé€šè¿‡åœ¨åŒºå—é“¾ä¸Šé”å®šå…±äº«çŠ¶æ€çš„äº¤æ˜“ï¼Œåœ¨äº¤æ˜“ä¸¤æ–¹ä¹‹é—´å»ºç«‹äº†ä¸€ä¸ªçŠ¶æ€é€šé“ã€‚åœ¨æ”¯ä»˜é€šé“çš„ç¤ºä¾‹ä¸­ï¼Œé”å®šçš„çŠ¶æ€å³ä¸ºé€šé“çš„åˆå§‹ä½™é¢ï¼ˆä»¥è´§å¸è®¡ï¼‰</li><li>éšååŒæ–¹äº¤æ¢å·²ç­¾åçš„äº¤æ˜“ï¼Œè¿™è¢«ç§°ä¸º<em>æ‰¿è¯ºäº¤æ˜“commitment transactions</em>ã€‚æ‰¿è¯ºäº¤æ˜“ä¼šæ”¹å˜åˆå§‹çŠ¶æ€ã€‚è¿™äº›äº¤æ˜“æ˜¯æœ‰æ•ˆçš„äº¤æ˜“ï¼Œå› ä¸ºå®ƒä»¬<em>å¯ä»¥</em>è¢«ä»»ä½•ä¸€æ–¹æäº¤è¿›è¡Œç»“ç®—ï¼Œä½†æ˜¯åœ¨é€šé“å…³é—­ä¹‹å‰ï¼Œæ¯ä¸€æ–¹éƒ½ä¼šå°†å…¶åœ¨é“¾ä¸‹ä¿ç•™ã€‚</li><li>æœ€åï¼Œé€šé“å¯ä»¥åå•†å…³é—­ï¼Œå³å‘åŒºå—é“¾æäº¤æœ€åçš„<em>ç»“ç®—äº¤æ˜“settlement transaction</em>ï¼Œæˆ–è€…ç”±ä»»ä½•ä¸€æ–¹å•æ–¹é¢æäº¤æœ€åæ‰¿è¯ºäº¤æ˜“åˆ°é“¾ä¸Šã€‚</li></ul></li><li>ä¸ºä»€ä¹ˆé‡‡ç”¨æ”¯ä»˜é€šé“è¿™æ ·çš„æ–¹å¼å‘¢ï¼Œå› ä¸ºAè¯‰æ±‚æ˜¯åŠæ—¶æ”¯ä»˜è–ªæ°´ï¼Œä½†æ˜¯å› ä¸ºé‡å°ï¼ŒBä¸èƒ½æ¯æ¬¡éƒ½ç«‹å³åˆ›é€ ä¸€ä¸ªäº¤æ˜“å³åˆ»æ”¯ä»˜ï¼Œè¿™æ ·çš„äº¤æ˜“è´¹çš„æˆæœ¬å¤ªé«˜äº†ã€‚æ‰€ä»¥åˆ©ç”¨è¿™æ ·çš„æ–¹å¼ï¼Œæ—¢ç¡®ä¿äº†Açš„è–ªæ°´æ˜¯åŠæ—¶å¾—åˆ°ç¡®è®¤çš„ï¼Œåˆå¯ä»¥ä½¿å¾—åªéœ€ä¸€ä¸ªäº¤æ˜“å°±ä¸€æ¬¡æ€§æ”¯ä»˜è–ªæ°´</li><li>å®é™…ä¸Šï¼Œæ›´æ”¹äº¤æ˜“é‡‘é¢çš„è¾“å‡ºï¼Œè¿™ä¸ªæƒåˆ©æ˜¯åœ¨Bçš„ï¼Œå› ä¸ºBæœ‰Açš„ç­¾åä½†Aæ²¡æœ‰Bçš„ç­¾åï¼ŒAæ‹¿çš„æ˜¯ç»è¿‡Bç­¾ååçš„äº¤æ˜“å‰¯æœ¬ï¼ˆè¿™ä¸ªäº¤æ˜“è¢«Bç­¾åè¿‡äº†ï¼Œæ‰€ä»¥æ˜¯æœ‰æ•ˆçš„ï¼‰ã€‚æ‰€ä»¥Aèƒ½å®æ—¶ç¡®ä¿è‡ªå·±å¯¹åº”å·¥ä½œé‡çš„è–ªæ°´èƒ½åŠæ—¶æ”¯ä»˜ï¼Œå°±ç®—ä¸­é€”Bè·‘è·¯äº†ï¼Œä¹Ÿåªæ˜¯æŸå¤±ä¸€å°éƒ¨åˆ†å·¥ä½œé‡çš„è–ªæ°´ï¼Œä¹‹å‰çš„è–ªæ°´éƒ½å¯ä»¥å¾—åˆ°æ”¯ä»˜ã€‚è€Œå¯¹Bæ¥è¯´ï¼Œå¦‚æœAæ²¡æœ‰å·¥ä½œï¼Œé‚£Bä¹Ÿèƒ½åœ¨locktime è¿‡æœŸåæ‹¿å›è‡ªå·±çš„é’±ï¼ˆä¸è¿‡è¿™æ ·å°±éœ€è¦ç­‰å¾…ä¸€ä¸ªlocktimeçš„æ—¶é—´ï¼‰</li></ul><h2 id="htlcå“ˆå¸Œæ—¶é—´é”åˆçº¦"><a class="markdownIt-Anchor" href="#htlcå“ˆå¸Œæ—¶é—´é”åˆçº¦"></a> HTLCå“ˆå¸Œæ—¶é—´é”åˆçº¦</h2><p><a href="https://github.com/tianmingyun/MasterBitcoin2CN/blob/master/ch12.md#1255-%E5%93%88%E5%B8%8C%E6%97%B6%E9%97%B4%E9%94%81%E5%90%88%E7%BA%A6htlc">HTLC å“ˆå¸Œæ—¶é—´é”åˆçº¦</a> åŸæ–‡ä¸­ä»‹ç»å¾—æ¯”è¾ƒè¯¦ç»†äº†ï¼Œè¿™é‡Œç®€å•æ€»ç»“ä¸€ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> é€šè¿‡å¯†é’¥Rç”Ÿæˆå“ˆå¸Œå€¼H</span><br>H = Hash(R)<br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> å®ç°HTLCçš„è„šæœ¬å¯èƒ½å¦‚ä¸‹æ‰€ç¤ºï¼š</span><br>IF<br>Payment if you have the secret R<br>    HASH160 &lt;H&gt; EQUALVERIFY<br>ELSE<br>    # Refund after timeout.<br>    &lt;locktime&gt; CHECKLOCKTIMEVERIFY DROP<br>    &lt;Payer Public Key&gt; CHECKSIG<br>ENDIF<br></code></pre></td></tr></table></figure><ul><li>ä»»ä½•çŸ¥é“å¯†é’¥Rï¼Œå…¶å“ˆå¸Œå€¼ç­‰äºHçš„äººï¼Œéƒ½å¯ä»¥é€šè¿‡è¡Œä½¿IFè¯­å¥çš„ç¬¬ä¸€ä¸ªå­å¥æ¥å…‘æ¢è¯¥è¾“å‡ºã€‚</li><li>å¦‚æœå¯†é’¥Ræ²¡æœ‰è¢«é€éœ²ï¼ŒHTLCä¸­å†™æ˜äº†ï¼Œåœ¨ä¸€å®šæ•°é‡çš„åŒºå—ä¹‹åï¼Œä»˜æ¬¾äººå¯ä»¥ä½¿ç”¨IFè¯­å¥ä¸­çš„ç¬¬äºŒä¸ªå­å¥ç”³è¯·é€€æ¬¾ã€‚</li></ul><h2 id="é—ªç”µç½‘ç»œè¿è¡Œ"><a class="markdownIt-Anchor" href="#é—ªç”µç½‘ç»œè¿è¡Œ"></a> é—ªç”µç½‘ç»œè¿è¡Œ</h2><div class="group-image-container"><div class="group-image-row"><div class="group-image-wrap"><img src="https://cdn.jsdelivr.net/gh/2017zhangyuxuan/picture_backend@master//img/202111131152708.(null)" alt="" /></div><div class="group-image-wrap"><img src="https://cdn.jsdelivr.net/gh/2017zhangyuxuan/picture_backend@master//img/202111131152805.(null)" alt="" /></div></div></div><p align="middle"><font size="2" color="grey">å·¦å›¾ï¼šæ”¯ä»˜é€šé“åˆå§‹çŠ¶æ€ï¼›å³å›¾ï¼šé—ªç”µç½‘ç»œè¿è¡Œæµç¨‹</font></p><p>æ¥ä¸‹æ¥è¯´æ˜ä¸€ä¸‹ï¼Œé—ªç”µç½‘ç»œæ˜¯å¦‚ä½•å·¥ä½œï¼š</p><ul><li>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æœ‰äº”ä¸ªå‚ä¸è€…ï¼šAlice, Bob, Carol, Diana, and Ericã€‚è¿™äº”åå‚ä¸è€…å·²ç»å½¼æ­¤ä¹‹é—´å¼€è®¾äº†æ”¯ä»˜é€šé“ã€‚Aliceå’ŒBobæœ‰æ”¯ä»˜é€šé“ã€‚Bobè¿æ¥Carolï¼ŒCarolè¿æ¥åˆ°Dianaï¼ŒDianaè¿æ¥Ericã€‚ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬å‡è®¾æ¯ä¸ªé€šé“æ¯ä¸ªå‚ä¸è€…éƒ½æ³¨èµ„2ä¸ªæ¯”ç‰¹å¸èµ„é‡‘ï¼Œæ¯ä¸ªé€šé“çš„æ€»å®¹é‡ä¸º4ä¸ªæ¯”ç‰¹å¸ï¼Œä¹Ÿå°±æ˜¯å¦‚å·¦å›¾æ‰€ç¤ºçš„åˆå§‹çŠ¶æ€</li><li>Aliceæƒ³è¦æ”¯ä»˜ç»™Eric1ä¸ªæ¯”ç‰¹å¸ã€‚ä½†æ˜¯ï¼ŒAliceå¹¶æ²¡æœ‰ç›´æ¥è¿æ¥Ericçš„æ”¯ä»˜é€šé“ã€‚åˆ›å»ºæ”¯ä»˜é€šé“éœ€è¦æ³¨èµ„äº¤æ˜“ï¼Œè€Œè¿™ç¬”äº¤æ˜“å¿…é¡»é¦–å…ˆæäº¤ç»™æ¯”ç‰¹å¸åŒºå—é“¾ã€‚Aliceä¸æƒ³å»ºç«‹ä¸€ä¸ªæ–°çš„æ”¯ä»˜é€šé“è¿˜è¦æ”¯å‡ºæ›´å¤šçš„æ‰‹ç»­è´¹ã€‚é‚£ä¹ˆå°±å¯ä»¥é€šè¿‡é—ªç”µç½‘ç»œæ¥è¿›è¡Œæ”¯ä»˜ã€‚</li></ul><ol><li>Aliceé€šè¿‡è·¯ç”±å‘ç°äº†ä¸€æ¡ä»Aliceåˆ°Ericçš„ä¸€æ¡æ”¯ä»˜è·¯ç”±ï¼Œç”±å¤šä¸ªæ”¯ä»˜é€šé“ç»„æˆã€‚æ­¤æ—¶Aliceå’ŒEricå¯ä»¥è¿›è¡Œé€šä¿¡ï¼ŒEricç”Ÿæˆä¸€ä¸ªå¯†é’¥Rï¼Œå¹¶è¿›è¡Œhashï¼Œå°†å“ˆå¸Œå€¼Hå‘é€ç»™Aliceã€‚</li><li>Aliceæ„é€ ä¸€ä¸ªHTLCï¼Œæ”¯ä»˜1.003BTCåˆ°å“ˆå¸ŒHï¼ˆå¤šå‡ºæ¥çš„0.003BTCæ˜¯ç»™è·¯ç”±ä¸Š3ä¸ªèŠ‚ç‚¹çš„è´¹ç”¨ï¼‰ï¼Œå¹¶å¯ä»¥åœ¨10åŒºå—å†…å¾—åˆ°é€€æ¬¾ã€‚Aliceå°†æ­¤HTLCæä¾›ç»™Bobï¼Œä»å’ŒBobä¹‹é—´çš„é€šé“ä½™é¢ä¸­æ‰£é™¤1.003æ¯”ç‰¹å¸ï¼Œå¹¶å°†å…¶æäº¤ç»™HTLCã€‚è¯¥HTLCå…·æœ‰ä»¥ä¸‹å«ä¹‰ï¼š<em>â€œå¦‚æœBobçŸ¥é“å¯†é’¥ï¼ŒAliceå°†å…¶é€šé“ä½™é¢çš„1.003æ”¯ä»˜ç»™Bobï¼Œæˆ–è€…å¦‚æœè¶…è¿‡10ä¸ªåŒºå—åï¼Œåˆ™é€€è¿˜å…¥Aliceçš„ä½™é¢â€</em>ã€‚</li><li>Bobæ„é€ ä¸€ä¸ªæ–°çš„HTLCï¼Œæ”¯ä»˜1.002BTCåˆ°å“ˆå¸ŒHï¼Œå¦‚æœCarolçŸ¥é“äº†å¯†é’¥Rï¼Œå¯ä»¥å»å–èµ°HTLCä¸­çš„1.002BTCï¼Œç„¶åBobä¹Ÿå¯ä»¥å–èµ°Aliceæä¾›çš„1.003BTCï¼Œç›¸å½“äºèµšå–äº†0.001BTCï¼›å¦‚æœCarolä¸èƒ½æä¾›å¯†é’¥ï¼ŒBobä¹Ÿå¯ä»¥åœ¨9ä¸ªåŒºå—æ—¶é—´å†…å–å›1.002BTC</li><li>Carolå‘Dianaæä¾›1.001BTCçš„HTLCï¼ŒåŒä¸Šé¢ä¸€æ ·</li><li>Dinanaå‘Ericæä¾›1.0BTCçš„HTLC</li><li>EricçŸ¥é“å¯†é’¥ï¼Œå‘Dianaå‡ºç¤ºäº†å¯†é’¥Rï¼Œå› æ­¤å–èµ°äº†HTLCä¸­çš„1.0BTC</li><li>Dianaä»EricçŸ¥é“äº†å¯†é’¥Rï¼Œå†å‘Carolå‡ºç¤ºå¯†é’¥Rï¼Œè·å¾—äº†1.001BTCï¼Œæ­¤æ—¶åœ¨Ericå’ŒDianaä¸­æ”¯ä»˜é€šé“ä¸­ï¼ŒDianaä½™é¢åªæœ‰1.0BTCäº†ï¼Œä½†åœ¨Carolå’ŒDianaçš„æ”¯ä»˜é€šé“ä¸­ï¼ŒDianaä½™é¢ä¸º3.001BTCï¼Œå¯¹æ¯”åŸæ¥çš„2+2ï¼Œèµšå–äº†0.001BTC</li><li>Carolå‘Dianaæ”¯ä»˜äº†1.001BTCï¼Œå†ä»Bobå¤„èµšå–äº†1.002BTCï¼Œèµšå–äº†0.001BTC</li><li>Bobå‘Carolæ”¯ä»˜äº†1.002BTCï¼Œä»Aliceå¤„èµšå–äº†1.003BTCï¼Œèµšå–äº†0.001BTC</li><li>æœ€ç»ˆAliceæ”¯ä»˜äº†1.003BTCï¼Œå®é™…ä¸Š1BTCè½¬è´¦ç»™äº†Ericï¼Œ0.003æ”¯ä»˜ç»™äº†è·¯ç”±ä¸Šçš„å…¶ä»–èŠ‚ç‚¹</li></ol>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºçŸ¥è¯†</category>
      
      <category>æ¯”ç‰¹å¸</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Bitcoin</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>CryptoPP C++åº“å­¦ä¹ ä½¿ç”¨</title>
    <link href="/2021/11/01/2021-11/2021-11-01%20CryptoPP%E5%BA%93%E4%BD%BF%E7%94%A8/"/>
    <url>/2021/11/01/2021-11/2021-11-01%20CryptoPP%E5%BA%93%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a class="markdownIt-Anchor" href="#å‰è¨€"></a> å‰è¨€</h1><blockquote><p>å‚è€ƒä¹¦ç±ï¼šã€Šæ·±å…¥æµ…å‡ºCryptoPPå¯†ç å­¦åº“ã€‹<br />crypto++  å¯†ç å­¦åº“ ï¼š<a href="https://github.com/weidai11/cryptopp">https://github.com/weidai11/cryptopp</a><br />ç”µå­ä¹¦ä¸‹è½½ ï¼š<a href="https://gitee.com/locomotive_crypto">https://gitee.com/locomotive_crypto</a></p></blockquote><p>æœ€è¿‘åœ¨å­¦ä¹ æ¯”ç‰¹å¸ç›¸å…³æŠ€æœ¯ï¼Œåœ¨æ¯”ç‰¹å¸ç³»ç»Ÿä¸­ä½¿ç”¨å¤§é‡å“ˆå¸ŒåŠ å¯†ã€ç­¾åéªŒè¯ç­‰æ“ä½œï¼Œä¸ºäº†ç”¨ä»£ç æ¥æ¨¡æ‹Ÿå®ç°æ¯”ç‰¹å¸çš„è¿è¡Œè¿‡ç¨‹ï¼Œå­¦ä¹ ä¸€ä¸ªæ”¯æŒå¯†ç åŸè¯­æ“ä½œçš„ç¬¬ä¸‰æ–¹åº“æ˜¯éå¸¸æœ‰å¿…è¦çš„ã€‚</p><p>æœ€ä¸ºçŸ¥åçš„å¯†ç å­¦ç›¸å…³å¼€æºåº“åº”è¯¥æ˜¯OpenSSLäº†ï¼Œä½†æ˜¯ç”±äºå®˜ç½‘æ˜¯ä¸€å †è‹±æ–‡ï¼Œå­¦ä¹ èµ·æ¥å¤ªåƒåŠ›ï¼Œåæ¥æœºç¼˜å·§åˆä¸‹å‘ç°äº†CryptoPPè¿™ä¸ªåº“ï¼Œè€Œä¸”è¿˜æœ‰ä¸“é—¨çš„ä¸­æ–‡ä¹¦ç±æ¥è®²è§£ä½¿ç”¨ï¼Œå› æ­¤å°±å†³å®šå­¦ä¹ CryptoPPåº“ï¼Œæœ¬ç¯‡è®ºæ–‡ä¹Ÿæ˜¯åŸºäºã€Šæ·±å…¥æµ…å‡ºCryptoPPå¯†ç å­¦åº“ã€‹é˜…è¯»ï¼Œæ•´ç†å‡ºå…³é”®ç« èŠ‚å†…å®¹ï¼Œä¾›å¤§å®¶å‚è€ƒå­¦ä¹ ã€‚</p><p class='note note-info'>1. CryptoPPåº“çš„å®‰è£…ä½¿ç”¨è¿™é‡Œä¸å†è¯¦ç»†è¯´æ˜ï¼Œè¯·å¤§å®¶è‡ªè¡Œæœç´¢ç½‘ä¸Šæ•™ç¨‹  <br>2. åæ¥çœ‹åˆ°OpenSSLä¹Ÿæœ‰ä¸€ä¸ªä¸­æ–‡æ‰‹å†Œå­¦ä¹ ç½‘ç«™ï¼Œä¹Ÿæ¨èç»™å¤§å®¶https://www.openssl.net.cn/</p><h1 id="string-å’Œ-secbyteblockç±»å‹äº’æ¢"><a class="markdownIt-Anchor" href="#string-å’Œ-secbyteblockç±»å‹äº’æ¢"></a> string å’Œ SecByteBlockç±»å‹äº’æ¢</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">// SecByteBlock è½¬ string</span><br><br>SecByteBlock iv; ... <span class="hljs-comment">// C++-style cast </span><br><br>std::string token = std::<span class="hljs-built_in">string</span>(<span class="hljs-keyword">reinterpret_cast</span>&lt;<span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span>*&gt;(iv.<span class="hljs-built_in">data</span>()), iv.<span class="hljs-built_in">size</span>());<br><br><br><br><span class="hljs-comment">// string è½¬ SecByteBlock</span><br><br>std::string str; ... <span class="hljs-comment">// C++-style cast </span><br><br><span class="hljs-function">SecByteBlock <span class="hljs-title">sbb</span><span class="hljs-params">(<span class="hljs-keyword">reinterpret_cast</span>&lt;<span class="hljs-keyword">const</span> byte*&gt;(str.data()), str.size())</span></span>;<br></code></pre></td></tr></table></figure><h1 id="ç¬¬å››ç« -åˆè¯†cryptoppåº“"><a class="markdownIt-Anchor" href="#ç¬¬å››ç« -åˆè¯†cryptoppåº“"></a> ç¬¬å››ç«  åˆè¯†CryptoPPåº“</h1><h2 id="hexç¼–è§£ç å­—ç¬¦ä¸²"><a class="markdownIt-Anchor" href="#hexç¼–è§£ç å­—ç¬¦ä¸²"></a> Hexç¼–è§£ç å­—ç¬¦ä¸²</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;filters.h&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;hex.h&gt;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> CryptoPP;<br><br><br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br><br>    <span class="hljs-comment">// ç¬¬ä¸€ç§ç¼–ç æ–¹å¼</span><br><br>    HexEncoder hex;<br><br>    string str = <span class="hljs-string">&quot;I like&quot;</span>;<br><br>    string hexstr;<br><br>    hex.<span class="hljs-built_in">Detach</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">StringSink</span>(hexstr));<br><br>    hex.<span class="hljs-built_in">Put</span>(<span class="hljs-keyword">reinterpret_cast</span>&lt;byte*&gt;(&amp;str[<span class="hljs-number">0</span>]),str.<span class="hljs-built_in">size</span>());  <span class="hljs-comment">// æ³¨æ„æ˜¯ä¼šè¿½åŠ å†™å…¥çš„</span><br><br>    cout &lt;&lt; <span class="hljs-string">&quot;str:&quot;</span> &lt;&lt; str &lt;&lt; endl;<br><br>    cout &lt;&lt; <span class="hljs-string">&quot;hexstr:&quot;</span> &lt;&lt; hexstr &lt;&lt; endl;<br><br><br><br>    <span class="hljs-comment">// ç¬¬äºŒç§ç¼–è§£ç å†™æ³•  Source -&gt; Filter -&gt; Sink  è¿™æ˜¯ä¸€ç§Pipelineçš„æ–¹å¼</span><br><br>    string encode,decode;<br><br>    <span class="hljs-function">StringSource <span class="hljs-title">enc</span><span class="hljs-params">(str, <span class="hljs-literal">true</span>, <span class="hljs-keyword">new</span> HexEncoder(<span class="hljs-keyword">new</span> StringSink(encode)))</span></span>;<br><br>    <span class="hljs-function">StringSource <span class="hljs-title">dec</span><span class="hljs-params">(hexstr, <span class="hljs-literal">true</span>, <span class="hljs-keyword">new</span> HexDecoder(<span class="hljs-keyword">new</span> StringSink(decode)))</span></span>;<br><br>    cout &lt;&lt; <span class="hljs-string">&quot;encode:&quot;</span>&lt;&lt;encode &lt;&lt; endl;<br><br>    cout &lt;&lt; <span class="hljs-string">&quot;decode:&quot;</span>&lt;&lt;decode &lt;&lt; endl;<br><br>&#125;<br></code></pre></td></tr></table></figure><h1 id="ç¬¬äº”ç« -éšæœºæ•°ç”Ÿæˆå™¨"><a class="markdownIt-Anchor" href="#ç¬¬äº”ç« -éšæœºæ•°ç”Ÿæˆå™¨"></a> ç¬¬äº”ç«  éšæœºæ•°ç”Ÿæˆå™¨</h1><p>ä¸»è¦å¯ä»¥å…³æ³¨GenerateBlockæ–¹æ³•ï¼Œç”ŸæˆæŒ‡å®šå­—èŠ‚é•¿åº¦çš„éšæœºæ•°</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;osrng.h&gt;</span> <span class="hljs-comment">// å¯ä»¥ä½¿ç”¨ AutoSeededRandomPool ï¼Œè¯¥éšæœºå™¨ä¸ç”¨è®¾ç½®ç§å­</span></span><br><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;rng.h&gt;</span> <span class="hljs-comment">//åŒ…å«LC_RNGç®—æ³•çš„å¤´æ–‡ä»¶</span></span><br><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;iostream&gt;</span> <span class="hljs-comment">//ä½¿ç”¨coutã€cin</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std; <span class="hljs-comment">//stdæ˜¯C++çš„å‘½åç©ºé—´</span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> CryptoPP; <span class="hljs-comment">//CryptoPPæ˜¯CryptoPPåº“çš„å‘½åç©ºé—´</span><br><br><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> Array_Size 64</span><br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span><br><span class="hljs-function"></span>&#123;<br><br>    <span class="hljs-comment">//å®šä¹‰ä¸€ä¸ªLC_RNGéšæœºæ•°å‘ç”Ÿå™¨å¯¹è±¡ï¼Œå¹¶è®¾ç½®å…¶ç§å­</span><br><br>    <span class="hljs-function">LC_RNG  <span class="hljs-title">rng</span><span class="hljs-params">(time(<span class="hljs-number">0</span>))</span></span>;<br><br>    cout &lt;&lt; <span class="hljs-string">&quot;äº§ç”Ÿä¸€ä¸ªæ¯”ç‰¹çš„éšæœºæ•°ï¼š&quot;</span> &lt;&lt; rng.<span class="hljs-built_in">GenerateBit</span>() &lt;&lt; endl;<br><br>    cout &lt;&lt; <span class="hljs-string">&quot;äº§ç”Ÿä¸€ä¸ªå­—èŠ‚çš„éšæœºæ•°ï¼š&quot;</span> &lt;&lt; rng.<span class="hljs-built_in">GenerateByte</span>() &lt;&lt; endl;<br><br>    byte output[Array_Size + <span class="hljs-number">1</span>] = &#123;<span class="hljs-number">0</span>&#125;;<span class="hljs-comment">//å®šä¹‰ä¸€ä¸ªç¼“å†²åŒº      </span><br><br><br><br>    <span class="hljs-comment">//äº§ç”ŸArray_Sizeå­—èŠ‚é•¿åº¦çš„éšæœºæ•°</span><br><br>    rng.<span class="hljs-built_in">GenerateBlock</span>(output, Array_Size);  <span class="hljs-comment">// è¿™é‡Œä¹Ÿå¯ç›´æ¥ä¼ å…¥SecByteBlock</span><br><br>    cout &lt;&lt; <span class="hljs-string">&quot;äº§ç”ŸArray_Sizeé•¿åº¦çš„éšæœºæ•°ï¼ˆåå…­è¿›åˆ¶ï¼‰ï¼š&quot;</span> &lt;&lt; endl;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; Array_Size; ++i)<br><br>    &#123;<span class="hljs-comment">//å°†è·å¾—çš„éšæœºæ•°è½¬æ¢æˆåå…­è¿›åˆ¶å¹¶è¾“å‡º</span><br><br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%02X&quot;</span>, output[i]);<br><br>    &#125;<br><br>    cout &lt;&lt; endl;<br><br>    cout &lt;&lt; <span class="hljs-string">&quot;äº§ç”Ÿä¸€ä¸ª100åˆ°1000ä¹‹é—´çš„éšæœºæ•°ï¼š&quot;</span> &lt;&lt; rng.<span class="hljs-built_in">GenerateWord32</span>(<span class="hljs-number">100</span>, <span class="hljs-number">1000</span>) &lt;&lt; endl;<br><br><br><br>    <span class="hljs-comment">//ä¸¢å¼ƒæ‰éšæœºæ•°å‘ç”Ÿå™¨æ¥ä¸‹æ¥äº§ç”Ÿçš„100ä¸ªå­—èŠ‚æ•°æ®</span><br><br>    rng.<span class="hljs-built_in">DiscardBytes</span>(<span class="hljs-number">100</span>);<br><br>    <span class="hljs-keyword">int</span> arry[] = &#123; <span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span>,<span class="hljs-number">8</span>,<span class="hljs-number">9</span>,<span class="hljs-number">10</span> &#125;;<br><br>    rng.<span class="hljs-built_in">Shuffle</span>(arry, arry + <span class="hljs-number">10</span>); <span class="hljs-comment">//æ‰“ä¹±æ•°ç»„arryä¸­å…ƒç´ çš„é¡ºåº</span><br><br>    <br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br><br>&#125;<br></code></pre></td></tr></table></figure><h1 id="ç¬¬å…­ç« -hashå‡½æ•°"><a class="markdownIt-Anchor" href="#ç¬¬å…­ç« -hashå‡½æ•°"></a> ç¬¬å…­ç«  Hashå‡½æ•°</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;sha.h&gt;</span> <span class="hljs-comment">//ä½¿ç”¨SHA384</span></span><br><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;filters.h&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;hex.h&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;iostream&gt;</span> <span class="hljs-comment">//ä½¿ç”¨coutã€cin</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std; <span class="hljs-comment">//stdæ˜¯C++çš„å‘½åç©ºé—´</span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> CryptoPP; <span class="hljs-comment">//CryptoPPæ˜¯CryptoPPåº“çš„å‘½åç©ºé—´</span><br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span><br><span class="hljs-function"></span>&#123;<br><br>    <span class="hljs-keyword">try</span><br><br>    &#123;<br><br>        SHA256 sha; <span class="hljs-comment">//å®šä¹‰ä¸€ä¸ªSHA256çš„ç±»å¯¹è±¡</span><br><br>        byte msg[] = <span class="hljs-string">&quot;I like cryptography very much&quot;</span>;<br><br><br><br>        <span class="hljs-comment">// ä½¿ç”¨pipelineèŒƒå¼</span><br><br>        <span class="hljs-function">SecByteBlock <span class="hljs-title">tmp</span><span class="hljs-params">(msg, <span class="hljs-keyword">sizeof</span>(msg)<span class="hljs-number">-1</span>)</span></span>;<br><br>        string r;<br><br>        <span class="hljs-function">StringSource <span class="hljs-title">s1</span> <span class="hljs-params">(tmp, tmp.size(),<span class="hljs-literal">true</span>,</span></span><br><span class="hljs-params"><span class="hljs-function"></span></span><br><span class="hljs-params"><span class="hljs-function">                         <span class="hljs-keyword">new</span> HashFilter(sha,    <span class="hljs-comment">// ä½¿ç”¨å…¶ä»–hashå‡½æ•°ï¼Œæ›´æ¢ä¸€ä¸‹ç±»å‹å³å¯</span></span></span><br><span class="hljs-params"><span class="hljs-function"></span></span><br><span class="hljs-params"><span class="hljs-function">                         <span class="hljs-keyword">new</span> HexEncoder(</span></span><br><span class="hljs-params"><span class="hljs-function"></span></span><br><span class="hljs-params"><span class="hljs-function">                         <span class="hljs-keyword">new</span> StringSink(r))))</span></span>;<br><br>        cout &lt;&lt; r &lt;&lt; endl;<br><br>        r.<span class="hljs-built_in">clear</span>();  <span class="hljs-comment">// æ¸…ç©ºä¸€ä¸‹ï¼Œä¸ç„¶åé¢ä¼šè¿½åŠ </span><br><br><br><br>        <span class="hljs-comment">// è¿ç»­ä¸¤æ¬¡Hash256ï¼Œå†ç”¨Hexç¼–ç è¾“å‡º</span><br><br>        SHA256 sha2;<br><br>        <span class="hljs-function">StringSource <span class="hljs-title">s2</span> <span class="hljs-params">(<span class="hljs-string">&quot;I like cryptography very much&quot;</span>,<span class="hljs-literal">true</span>,</span></span><br><span class="hljs-params"><span class="hljs-function"></span></span><br><span class="hljs-params"><span class="hljs-function">                         <span class="hljs-keyword">new</span> HashFilter(sha,</span></span><br><span class="hljs-params"><span class="hljs-function"></span></span><br><span class="hljs-params"><span class="hljs-function">                         <span class="hljs-keyword">new</span> HashFilter(sha2,</span></span><br><span class="hljs-params"><span class="hljs-function"></span></span><br><span class="hljs-params"><span class="hljs-function">                         <span class="hljs-keyword">new</span> HexEncoder(</span></span><br><span class="hljs-params"><span class="hljs-function"></span></span><br><span class="hljs-params"><span class="hljs-function">                         <span class="hljs-keyword">new</span> StringSink(r)))) )</span></span>;<br><br>        cout &lt;&lt; r &lt;&lt; endl;<br><br><br><br>        <span class="hljs-function">SecByteBlock <span class="hljs-title">digest</span><span class="hljs-params">(sha.DigestSize())</span></span>; <span class="hljs-comment">//ç”³è¯·å†…å­˜ç©ºé—´ä»¥å­˜æ”¾æ¶ˆæ¯æ‘˜è¦</span><br><br>        <span class="hljs-comment">//CalculateDigest()ç›¸å½“äºUpdate()+Final()</span><br><br>        <span class="hljs-comment">// Updateç”¨æ¥å‘shaè¾“å…¥ï¼ŒFinalè®¡ç®—hashå€¼ï¼ŒåŒæ—¶é‡ç½®hashå‡½æ•°å†…éƒ¨çŠ¶æ€</span><br><br>        sha.<span class="hljs-built_in">CalculateDigest</span>(digest, msg, <span class="hljs-built_in"><span class="hljs-keyword">sizeof</span></span>(msg) - <span class="hljs-number">1</span>);<br><br>        cout &lt;&lt; <span class="hljs-string">&quot;digest2=&quot;</span>;<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">size_t</span> i = <span class="hljs-number">0</span>; i &lt; sha.<span class="hljs-built_in">DigestSize</span>(); ++i)<br><br>        &#123;<span class="hljs-comment">//ä»¥åå…­è¿›åˆ¶è¾“å‡ºHashå€¼</span><br><br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%02X&quot;</span>, digest[i]);<br><br>        &#125;<br><br>        cout &lt;&lt; endl;<br><br><br><br>        <span class="hljs-comment">//è®¡ç®—msgæ¶ˆæ¯çš„Hashå€¼</span><br><br>        <span class="hljs-keyword">bool</span> res;<br><br>        res = sha.<span class="hljs-built_in">VerifyDigest</span>(digest, <span class="hljs-comment">//å¯èƒ½æŠ›å‡ºå¼‚å¸¸</span><br><br>                               msg, <span class="hljs-built_in"><span class="hljs-keyword">sizeof</span></span>(msg) - <span class="hljs-number">1</span>); <span class="hljs-comment">//å»æ‰å­—ç¬¦ä¸²æœ€åçš„&#x27;\0&#x27;</span><br><br>        cout &lt;&lt; <span class="hljs-string">&quot;res = &quot;</span> &lt;&lt; boolalpha &lt;&lt;res &lt;&lt; endl;  <span class="hljs-comment">// è¿™é‡Œçš„boolalpha æ˜¯ä¸ºäº†è¾“å‡ºboolå€¼trueæˆ–è€…false</span><br><br><br><br>    &#125;<br><br>    <span class="hljs-built_in"><span class="hljs-keyword">catch</span></span> (<span class="hljs-keyword">const</span> Exception&amp; e)<br><br>    &#123;<span class="hljs-comment">//å‡ºç°å¼‚å¸¸</span><br><br>        cout &lt;&lt; e.<span class="hljs-built_in">what</span>() &lt;&lt; endl; <span class="hljs-comment">//å¼‚å¸¸åŸå› </span><br><br>    &#125;<br><br><br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br><br>&#125;<br></code></pre></td></tr></table></figure><h1 id="ç¬¬åä¸€ç« -å…¬é’¥å¯†ç å­¦æ•°å­¦åŸºç¡€"><a class="markdownIt-Anchor" href="#ç¬¬åä¸€ç« -å…¬é’¥å¯†ç å­¦æ•°å­¦åŸºç¡€"></a> ç¬¬åä¸€ç«  å…¬é’¥å¯†ç å­¦æ•°å­¦åŸºç¡€</h1><h2 id="å¤§æ•´æ•°-ä¸-å¤§ç´ æ•°ç”Ÿæˆ"><a class="markdownIt-Anchor" href="#å¤§æ•´æ•°-ä¸-å¤§ç´ æ•°ç”Ÿæˆ"></a> å¤§æ•´æ•° ä¸ å¤§ç´ æ•°ç”Ÿæˆ</h2><ul><li>å¯ä»¥å†ç ”ç©¶ä¸€ä¸‹å¤§æ•´æ•°çš„ä¸€äº›ç”¨æ³•</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;integer.h&gt;</span><span class="hljs-comment">//ä½¿ç”¨Integer</span></span><br><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;iostream&gt;</span><span class="hljs-comment">//ä½¿ç”¨coutã€cin</span></span><br><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;osrng.h&gt;</span><span class="hljs-comment">//ä½¿ç”¨AutoSeededRandomPool</span></span><br><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;nbtheory.h&gt;</span><span class="hljs-comment">//ä½¿ç”¨PrimeAndGeneratorã€VerifyPrime</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<span class="hljs-comment">//stdæ˜¯C++çš„å‘½åç©ºé—´</span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> CryptoPP;<span class="hljs-comment">//CryptoPPæ˜¯CryptoPPåº“çš„å‘½åç©ºé—´</span><br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span><br><span class="hljs-function"></span>&#123;<br><br>    AutoSeededRandomPool rng; <span class="hljs-comment">// å®šä¹‰éšæœºæ•°å‘ç”Ÿå™¨å¯¹è±¡</span><br><br>    <span class="hljs-comment">// å®šä¹‰PrimeAndGeneratorå¯¹è±¡ï¼Œåˆ©ç”¨éšæœºæ•°å‘ç”Ÿå™¨rngäº§ç”Ÿç´ æ•°på’Œq</span><br><br>    <span class="hljs-comment">// è¦æ±‚äº§ç”Ÿçš„pæ˜¯1024æ¯”ç‰¹çš„ç´ æ•°ï¼Œqæ˜¯512æ¯”ç‰¹çš„ç´ æ•°</span><br><br>    <span class="hljs-function">PrimeAndGenerator <span class="hljs-title">pag</span><span class="hljs-params">(<span class="hljs-number">1</span>, rng, <span class="hljs-number">1024</span>, <span class="hljs-number">512</span>)</span></span>;<br><br>    Integer p = pag.<span class="hljs-built_in">Prime</span>(); <span class="hljs-comment">// è·å–ç´ æ•°pçš„å€¼</span><br><br>    Integer q = pag.<span class="hljs-built_in">SubPrime</span>(); <span class="hljs-comment">// è·å–ç´ æ•°qçš„å€¼</span><br><br>    Integer r = (p - <span class="hljs-number">1</span>) / q / <span class="hljs-number">2</span>; <span class="hljs-comment">// è®¡ç®—rçš„å€¼ï¼Œå› ä¸ºp=2*r*q+1ï¼Œdelta=1</span><br><br>    cout &lt;&lt; <span class="hljs-string">&quot;p(&quot;</span> &lt;&lt; p.<span class="hljs-built_in">BitCount</span>() &lt;&lt; <span class="hljs-string">&quot;)ï¼š&quot;</span> &lt;&lt; p &lt;&lt; endl; <span class="hljs-comment">// æ‰“å°pçš„å€¼åŠæ¯”ç‰¹æ•°</span><br><br>    cout &lt;&lt; <span class="hljs-string">&quot;q(&quot;</span> &lt;&lt; q.<span class="hljs-built_in">BitCount</span>() &lt;&lt; <span class="hljs-string">&quot;)ï¼š&quot;</span> &lt;&lt; q &lt;&lt; endl; <span class="hljs-comment">// æ‰“å°qçš„å€¼åŠæ¯”ç‰¹æ•°</span><br><br>    cout &lt;&lt; <span class="hljs-string">&quot;r(&quot;</span> &lt;&lt; r.<span class="hljs-built_in">BitCount</span>() &lt;&lt; <span class="hljs-string">&quot;)ï¼š&quot;</span> &lt;&lt; r &lt;&lt; endl; <span class="hljs-comment">// æ‰“å°rçš„å€¼åŠæ¯”ç‰¹æ•°</span><br><br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">VerifyPrime</span>(rng, r, <span class="hljs-number">10</span>)) <span class="hljs-comment">// éªŒè¯ræ˜¯å¦ä¸ºç´ æ•°</span><br><br>    &#123;<br><br>        cout &lt;&lt; <span class="hljs-string">&quot;ræ˜¯ç´ æ•°&quot;</span> &lt;&lt; endl; <span class="hljs-comment">// å¦‚æœrä¸ºç´ æ•°ï¼Œåˆ™è¾“å‡ºè¯¥ä¿¡æ¯</span><br><br>    &#125;<br><br>    <span class="hljs-keyword">else</span><br><br>    &#123;<br><br>        cout &lt;&lt; <span class="hljs-string">&quot;rä¸æ˜¯ç´ æ•°&quot;</span> &lt;&lt; endl; <span class="hljs-comment">// å¦‚æœrä¸ä¸ºç´ æ•°ï¼Œåˆ™è¾“å‡ºè¯¥ä¿¡æ¯</span><br><br>    &#125;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br><br>&#125;<br></code></pre></td></tr></table></figure><h1 id="ç¬¬åä¸‰ç« -æ•°å­—ç­¾å"><a class="markdownIt-Anchor" href="#ç¬¬åä¸‰ç« -æ•°å­—ç­¾å"></a> ç¬¬åä¸‰ç«  æ•°å­—ç­¾å</h1><p>ç”µå­ä¹¦ç»™å‡ºçš„å‚è€ƒæ˜¯ECNRæ•°å­—ç­¾åç®—æ³•</p><p><a href="https://www.cryptopp.com/wiki/Elliptic_Curve_Digital_Signature_Algorithm">ECDSAæ¤­åœ†æ›²çº¿ - Crypto++</a></p><p><a href="https://www.cryptopp.com/wiki/Elliptic_Curve_Digital_Signature_Algorithm">https://www.cryptopp.com/wiki/Elliptic_Curve_Digital_Signature_Algorithm</a> -ã€‹å…³äºå‹ç¼©å…¬é’¥çš„å®ç°å¯ä»¥å‚è€ƒ Compressed Point è¿™ä¸€éƒ¨åˆ†</p><h2 id="ç§é’¥å’Œå…¬é’¥ç”Ÿæˆ-ä¿å­˜"><a class="markdownIt-Anchor" href="#ç§é’¥å’Œå…¬é’¥ç”Ÿæˆ-ä¿å­˜"></a> ç§é’¥å’Œå…¬é’¥ç”Ÿæˆã€ä¿å­˜</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;integer.h&gt;</span><span class="hljs-comment">//ä½¿ç”¨Integer</span></span><br><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;iostream&gt;</span><span class="hljs-comment">//ä½¿ç”¨coutã€cin</span></span><br><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;osrng.h&gt;</span><span class="hljs-comment">//ä½¿ç”¨AutoSeededRandomPool</span></span><br><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span><span class="hljs-meta-string">&lt;eccrypto.h&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;oids.h&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;files.h&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;filters.h&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;filesystem&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;hex.h&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;base32.h&gt;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<span class="hljs-comment">//stdæ˜¯C++çš„å‘½åç©ºé—´</span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> CryptoPP;<span class="hljs-comment">//CryptoPPæ˜¯CryptoPPåº“çš„å‘½åç©ºé—´</span><br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">ECDSA_Generate</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span><br><span class="hljs-function"></span>&#123;<br><br>    <span class="hljs-comment">/*</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">    // æŒ‡å®š private exponent  32å­—èŠ‚éšæœºæ•°ï¼Œç”Ÿæˆå¯¹åº”çš„ç§é’¥</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">    string exp = &quot;E4A6CFB431471CFCAE491FD566D19C87082CF9FA7722D7FA24B2B3F5669DBEFB&quot;;</span><br><span class="hljs-comment"></span><br><span class="hljs-comment"></span><br><span class="hljs-comment"></span><br><span class="hljs-comment">    HexDecoder decoder;</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">    decoder.Put((byte*)&amp;exp[0], exp.size());</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">    decoder.MessageEnd();</span><br><span class="hljs-comment"></span><br><span class="hljs-comment"></span><br><span class="hljs-comment"></span><br><span class="hljs-comment">    Integer x;</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">    x.Decode(decoder, decoder.MaxRetrievable());</span><br><span class="hljs-comment"></span><br><span class="hljs-comment"></span><br><span class="hljs-comment"></span><br><span class="hljs-comment">    privateKey.Initialize(ASN1::secp256r1(), x);</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">     */</span><br><br><br><br>    AutoSeededRandomPool prng;<br><br>    ECDSA&lt;ECP, SHA256&gt;::PrivateKey privateKey;<br><br><br><br>    privateKey.<span class="hljs-built_in">Initialize</span>( prng, ASN1::<span class="hljs-built_in">secp256k1</span>() );<br><br><br><br>    <span class="hljs-comment">/* ä½¿ç”¨ByteQueue æ–¹ä¾¿å°†å…¬ç§é’¥å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œå¦‚æœè¦æŒä¹…åŒ–åˆ°ç£ç›˜ï¼Œå¯ä»¥ä½¿ç”¨FileSink</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">    ByteQueue queue;</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">    privateKey.Save(queue);</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">    privateKey.Load(queue);</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">    */</span><br><br><br><br>    <span class="hljs-comment">// éªŒè¯å¯†é’¥å¼ºåº¦</span><br><br>    <span class="hljs-keyword">bool</span> result = privateKey.<span class="hljs-built_in">Validate</span>( prng, <span class="hljs-number">3</span> );<br><br>    cout &lt;&lt; boolalpha &lt;&lt; result &lt;&lt; endl;<br><br><br><br>    Integer p = privateKey.<span class="hljs-built_in">GetPrivateExponent</span>();<br><br>    cout&lt;&lt; <span class="hljs-string">&quot;len:&quot;</span> &lt;&lt; p.<span class="hljs-built_in">BitCount</span>() &lt;&lt; <span class="hljs-string">&quot; Private Key:&quot;</span> &lt;&lt; p &lt;&lt; endl;<br><br>    string priHexKey;<br><br>    <span class="hljs-function">HexEncoder <span class="hljs-title">encoder</span><span class="hljs-params">(<span class="hljs-keyword">new</span> StringSink(priHexKey))</span></span>;<br><br>    p.<span class="hljs-built_in">Encode</span>(encoder, <span class="hljs-number">32</span>);<br><br>    cout &lt;&lt; <span class="hljs-string">&quot;priHexKey:&quot;</span>&lt;&lt;priHexKey.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-string">&quot;  &quot;</span> &lt;&lt; priHexKey &lt;&lt; endl;<br><br><br><br>    <span class="hljs-comment">// Save private key in PKCS #8 format</span><br><br>    <span class="hljs-function">FileSink <span class="hljs-title">fs1</span><span class="hljs-params">( <span class="hljs-string">&quot;../../../keys/private.ec.der&quot;</span>, <span class="hljs-literal">true</span> <span class="hljs-comment">/*binary*/</span> )</span></span>;<br><br>    privateKey.<span class="hljs-built_in">Save</span>( fs1 );<br><br><br><br>    <span class="hljs-comment">// Generate publicKey</span><br><br>    ECDSA&lt;ECP, CryptoPP::SHA256&gt;::PublicKey publicKey;<br><br>    privateKey.<span class="hljs-built_in">MakePublicKey</span>(publicKey);<br><br>    <span class="hljs-keyword">const</span> ECP::Point&amp; q = publicKey.<span class="hljs-built_in">GetPublicElement</span>();<br><br>    <span class="hljs-keyword">const</span> Integer&amp; qx = q.x;<br><br>    <span class="hljs-keyword">const</span> Integer&amp; qy = q.y;<br><br>    string qxHex, qyHex;<br><br>    <span class="hljs-function">HexEncoder <span class="hljs-title">encoderx</span><span class="hljs-params">(<span class="hljs-keyword">new</span> StringSink(qxHex))</span></span>;<br><br>    <span class="hljs-function">HexEncoder <span class="hljs-title">encodery</span><span class="hljs-params">(<span class="hljs-keyword">new</span> StringSink(qyHex))</span></span>;<br><br>    qx.<span class="hljs-built_in">Encode</span>(encoderx, <span class="hljs-number">32</span>);<br><br>    qy.<span class="hljs-built_in">Encode</span>(encodery, <span class="hljs-number">32</span>);<br><br>    cout &lt;&lt; <span class="hljs-string">&quot;len:&quot;</span> &lt;&lt; qx.<span class="hljs-built_in">BitCount</span>() &lt;&lt; <span class="hljs-string">&quot; Public Point x:&quot;</span> &lt;&lt; qx &lt;&lt; endl;<br><br>    cout &lt;&lt; <span class="hljs-string">&quot;qxHex:&quot;</span> &lt;&lt; qxHex &lt;&lt; endl;<br><br>    cout &lt;&lt; <span class="hljs-string">&quot;len:&quot;</span> &lt;&lt; qy.<span class="hljs-built_in">BitCount</span>() &lt;&lt; <span class="hljs-string">&quot; Public Point y:&quot;</span> &lt;&lt; qy &lt;&lt; endl;<br><br>    cout &lt;&lt; <span class="hljs-string">&quot;qyHex:&quot;</span> &lt;&lt; qyHex &lt;&lt; endl;<br><br><br><br>    <span class="hljs-comment">// Save public key in X.509 format</span><br><br>    <span class="hljs-function">FileSink <span class="hljs-title">fs2</span><span class="hljs-params">( <span class="hljs-string">&quot;../../../keys/public.ec.der&quot;</span>, <span class="hljs-literal">true</span> <span class="hljs-comment">/*binary*/</span> )</span></span>;<br><br>    publicKey.<span class="hljs-built_in">Save</span>( fs2 );<br><br><br><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="ç§é’¥å’Œå…¬é’¥çš„åŠ è½½-ç­¾åå’Œè®¤è¯"><a class="markdownIt-Anchor" href="#ç§é’¥å’Œå…¬é’¥çš„åŠ è½½-ç­¾åå’Œè®¤è¯"></a> ç§é’¥å’Œå…¬é’¥çš„åŠ è½½ã€ç­¾åå’Œè®¤è¯</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">// å¤´æ–‡ä»¶å’Œä¸Šè¿°ä¸€æ ·</span><br><br><br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">ECDSA_LOAD</span><span class="hljs-params">()</span></span>&#123;<br><br>    AutoSeededRandomPool prng;<br><br>    <span class="hljs-function">FileSource <span class="hljs-title">fs1</span><span class="hljs-params">( <span class="hljs-string">&quot;../../../keys/private.ec.der&quot;</span>, <span class="hljs-literal">true</span> <span class="hljs-comment">/*pump all*/</span> )</span></span>;<br><br>    <span class="hljs-function">FileSource <span class="hljs-title">fs2</span><span class="hljs-params">( <span class="hljs-string">&quot;../../../keys/public.ec.der&quot;</span>, <span class="hljs-literal">true</span> <span class="hljs-comment">/*pump all*/</span> )</span></span>;<br><br>    ECDSA&lt;ECP, SHA256&gt;::PrivateKey privateKey;<br><br>    ECDSA&lt;ECP, SHA256&gt;::PublicKey publicKey;<br><br>    <span class="hljs-comment">// åŠ è½½ç§é’¥ï¼Œ ç§é’¥æ ¼å¼ï¼šPKCS #8</span><br><br>    privateKey.<span class="hljs-built_in">Load</span>( fs1 );<br><br>    publicKey.<span class="hljs-built_in">Load</span>(fs2);<br><br><br><br>    <span class="hljs-comment">// ç”¨ç§é’¥è¿›è¡Œç­¾å</span><br><br>    ECDSA&lt;ECP, SHA256&gt;::<span class="hljs-function">Signer <span class="hljs-title">signer</span><span class="hljs-params">(privateKey)</span></span>;<br><br>    string message = <span class="hljs-string">&quot;Yoda said, Do or do not. There is no try.&quot;</span>;<br><br>    string signature;<br><br><br><br><br><br>    <span class="hljs-function">StringSource <span class="hljs-title">s</span><span class="hljs-params">( message, <span class="hljs-literal">true</span> <span class="hljs-comment">/*pump all*/</span>,</span></span><br><span class="hljs-params"><span class="hljs-function"></span></span><br><span class="hljs-params"><span class="hljs-function">                    <span class="hljs-keyword">new</span> SignerFilter( prng,</span></span><br><span class="hljs-params"><span class="hljs-function"></span></span><br><span class="hljs-params"><span class="hljs-function">                                      signer,</span></span><br><span class="hljs-params"><span class="hljs-function"></span></span><br><span class="hljs-params"><span class="hljs-function">                                      <span class="hljs-keyword">new</span> StringSink( signature )</span></span><br><span class="hljs-params"><span class="hljs-function"></span></span><br><span class="hljs-params"><span class="hljs-function">                    ) <span class="hljs-comment">// SignerFilter</span></span></span><br><span class="hljs-params"><span class="hljs-function"></span></span><br><span class="hljs-params"><span class="hljs-function">    )</span></span>; <span class="hljs-comment">// StringSource</span><br><br>    cout &lt;&lt; <span class="hljs-string">&quot;signature len:&quot;</span> &lt;&lt; signature.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-string">&quot; output:&quot;</span> &lt;&lt; signature &lt;&lt; endl;<br><br><br><br>    <span class="hljs-comment">// å°†ç­¾åï¼ˆåŒ…å«Rï¼ŒSï¼‰è½¬æ¢æˆ DER æ ¼å¼</span><br><br>    std::string derSign;<br><br>    <span class="hljs-comment">// Make room for the ASN.1/DER encoding</span><br><br>    derSign.<span class="hljs-built_in">resize</span>(<span class="hljs-number">3</span>+<span class="hljs-number">3</span>+<span class="hljs-number">3</span>+<span class="hljs-number">2</span>+signature.<span class="hljs-built_in">size</span>());<br><br>    <span class="hljs-keyword">size_t</span> converted_size = <span class="hljs-built_in">DSAConvertSignatureFormat</span>(<br><br>            (byte*) (&amp;derSign[<span class="hljs-number">0</span>]), derSign.<span class="hljs-built_in">size</span>(), DSA_DER,<br><br>            (<span class="hljs-keyword">const</span> byte*) (signature.<span class="hljs-built_in">data</span>()), signature.<span class="hljs-built_in">size</span>(), DSA_P1363);<br><br>    derSign.<span class="hljs-built_in">resize</span>(converted_size);<br><br>    cout &lt;&lt; <span class="hljs-string">&quot;DER len:&quot;</span> &lt;&lt; derSign.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-string">&quot; DER:&quot;</span> &lt;&lt; derSign &lt;&lt; endl;<br><br>    string hexDER;<br><br>    <span class="hljs-function">StringSource <span class="hljs-title">toDER</span><span class="hljs-params">(derSign, <span class="hljs-literal">true</span>, <span class="hljs-keyword">new</span> HexEncoder(<span class="hljs-keyword">new</span> StringSink(hexDER)))</span></span>;<br><br>    cout &lt;&lt; <span class="hljs-string">&quot;DER hex:&quot;</span> &lt;&lt; hexDER &lt;&lt; endl;<br><br><br><br>    <br><br>    <span class="hljs-comment">// è¿›è¡ŒéªŒè¯</span><br><br>    <span class="hljs-keyword">bool</span> result;<br><br>    ECDSA&lt;ECP, SHA256&gt;::<span class="hljs-function">Verifier <span class="hljs-title">verifier</span><span class="hljs-params">(publicKey)</span></span>;<br><br>    <span class="hljs-function">StringSource <span class="hljs-title">ss</span><span class="hljs-params">( signature+message, <span class="hljs-literal">true</span> <span class="hljs-comment">/*pump all*/</span>,</span></span><br><span class="hljs-params"><span class="hljs-function"></span></span><br><span class="hljs-params"><span class="hljs-function">                     <span class="hljs-keyword">new</span> SignatureVerificationFilter(</span></span><br><span class="hljs-params"><span class="hljs-function"></span></span><br><span class="hljs-params"><span class="hljs-function">                             verifier,</span></span><br><span class="hljs-params"><span class="hljs-function"></span></span><br><span class="hljs-params"><span class="hljs-function">                             <span class="hljs-keyword">new</span> ArraySink( (byte*)&amp;result, <span class="hljs-keyword">sizeof</span>(result) )</span></span><br><span class="hljs-params"><span class="hljs-function"></span></span><br><span class="hljs-params"><span class="hljs-function">                     ) <span class="hljs-comment">// SignatureVerificationFilter</span></span></span><br><span class="hljs-params"><span class="hljs-function"></span></span><br><span class="hljs-params"><span class="hljs-function">    )</span></span>;<br><br><br><br>    <span class="hljs-comment">// ä¼ ç»Ÿçš„C æ–¹å¼ - å‡½æ•°è°ƒç”¨å½¢å¼</span><br><br><span class="hljs-comment">//    result = verifier.VerifyMessage( (const byte*)message.data(), message.size(), (const byte*)signature.data(), signature.size() );</span><br><br>    <span class="hljs-keyword">if</span>(result)<br><br>        std::cout &lt;&lt; <span class="hljs-string">&quot;Verified signature on message&quot;</span> &lt;&lt; std::endl;<br><br>    <span class="hljs-keyword">else</span><br><br>        std::cerr &lt;&lt; <span class="hljs-string">&quot;Failed to verify signature on message&quot;</span> &lt;&lt; std::endl;<br><br><br><br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºçŸ¥è¯†</category>
      
      <category>å¯†ç å­¦</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ç¬¬ä¸‰æ–¹åº“</tag>
      
      <tag>CryptoPP</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Ubuntu-arm aptæºé…ç½®</title>
    <link href="/2021/10/20/2021-10/2021-10-20%20Ubuntu-arm%20apt%E6%BA%90%E9%85%8D%E7%BD%AE/"/>
    <url>/2021/10/20/2021-10/2021-10-20%20Ubuntu-arm%20apt%E6%BA%90%E9%85%8D%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<h1 id="é…ç½®ç¯å¢ƒ"><a class="markdownIt-Anchor" href="#é…ç½®ç¯å¢ƒ"></a> é…ç½®ç¯å¢ƒ</h1><p>PCï¼šM1 MacBook Air</p><p>è™šæ‹Ÿæœºè½¯ä»¶ï¼šParallel Desktop 16.5</p><p>è™šæ‹Ÿæœºæ“ä½œç³»ç»Ÿï¼š<a href="https://ubuntu.com/download/server/arm">Ubuntu Server 20.04 TLS</a></p><h1 id="é‡åˆ°é—®é¢˜"><a class="markdownIt-Anchor" href="#é‡åˆ°é—®é¢˜"></a> é‡åˆ°é—®é¢˜</h1><p>é¦–å…ˆå°±æ˜¯éšä¾¿æœç´¢äº†ä¸€ç¯‡ç½‘ä¸Šæ•™ç¨‹ï¼Œæ¥é…ç½®aptæºï¼Œæ¯”å¦‚è¿™ç¯‡</p><p><a href="https://blog.csdn.net/p1279030826/article/details/111640455">https://blog.csdn.net/p1279030826/article/details/111640455</a></p><p class='note note-info'>è¦æ³¨æ„è‡ªå·±çš„ubuntuç‰ˆæœ¬å’Œaptæºè®¾ç½®çš„ç‰ˆæœ¬ä¸€è‡´</p><p>ä½†æ˜¯ç„¶åå‘¢ï¼Œæ»¡æ€€æœŸå¾…æ‰§è¡Œ<code>sudo apt-get update</code> å´æŠ¥é”™äº†ã€‚ã€‚ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/2017zhangyuxuan/picture_backend@master//img/202110201532536.png" alt="apt-get updateæŠ¥é”™ " /></p><p>å½“æ—¶å¾ˆéƒé—·å•Šï¼Œå› ä¸ºä¹‹å‰åœ¨windowsè™šæ‹Ÿæœºä¸Šé…ç½®çš„æ—¶å€™éƒ½å¥½ä½¿çš„ï¼Œæ€ä¹ˆåˆ°ä½ è¿™å°±æ‹‰èƒ¯äº†å‘¢ï¼Ÿ</p><p>åæ¥åœ¨ç½‘ä¸Šæ‰¾å„ç§èµ„æ–™ã€è§£å†³åŠæ³•ï¼Œæœ‰çš„è¯´æ˜¯ç½‘ç»œçš„é—®é¢˜ï¼Œæœ‰çš„è¯´æ˜¯DNSè§£æçš„é—®é¢˜ï¼Œä½†ç»è¿‡å„ç§å°è¯•éƒ½æ²¡æœ‰æ•ˆæœï¼Œåæ¥æ— å¥ˆæ”¾å¼ƒï¼Œå°±æ­¤ä½œç½¢ã€‚</p><h1 id="è§£å†³æ–¹æ¡ˆ"><a class="markdownIt-Anchor" href="#è§£å†³æ–¹æ¡ˆ"></a> è§£å†³æ–¹æ¡ˆ</h1><p>ä½†æ˜¯å¤©æ— ç»äººä¹‹è·¯ï¼Œå½“æˆ‘ç¬¬äºŒæ¬¡å†æ¬¡å°è¯•é…ç½®çš„æ—¶å€™ï¼Œç»ˆäºè®©æˆ‘æ‰¾åˆ°äº†æ­£ç¡®ç­”æ¡ˆï¼š<a href="https://zongxp.blog.csdn.net/article/details/90604966?spm=1001.2101.3001.6650.1&amp;utm_medium=distribute.pc_relevant_t0.none-task-blog-2%7Edefault%7ECTRLIST%7Edefault-1.no_search_link&amp;depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-2%7Edefault%7ECTRLIST%7Edefault-1.no_search_link">è§£å†³æ–¹æ¡ˆ</a></p><p>é‡ç‚¹å°±æ˜¯åç¼€è¦åŠ ä¸Š-portsï¼Œè¿™æ ·å¯¹åº”çš„é•œåƒæºæ‰æ˜¯armæºï¼Œæ‰èƒ½é€‚é…M1çš„macç³»ç»Ÿã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs shell">deb http://mirrors.aliyun.com/ubuntu-ports/ focal main restricted universe multiverse<br>deb-src http://mirrors.aliyun.com/ubuntu-ports/ focal main restricted universe multiverse<br>deb http://mirrors.aliyun.com/ubuntu-ports/ focal-security main restricted universe multiverse<br>deb-src http://mirrors.aliyun.com/ubuntu-ports/ focal-security main restricted universe multiverse<br>deb http://mirrors.aliyun.com/ubuntu-ports/ focal-updates main restricted universe multiverse<br>deb-src http://mirrors.aliyun.com/ubuntu-ports/ focal-updates main restricted universe multiverse<br>deb http://mirrors.aliyun.com/ubuntu-ports/ focal-proposed main restricted universe multiverse<br>deb-src http://mirrors.aliyun.com/ubuntu-ports/ focal-proposed main restricted universe multiverse<br>deb http://mirrors.aliyun.com/ubuntu-ports/ focal-backports main restricted universe multiverse<br>deb-src http://mirrors.aliyun.com/ubuntu-ports/ focal-backports main restricted universe multiverse<br></code></pre></td></tr></table></figure><p>â€‹</p><p>æ¢æºä¹‹åæ‰§è¡ŒæˆåŠŸï¼Œniceï¼</p><p><img src="https://cdn.jsdelivr.net/gh/2017zhangyuxuan/picture_backend@master//img/202110201533176.png" alt="apt-get updateæˆåŠŸ" /></p><h1 id="å°ç»“"><a class="markdownIt-Anchor" href="#å°ç»“"></a> å°ç»“</h1><p>æ€»çš„æ¥è¯´è¸©äº†ä¸ªå‘ï¼Œè€Œç©¶å…¶åŸå› ï¼Œè¿˜æ˜¯è‡ªå·±å¯¹è¿™ä¸ªapté…ç½®å‚æ•°æ²¡æœ‰ç†è§£åˆ°ä½ï¼Œä»…ä»…åªæ˜¯ç…§çŒ«ç”»è™ï¼Œå¤åˆ¶æ•™ç¨‹ï¼Œè€Œæ²¡æœ‰é¢†ä¼šå…¶ä¸­çš„çœŸæ„ã€‚åŒæ—¶å¯¹è¿™ä¸ªç³»ç»Ÿæ¶æ„arm å’Œ x86çš„å·®å¼‚æ²¡æœ‰æ·±åˆ»è®¤è¯†ï¼Œä¸åŒæ¶æ„ä¹‹é—´è½¯ä»¶è‚¯å®šæ˜¯éœ€è¦è¿›è¡Œé€‚é…çš„ï¼Œæ²¡æœ‰å¾ˆæ¸…æ¥šçš„è®¤è¯†åˆ°è¿™ä¸€ç‚¹ã€‚æ‰€ä»¥å‘¢ï¼Œå­¦æµ·æ— æ¶¯ï¼Œæˆ‘è¿˜å·®å¾—è¿œå‘¢~</p><div align='center'><img src="https://cdn.jsdelivr.net/gh/2017zhangyuxuan/picture_backend@master//img/202110251023808.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg" width="50%" height="50%" align="middle" ></div>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºçŸ¥è¯†</category>
      
      <category>è™šæ‹Ÿæœº</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Ubuntu</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€æ¯”ç‰¹å¸ä¸“é¢˜01ã€‘ç™½çš®ä¹¦å¯¼è¯»</title>
    <link href="/2021/10/16/2021-10/2021-10-16%20%E6%AF%94%E7%89%B9%E5%B8%81%E4%B8%93%E9%A2%9801-%E7%99%BD%E7%9A%AE%E4%B9%A6/"/>
    <url>/2021/10/16/2021-10/2021-10-16%20%E6%AF%94%E7%89%B9%E5%B8%81%E4%B8%93%E9%A2%9801-%E7%99%BD%E7%9A%AE%E4%B9%A6/</url>
    
    <content type="html"><![CDATA[<h1 id="è®ºæ–‡æ¦‚è¿°"><a class="markdownIt-Anchor" href="#è®ºæ–‡æ¦‚è¿°"></a> è®ºæ–‡æ¦‚è¿°</h1><p>è®ºæ–‡åœ°å€ï¼š<a href="https://bitcoin.org/bitcoin.pdf">https://bitcoin.org/bitcoin.pdf</a></p><p>ç”±äºåœ¨â€œåŸºäºä¿¡ä»»â€æ¨¡å¼ä¸‹çš„äº¤æ˜“ï¼Œå­˜åœ¨äº¤æ˜“æˆæœ¬å¢åŠ ã€é™åˆ¶äº†äº¤æ˜“é¢çš„å¤§å°å³é˜»æ–­å°é¢äº¤æ˜“ã€å•†å®¶æ¬ºè¯ˆè¡Œä¸ºç­‰é—®é¢˜ï¼Œæœ¬è®ºæ–‡æå‡ºè§£å†³æ–¹æ¡ˆå³æ¯”ç‰¹å¸ï¼Œè¿™æ˜¯ä¸€ä¸ªP2Påˆ†å¸ƒå¼çš„ç”µå­ç°é‡‘äº¤æ˜“ç½‘ç»œï¼Œä¾é hashå’ŒåŠ ç›–æ—¶é—´æˆ³ï¼Œä»¥åŠå·¥ä½œé‡è¯æ˜æœºåˆ¶ç­‰æ‰‹æ®µï¼Œè§£å†³äº†åŒé‡æ”¯ä»˜é—®é¢˜ï¼Œå¹¶åœ¨æå¤§ç¨‹åº¦ä¸Šä¿è¯äº†äº¤æ˜“çš„æœ‰æ•ˆæ€§ã€æ­£ç¡®æ€§ã€æŠ—ä¼ªæ€§ã€‚è®ºæ–‡ä¸­ä¹Ÿè¯¦ç»†ä»‹ç»äº†å®ç°æ‰€ç”¨åˆ°çš„æŠ€æœ¯ã€æœºåˆ¶ã€åŸç†ç­‰ã€‚</p><h1 id="ä¸»è¦æ”¶è·"><a class="markdownIt-Anchor" href="#ä¸»è¦æ”¶è·"></a> ä¸»è¦æ”¶è·</h1><p>ä¸ªäººæ„Ÿè§‰æœ€å¤§çš„æ”¶è·å°±æ˜¯å¯¹æ¯”ç‰¹å¸çš„è¿è¡Œæœºåˆ¶æœ‰äº†å¤§ä½“çš„è®¤è¯†ï¼Œäº†è§£äº†æ•´ä½“æµç¨‹ï¼Œè™½ç„¶å¯èƒ½ä¸€äº›æŠ€æœ¯çš„å®ç°ç»†èŠ‚è¿˜æ˜¯ä¸å¤Ÿæ˜æœ—ã€‚ä¸‹é¢å°±æ˜¯æˆ‘å¯¹å…¶ä¸­å„ä¸ªéƒ¨åˆ†çš„è®¤è¯†å’Œç†è§£ã€‚</p><ul><li>åœ¨å¼•è¨€ä»‹ç»éƒ¨åˆ†ï¼Œå¼•å‡ºäº†æ¯”ç‰¹å¸çš„äº§ç”ŸèƒŒæ™¯ï¼ŒåŸºäºç¬¬ä¸‰æ–¹æœºæ„çš„äº¤æ˜“å­˜åœ¨çš„ç§ç§é—®é¢˜ï¼Œå¹¶æå‡ºæ¯”ç‰¹å¸è¿™ä¸€è§£å†³æ–¹æ¡ˆã€‚ç„¶åæ¥ä¸‹æ¥çš„å„ä¸ªç« èŠ‚ä»‹ç»æ¯”ç‰¹å¸æ¶‰åŠçš„ä¸»è¦å…³é”®æŠ€æœ¯ã€‚</li><li>Transactionséƒ¨åˆ†æè¿°äº†äº¤æ˜“æ˜¯å¦‚ä½•è¢«è®°å½•çš„ï¼Œå…¶ä¸­è¿ç”¨äº†Hashå’Œå…¬ç§é’¥ï¼Œä½†ä»…ä»…è®°å½•æ˜¯æ— æ³•éªŒè¯äº¤æ˜“çš„æœ‰æ•ˆæ€§ï¼Œå³å­˜åœ¨åŒé‡æ”¯å‡ºé—®é¢˜ã€‚</li><li>Timestamp Serveréƒ¨åˆ†æè¿°äº†å…·ä½“æ¯ä¸ªèŠ‚ç‚¹ï¼ˆæœåŠ¡å™¨ï¼‰çš„å·¥ä½œï¼Œå³å¯¹å½¢æˆçš„åŒºå—è¿›è¡ŒHashï¼Œå¹¶åŠ ç›–ä¸Šæ—¶é—´æˆ³ï¼Œæ ¹æ®æ—¶åºè¿›è¡Œæ’åˆ—å½¢æˆé“¾ã€‚</li><li>Proof-of-Workéƒ¨åˆ†æè¿°äº†è¿›ä¸€æ­¥è¯´æ˜Timestamp serverçš„å®ç°ï¼Œå³ä½¿ç”¨å·¥ä½œè¯æ˜æœºåˆ¶ï¼Œé€šè¿‡æ‰¾åˆ°æ»¡è¶³æ¡ä»¶çš„nonceæ¥è·å¾—è®°è´¦æƒï¼Œå› ä¸ºå¯»æ‰¾è¿™ä¸ªnonceä¾é CPUç®—åŠ›ï¼ŒCPUç®—åŠ›è¶Šé«˜æ‰¾åˆ°çš„æ¦‚ç‡è¶Šå¤§ï¼Œå³one-CPU-one-voteè§„åˆ™ï¼Œè§£å†³äº†å¤šæ•°å†³ç­–ä¸­çš„ä»£è¡¨é—®é¢˜ã€‚åŒæ—¶è¿™æ ·çš„æ–¹å¼ï¼Œä¹Ÿä¿è¯äº†å¦‚æœæ”»å‡»è€…æƒ³è¦ç¯¡æ”¹æŸä¸ªåŒºå—ï¼Œå°±å…ˆå¾—æŠŠè¿™ä¸ªåŒºå—ä¹‹åçš„åŒºå—éƒ½è¿›è¡Œä¿®æ”¹ï¼Œè€Œæ¯ä¸ªåŒºå—éƒ½æ˜¯éœ€è¦é å¤§é‡CPUç®—åŠ›æ¥æ‰¾åˆ°nonceï¼Œè·å¾—è®°è´¦æƒè¿›è¡Œä¿®æ”¹ï¼Œè¿™æ ·çš„æˆæœ¬æ˜¯å¾ˆå¤§çš„ã€‚</li><li>Networkéƒ¨åˆ†åˆ™æ˜¯æè¿°äº†æ¯”ç‰¹å¸ç½‘ç»œçš„å·¥ä½œæµç¨‹ã€‚å…¶ä¸­æåˆ°çš„ä¸€ä¸ªå¾ˆé‡è¦çš„åŸåˆ™å°±æ˜¯ï¼Œæ‰€æœ‰äººæ˜¯é»˜è®¤æœ€é•¿é“¾æ˜¯æœ€æ­£ç¡®çš„ã€‚è€Œæ­£æ˜¯æœ‰è¿™ä¸€å‰æï¼Œæ‰æœ‰äº†åªè¦ç½‘ç»œé‡Œè¶…è¿‡51%çš„ç®—åŠ›å±äºè¯šå®èŠ‚ç‚¹ï¼Œå°±èƒ½ä¿è¯åŒºå—é“¾é‡Œäº¤æ˜“ä¿¡æ¯çš„æ­£ç¡®æ€§ï¼Œå› ä¸ºè¯šå®èŠ‚ç‚¹çš„ç®—åŠ›è¶…è¿‡ä¸€åŠï¼Œç®—å¾—æ¯”æ”»å‡»èŠ‚ç‚¹å¿«ï¼Œé‚£ä¹ˆæœ€é•¿é“¾è‚¯å®šå±äºè¯šå®èŠ‚ç‚¹ä¸€æ–¹ã€‚</li><li>Incentiveéƒ¨åˆ†è¯´æ˜çš„æ˜¯æ¿€åŠ±æœºåˆ¶ï¼Œç»™äºˆæŠ¢åˆ°è®°è´¦æƒçš„èŠ‚ç‚¹ä¸€å®šçš„æ¯”ç‰¹å¸ï¼Œæ­£æ˜¯æœ‰è¿™æ ·çš„æ¿€åŠ±æœºåˆ¶ï¼Œå„ä¸ªèŠ‚ç‚¹æ‰ä¼šæ„¿æ„æŠ•å…¥ç®—åŠ›å»äº‰å¤ºè®°è´¦æƒï¼Œä¹Ÿæ‰èƒ½æ˜¯ä¹‹å‰çš„å·¥ä½œé‡è¯æ˜æœºåˆ¶æ­£å¸¸è¿è¡Œã€‚è¿˜æœ‰ä¸€ç§å°±æ˜¯ä»¥äº¤æ˜“æ‰‹ç»­è´¹çš„æ–¹å¼è¿›è¡Œå¥–åŠ±ã€‚</li><li>Reclaiming Disk Spaceéƒ¨åˆ†è¯´æ˜åŒºå—é“¾å¯ä»¥é€šè¿‡Merkel TreeæŠ€æœ¯æ–¹æ³•æ¥å‹ç¼©æ•°æ®ï¼Œå‡å°ç©ºé—´å­˜å‚¨ã€‚</li><li>Simplified Payment Verificationéƒ¨åˆ†åˆ™æ˜¯è¯´æ˜äº†å¦‚ä½•æ¥æ£€éªŒäº¤æ˜“çš„æœ‰æ•ˆæ€§ï¼Œå› ä¸ºåŸºäºä¹‹å‰æœ€é•¿é“¾æ€»æ˜¯æ­£ç¡®çš„åŸåˆ™ï¼Œ å› æ­¤åªè¦å‘ç½‘ç»œä¸Šçš„èŠ‚ç‚¹è¿›è¡Œè¯¢é—®ï¼Œæ‰¾åˆ°æœ€é•¿é“¾å°±å¯ä»¥éªŒè¯æ‰€æœ‰çš„æœ‰æ•ˆäº¤æ˜“è®°å½•ã€‚</li><li>Combining and Splitting Valueéƒ¨åˆ†æè¿°çš„æ˜¯å½¢æˆäº¤æ˜“çš„ç»†èŠ‚ï¼Œæ˜¯å¯ä»¥æœ‰å¤šä¸ªè¾“å…¥çš„ï¼Œè€Œè¾“å‡ºæœ€å¤šæ˜¯ä¸¤ä¸ªã€‚</li><li>Privacyéƒ¨åˆ†åˆ™æ˜¯è¯´æ˜æ¯”ç‰¹å¸ç½‘ç»œä¸­çš„éšç§ç›¸å…³é—®é¢˜ã€‚</li><li>Calculationséƒ¨åˆ†ç”¨å…·ä½“çš„æ•°å­¦è®¡ç®—æ¥è¯´æ˜äº†ï¼Œå½“ä¸€ä¸ªæ”»å‡»è€…åœ¨è½åæœ€é•¿é“¾Zä¸ªå—çš„æƒ…å†µä¸‹ï¼Œæƒ³è¦è¿½ä¸Šæœ€é•¿é“¾çš„æ¦‚ç‡ã€‚ç»“æœè¡¨æ˜ï¼Œå½“è½åçš„å—æ•°è¶Šå¤šï¼Œè¿½ä¸Šçš„æ¦‚ç‡å°±è¶Šå°ï¼Œä¹Ÿå°±ä¿è¯äº†åŒºå—é“¾çš„å®‰å…¨æ€§å’Œç¨³å®šæ€§ã€‚</li><li>Conclusionéƒ¨åˆ†åˆ™æ˜¯æœ€åè¿›è¡Œäº†æ€»ç»“ã€‚</li></ul><h1 id="å­˜åœ¨ç–‘é—®"><a class="markdownIt-Anchor" href="#å­˜åœ¨ç–‘é—®"></a> å­˜åœ¨ç–‘é—®</h1><ul><li><strong>é—®é¢˜1ï¼šæ€ä¹ˆç†è§£æ•°å­—è´§å¸ä¸­çš„double-spending problemï¼Ÿ</strong></li></ul><p>ç”¨æ•°å­—è´§å¸äº¤æ˜“æ—¶ï¼Œæ˜¯ç”¨å…ˆå‰çš„äº¤æ˜“å’Œä¸‹ä¸€ä¸ªæ‹¥æœ‰è€…çš„å…¬é’¥åšHashï¼Œç„¶åç”¨æ‹¥æœ‰è€…çš„ç§é’¥è¿›è¡Œç­¾åå½¢æˆè¿™ä¸€æ¬¡äº¤æ˜“ï¼Œæ¯”å¦‚è¿™æ¬¡äº¤æ˜“Aæ”¯ä»˜ç»™B 1ä¸ªç”µå­è´§å¸ï¼Œç„¶åAçš„ä½™é¢åªæœ‰1ä¸ªç”µå­è´§å¸ï¼Œå¦‚æœæ²¡æœ‰ç¬¬ä¸‰æ–¹æœºæ„è¿›è¡Œç›‘ç®¡ï¼Œç¡®è®¤è¿™ä¸ªç”µå­è´§å¸å·²ç»äº¤æ˜“å‡ºå»äº†ï¼Œé‚£ä¹ˆAå¯ä»¥ç»§ç»­æ‹¿è¿™1ä¸ªç”µå­è´§å¸ç»§ç»­äº¤æ˜“ï¼Œè€Œæ¥å—è€…ä¹Ÿæ— æ³•ç¡®è®¤è¿™1ä¸ªç”µå­è´§å¸æ˜¯å¦çœŸæ­£çš„å±äºä»–ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ²¡æœ‰ç¬¬ä¸‰æ–¹ç›‘ç®¡æœºæ„ï¼Œä¹Ÿæ²¡æœ‰å¼•å…¥åŒºå—é“¾P2Pè¿™ä¸ªç½‘ç»œçš„è¯ï¼Œç›¸å½“äºå°±æ²¡æœ‰åŠæ³•ç¡®è®¤äº¤æ˜“çš„æœ‰æ•ˆæ€§ï¼Œè¿™é‡Œäº§ç”Ÿçš„äº¤æ˜“ä»…ä»…èµ·åˆ°ä¸€ä¸ªè®°å½•çš„ä½œç”¨ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/2017zhangyuxuan/picture_backend@master//img/202110162135282" alt="äº¤æ˜“é“¾ç¤ºæ„å›¾" /></p><p><img src="https://cdn.jsdelivr.net/gh/2017zhangyuxuan/picture_backend@master//img/202110162150429.png" alt="åŒé‡æ”¯å‡ºé—®é¢˜" /></p><ul><li>è¿›ä¸€æ­¥ï¼Œé‚£ä¹ˆæ¯”ç‰¹å¸æ˜¯æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜çš„å‘¢ï¼Ÿ</li></ul><p>æ¯”ç‰¹å¸å»ºç«‹èµ·äº†ä¸€ä¸ªç”¨å·¥ä½œé‡è¯æ˜æœºåˆ¶çš„P2Pç½‘ç»œï¼Œç½‘ç»œä¸Šçš„èŠ‚ç‚¹éƒ½å¯ä»¥è¿›è¡Œè®°è´¦ï¼ˆä¹Ÿå°±æ˜¯è®°å½•äº¤æ˜“ä¿¡æ¯ï¼‰ï¼Œè®°è´¦çš„æ–¹å¼æ˜¯åŸºäºåŒºå—é“¾æŠ€æœ¯ï¼ŒåŒºå—ä¸Šè®°å½•ç€ä¸€æ®µæ—¶é—´å†…çš„äº¤æ˜“ä¿¡æ¯ï¼Œç„¶åæŒ‰æ—¶åºç”¨é“¾ä¸²è”èµ·æ¥ï¼Œå°±æœ‰äº†æ‰€æœ‰çš„äº¤æ˜“ä¿¡æ¯ï¼›åŒæ—¶æœ€é•¿çš„åŒºå—é“¾æ˜¯è¢«ç½‘ç»œä¸Šçš„èŠ‚ç‚¹æ‰€å…±åŒè®¤å¯æ˜¯æ­£ç¡®çš„ï¼Œå³ç›¸å½“äºç¬¬ä¸‰æ–¹ç›‘ç®¡çš„ç¡®è®¤ä½œç”¨ï¼Œè¯æ˜æŸæ¬¡äº¤æ˜“æœ‰æ•ˆã€‚</p><p>ç”¨ä¸Šé¢çš„ä¾‹å­ç»§ç»­è¯´æ˜Açš„ä½™é¢åªæœ‰ä¸€ä¸ªï¼Œç„¶åä»–åˆåŒæ—¶å’ŒBã€Cè¿›è¡Œäº¤æ˜“ï¼Œè¿™ä¸¤æ¡äº¤æ˜“ä¿¡æ¯ä¼ æ’­åˆ°ç½‘ç»œä¸Šï¼Œå„ä¸ªèŠ‚ç‚¹è¿›è¡Œè®°å½•ã€‚æœ‰èŠ‚ç‚¹å…ˆæ”¶åˆ°Aç»™Bä¸€ä¸ªæ¯”ç‰¹å¸çš„æ¶ˆæ¯ï¼Œä»–ä»¬æ£€æŸ¥ä½™é¢ä¹‹åä¼šè‡ªåŠ¨å¿½ç•¥å¦å¤–ä¸€æ¡äº¤æ˜“æ¶ˆæ¯ï¼ˆè¿™ä¸ªæ£€æŸ¥åº”è¯¥æ˜¯åŸºäºä»–ä»¬å½“å‰çš„é“¾ï¼Ÿï¼‰ï¼›åŒæ ·ï¼Œä¼šæœ‰å…ˆæ”¶åˆ°Aç»™Cä¸€ä¸ªæ¯”ç‰¹å¸æ¶ˆæ¯çš„èŠ‚ç‚¹ï¼Œåœ¨æ£€æŸ¥ä½™é¢ä¹‹åä¹Ÿä¼šè‡ªåŠ¨å¿½ç•¥å¦å¤–ä¸€æ¡æ¶ˆæ¯ã€‚æ¥ä¸‹æ¥ç®—åŠ›æœ€é«˜çš„ï¼ˆCPUæœ€å¤šçš„ï¼‰èŠ‚ç‚¹è·å¾—è®°è´¦æƒï¼ŒæŠŠä»–è®°å½•çš„åŒºå—åŠ åˆ°ä¸»é“¾ä¸Šï¼Œç„¶åç½‘ç»œä¸Šå…¶ä»–èŠ‚ç‚¹éƒ½ä¼šä»¥ä¸»é“¾ä¸Šçš„äº¤æ˜“ä¿¡æ¯ä¸ºå‡†ã€‚å¦‚æœæ”¾å…¥ä¸»é“¾çš„äº¤æ˜“ä¿¡æ¯æ˜¯Aè½¬ç»™Bä¸€ä¸ªæ¯”ç‰¹å¸ï¼Œé‚£ä¹ˆBå°†ä¼šè·å¾—æ¯”ç‰¹å¸ï¼Œäº¤æ˜“çš„æœ‰æ•ˆæ€§å¾—åˆ°ç¡®è®¤ï¼›åŒç†ï¼Œå¦‚æœæ”¾å…¥ä¸»é“¾çš„äº¤æ˜“ä¿¡æ¯æ˜¯Aè½¬ç»™Cä¸€ä¸ªæ¯”ç‰¹å¸ï¼Œé‚£ä¹ˆCå°†ä¼šè·å¾—æ¯”ç‰¹å¸ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/2017zhangyuxuan/picture_backend@master//img/202110162150837.png" alt="åŒºå—é“¾è§£å†³åŒé‡æ”¯å‡ºé—®é¢˜" /></p><ul><li><p><strong>é—®é¢˜2</strong>ï¼šä¸è¿‡è¿™æ ·åˆå¼•å‡ºä¸€ä¸ªé—®é¢˜ï¼Œè¿™ä¸ªä¸»é“¾æ˜¯æ€ä¹ˆç¡®å®šä¸‹æ¥ï¼Œæˆ–è€…è¯´æ‰¾åˆ°çš„å‘¢ï¼Ÿæ˜¯å‡è®¾å¤§éƒ¨åˆ†èŠ‚ç‚¹éƒ½æ˜¯æœ‰ç€ç›¸åŒçš„æœ€é•¿ä¸»é“¾ï¼Œç„¶åç›´æ¥åœ¨æœ¬åœ°çš„åŒºå—é“¾ä¸ŠåŠ ä¸Šæœ€æ–°çš„ï¼Œç„¶åæŠŠæ–°äº§ç”Ÿçš„åŒºå—ä¿¡æ¯å¹¿æ’­å‡ºå»ï¼Ÿç„¶åå†æ ¹æ®æœ€é•¿ä¸»é“¾æ­£ç¡®æ€§çš„å‡è®¾å‰æï¼Œå…¶ä»–èŠ‚ç‚¹æ ¹æ®è¯¥æœ€é•¿ä¸»é“¾æ›´æ–°æœ¬åœ°çš„åŒºå—é“¾</p></li><li><p><strong>é—®é¢˜3</strong>ï¼šåœ¨ä¸Šé¢çš„ä¾‹å­é‡Œï¼Œè¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œæ€ä¹ˆå»æ£€éªŒä¸€ä¸ªäº¤æ˜“é‡Œä»˜æ¬¾è€…çš„ä½™é¢ï¼Ÿæˆ–è€…è¯´æ€ä¹ˆæ‰¾åˆ°è¯¥ä»˜æ¬¾è€…ä¹‹å‰çš„æ‰€æœ‰äº¤æ˜“è®°å½•ï¼Ÿç”¨å…¬ç§é’¥çš„è¯å¥½åƒä¸å¤ªè¡Œï¼Œå› ä¸ºæ¯æ¬¡éƒ½å¯èƒ½å˜æ¢ã€‚è¿˜æ˜¯è¯´è¿™ä¸ªè´¦æˆ·æ˜¯å¯ä»¥ç›´æ¥æ‰¾åˆ°çš„ï¼Œé‚£éšç§æ€§æ˜¯æ€ä¹ˆä¿æŠ¤ï¼Ÿ</p></li><li><p>**é—®é¢˜4ï¼š**æ–‡ä¸­çš„ç½‘ç»œéƒ¨åˆ†æåˆ°äº†å®¹é”™æ€§ï¼Œå³æœ‰çš„ç½‘ç»œèŠ‚ç‚¹å¯èƒ½ä¼šä¸¢å¤±ä¹‹å‰çš„åŒºå—ä¿¡æ¯ï¼Œé‚£ä¹ˆè¿™äº›èŠ‚ç‚¹è¯¥æ€ä¹ˆæ‰¾åˆ°å½“å‰çš„æœ€é•¿ä¸»é“¾ï¼Ÿ</p><ul><li>æˆ‘ç†è§£æ¯æ¬¡ä¼ æ’­çš„åŒºå—éƒ½æ˜¯æœ€æ–°çš„åŒºå—ï¼ŒèŠ‚ç‚¹ä¼šå› æ­¤æ„è¯†åˆ°è‡ªå·±ä¸¢å¤±äº†åŒºå—ä¿¡æ¯ï¼ˆè¿™ä¸ªæ€ä¹ˆæ„è¯†åˆ°ä¹Ÿæ˜¯ä¸ªé—®é¢˜ï¼Œç”¨æœ€æ–°åŒºå—é‡Œçš„çš„prev hashæ¥éªŒè¯ï¼Ÿï¼‰ï¼Œé‚£ä¹ˆæ€ä¹ˆæ¥è·å–ä¸¢å¤±çš„åŒºå—ä¿¡æ¯å‘¢ï¼Ÿæ˜¯ä»æœ€æ–°åŒºå—å¹¿æ’­èŠ‚ç‚¹é‚£æ‹‰å–åŒºå—å—ï¼Ÿ</li></ul></li><li><p><strong>é—®é¢˜5</strong>ï¼šMerkel Treeå‰ªæå‹ç¼©çš„å…·ä½“å®ç°</p></li><li><p><strong>é—®é¢˜6</strong>ï¼šè®ºæ–‡é€šç¯‡ä»‹ç»äº†æ¯”ç‰¹å¸çš„å®ç°åŸç†ï¼Œé‚£ä¹ˆæ¯”ç‰¹å¸æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œç¼ºç‚¹å‘¢ï¼Ÿ</p></li><li><p><strong>é—®é¢˜7</strong>ï¼šåœ¨å­˜å‚¨éƒ¨åˆ†æåˆ°ï¼Œå› ä¸ºMerkel Treeçš„æŠ€æœ¯ï¼Œå­˜å‚¨å¹¶ä¸æ˜¯é—®é¢˜ï¼Œé‚£ä¹ˆæœ‰æ²¡æœ‰å¯èƒ½ç”¨ä¼˜åŠ¿æ¥å¼¥è¡¥åŠ£åŠ¿ï¼Œåƒæ˜¯ç©ºé—´æ¢æ—¶é—´ï¼Ÿ</p></li></ul><h1 id="æ‰€æ€æ‰€æ„Ÿ"><a class="markdownIt-Anchor" href="#æ‰€æ€æ‰€æ„Ÿ"></a> æ‰€æ€æ‰€æ„Ÿ</h1><ul><li>æ¯”ç‰¹å¸æœ¬èº«æ²¡æœ‰ä»·å€¼ï¼Œä½†æ˜¯å´æœ‰ç€æ— æ¯”æ˜‚è´µçš„ä»·æ ¼ï¼Œç”šè‡³æœ‰å¤§é‡çš„ç”µåŠ›ã€ç®—åŠ›è€—è´¹åœ¨è¿™ä¸Šé¢ï¼Œè¿›è¡Œæ‰€è°“çš„â€œæŒ–çŸ¿â€ï¼Œä»ä¸­è·å¾—çœŸå®çš„é‡‘é’±è´¢å¯Œï¼Œè¿™å¯¹æˆ‘æ¥è¯´æœ‰äº›ä¸å¯æ€è®®ï¼Œéš¾ä»¥ç†è§£ã€‚æˆ‘è‡ªèº«ä¹Ÿè¯´ä¸å¤ªæ¸…æ¥šï¼Œå¯èƒ½è¿™æ˜¯ä¸ªå“²å­¦é—®é¢˜ï¼Ÿä¸€ä¸ªä»è®¡ç®—æœºé‡Œäº§ç”Ÿçš„ç”µå­è´§å¸ï¼Œå¯¹ç°å®ä¸–ç•Œæ²¡æœ‰å®è´¨æ€§çš„ä»·å€¼æˆ–è€…è¯´å®ç”¨æ€§ï¼Œä¸ºä»€ä¹ˆå´èƒ½è¢«äººä»¬è¿½æ§ï¼Œèµ‹äºˆäº†å¤©ä»·ï¼ŸæŠŠé‚£äº›èŠ±è´¹åœ¨æ‰¾éšæœºæ•°ã€æŒ–çŸ¿çš„ç”µåŠ›å’Œç®—åŠ›ç”¨åœ¨æ›´éœ€è¦çš„åœ°æ–¹ï¼Œä¼šä¸ä¼šèƒ½åˆ›é€ æœ‰å®é™…ä»·å€¼çš„äº‹ç‰©ï¼Ÿ</li><li>é€šè¿‡é˜…è¯»æœ¬ç¯‡è®ºæ–‡ï¼Œäº†è§£æ¯”ç‰¹å¸å¤§è‡´çš„å·¥ä½œæµç¨‹ï¼Œå®ç°åŸç†ï¼Œä¹Ÿè®¤è¯†åˆ°æ¯”ç‰¹å¸æœ€å¤§çš„ç‰¹ç‚¹å°±æ˜¯å»ä¸­å¿ƒåŒ–ï¼Œæ²¡æœ‰äº†ç¬¬ä¸‰æ–¹æœºæ„ï¼Œæ”¹å˜ä»¥å¾€â€œåŸºäºä¿¡ä»»â€çš„äº¤æ˜“æ¨¡å¼ï¼Œæˆ–è®¸æ­£æ˜¯è¿™ç§å»ä¸­å¿ƒåŒ–çš„ã€éšè”½çš„å¹¶ä¸”å¯é çš„äº¤æ˜“æ–¹å¼æ»¡è¶³äº†ä¸€å®šäººç¾¤çš„éœ€æ±‚ï¼ˆå¯èƒ½å¹¶ä¸æ­£å½“ï¼‰ï¼Œé€ƒç¦»æ”¿åºœç›‘ç®¡ï¼Œä»¥æˆ‘ä»¬çš„å›½æƒ…æ¥è¯´ï¼Œè¿™æ˜¯ä¸å¯æ¥å—çš„ï¼Œå¯¹å¤§éƒ¨åˆ†äººæˆ–è®¸ä¹Ÿä¸å¥½ç†è§£ã€‚ä½†æ˜¯åŒºå—é“¾è¿™ç§æŠ€æœ¯ï¼Œè¿™ç§å»ä¸­å¿ƒåŒ–çš„ç½‘ç»œä¸ä¸€å®šè¦è½åœ°åœ¨ç”µå­è´§å¸é‡Œï¼Œåº”è¯¥ä¼šæœ‰æ›´å¹¿é˜”çš„åº”ç”¨åœºæ™¯ï¼Œä¹Ÿéœ€è¦æˆ‘è‡ªå·±å†å­¦ä¹ äº†ã€‚</li></ul>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºçŸ¥è¯†</category>
      
      <category>æ¯”ç‰¹å¸</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Bitcoin</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€æ¯”ç‰¹å¸ä¸“é¢˜02ã€‘Developer Guideå¯¼è¯»</title>
    <link href="/2021/10/11/2021-10/2021-10-11%E6%AF%94%E7%89%B9%E5%B8%81%E4%B8%93%E9%A2%9802-Developer%20Guide/"/>
    <url>/2021/10/11/2021-10/2021-10-11%E6%AF%94%E7%89%B9%E5%B8%81%E4%B8%93%E9%A2%9802-Developer%20Guide/</url>
    
    <content type="html"><![CDATA[<blockquote><p>åŸæ–‡é˜…è¯»åœ°å€ï¼š<a href="https://developer.bitcoin.org/devguide/transactions.html">Bitcoin Developer Guide</a></p><p>é¢„è®¡é€šè¯»è€—æ—¶ï¼š12å°æ—¶ï¼ˆä¸ªäººæ•°æ®ï¼Œä»…ä¾›å‚è€ƒï¼‰</p><p>ä¸­æ–‡ç¿»è¯‘ï¼š</p><p><a href="https://www.8btc.com/books/834/bitcoin-developer-guide/_book/5/5.html">æ¯”ç‰¹å¸å¼€å‘è€…æŒ‡å—-å·´æ¯”ç‰¹å›¾ä¹¦</a></p><p><a href="https://www.bookstack.cn/read/bitcoin_developer_guide/README.md">ç®€ä»‹ - ã€Šæ¯”ç‰¹å¸å¼€å‘è€…æŒ‡å— | Bitcoin Developer Guideã€‹ - ä¹¦æ ˆç½‘ Â· BookStack</a></p></blockquote><h1 id="ç« èŠ‚æ¦‚è¿°"><a class="markdownIt-Anchor" href="#ç« èŠ‚æ¦‚è¿°"></a> ç« èŠ‚æ¦‚è¿°</h1><p>æ­¤æ¬¡é˜…è¯»çš„å†…å®¹æ˜¯æ¯”ç‰¹å¸Developer Guideï¼Œè¯¦ç»†ä»‹ç»äº†æ¯”ç‰¹å¸ä¸­å„ç§è®¾è®¡å’ŒæŠ€æœ¯ç»†èŠ‚ã€‚</p><ul><li>Block Chainï¼šä»‹ç»æ¯”ç‰¹å¸çš„ç»“æ„åŸºç¡€åŒºå—é“¾ï¼ŒåŒ…æ‹¬å·¥ä½œé‡è¯æ˜ï¼Œå—é«˜ä¸åˆ†å‰ï¼Œäº¤æ˜“æ•°æ®ï¼Œå…±è¯†è§„åˆ™æ”¹å˜å¼•èµ·åˆ†å‰ç­‰å†…å®¹ã€‚</li><li>Transactionï¼šè¯¦ç»†ä»‹ç»äº†æ¯”ç‰¹å¸ä¸­äº¤æ˜“çš„ç›¸å…³å†…å®¹ï¼Œé‡ç‚¹è¯´æ˜äº†äº¤æ˜“çš„ç»„æˆï¼Œäº¤æ˜“ä¸­çš„UTXOçš„ç±»å‹ï¼ˆä½¿ç”¨ä½•ç§æ”¯ä»˜æ–¹å¼P2PKHæˆ–è€…P2SHï¼‰ã€‚</li><li>Contractsï¼šè¿™é‡Œçš„åˆçº¦è·Ÿä»¥å¤ªåŠçš„æ™ºèƒ½åˆçº¦ä¸å¤ªä¸€æ ·ï¼Œæ„Ÿè§‰æ›´åƒæ˜¯æ¥è¯´æ˜äº¤æ˜“åŒæ–¹ï¼ˆé’ˆå¯¹äººè€Œä¸æ˜¯äº¤æ˜“ï¼‰è¯¥å¦‚ä½•è¿›è¡Œäº¤æ˜“ï¼Œåº”è¯¥éµå®ˆå“ªäº›è§„åˆ™ã€‚ä¸»è¦ä»‹ç»äº†æ‰˜ç®¡å’Œä»²è£ã€å¾®æ”¯ä»˜é€šé“ã€Coinjoinï¼ˆæ··å¸ï¼‰</li><li>Walletï¼šé’±åŒ…ç”¨æ¥ç®¡ç†å’ŒèŠ±è´¹UTXOï¼Œå› ä¸ºUTXOå®é™…å¯¹åº”çš„æ˜¯ä¸€ä¸ªhashåœ°å€ï¼Œå› æ­¤é’±åŒ…å®é™…å°±æ˜¯åœ¨ç®¡ç†å…¬ç§é’¥ï¼Œè¿™éƒ¨åˆ†å†…å®¹ä¹Ÿå°±æ›´å¤šåœ¨ä»‹ç»å…¬ç§é’¥çš„ç®¡ç†é—®é¢˜ã€‚</li><li>Payment Processingï¼šè¿™éƒ¨åˆ†é‡ç‚¹ä»‹ç»å¦‚ä½•ä½¿ç”¨æ¯”ç‰¹å¸è¿›è¡Œæ”¯ä»˜çš„ç›¸å…³é—®é¢˜ã€‚</li><li>Operating Modesï¼šä»‹ç»æ¯”ç‰¹å¸ä¸­å…¨èŠ‚ç‚¹å’ŒSPVå®¢æˆ·ç«¯ã€‚</li><li>P2P Networkï¼šè¿™éƒ¨åˆ†å°±æ˜¯è¯¦ç»†ä»‹ç»äº†æ¯”ç‰¹å¸è¿è¡Œåœ¨P2Pç½‘ç»œä¸­ç›¸å…³ç»†èŠ‚ï¼ŒåŒ…æ‹¬å¯¹ç­‰èŠ‚ç‚¹çš„å‘ç°ä¸é“¾æ¥ï¼Œå…¨èŠ‚ç‚¹çš„åˆå§‹åŒ–ï¼ŒåŒºå—ä¼ æ’­ç­‰ã€‚</li><li>Miningï¼šä»‹ç»äº†å•ç‹¬æŒ–çŸ¿å’ŒçŸ¿æ± æŒ–çŸ¿ä¸¤ç§æŒ–çŸ¿ï¼ˆæ·»åŠ æ–°çš„åŒºå—ï¼‰æ–¹å¼ã€‚</li></ul><h1 id="é‡ç‚¹å†…å®¹"><a class="markdownIt-Anchor" href="#é‡ç‚¹å†…å®¹"></a> é‡ç‚¹å†…å®¹</h1><blockquote><p>å¤§éƒ¨åˆ†æ˜¯é˜…è¯»å„ä¸ªæ¨¡å—æ—¶è®°å½•ä¸‹çš„é‡ç‚¹å†…å®¹ã€‚</p></blockquote><h2 id="block-chain-åŒºå—é“¾"><a class="markdownIt-Anchor" href="#block-chain-åŒºå—é“¾"></a> Block Chain åŒºå—é“¾</h2><ul><li>Block chainé‡ŒUTXOçš„ä½œç”¨ï¼Œåªèƒ½ä½¿ç”¨ä¸€æ¬¡ï¼Œè¿™ä¹Ÿè§£å†³äº†åŒèŠ±é—®é¢˜</li><li>Proof of worké‡Œä¹Ÿæ˜¯å……åˆ†åˆ©ç”¨äº†åŠ å¯†hashç®—æ³•é‡Œéšæœºçš„å¤©ç„¶ç‰¹æ€§ï¼Œhash numberä¸å¯é¢„çŸ¥<ul><li>æ¯2016å—è°ƒæ•´éš¾åº¦å€¼ï¼Œæ ¹æ®ç”Ÿæˆè¿™2016å—blockçš„æ—¶é—´æ¥è°ƒæ•´ï¼Œç†æƒ³æ—¶é—´æ˜¯1,209,600ç§’(two weeks).</li></ul></li><li>Transaction dataï¼šblocké‡Œçš„ç¬¬ä¸€ä¸ªäº¤æ˜“æ˜¯ä¸€ä¸ªcoinbaseäº¤æ˜“ï¼ˆç”±ç”Ÿæˆçš„åŒºå—å¥–åŠ±å’Œè¾“å…¥è¾“å‡ºè´¹ç”¨å·®ç»„æˆï¼‰ï¼Œé€šå¸¸åªæœ‰åœ¨100å—ä¹‹åï¼Œæ‰èƒ½è¢«èŠ±è´¹ä½¿ç”¨ï¼Œè¿™ä¹ˆåšçš„ç›®çš„æ˜¯å› ä¸ºåˆ†å‰æ¯”è¾ƒå¸¸è§ï¼Œé˜²æ­¢å› ä¸ºåˆ†å‰çš„åŸå› å¯¼è‡´åŸå…ˆçš„åŒºå—å¤±æ•ˆ<ul><li>æœ‰ä¸ªé—®é¢˜æ˜¯ï¼Œå¦‚ä½•ä¿è¯å¿…é¡»è¦åœ¨100å—ä¹‹åæ‰èƒ½è¿›è¡ŒèŠ±è´¹ï¼Œæ˜¯åœ¨åˆ›å»ºblockçš„æ—¶å€™ï¼Œåˆ¤æ–­è¾“å…¥çš„UTXOæ‰€åœ¨çš„åŒºå—çš„æ·±åº¦è¶…è¿‡100å—ï¼Ÿ</li></ul></li><li>å…±è¯†è§„åˆ™æ”¹å˜ï¼šå…±è¯†è§„åˆ™æ”¹å˜ï¼Œä¼šæœ‰ä¸¤ç§ä¸åŒçš„æƒ…å½¢ï¼Œåˆ†åˆ«å¯¼è‡´ç¡¬åˆ†å‰å’Œè½¯åˆ†å‰ï¼Œä¸æ˜¯å¾ˆèƒ½ç†è§£å…¶ä¸­çš„å«ä¹‰ï¼ŒæŸ¥é˜…ç›¸å…³èµ„æ–™æœ‰äº†è¿›ä¸€æ­¥è®¤è¯†ã€‚ï¼ˆç°åœ¨æ¯”ç‰¹å¸çš„æ›´æ–°ï¼ŒåŸºæœ¬å°±æ˜¯è½¯åˆ†å‰ï¼‰</li></ul><blockquote><p><strong>å¸¸è§çš„ç†è§£æ˜¯â€œç¡¬åˆ†å‰å’Œè€ç‰ˆæœ¬è½¯ä»¶ä¸å…¼å®¹ã€è½¯åˆ†å‰å’Œè€ç‰ˆæœ¬å…¼å®¹â€</strong>ï¼Œè¿™ä¸ªå®šä¹‰æ˜¯<strong>ä¸å‡†ç¡®</strong>çš„ï¼Œä½†æ˜¯å¾ˆå¤šåœ°æ–¹å·²ç»åœ¨ç”¨äº†ã€‚ã€‚<br /><strong>ç¡¬åˆ†å‰çš„å®šä¹‰æ˜¯æ‰©å®½å…±è¯†è§„åˆ™</strong>ï¼Œå…è®¸åšä¹‹å‰ç¦æ­¢çš„äº‹æƒ…ï¼Œä»¥å‰æ— æ•ˆçš„äº¤æ˜“/åŒºå—åœ¨ç¡¬åˆ†å‰åä¼šå˜æˆæœ‰æ•ˆçš„ï¼›<strong>è½¯åˆ†å‰æ˜¯æ”¶ç´§å…±è¯†è§„åˆ™</strong>ï¼Œç¦æ­¢ä¹‹å‰å…è®¸åšçš„äº‹æƒ…ï¼Œä»¥å‰æœ‰æ•ˆçš„äº¤æ˜“åœ¨è½¯åˆ†å‰åå°±æ— æ•ˆäº†ã€‚<br />**è½¯/ç¡¬åˆ†å‰æ˜¯å…±è¯†è§„åˆ™çš„æ”¹å˜ï¼Œå’Œé“¾åˆ†å‰/é“¾é‡ç»„å®Œå…¨æ˜¯ä¸¤ç äº‹ï¼›è¿™ä¸¤å¯¹æ¦‚å¿µçš„å…³ç³»ç±»ä¼¼äºâ€œçº¢çƒ§/æ¸…è’¸â€ä¸â€œçƒ§ç³Š/å¤¹ç”Ÿâ€ã€‚**ä¸å½“éƒ¨ç½²çš„è½¯/ç¡¬åˆ†å‰éƒ½æœ‰å¯èƒ½å¯¼è‡´é“¾åˆ†å‰/é“¾é‡ç»„ã€‚<br />æ‰€ä»¥ï¼Œå¯ä»¥æƒ³è§ï¼š<br />ç¡¬åˆ†å‰ä¹‹åï¼Œå‡ ä¹ä¸€å®šä¼šäº§ç”Ÿè®©è€èŠ‚ç‚¹æ‹’ç»æ¥å—çš„åŒºå—ï¼Œæ‰€ä»¥ï¼Œç¡¬åˆ†å‰ä¼šç ´åå‰å‘å…¼å®¹æ€§ï¼›<br />è½¯åˆ†å‰ä¹‹åï¼Œäº§ç”Ÿçš„æ–°åŒºå—è‚¯å®šæ˜¯è€èŠ‚ç‚¹ä¹Ÿæ„¿æ„æ¥å—çš„ï¼Œå‰å‘å…¼å®¹æ€§å¾—ä»¥ä¿ç•™ã€‚</p></blockquote><ul><li>Detecting forks å‘ç°åˆ†å‰ï¼šé€šè¿‡ç›‘æ§åŒºå—é“¾å·¥ä½œé‡è¯æ˜è€Œå‘ç°ç¡¬åˆ†å‰çš„ä»£ç ï¼›ç›‘æ§æœ€è¿‘åŒºå—çš„ç‰ˆæœ¬å·</li></ul><h2 id="transactionäº¤æ˜“"><a class="markdownIt-Anchor" href="#transactionäº¤æ˜“"></a> Transactionäº¤æ˜“</h2><ul><li><strong>P2PKH</strong> å³ pay to public key hashï¼Œå‘å…¬é’¥å“ˆå¸Œåœ°å€æ”¯ä»˜<ul><li>äº¤æ˜“çš„è¾“å…¥ä½¿ç”¨ä¸€ä¸ªTXIDå’Œoutput index numberï¼ˆå¯¹äºoutputæ¥è¯´å¤„åœ¨äº¤æ˜“çš„å“ªä¸ªä½ç½®ï¼‰æ¥æ ‡è¯†ï¼Œç„¶åè¿˜æœ‰ä¸€ä¸ªç­¾åè„šæœ¬ï¼ŒéªŒè¯è¯¥inputå¯¹åº”çš„outputåŒ…å«çš„å…¬é’¥è„šæœ¬ï¼Œç”¨æ¥è¯æ˜è¿™ç¬”è¾“å…¥çš„é’±çš„ç¡®æ˜¯æœ¬äººæŒæœ‰</li><li>äº¤æ˜“çš„è¾“å‡ºåŒ…å«ä¸€ä¸ªéšå«çš„index numberï¼Œä»¥èªä¸ºå•ä½çš„ä½™é¢é‡ï¼Œä¸€ä¸ªå…¬é’¥è„šæœ¬</li><li>Bobè¦ä½¿ç”¨Aliceçš„æ”¯ä»˜ç»™ä»–çš„UTXOï¼ŒAliceåˆ›å»ºè½¬è´¦çš„Txäº¤æ˜“æ—¶éœ€è¦ç”¨åˆ°Bobçš„å…¬é’¥ï¼Œå› æ­¤Bobçš„å…¬ç§é’¥æ˜¯æå‰ç”Ÿæˆå¥½çš„ï¼Œä½¿ç”¨ECDSAæ¤­åœ†ç­¾åæ›²çº¿ç”Ÿæˆï¼›ç„¶åBobå°†å…¬é’¥hashï¼Œä½¿ç”¨Base58ç¼–ç åœ°å€ç‰ˆæœ¬ç¼–å·ã€å…¬é’¥å“ˆå¸Œã€é”™è¯¯æ ¡éªŒç ï¼Œç„¶åä¼ ç»™Aliceï¼ŒAliceå¯ä»¥è¿›è¡Œè§£ç å¾—åˆ°å…¬é’¥hashï¼Œå¹¶æ·»åŠ åˆ°äº¤æ˜“ä¸­ï¼Œä½œä¸ºoutputä¸­çš„pubkey scriptï¼Œæ¥æ ‡è¯†è¾“å‡ºåˆ°å“ªä¸ªåœ°å€ï¼›</li><li>è€Œå½“Bobéœ€è¦ä½¿ç”¨è¿™ä»½UTXOï¼Œå‘å¸ƒäº¤æ˜“æ—¶ï¼Œéœ€è¦æ„é€ inputï¼Œå¼•ç”¨Aliceåˆ›é€ çš„äº¤æ˜“TXï¼ˆå³TXIDå’Œå¯¹åº”çš„output index numberï¼‰ï¼Œè¿˜éœ€è¦åŒ…å«ä¸€ä¸ªç­¾åè„šæœ¬(signature scriptï¼‰ï¼Œè¿™ä¸ªç­¾åè„šæœ¬ç”¨æ¥éªŒè¯è¿™ç¬”è¾“å…¥çš„ç¡®æ˜¯Bobæ‰€æœ‰ã€‚è¿™ä¸ªç­¾åè„šæœ¬é‡ŒåŒ…å«äº†Bobçš„å…¬é’¥å’Œç­¾åï¼Œè€Œç­¾åçš„æ•°æ®åŒ…å«äº†Aliceåˆ›é€ çš„äº¤æ˜“TXIDå’Œindex numberï¼Œè¾“å‡ºç»™å…¶ä»–ç”¨æˆ·çš„pubkey scriptï¼Œè¾“å‡ºçš„ä½™é¢ã€‚è€Œè¾“å‡ºoutputï¼Œæ­£å¦‚ä¸Šè¿°æ‰€è¯´ï¼ŒåŒ…å«ä¸€ä¸ªéšå«çš„index numberï¼Œä»¥èªä¸ºå•ä½çš„ä½™é¢é‡ï¼Œä¸€ä¸ªå…¬é’¥è„šæœ¬ã€‚</li></ul></li></ul><p><img src="https://cdn.jsdelivr.net/gh/2017zhangyuxuan/picture_backend@master//img/202110111350637.(null)" alt="" /></p><ul><li><p><strong>P2SH</strong>ï¼šæå‡ºP2SHçš„ç›®çš„ä¸»è¦æ˜¯å› ä¸ºåœ¨ä¹‹å‰çš„äº¤æ˜“ä¸­ï¼Œéƒ½æ˜¯ç”±å‘é€è€…è´Ÿè´£æŒ‡å®šèµå‡ºå¸çš„æ¡ä»¶ã€‚è¿™æ ·çš„è¯ï¼Œå¦‚æœèµå‡ºå¸çš„è¿‡ç¨‹æ¯”è¾ƒå¤æ‚ï¼Œè­¬å¦‚è¦ä½¿ç”¨MULTISIGï¼Œé‚£ä¹ˆå¯¹ä»˜é’±çš„ç”¨æˆ·ï¼Œä¹Ÿå°±æ˜¯ä¹°å®¶ï¼Œå°±ä¸å¤Ÿå‹å¥½ã€‚ä½¿ç”¨P2SHçš„æ–¹å¼ï¼Œå¯ä»¥ç”±å¸çš„æ¥æ”¶æ–¹è®¾è®¡å¥½æ‰§è¡Œçš„è„šæœ¬ï¼Œç„¶åä¸è®ºè„šæœ¬å¤šä¹ˆå¤æ‚ï¼Œå‘é€æ–¹åªéœ€è¦å°†å¸å‘é€åˆ°ä¸€ä¸ª20å­—èŠ‚çš„å“ˆå¸Œåœ°å€å°±è¡Œã€‚</p><ul><li>æœ‰å…³èµ„æ–™å‚è€ƒï¼š<a href="https://zhuanlan.zhihu.com/p/46072343">P2SHæœºåˆ¶</a></li></ul></li><li><p>æ ‡å‡†çš„å…¬é’¥è„šæœ¬ç±»å‹ï¼šP2PKHã€P2SHã€Multisigã€Pubkeyã€Null Data</p></li><li><p>äº¤æ˜“ä¸­Locktimeå’ŒSequence numbersçš„è¯´æ˜</p><ul><li>Locktime, ä¹Ÿè¢«ç§°ä¸ºnLockTime, å®ƒå®šä¹‰äº†ä¸ªæœ€æ—©æ—¶é—´ï¼Œåªæœ‰è¿‡äº†è¿™ä¸ªæœ€æ—©æ—¶é—´ï¼Œè¿™ä¸ªtransactionå¯ä»¥è¢«å‘é€åˆ°æ¯”ç‰¹å¸ç½‘ç»œã€‚é€šå¸¸è¢«è®¾ç½®ä¸º0ï¼Œè¡¨ç¤ºtransactionä¸€åˆ›å»ºå¥½å°±é©¬ä¸Šå‘é€åˆ°æ¯”ç‰¹å¸ç½‘ç»œ</li><li>Sequence numbersç”¨æ¥ä½¿ç­¾åè€…æ›´æ–°äº¤æ˜“ï¼Œå¦‚æœsequence numbersè®¾ç½®æˆ0xffffffffæ—¶ï¼Œè¡¨æ˜æ›´æ–°å®Œæˆï¼Œå°±å¯ä»¥ç«‹å³ç”Ÿæ•ˆåŠ å…¥åˆ°æ¯”ç‰¹å¸åŒºå—ä¸­ï¼Œè¿™ä¸ªç”Ÿæ•ˆæ˜¯ä¸ç®¡Locktimeæ˜¯å¦è¿‡æœŸã€‚</li><li>å¦ä¸€ç§ç†è§£ï¼š<ul><li>LockTime ï¼šç»å¯¹æ—¶é—´ï¼Œç”¨çš„æ˜¯æ•´ä¸ªåŒºå—é“¾çš„é•¿åº¦ï¼Œæˆ–è€…æ—¶é—´æˆ³æ¥è¡¨è¾¾çš„ã€‚</li></ul></li></ul></li><li><p>Sequence Number : ç›¸å¯¹æ—¶é—´ï¼Œå½“å‰äº¤æ˜“æ‰€å¼•ç”¨çš„UTXOæ‰€åœ¨çš„å—ï¼ˆä¹Ÿå°±æ˜¯è¾“å…¥æ‰€åœ¨çš„å—ï¼‰ï¼Œåé¢è¿½åŠ äº†å¤šå°‘ä¸ªå—ã€‚</p></li><li><p>å‚è€ƒï¼š<a href="https://zhuanlan.zhihu.com/p/43171481">æ·±å…¥æµ…å‡ºå¾®æ”¯ä»˜é€šé“</a></p></li></ul><h2 id="contractåˆçº¦"><a class="markdownIt-Anchor" href="#contractåˆçº¦"></a> contractåˆçº¦</h2><ul><li>ç»“åˆä¹‹å‰çš„P2SHæ–¹å¼ä¸­ï¼Œå¯¹multisigæœ‰äº†æ›´è¿›ä¸€æ­¥çš„ç†è§£ã€‚Aå‘Bä¹°ä¸œè¥¿ï¼ŒAä½¿ç”¨P2SHï¼ŒæŠŠé’±æ”¯ä»˜åˆ°ä¸€ä¸ªè„šæœ¬åœ°å€å¹¶ä½¿ç”¨2-of-3ç­¾åï¼ˆæ­¤æ—¶æ¯”ç‰¹å¸åªå±äºè¿™ä¸ªè„šæœ¬åœ°å€ï¼‰ï¼Œå½“Bå‘è´§äº†ï¼ŒAæ”¶åˆ°ç¡®è®¤æ²¡é—®é¢˜äº†ï¼Œé‚£ä¹ˆä½¿ç”¨Aå’ŒBçš„ç­¾åå°±å¯ä»¥æŠŠè„šæœ¬åœ°å€çš„UTXOè½¬ç»™Bçš„åœ°å€ã€‚å¦‚ä½•Aåæ‚”äº†ï¼Œä¸è‚¯æä¾›ç­¾åï¼Œé‚£ä¹ˆBå¯ä»¥æ‰¾ä»²è£æœºæ„Cï¼Œä½¿ç”¨Bå’ŒCçš„ç­¾åä¹Ÿèƒ½å°†è„šæœ¬åœ°å€çš„UTXOè½¬ç»™Bï¼›åŒç†Bå¦‚æœæ²¡æœ‰å‘è´§ï¼ŒAä¹Ÿèƒ½æ‰¾CæŠŠé’±è½¬å›ç»™Aã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç›¸æ¯”P2PKHç›´æ¥è½¬è´¦æ–¹å¼ï¼ŒP2SHç›¸å½“äºå¤šäº†ä¸€æ­¥éªŒè¯ç­‰å¾…ï¼ŒéªŒè¯æˆåŠŸäº†å†è½¬è´¦åˆ°ç”¨æˆ·åœ°å€ã€‚</li><li>Micropayment Channel å¾®æ”¯ä»˜é€šé“</li></ul><p><img src="https://cdn.jsdelivr.net/gh/2017zhangyuxuan/picture_backend@master//img/202110111350785.(null)" alt="" /></p><ul><li><p>å…¶å·¥ä½œåŸç†å¤§ä½“ä¸Šå¯ä»¥è¿™æ ·æè¿°ï¼šAç»™Bæ‰“å·¥ï¼ŒBé¦–å…ˆä½¿ç”¨Aå’ŒBçš„ç­¾åï¼Œä½¿ç”¨P2SHçš„æ–¹å¼ï¼Œå‘é€ä¸€å®šé‡‘é¢åˆ°è„šæœ¬åœ°å€ï¼Œå¹¶å°†è¯¥äº¤æ˜“ç«‹å³ä¼ æ’­åˆ°æ¯”ç‰¹å¸ç½‘ç»œä¸Šï¼›ç„¶åBåˆ›é€ ç¬¬äºŒä¸ªäº¤æ˜“ï¼Œå¹¶ç”¨åˆ°åˆšåˆšAçš„ç­¾åï¼Œå…¶è¾“å…¥æ˜¯ç¬¬ä¸€ä¸ªäº¤æ˜“çš„è„šæœ¬åœ°å€ï¼Œè¾“å‡ºæ˜¯Bçš„åœ°å€ï¼ˆç›¸å½“äºå…¨é¢è¿”å›ç»™Bï¼‰ï¼Œç„¶åç»™è¿™ä¸ªäº¤æ˜“åŠ ä¸ŠLocktimeï¼Œæ¯”å¦‚è¯´ä¸€å¤©åæ‰èƒ½å¹¿æ’­è¿™ä¸ªäº¤æ˜“ã€‚ç„¶åAç»™Bå·¥ä½œä¸€éƒ¨åˆ†å†…å®¹åï¼ŒAè¦æ±‚Bå…ˆæ”¯ä»˜è¿™ä»½å·¥ä½œé‡çš„è–ªæ°´ï¼Œé‚£ä¹ˆBå°±åˆ›å»ºä¸€ä»½æ–°çš„äº¤æ˜“ï¼Œä»åŸæ¥å…¨é¢ç»™Bå˜æˆåˆ†å‡ºä¸€éƒ¨åˆ†é‡‘é¢ç»™Aï¼Œè¿™ä¸ªæ–°çš„äº¤æ˜“æ‹·è´ç»™Aï¼Œè¿™æ ·Aå°±å¯ä»¥å¹¿æ’­è¿™ä¸ªæ–°çš„äº¤æ˜“ä»è€Œè·å¾—è–ªæ°´ã€‚ï¼ˆå®é™…ä¸ŠAåªéœ€è¦åœ¨locktimeè¿‡æœŸå‰ï¼Œå¹¿æ’­æœ€åç‰ˆæœ¬çš„äº¤æ˜“å³å¯ï¼‰</p></li><li><p>ä¸ºä»€ä¹ˆé‡‡ç”¨è¿™æ ·çš„æ–¹å¼å‘¢ï¼Œå› ä¸ºAè¯‰æ±‚æ˜¯åŠæ—¶æ”¯ä»˜è–ªæ°´ï¼Œä½†æ˜¯å› ä¸ºé‡å°ï¼ŒBä¸èƒ½æ¯æ¬¡éƒ½ç«‹å³åˆ›é€ ä¸€ä¸ªäº¤æ˜“å³åˆ»æ”¯ä»˜ï¼Œè¿™æ ·çš„äº¤æ˜“è´¹çš„æˆæœ¬å¤ªé«˜äº†ã€‚æ‰€ä»¥åˆ©ç”¨è¿™æ ·çš„æ–¹å¼ï¼Œæ—¢ç¡®ä¿äº†Açš„è–ªæ°´æ˜¯åŠæ—¶å¾—åˆ°ç¡®è®¤çš„ï¼Œåˆå¯ä»¥ä½¿å¾—åªéœ€ä¸€ä¸ªäº¤æ˜“å°±ä¸€æ¬¡æ€§æ”¯ä»˜è–ªæ°´</p></li><li><p>å®é™…ä¸Šï¼Œæ›´æ”¹äº¤æ˜“é‡‘é¢çš„è¾“å‡ºï¼Œè¿™ä¸ªæƒåˆ©æ˜¯åœ¨Bçš„ï¼Œå› ä¸ºBæœ‰Açš„ç­¾åä½†Aæ²¡æœ‰Bçš„ç­¾åï¼ŒAæ‹¿çš„æ˜¯ç»è¿‡Bç­¾ååçš„äº¤æ˜“å‰¯æœ¬ï¼ˆè¿™ä¸ªäº¤æ˜“è¢«Bç­¾åè¿‡äº†ï¼Œæ‰€ä»¥æ˜¯æœ‰æ•ˆçš„ï¼‰ã€‚æ‰€ä»¥Aèƒ½å®æ—¶ç¡®ä¿è‡ªå·±å¯¹åº”å·¥ä½œé‡çš„è–ªæ°´èƒ½åŠæ—¶æ”¯ä»˜ï¼Œå°±ç®—ä¸­é€”Bè·‘è·¯äº†ï¼Œä¹Ÿåªæ˜¯æŸå¤±ä¸€å°éƒ¨åˆ†å·¥ä½œé‡çš„è–ªæ°´ï¼Œä¹‹å‰çš„è–ªæ°´éƒ½å¯ä»¥å¾—åˆ°æ”¯ä»˜ã€‚è€Œå¯¹Bæ¥è¯´ï¼Œå¦‚æœAæ²¡æœ‰å·¥ä½œï¼Œé‚£Bä¹Ÿèƒ½åœ¨locktime è¿‡æœŸåæ‹¿å›è‡ªå·±çš„é’±ï¼ˆä¸è¿‡è¿™æ ·å°±éœ€è¦ç­‰å¾…ä¸€ä¸ªlocktimeçš„æ—¶é—´ï¼‰</p></li><li><p>Coinjoinæ··å¸äº¤æ˜“ï¼Œå¢åŠ éšåŒ¿æ€§ï¼Œä¿æŠ¤éšç§ï¼Œå½“å’Œå…¶ä»–è¾“å…¥è¾“å‡ºæ··æ‚åœ¨ä¸€èµ·æ—¶ï¼Œåˆ«äººå°±éš¾ä»¥è¿½è¸ªè¾“å‡ºè®°å½•äº†</p></li></ul><p><img src="https://cdn.jsdelivr.net/gh/2017zhangyuxuan/picture_backend@master//img/202110111350075.(null)" alt="" /></p><h2 id="walleté’±åŒ…"><a class="markdownIt-Anchor" href="#walleté’±åŒ…"></a> Walleté’±åŒ…</h2><ul><li>é’±åŒ…ç¨‹åºä¸»è¦å¯åˆ†ä¸ºä¸‰ä¸ªå­ç¨‹åºï¼Œä¸€ä¸ªç¨‹åºæ¥å‘å¸ƒå…¬é’¥ç”¨äºæ¥æ”¶æ¯”ç‰¹å¸ï¼Œè€Œå¦ä¸€ä¸ªç¨‹åºå¯¹äº¤æ˜“åšç­¾åæ¥èŠ±è´¹æ¯”ç‰¹å¸ï¼Œè¿˜æœ‰ä¸€ä¸ªç½‘ç»œç¨‹åºç”¨æ¥è·ŸP2Pç½‘ç»œäº¤äº’ã€‚æ›´å…·ä½“åœ°è¯´ï¼Œä¸€ä¸ªå®Œæ•´çš„é’±åŒ…ç¨‹åºåº”åŒ…æ‹¬è¿™äº›åŠŸèƒ½ï¼šç”Ÿæˆç§é’¥ï¼Œç”Ÿæˆå¯¹åº”çš„å…¬é’¥ï¼ŒæŒ‰ç…§éœ€è¦å¯¹å…¬é’¥è¿›è¡Œå‘å¸ƒï¼Œç›‘å¬ä»¥è¿™äº›å…¬é’¥ä½œä¸ºè¾“å‡ºçš„äº¤æ˜“ï¼Œåˆ›å»ºäº¤æ˜“å¹¶å¯¹å…¶è¿›è¡Œç­¾åï¼Œå¹¿æ’­å·²ç­¾åçš„äº¤æ˜“ã€‚</li><li>Wallet file æ˜¯å¯¹ç§é’¥è¿›è¡Œç®¡ç†ï¼›æè¿°äº†ç§é’¥å’Œå…¬é’¥çš„æ ¼å¼</li><li>å‚è€ƒï¼š<a href="https://blog.csdn.net/omnispace/article/details/79816141">æ•°å­—è´§å¸é’±åŒ… - åŠ©è®°è¯ åŠ HD é’±åŒ…å¯†é’¥åŸç†_omnispaceçš„åšå®¢-CSDNåšå®¢</a></li></ul><h2 id="payment-processing-æ”¯ä»˜å¤„ç†"><a class="markdownIt-Anchor" href="#payment-processing-æ”¯ä»˜å¤„ç†"></a> Payment Processing æ”¯ä»˜å¤„ç†</h2><ul><li>ä»‹ç»å››ç§æ”¯ä»˜æ¯”ç‰¹å¸çš„æ–¹å¼å’Œç›¸å…³çš„å…·ä½“ç»†èŠ‚ï¼ŒåŒ…æ‹¬æ˜æ–‡ï¼Œbitcoin:URIï¼ŒQRç ï¼Œæ–°çš„æ”¯ä»˜åè®®X.509</li><li>å…¶ä¸­æåˆ°ä¸€ç§â€œMerge Avoidanceåˆå¹¶è§„é¿â€çš„æ–¹æ³•æ¥ä¿æŠ¤ç”¨æˆ·éšç§ï¼Œè¯¥æ–¹æ³•å¤§ä½“çš„æ„æ€å°±æ˜¯è®©å‡å°‘å„ä¸ªè´¦æˆ·è¿æ¥åœ¨ä¸€èµ·çš„æ¬¡æ•°ï¼ˆæˆ–è€…è¯´å‡å°‘è¾“å…¥çš„ä¸ªæ•°ï¼‰ã€‚å› ä¸ºå½“ä½ ä½¿ç”¨UTXOä½œä¸ºè¾“å…¥è¿›è¡ŒèŠ±è´¹æ—¶ï¼ŒUTXOåŸå…ˆçš„ownerå°±å¯ä»¥è¿½æº¯è¿™æ¬¡äº¤æ˜“çš„ä¿¡æ¯ï¼Œè¾“å…¥çš„UTXOè¶Šå¤šé‚£ä¹ˆèƒ½è¿½æº¯åˆ°è¿™ç¬”äº¤æ˜“çš„äººå°±è¶Šå¤šï¼Œéšç§å°±ä¼šå—åˆ°å½±å“ã€‚ç”¨å®˜æ–¹çš„ä¾‹å­æ¥è¯´ï¼Œä½ æœ‰100ï¼Œ200ï¼Œ500ï¼Œ900çš„UTXOï¼Œç„¶åä½ ç°åœ¨éœ€è¦æ”¯ä»˜300BTCï¼Œé‚£ä¹ˆä½ è¯¥é€‰ç”¨500çš„UTXOæ¥è¿›è¡Œæ”¯ä»˜ï¼ˆè€Œä¸æ˜¯é€‰æ‹©100ï¼Œ200ä½œä¸ºè¾“å…¥ï¼Œä½“ç°äº†åˆå¹¶ï¼Œè§„é¿é£é™©ï¼‰ã€‚</li></ul><h2 id="operating-modesè¿è¡Œæ¨¡å¼"><a class="markdownIt-Anchor" href="#operating-modesè¿è¡Œæ¨¡å¼"></a> Operating Modesè¿è¡Œæ¨¡å¼</h2><ul><li>æ¯”ç‰¹å¸ä¸»è¦æœ‰ä¸¤ç§è¿è¡Œæ¨¡å¼ï¼šä¸€ä¸ªæ˜¯å…¨èŠ‚ç‚¹å®¢æˆ·ç«¯ï¼ˆåŒ…å«æ‰€æœ‰åŒºå—å’Œäº¤æ˜“ä¿¡æ¯ï¼‰ï¼Œä¸€ä¸ªæ˜¯SPVå®¢æˆ·ç«¯ï¼ˆåªä¿å­˜åŒºå—å¤´ä¿¡æ¯ï¼‰ã€‚SPVå®¢æˆ·ç«¯å¯ä»¥é€šè¿‡è¯·æ±‚å…¨èŠ‚ç‚¹æ‹¿åˆ°ç›¸åº”çš„åŒºå—ä¿¡æ¯ï¼Œè¿›è¡ŒéªŒè¯ã€‚ç„¶è€ŒSPVå®¢æˆ·ç«¯æœ‰ä¸¤ä¸ªç¼ºç‚¹ï¼Œä¸€ä¸ªæ˜¯å¯èƒ½ä¼šè¢«å…¨èŠ‚ç‚¹æ¬ºéª—ï¼Œè§£å†³åŠæ³•æ˜¯è¿æ¥å¤šä¸ªå…¨èŠ‚ç‚¹ï¼Œä¿è¯ä¸è¦å’Œè¯šå®èŠ‚ç‚¹æ–­å¼€é“¾æ¥äº†ï¼›å¦ä¸€ä¸ªæ˜¯å®¹æ˜“å—åˆ°æ‹’ç»æœåŠ¡æ”»å‡»ï¼Œè§£å†³åŠæ³•æ˜¯å¸ƒéš†è¿‡æ»¤å™¨</li><li>å‚è€ƒï¼š<a href="https://shuwoom.com/?p=857">å¸ƒéš†è¿‡æ»¤å™¨(Bloom Filter)ã€SPVå’Œæ¯”ç‰¹å¸ - shuwoomçš„åšå®¢</a></li></ul><h2 id="p2pç½‘ç»œ"><a class="markdownIt-Anchor" href="#p2pç½‘ç»œ"></a> P2Pç½‘ç»œ</h2><ul><li>å› ä¸ºå…±è¯†è§„åˆ™ä¸åŒ…æ‹¬ç½‘ç»œï¼Œæ‰€ä»¥æœ‰å¯é€‰çš„ç½‘ç»œå’Œåè®®ã€‚è¿™é‡Œç”¨Bitcoin Coreä½œä¸ºå…¨èŠ‚ç‚¹ä»£è¡¨ï¼ŒBitcoinJä½œä¸ºSPVå®¢æˆ·ç«¯ä»£è¡¨ã€‚</li></ul><h3 id="peer-discovery"><a class="markdownIt-Anchor" href="#peer-discovery"></a> Peer Discovery</h3><ul><li>é¦–å…ˆé€šè¿‡è¯¢é—®DNS seedsæ¥è·å–å¯¹ç­‰ç½‘ç»œå…¶ä»–æœ‰æ•ˆè¿è¡Œçš„èŠ‚ç‚¹IPï¼Œå’Œå¯¹ç­‰èŠ‚ç‚¹å»ºç«‹è¿æ¥åï¼Œå¯ä»¥è·å–å¾—åˆ°æ›´å¤šçš„ç½‘ç»œèŠ‚ç‚¹IPã€‚æ­¤å¤–ï¼Œåœ¨ç¨‹åºä¸­ä¼šæœ‰ä¸€äº›å›ºå®šçš„é™æ€IPå¯ä»¥å°è¯•è¿æ¥ï¼Œæˆ–è€…ä½¿ç”¨å‘½ä»¤è¡Œå·¥å…·å°è¯•ä¸æŒ‡å®šIPè¿æ¥ã€‚</li></ul><h3 id="connecting-to-peers"><a class="markdownIt-Anchor" href="#connecting-to-peers"></a> Connecting to Peers</h3><ul><li>èŠ‚ç‚¹é€šè¿‡å‘é€versionæ¶ˆæ¯è¿æ¥åˆ°ä¸€ä¸ªå¯¹ç­‰èŠ‚ç‚¹ã€‚æ¶ˆæ¯version åŒ…å«äº†èŠ‚ç‚¹çš„ç‰ˆæœ¬ä¿¡æ¯ã€å—ä¿¡æ¯å’Œè·ç¦»è¿œç¨‹èŠ‚ç‚¹çš„æ—¶é—´ã€‚ä¸€æ—¦è¿™ä¸ªæ¶ˆæ¯è¢«å¯¹ç­‰èŠ‚ç‚¹æ”¶åˆ°ï¼Œå®ƒå¿…é¡»å›å¤ä¸€ä¸ªverackã€‚å¦‚æœå®ƒæ„¿æ„å»ºç«‹å¯¹ç­‰å…³ç³»ï¼Œå®ƒå°†å‘é€è‡ªå·±çš„versionæ¶ˆæ¯ã€‚</li><li>ä¸€æ—¦å»ºç«‹å¯¹ç­‰å…³ç³»ï¼ŒèŠ‚ç‚¹å¯ä»¥å‘è¿œç¨‹èŠ‚ç‚¹å‘é€getaddrå’Œaddræ¶ˆæ¯æ¥è·å¾—å…¶å®ƒçš„å¯¹ç­‰èŠ‚ç‚¹ä¿¡æ¯ã€‚ä¸ºäº†ç»´æŒä¸å¯¹ç­‰èŠ‚ç‚¹çš„è¿æ¥ï¼ŒèŠ‚ç‚¹é»˜è®¤æƒ…å†µä¸‹æ¯30åˆ†é’Ÿå†…ä¼šç»™å¯¹ç­‰èŠ‚ç‚¹è‡³å°‘å‘é€ä¸€æ¬¡ä¿¡æ¯ã€‚å¦‚æœè¶…è¿‡90åˆ†é’Ÿæ²¡æœ‰æ”¶åˆ°å›å¤ï¼ŒèŠ‚ç‚¹ä¼šè®¤ä¸ºè¿æ¥å·²ç»æ–­å¼€</li></ul><h3 id="initial-block-download"><a class="markdownIt-Anchor" href="#initial-block-download"></a> Initial Block Download</h3><ul><li>ä¸€ä¸ªå…¨èŠ‚ç‚¹åœ¨æ­£å¼å·¥ä½œæˆ–è€…æä¾›æœåŠ¡å‰ï¼Œéœ€è¦è¿›è¡Œåˆå§‹åŒ–ï¼ŒæŠŠé™¤äº†ç¡¬ç¼–ç ç”Ÿæˆçš„ç¬¬ä¸€ä¸ªåŒºå—å¤–çš„æ‰€æœ‰åŒºå—ä¸‹è½½ä¸‹æ¥ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±æ˜¯IBDã€‚</li><li>Block-First æ˜¯å…¶ä¸­ä¸€ç§ä¸‹è½½æ–¹å¼ï¼Œå‘ä¸€ä¸ªå¯¹ç­‰ç½‘ç»œèŠ‚ç‚¹è¿›è¡Œè¯¢é—®ï¼Œç›´æ¥ä¸‹è½½åŒºå—ï¼Œå…¶ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾<ul><li>ä¸‹è½½é€Ÿåº¦çš„é™åˆ¶ï¼šåªä»ä¸€ä¸ªåŒæ­¥èŠ‚ç‚¹ä¸‹è½½ï¼Œå—é™è¯¥èŠ‚ç‚¹çš„å¸¦å®½</li><li>é‡æ–°ä¸‹è½½ï¼šåŒæ­¥èŠ‚ç‚¹å¯èƒ½ä¼šå‘é€ä¸æ˜¯æœ€é•¿é“¾ä¸Šçš„åŒºå—ï¼Œå°±ä¼šå¯¼è‡´å¿«ç»“æŸæ—¶æ‰å‘ç°éœ€è¦é‡æ–°ä¸‹è½½</li><li>ç£ç›˜ç©ºé—´å ç”¨ï¼šå’Œâ€œé‡æ–°ä¸‹è½½â€ç›¸å…³ï¼Œä¸‹è½½æ—¶å¯èƒ½ä¼šå°†æ— ç”¨çš„åŒºå—ä¿å­˜åˆ°ç£ç›˜ï¼Œå ç”¨ç©ºé—´</li><li>å¤§é‡å†…å­˜ä½¿ç”¨ï¼šå› ä¸ºåŒæ­¥èŠ‚ç‚¹å‘é€è¿‡æ¥çš„åŒºå—å¯èƒ½æ˜¯æ— åºçš„ï¼Œæ‰€ä»¥éœ€è¦å…ˆä¿å­˜åˆ°å†…å­˜ä¸­ï¼Œç›´åˆ°æ¥æ”¶åˆ°çˆ¶å—æ‰èƒ½è¿›è¡ŒéªŒè¯</li></ul></li><li>Header-First çš„ä¸‹è½½æ–¹å¼ï¼Œè§£å†³äº†Block-Firstä¸­å››ä¸ªç¼ºé™·ï¼Œå®ƒçš„å·¥ä½œæ–¹å¼æ˜¯ï¼šå…ˆå‘åŒæ­¥èŠ‚ç‚¹ä¸‹è½½block headersï¼Œå½“éƒ¨åˆ†åœ°éªŒè¯headersæœ‰æ•ˆæ€§åï¼ŒIBDèŠ‚ç‚¹å°±å¯ä»¥å¹¶è¡Œåœ°åšä¸¤å¤©äº‹â€”â€”ä¸€ä¸ªæ˜¯ç»§ç»­å‘åŒæ­¥èŠ‚ç‚¹å‘é€è¯·æ±‚ä¸‹è½½headersï¼Œå¦ä¸€ä¸ªæ˜¯å‘å…¶ä»–å¯¹ç­‰èŠ‚ç‚¹å‘é€è¯·æ±‚ä¸‹è½½block</li></ul><h2 id="mining-æŒ–çŸ¿"><a class="markdownIt-Anchor" href="#mining-æŒ–çŸ¿"></a> Mining æŒ–çŸ¿</h2><ul><li>ç°åœ¨æœ‰ä¸¤ç§æŒ–çŸ¿æ–¹å¼ï¼šå•ç‹¬æŒ–çŸ¿å’ŒçŸ¿æ± æŒ–çŸ¿<ul><li>å•ç‹¬æŒ–çŸ¿ï¼šbitcoindæ¥è·å–P2Pç½‘ç»œä¸Šçš„äº¤æ˜“ï¼ŒæŒ–çŸ¿è½¯ä»¶é€šè¿‡RPCæ–¹æ³•æ¥è·å–åˆ—è¡¨ï¼Œå¹¶æ„é€ ä¸€ä¸ªBlockæ¨¡æ¿ï¼Œç„¶åå°†å¯¹åº”çš„block headerå‘é€ç»™ASICè¿›è¡Œè¿ç®—ã€‚æŒ–çŸ¿è½¯ä»¶ä¼šå°†ä¸€ä¸ªnonceå€¼å¡«å…¥å¸åŸºäº¤æ˜“çš„çš„å­—æ®µä¸­ï¼Œè·å¾—æ–°çš„Merkle rootçš„hashå€¼ï¼Œç„¶åå°†æ–°çš„Block headerå‘é€ä¸ªASICã€‚å¦‚æœASICè®¡ç®—ç”Ÿæˆçš„block header hashå°äºé¢„å®šçš„é˜ˆå€¼ï¼Œåˆ™è¡¨æ˜æ·»åŠ çš„nonceå€¼ç¬¦åˆæ¡ä»¶ï¼Œå°†block headerè¿”å›ç»™æŒ–çŸ¿è½¯ä»¶ï¼ŒæŒ–çŸ¿è½¯ä»¶æ ¹æ®è¿”å›çš„block headeræ›´æ–°blockï¼Œæœ€åå°†å®Œæ•´çš„block è¿”å›ç»™bitcoindï¼Œbitcoindå†å‘ç½‘ç»œä¼ æ’­åŒºå—</li></ul></li></ul><p><img src="https://cdn.jsdelivr.net/gh/2017zhangyuxuan/picture_backend@master//img/202110111350617.(null)" alt="" /></p><ul><li>çŸ¿æ± æŒ–çŸ¿ï¼šå·¥ä½œæµè·Ÿå•ç‹¬æŒ–çŸ¿ç±»ä¼¼ã€‚ä¸åŒçš„æ˜¯ï¼ŒçŸ¿æ± è®¾å®šçš„é˜ˆå€¼è¦æ¯”ç½‘ç»œä¸Šè®¾å®šçš„é˜ˆå€¼å°å¾ˆå¤šï¼ˆé™ä½äº†éš¾åº¦ï¼‰ï¼Œå› æ­¤å„ä¸ªçŸ¿å·¥é€šè¿‡æŒ–çŸ¿è½¯ä»¶è¿”å›ç»™çŸ¿æ± çš„block hearderä¸­ï¼Œæœ‰å¾ˆå¤šæ˜¯æ»¡è¶³çŸ¿æ± çš„é˜ˆå€¼ä½†ä¸æ»¡è¶³ç½‘ç»œçš„é˜ˆå€¼ï¼Œè¿™äº›è¿”å›çš„block headerç›¸å½“äºæ˜¯ä»½é¢ï¼Œè¯æ˜äº†çŸ¿å·¥çš„å·¥ä½œé‡ï¼›åŒæ—¶æ€»ä¼šæœ‰å‡ ç‡äº§ç”ŸåŒæ—¶æ»¡è¶³ä¸¤ä¸ªé˜ˆå€¼çš„block headerï¼ŒçŸ¿æ± å°†æ»¡è¶³ç½‘ç»œé˜ˆå€¼æ¡ä»¶çš„blockå‘é€ç»™bitcoindï¼Œä»è€Œè·å¾—å¥–åŠ±ã€‚ç„¶åçŸ¿æ± æ ¹æ®çŸ¿å·¥è´¡çŒ®çš„ä»½é¢ï¼Œå¹³å‡åˆ†å‘å¥–åŠ±ã€‚ä¸¾ä¸ªå…·ä½“ä¾‹å­å°±æ˜¯ï¼ŒçŸ¿å·¥ä»¬æ€»å…±è¿”å›äº†100ä¸ªæ»¡è¶³çŸ¿æ± æ¡ä»¶çš„block headerï¼ˆç›¸å½“äºæœ‰100ä»½é¢ï¼‰ï¼Œåªæœ‰1ä¸ªæ»¡è¶³ç½‘ç»œé˜ˆå€¼ï¼Œé‚£ä¹ˆæ¯ä»½é¢çš„å¥–åŠ±å°±æ˜¯æ€»å¥–åŠ±çš„1/100ï¼ŒçŸ¿å·¥æ ¹æ®è‡ªå·±çš„ä»½é¢è·å¾—ç›¸åº”å¥–åŠ±ã€‚</li></ul><p><img src="https://cdn.jsdelivr.net/gh/2017zhangyuxuan/picture_backend@master//img/202110111350905.(null)" alt="" /></p><ul><li>è¿˜ä»‹ç»äº†ä¸‰ç§æŒ–çŸ¿è½¯ä»¶è·å–Blockçš„RPC<ul><li>getwork RPCï¼šå½“å‰Bitcoin Coreå·²ç»åºŸå¼ƒï¼Œè¿™ä¸ªæ–¹æ³•ç›´æ¥ä¸ºçŸ¿å·¥æ„é€ å¥½block headerï¼Œå› æ­¤çŸ¿å·¥å¯èƒ½éœ€è¦è°ƒç”¨æˆç™¾ä¸Šåƒæ¬¡RPC</li><li>getblocktemplate RPCï¼šè·å–ä»¥ä¸‹å†…å®¹ï¼›ç„¶åæŒ–çŸ¿è½¯ä»¶å°±èƒ½è‡ªå·±æ”¹å˜nonceå€¼ï¼Œè‡ªå·±ç”Ÿæˆblock header<ul><li>æ„é€ å¸åŸºäº¤æ˜“çš„ä¿¡æ¯</li><li>bitcoindå‘é€ç»™çŸ¿æ± çš„äº¤æ˜“åˆ—è¡¨å’Œå…·ä½“äº¤æ˜“ä¿¡æ¯ï¼Œè¿™ä½¿å¾—æŒ–çŸ¿è½¯ä»¶å¯ä»¥æŸ¥çœ‹äº¤æ˜“ï¼Œå¹¶æœ‰é€‰æ‹©æ€§åœ°æ·»åŠ æˆ–åˆ é™¤äº¤æ˜“</li><li>æ„é€ block headerçš„å…¶ä»–ä¿¡æ¯</li><li>çŸ¿æ± æä¾›çš„éš¾åº¦å€¼æˆ–è€…ç½‘ç»œè®¾å®šçš„éš¾åº¦å€¼</li></ul></li><li>Stratumï¼šè·Ÿgetblocktemplateå¾ˆç±»ä¼¼ï¼Œä½†æ˜¯ä¸åŒçš„æ˜¯ï¼ŒæŒ–çŸ¿è½¯ä»¶è·å–åˆ°çš„æ˜¯é‡æ–°æ„é€ Merkleæ ‘çš„å¿…è¦ä¿¡æ¯ï¼Œè€Œä¸æ˜¯å…·ä½“çš„äº¤æ˜“åˆ—è¡¨å’Œäº¤æ˜“å†…å®¹ã€‚å› æ­¤ï¼ŒæŒ–çŸ¿è½¯ä»¶ä¸èƒ½æ·»åŠ æˆ–è€…åˆ é™¤äº¤æ˜“ï¼Œä¸è¿‡æ­¤æ—¶æŒ–çŸ¿è½¯ä»¶å’ŒçŸ¿æ± å»ºç«‹åŒå‘çš„TCPè¿æ¥ï¼›åœ¨getblocktemplate é‡Œï¼ŒæŒ–çŸ¿è½¯ä»¶ç”¨çš„æ˜¯HTTP longpollé•¿è½®è¯¢ï¼Œæ¥è·å–æœ€è¿‘çš„æ›´æ–°ã€‚</li></ul></li></ul><h1 id="å­˜åœ¨ç–‘é—®"><a class="markdownIt-Anchor" href="#å­˜åœ¨ç–‘é—®"></a> å­˜åœ¨ç–‘é—®</h1><p>é˜…è¯»å®Œæ‰€æœ‰å†…å®¹åï¼Œè¿˜æ˜¯æœ‰å¾ˆå¤šé—®é¢˜å’Œç»†èŠ‚æ²¡æœ‰å¼„æ˜ç™½ã€‚</p><ol><li>åŸæ–‡ï¼šSince it is impractical to have separate transactions with identical txids, this does not impose a burden on honest software, but must be checked if the invalid status of a block is to be cached; otherwise, a valid block with the duplicates eliminated could have the same merkle root and block hash, but be rejected by the cached invalid outcome, resulting in security bugs such as <a href="https://en.bitcoin.it/wiki/CVEs#CVE-2012-2459">CVE-2012-2459</a>.</li></ol><blockquote><p>å¯¹äºä¸Šè¿°å†…å®¹ä¸æ˜¯å¾ˆèƒ½ç†è§£ï¼Œä¸åŒçš„transactionsæ€ä¹ˆä¼šæœ‰ç›¸åŒçš„TXIDï¼Œå¯èƒ½æ˜¯ç”±äºhashå†²çªå¯¼è‡´çš„ï¼Ÿè™½ç„¶æ¦‚ç‡å¾ˆå°ã€‚ç„¶åâ€œå¯¹äºç¼“å­˜ä¸€ä¸ªæ— æ•ˆåŒºå—çš„çŠ¶æ€â€ï¼Œè¿™è¯¥å¦‚ä½•ç†è§£ï¼Ÿä»€ä¹ˆæ—¶å€™ç”¨åˆ°äº†ç¼“å­˜ï¼Œç¼“å­˜ä»€ä¹ˆå†…å®¹ï¼ˆåŒºå—çš„çŠ¶æ€ï¼Ÿï¼‰ï¼Œä»¥åŠå¦‚ä½•åˆ¤æ–­åŒºå—æ˜¯æœ‰æ•ˆè¿˜æ˜¯æ— æ•ˆï¼Ÿå¦‚æœå› ä¸ºæœ‰TXIDå†²çªåˆ¤å®šåŒºå—æ— æ•ˆçš„è¯ï¼Œå¯ä»¥å»é‡TXIDï¼Œè¾¾åˆ°æœ‰æ•ˆï¼Ÿ</p></blockquote><ol><li>æ ‡å‡†äº¤æ˜“ä¸­ï¼ŒNull Dataçš„çš„pubkey scriptsç±»å‹ç”¨æ¥å¹²ä»€ä¹ˆçš„ï¼Ÿ</li><li>P2PK è¢« P2PKHæ‰€å–ä»£äº†ï¼Œæ”¯ä»˜åˆ°å…¬é’¥å“ˆå¸Œçš„åœ°å€ï¼Œå¯ä»¥ä½¿å¾—å…¬é’¥ç›´åˆ°UTXOè¢«ä½¿ç”¨æ—¶æ‰ä¼šå‘å¸ƒï¼Œå»¶è¿Ÿå…¬é’¥å‘å¸ƒçš„åŸå› æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæ˜¯ä¸ºäº†é¿å…æ”»å‡»è€…åˆ©ç”¨å…¬é’¥è¿›è¡ŒæŸäº›æ”»å‡»å—ï¼Ÿ</li><li>å¤šç§Signature hash typesçš„ç”¨é€”æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿä¸ºä»€ä¹ˆè¦æœ‰é€‰æ‹©æ€§çš„è¿›è¡Œç­¾åï¼Ÿ</li><li>äº¤æ˜“è¢«æ‰“åŒ…åˆ°åŒºå—ï¼Œäº¤æ˜“çš„è´¹ç”¨æ˜¯æ ¹æ®äº¤æ˜“çš„ç­¾åå­—èŠ‚é•¿åº¦è®¡ç®—å‡ºæ¥ï¼Œé‚£ä¹ˆè¿™ç¬”è´¹æ˜¯ç”±ä¹°å®¶ï¼ˆæ”¯ä»˜è€…ï¼‰æ¥ä»˜å—ï¼Ÿåœ¨å¯¹åº”çš„ä¸€ä¸ªäº¤æ˜“ä¸­ï¼Œæ˜¯ä¼šå¢åŠ ä¸€ä¸ªoutputæ¥æŒ‡å‘çŸ¿å·¥å—ï¼Ÿ</li><li>å¯¹äºHDé’±åŒ…ï¼Œå³åˆ†å±‚ç¡®å®šæ€§é’±åŒ…ä¸­çš„å·¥ä½œåŸç†è¿˜æ˜¯ä¸å¤ªç†è§£ï¼Œç‰¹åˆ«æ˜¯extened keysåˆ°harderned keysçš„è½¬å˜ï¼Œä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼Ÿè¿™ä¹ˆåšå¦‚ä½•è§£å†³é—®é¢˜çš„ï¼Ÿ</li><li>SPVå®¢æˆ·ç«¯å…·ä½“æ˜¯æ€ä¹ˆä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨çš„ï¼Ÿ</li><li>çŸ¿å·¥å‘å¸ƒåŒºå—æ—¶ï¼Œå…·ä½“æ˜¯æ€ä¹ˆç»™çŸ¿å·¥å‘æ”¾å¥–åŠ±çš„ï¼Ÿæ˜¯åœ¨åˆ›å»ºåŒºå—çš„æ—¶å€™ï¼Œç›´æ¥ç”Ÿæˆä¸€ä¸ªå¸åŸºäº¤æ˜“ï¼ˆæŠŠé’±è½¬è´¦ç»™è¯¥çŸ¿å·¥ï¼‰ï¼Œç„¶åçŸ¿å·¥æ‰“åŒ…æ‰€æœ‰äº¤æ˜“åï¼Œå¼€å§‹æ‰¾æ»¡è¶³æ¡ä»¶çš„nonceï¼Œæ‰¾åˆ°åå¹¿æ’­åŒºå—ï¼Œè¿™æ ·å¦‚æœåŒºå—å¾—åˆ°å…¶ä»–èŠ‚ç‚¹è®¤å¯ä¸Šé“¾äº†ï¼Œé‚£ä¹ˆçŸ¿å·¥å°±åˆ‡å®å¾—åˆ°äº†æ”¶ç›Šã€‚ï¼ˆè¿™æ ·çš„è¯ï¼Œæ¯ä¸ªèŠ‚ç‚¹åœ¨ç”ŸæˆåŒºå—ï¼‰</li></ol><h1 id="æ‰€æ€æ‰€æ„Ÿ"><a class="markdownIt-Anchor" href="#æ‰€æ€æ‰€æ„Ÿ"></a> æ‰€æ€æ‰€æ„Ÿ</h1><p>é˜…è¯»å®Œè¿™ç¯‡Guideæ¦‚è§ˆï¼Œè®©æˆ‘è®¤è¯†äº†è§£æ¯”ç‰¹å¸ä¸­è®¸å¤šæŠ€æœ¯å’Œå®ç°ç»†èŠ‚ï¼Œä½†æ˜¯é€šè¯»å®Œä¸€éåï¼Œå‘ç°è‡ªå·±å¥½åƒæ‡‚äº†ï¼Œåˆå¥½åƒæ²¡æ‡‚ï¼Œæˆ–è€…è¯´ä»æ•´ä½“ä¸Šå¯¹æ¯”ç‰¹å¸çš„æ•´ä½“æ¶æ„æœ‰äº†ä¸€å®šçš„è®¤è¯†ï¼Œå…·ä½“æœ‰å“ªäº›éƒ¨åˆ†ç»„æˆï¼Œæ¶‰åŠå“ªäº›å…³é”®æŠ€æœ¯ï¼Œä½†æ˜¯å¯¹ä¸ªå„ä¸ªæ¨¡å—è¿›ä¸€æ­¥çš„ç»†èŠ‚è¿˜æ˜¯ä¼¼æ‡‚éæ‡‚ï¼Œå¹¶ä¸”è¿˜æ˜¯éš¾ä»¥ä¸²è”èµ·æ¥ï¼Œå„ä¸ªéƒ¨åˆ†æœ‰æ˜æ˜¾çš„è”ç³»ï¼ˆæ¯”å¦‚äº¤æ˜“ä¸é’±åŒ…ä¸æ”¯ä»˜å¤„ç†ï¼‰ï¼Œä½†æ˜¯æ„Ÿè§‰è‡ªå·±è¿˜æ˜¯å¾ˆéš¾å°†è¿™ä¸‰è€…çš„å…³ç³»è¡¨ç¤ºæ¸…æ¥šï¼Œæˆ–è€…è¯´ï¼Œå½“æŠŠæ•´ä¸ªæ¯”ç‰¹å¸çœ‹åšä¸€ä¸ªæ•´ä½“æ—¶ï¼Œå„ä¸ªéƒ¨åˆ†æ˜¯æ€ä¹ˆæ ·æœ‰æœºç‹¬ç«‹åˆç›¸äº’é…åˆçš„ã€‚</p><p>è¿˜æœ‰ä¸€ä¸ªç®€å•çš„æ€è€ƒï¼Œå°±æ˜¯å¯¹äºåˆçº¦éƒ¨åˆ†ä¸­å¤šé‡ç­¾åçš„ä½¿ç”¨ï¼Œä¾‹å¦‚æ‰˜ç®¡å’Œä»²è£ï¼ŒAå’ŒBä¹‹é—´çš„äº¤æ˜“è¿˜æ˜¯è¦ä¾èµ–äºä»²è£ç¬¬ä¸‰æ–¹Cï¼Œè¿™æ˜¯å¦ä¸æ¯”ç‰¹å¸å»ä¸­å¿ƒåŒ–çš„æ€æƒ³ç›¸çŸ›ç›¾äº†å‘¢ï¼Ÿåæ¥è¿›ä¸€æ­¥æ€è€ƒå’ŒæŸ¥é˜…èµ„æ–™ï¼Œä»å¦ä¸€ä¸ªè§†è§’å»çœ‹ï¼Œå»ä¸­å¿ƒåŒ–ï¼Œä¸æ˜¯ä¸è¦ä¸­å¿ƒï¼Œè€Œæ˜¯ç”±èŠ‚ç‚¹æ¥è‡ªç”±é€‰æ‹©ä¸­å¿ƒã€è‡ªç”±å†³å®šä¸­å¿ƒã€‚ç®€å•åœ°è¯´ï¼Œä¸­å¿ƒåŒ–çš„æ„æ€ï¼Œæ˜¯ä¸­å¿ƒå†³å®šèŠ‚ç‚¹ã€‚èŠ‚ç‚¹å¿…é¡»ä¾èµ–ä¸­å¿ƒï¼ŒèŠ‚ç‚¹ç¦»å¼€äº†ä¸­å¿ƒå°±æ— æ³•ç”Ÿå­˜ï¼ˆç±»ä¼¼äºæ²¡äº†æ”¯ä»˜å®å°±ä¸èƒ½ç”¨æ·˜å®ï¼Ÿï¼‰ã€‚è€Œåœ¨å»ä¸­å¿ƒåŒ–ç³»ç»Ÿä¸­ï¼Œä»»ä½•äººéƒ½æ˜¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä»»ä½•äººä¹Ÿéƒ½å¯ä»¥æˆä¸ºä¸€ä¸ªä¸­å¿ƒã€‚ä»»ä½•ä¸­å¿ƒéƒ½ä¸æ˜¯æ°¸ä¹…çš„ï¼Œè€Œæ˜¯é˜¶æ®µæ€§çš„ï¼Œä»»ä½•ä¸­å¿ƒå¯¹èŠ‚ç‚¹éƒ½ä¸å…·æœ‰å¼ºåˆ¶æ€§ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºçŸ¥è¯†</category>
      
      <category>æ¯”ç‰¹å¸</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Bitcoin</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ã€99%ç¯å¢ƒæ­å»ºç³»åˆ—ã€‘äº‘è®¡ç®—ç®¡ç†å¹³å°Devstackå®‰è£…</title>
    <link href="/2021/10/08/2021-10/2021-10-08%20%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E7%B3%BB%E5%88%97%20-devstack%E5%AE%89%E8%A3%85/"/>
    <url>/2021/10/08/2021-10/2021-10-08%20%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E7%B3%BB%E5%88%97%20-devstack%E5%AE%89%E8%A3%85/</url>
    
    <content type="html"><![CDATA[<h1 id="å¼•è¨€"><a class="markdownIt-Anchor" href="#å¼•è¨€"></a> å¼•è¨€</h1><p class='note note-success'>99%æ¦‚ç‡å®Œæˆç¯å¢ƒæ­å»ºï¼Œè®©å¤©ä¸‹æ²¡æœ‰æ­å»ºä¸äº†çš„ç¯å¢ƒï¼ </p><p>openstackä½œä¸ºå¼€æºçš„äº‘è®¡ç®—ç®¡ç†å¹³å°ï¼Œå¯ä»¥è®©æˆ‘ä»¬ä½“éªŒäº‘è®¡ç®—æŠ€æœ¯çš„å„ç§ç»„ä»¶å’ŒåŠŸèƒ½ï¼Œç„¶è€Œå®˜ç½‘ç¹ççš„é…ç½®æ•™ç¨‹ä»¤äººæœ›è€Œå´æ­¥ã€‚å¥½åœ¨devstackæä¾›äº†ä¸€ç«™å¼å®‰è£…æœåŠ¡ï¼Œ<s>åªéœ€ç®€å•æ‰§è¡Œå‡ ä¸ªå‘½ä»¤å³å¯å®Œæˆå®‰è£…</s>ï¼ˆæ ¹æœ¬ä¸æ˜¯è¿™æ ·å¥½å—ï¼ï¼‰ã€‚ä¸è¿‡ç»è¿‡æˆ‘çš„ç™¾èˆ¬æµ‹è¯•ï¼Œåªè¦å®‰è£…æ•™ç¨‹é‡Œçš„æ–¹å¼æ‰§è¡Œå‘½ä»¤ï¼ŒæˆåŠŸæ¦‚ç‡99%ï¼</p><p><img src="https://cdn.jsdelivr.net/gh/2017zhangyuxuan/picture_backend@master//img/202110082112035.png" alt="" /></p><h1 id="å®‰è£…ç¯å¢ƒ"><a class="markdownIt-Anchor" href="#å®‰è£…ç¯å¢ƒ"></a> å®‰è£…ç¯å¢ƒ</h1><p>è¿™é‡Œè¯´ä¸€ä¸‹æˆ‘ä¸ªäººçš„å®‰è£…ç¯å¢ƒ</p><ul><li>PCæ“ä½œç³»ç»Ÿï¼šwin10</li><li>VMware Workstationç‰ˆæœ¬ï¼š16.x Pro</li><li>Ubuntuç‰ˆæœ¬ï¼š18.04</li></ul><h1 id="å®‰è£…æ­¥éª¤"><a class="markdownIt-Anchor" href="#å®‰è£…æ­¥éª¤"></a> å®‰è£…æ­¥éª¤</h1><ol start="0"><li><strong>ç®€è¦è¯´æ˜</strong></li></ol><p class='note note-primary'>ubuntuæ“ä½œç³»ç»Ÿåœ¨è™šæ‹Ÿæœºçš„å®‰è£…è¿™é‡Œä¸å†æ¼”ç¤ºï¼Œå‡è®¾ä½ å·²ç»å®Œæˆäº†ubuntu18.04çš„å®‰è£…ï¼Œç„¶åç»§ç»­ï¼›<br>åœ¨~/ ç›®å½•ä¸‹ï¼Œä¾æ¬¡æ‰§è¡Œå‘½ä»¤å³å¯ï¼Œæ²¡æœ‰ç‰¹æ®Šè¯´æ˜ï¼Œä¸ç”¨æ‰§è¡Œåˆ«çš„å¤šä½™å‘½ä»¤</p><ol><li><strong>è®¾ç½®é™æ€IPï¼ˆå¯é€‰ï¼‰</strong></li></ol><blockquote><p>è¯´æ˜ï¼šè¿™ä¸€æ­¥æ˜¯å¯é€‰çš„ï¼Œä¹‹æ‰€ä»¥è®¾ç½®æˆé™æ€IPï¼Œæ˜¯ä¸ºäº†æ–¹ä¾¿åé¢çš„é…ç½®ï¼Œä»¥åŠæ’é™¤IPå˜åŠ¨çš„åŸå› å¯¼è‡´çš„ç§ç§æ„å¤–ï¼›ä¸è¿‡ä¸è¿›è¡Œé…ç½®çš„è¯ï¼Œåº”è¯¥ä¹Ÿæ˜¯okçš„ï¼Œåªè¦ä¿è¯æ•´ä¸ªå®‰è£…ä»¥åŠä½¿ç”¨è¿‡ç¨‹IPä¸ä¼šæ”¹å˜</p><p>å‚è€ƒç½‘ç«™ï¼š<a href="https://www.cnblogs.com/yaohong/p/11593989.html">ubuntué…ç½®é™æ€ip</a>       <a href="https://blog.csdn.net/zh2508/article/details/85250360">VMwareé…ç½®é™æ€ip</a></p></blockquote><p>é¦–å…ˆç»™æœºå™¨è®¾ç½®é™æ€ipï¼Œä¿®æ”¹<code>/etc/netplan</code>ç›®å½•ä¸‹å¯¹åº”çš„æ–‡ä»¶ï¼ŒæŒ‰å¦‚ä¸‹æ–‡ä»¶è¿›è¡Œé…ç½®ã€‚</p><p class='note note-info'>  ä¸‰ä¸ªæ³¨æ„ç‚¹ï¼š<br>  1. æ³¨æ„é…ç½®é‡Œçš„"ens32" æ ¹æ®è‡ªå·±çš„æœºå™¨è¿›è¡Œæ”¹åŠ¨ï¼Œå¯èƒ½æ˜¯"ens33"ï¼Œå¯ä»¥é€šè¿‡å‘½ä»¤ ip addr æ¥è¿›è¡ŒæŸ¥çœ‹ <br>  2. è¿™é‡Œå¤åˆ¶çš„è¯ï¼Œæ³¨æ„å¤åˆ¶åçš„ç»“æœæ˜¯å¦ä¸€è‡´ï¼Œå¯èƒ½éœ€è¦è‡ªå·±æ‰‹åŠ¨è¾“å…¥ä¸€ä¸‹ï¼Œè¿™æ ·çš„è¯è¦ä¸¥æ ¼æ³¨æ„æ ¼å¼ï¼Œå†’å·åé¢éœ€è¦ä¸€ä¸ªç©ºæ ¼ï¼Œæ¢è¡Œç¼©è¿›æ˜¯4ä¸ªç©ºæ ¼<br>  3. è®¾ç½®çš„ipå’Œç½‘å…³è¦åœ¨åŒä¸€ä¸ªç½‘æ®µä¸Šï¼Œè®°ä½è¿™é‡Œå¡«å…¥çš„ipï¼Œéœ€è¦ç”¨åœ¨ä¸‹é¢çš„é…ç½®ä¸­</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">version:</span> <span class="hljs-number">2</span><br><span class="hljs-attr">renderer:</span> <span class="hljs-string">NetworkManager</span><br><span class="hljs-attr">network:</span><br><span class="hljs-string">â€‹</span>    <span class="hljs-attr">ethernets:</span><br><span class="hljs-string">â€‹</span>        <span class="hljs-attr">ens32:</span><br><span class="hljs-string">â€‹</span>            <span class="hljs-attr">dhcp4:</span> <span class="hljs-literal">no</span><br><span class="hljs-string">â€‹</span>            <span class="hljs-attr">addresses:</span> [<span class="hljs-number">192.168</span><span class="hljs-number">.17</span><span class="hljs-number">.10</span><span class="hljs-string">/24</span>]<br><span class="hljs-string">â€‹</span>            <span class="hljs-attr">optional:</span> <span class="hljs-literal">true</span><br><span class="hljs-string">â€‹</span>            <span class="hljs-attr">gateway4:</span> <span class="hljs-number">192.168</span><span class="hljs-number">.17</span><span class="hljs-number">.2</span><br><span class="hljs-string">â€‹</span>            <span class="hljs-attr">nameservers:</span><br><span class="hljs-string">â€‹</span>                    <span class="hljs-attr">addresses:</span> [<span class="hljs-number">192.168</span><span class="hljs-number">.17</span><span class="hljs-number">.1</span>,<span class="hljs-number">192.168</span><span class="hljs-number">.17</span><span class="hljs-number">.2</span>] <span class="hljs-comment"># è¿™é‡ŒDNSçš„ä¿®æ”¹ï¼Œæ˜¯å› ä¸ºæˆ‘é…ç½®äº†ä¸Šé¢VMwareé…ç½®é™æ€ip</span><br></code></pre></td></tr></table></figure><p>ç„¶åæ‰§è¡Œ<code>sudo netplan apply</code>ï¼Œè®©é…ç½®ç”Ÿæ•ˆï¼Œå†é€šè¿‡<code>ip addr</code>æŸ¥çœ‹æ˜¯å¦ç”Ÿæ•ˆï¼Œå·²ç»<code>ping</code>å‘½ä»¤æŸ¥çœ‹ç½‘ç»œæ˜¯å¦è¿é€š</p><ol start="2"><li><strong>åˆ‡æ¢aptæº</strong></li></ol><p>åˆ‡æ¢aptæºçš„ç›®çš„æ˜¯ä¸ºäº†åŠ å¿«ä¸‹è½½å®‰è£…çš„é€Ÿåº¦</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo apt-get install vim #å…ˆå®‰è£…ä¸‹vim<br>sudo mv /etc/apt/sources.list /etc/apt/sources.list.bak<br>sudo vim /etc/apt/sources.list # å¦‚æœvimè¿˜æ²¡æœ‰å®‰è£…ï¼Œæ”¹ç”¨ vi å¤åˆ¶ä¸‹å°±è¡Œ<br></code></pre></td></tr></table></figure><p>è¿™é‡Œé…ç½®ç”¨çš„æ˜¯é˜¿é‡Œäº‘çš„é•œåƒï¼Œå¦‚æœä¹‹åå› ä¸ºç½‘ç»œçš„é—®é¢˜å¯ä»¥å°è¯•æ¢ä¸‹åˆ«çš„æºï¼Œä¸è¿‡æˆ‘æµ‹è¯•ä½¿ç”¨çš„éƒ½æ˜¯é˜¿é‡Œäº‘</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> æ³¨æ„ubuntuç‰ˆæœ¬å·å¯¹åº”ä¸åŒçš„ä»£å·ï¼Œè¿™é‡Œç”¨çš„æ˜¯18.04ï¼Œå¯¹åº”bionic</span><br>deb http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse<br>deb-src http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse<br>deb http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse<br>deb-src http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse<br>deb http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse<br>deb-src http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse<br>deb http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse<br>deb-src http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse<br>deb http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse<br></code></pre></td></tr></table></figure><ol start="3"><li><strong>æ›´æ¢pipæº</strong></li></ol><p>ä¹Ÿæ˜¯ä¸ºäº†åŠ å¿«ä¸‹è½½å®‰è£…ä¾èµ–çš„é€Ÿåº¦</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh">mkdir .pip<br>vim .pip/pip.conf<br></code></pre></td></tr></table></figure><p>é…ç½®å¦‚ä¸‹æ‰€ç¤ºï¼Œç”¨çš„æ˜¯è±†ç“£çš„é•œåƒ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">[global]<br>index-url = http://pypi.douban.com/simple/<br>trusted-host = pypi.douban.com<br></code></pre></td></tr></table></figure><ol start="4"><li><strong>æ›´æ–°å¹¶å®‰è£…åŒ…</strong></li></ol><p>ä¾æ¬¡æ‰§è¡Œä¸‹åˆ—å‘½ä»¤ï¼Œä¸»è¦æ˜¯æ›´æ–°å®‰è£…ç›¸å…³ä¾èµ–ï¼Œä¸‹è½½pipç®¡ç†ä¾èµ–å·¥å…·</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo apt-get update<br>sudo apt-get upgrade<br>sudo apt-get install git<br>sudo apt-get install python-pip<br>sudo pip install --upgrade pip<br>sudo pip install -U os-testr  # sudo pip install wcwidth å¯é€‰ï¼Œå¦‚æœè¿™ä¸€æ­¥å‡ºäº†wcwidthç›¸å…³çš„errorçš„è¯<br></code></pre></td></tr></table></figure><ol start="5"><li><strong>è®¾ç½®æ—¶åŒºåŒæ­¥</strong></li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo apt-get install ntpdate // å®‰è£…æ—¶é—´åŒæ­¥å·¥å…·<br>sudo ntpdate cn.pool.ntp.org // ä¸ç½‘ç»œæœåŠ¡å™¨åŒæ­¥æ—¶é—´<br>date // æŸ¥çœ‹æ—¶é—´æ˜¯å¦å·²ç»åŒæ­¥<br></code></pre></td></tr></table></figure><ol start="6"><li><strong>ä¸‹è½½devstack</strong></li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> git <span class="hljs-built_in">clone</span> https://github.com/openstack/devstack.git -b stable/queens</span> <br><span class="hljs-meta">#</span><span class="bash"> æ¨èä½¿ç”¨opendev.orgå®˜ç½‘çš„wallbyè¿™ä¸ªåˆ†æ”¯ï¼Œgithubä¸Šå¯¹åº”çš„queensè¿™ä¸ªåˆ†æ”¯å°è¯•è¿‡æœ‰é—®é¢˜è§£å†³ä¸äº†</span><br>git clone https://opendev.org/openstack/devstack.git -b stable/wallaby <br></code></pre></td></tr></table></figure><ol start="7"><li><strong>åˆ›å»ºstackç”¨æˆ·</strong></li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo devstack/tools/create-stack-user.sh<br></code></pre></td></tr></table></figure><ol start="8"><li><strong>ç§»åŠ¨å¹¶è®¾ç½®æ–‡ä»¶å¤¹æƒé™</strong></li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo mv devstack /opt/stack<br>sudo chown -R stack:stack /opt/stack<br>sudo chown stack:stack /opt/stack<br></code></pre></td></tr></table></figure><ol start="9"><li><strong>åˆ‡æ¢åˆ°stackç”¨æˆ·</strong></li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo su - stack<br></code></pre></td></tr></table></figure><ol start="10"><li><strong>åˆ›å»ºlocal.confé…ç½®æ–‡ä»¶</strong></li></ol><p>æ‰§è¡Œä¸‹åˆ—å‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">cd devstack<br>vim local.conf<br></code></pre></td></tr></table></figure><p>é…ç½®æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼Œ<strong>æ³¨æ„ä¿®æ”¹HOST_IP</strong>ï¼Œæ”¹æˆè‡ªå·±å½“å‰çš„IPï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs shell">[[local|localrc]]<br><span class="hljs-meta">#</span><span class="bash"> Define images to be automatically downloaded during the DevStack built process.</span><br>DOWNLOAD_DEFAULT_IMAGES=False<br>IMAGE_URLS=&quot;http://download.cirros-cloud.net/0.3.4/cirros-0.3.4-x86_64-disk.img&quot;<br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash"> use TryStack git mirror</span><br>GIT_BASE=http://git.trystack.cn<br>NOVNC_REPO=http://git.trystack.cn/kanaka/noVNC.git<br>SPICE_REPO=http://git.trystack.cn/git/spice/sice-html5.git<br><span class="hljs-meta"></span><br><span class="hljs-meta">#</span><span class="bash"> Credentials</span><br>[[local|localrc]]<br>ADMIN_PASSWORD=admin<br>DATABASE_PASSWORD=$ADMIN_PASSWORD<br>RABBIT_PASSWORD=$ADMIN_PASSWORD<br>SERVICE_PASSWORD=$ADMIN_PASSWORD<br><span class="hljs-meta">#</span><span class="bash"> Host IP - get your Server/VM IP address from ip addr <span class="hljs-built_in">command</span></span><br>HOST_IP=192.168.10.112 # ifconfigè·å–æœ¬æœºip<br>enable_service placement-api<br>enable_service placement-client<br></code></pre></td></tr></table></figure><ol start="11"><li><strong>æå‰ä¸‹è½½ä¾èµ–åŒ…</strong></li></ol><p>å› ä¸ºæ˜¯ä»githubä¸Šè¿æ¥ä¸‹è½½ä¾èµ–åŒ…ï¼Œå¯èƒ½ç”±äºç½‘ç»œä¸å¥½çš„é—®é¢˜ï¼Œç›´æ¥å®‰è£…çš„è¯å¯èƒ½ä¸­é€”ä¼šå› ä¸ºä¸‹è½½å¤±è´¥å¯¼è‡´å®‰è£…å¤±è´¥ï¼Œæ‰€ä»¥è¿™é‡Œæå‰ä¸‹è½½ï¼›å¦‚æœä¸‹è½½å¤±è´¥äº†ï¼Œå°±å¤šæ‰§è¡Œå‡ æ¬¡ï¼Œè‚¯å®šæ˜¯å¯ä»¥çš„</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">cd files/<br>wget -c https://github.com/coreos/etcd/releases/download/v3.1.10/etcd-v3.1.10-linux-amd64.tar.gz<br>wget -c https://github.com/coreos/etcd/releases/download/v3.1.7/etcd-v3.1.7-linux-amd64.tar.gz<br>wget -c https://github.com/etcd-io/etcd/releases/download/v3.3.12/etcd-v3.3.12-linux-amd64.tar.gz<br></code></pre></td></tr></table></figure><ol start="12"><li><strong>å®‰è£…simplejson</strong></li></ol><p>ç»è¿‡æµ‹è¯•ï¼Œä¹‹åå®‰è£…çš„è¿‡ç¨‹ä¸­å¯èƒ½ä¼šæŠ¥é”™simplejsonå®‰è£…å¤±è´¥ï¼Œæ‰€ä»¥è¿™é‡Œæå‰è¿›è¡Œå®‰è£…</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> sudo apt-get purge python3-simplejson æ¸…æ¥šä¹‹å‰çš„è½¯ä»¶åŒ…å’Œé…ç½®</span><br>sudo apt-get install python3-simplejson<br><span class="hljs-meta">#</span><span class="bash"> sudo apt-get install python-simplejson <span class="hljs-comment"># ä¸Šé¢çš„å‘½ä»¤ä¸è¡Œå¯ä»¥è¯•ä¸‹è¿™ä¸ª</span></span><br></code></pre></td></tr></table></figure><ol start="13"><li><strong>ä¿®æ”¹pipå®‰è£…é…ç½®</strong></li></ol><p class='note note-info'>  åœ¨æµ‹è¯•ä¸­ï¼Œpipç›¸å…³å®‰è£…å¯èƒ½ä¼šæŠ¥é”™ï¼Œè¿™é‡Œæå‰ä¿®æ”¹ä¸‹</p><p>ä¿®æ”¹å¯¹åº”çš„ç›®å½•æ–‡ä»¶ <code>devstack/inc/python file 198 line</code></p><p>æºä»£ç  <code>$cmd_pip $upgrade</code></p><p>ä¿®æ”¹æˆ <code>$cmd_pip $upgrade --ignore-installed</code></p><ol start="14"><li><strong>ä¿®æ”¹æƒé™</strong></li></ol><p>ç»è¿‡æµ‹è¯•ï¼Œä¹‹åå®‰è£…çš„è¿‡ç¨‹å¯èƒ½ä¼šå‡ºç°å¦‚ä¸‹æƒé™é”™è¯¯çš„é”™è¯¯ï¼Œæ‰€ä»¥è¿™é‡Œå†æ¬¡ä¿®æ”¹æƒé™</p><p><img src="https://cdn.jsdelivr.net/gh/2017zhangyuxuan/picture_backend@master//img/202110082049771.png" alt="pipä¸‹è½½æŠ¥é”™" /></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo chown -R stack:stack /opt/stack<br>sudo chown stack:stack /opt/stack<br>sudo chown -R stack:stack /opt/stack/devstack<br><span class="hljs-meta">#</span><span class="bash"> sudo chmod -R 777 /opt/stack  <span class="hljs-comment"># å…ˆç”¨å‰ä¸‰ä¸ªå‘½ä»¤åº”è¯¥è¶³å¤Ÿäº†ï¼Œä¸è¡Œå†è¯•è¯•è¿™ä¸ª</span></span><br></code></pre></td></tr></table></figure><ol start="15"><li><strong>å¼€å§‹å®‰è£…</strong></li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">cd ..<br>FORCE=yes ./stack.sh<br></code></pre></td></tr></table></figure><p>å¯èƒ½å› ä¸ºç½‘ç»œçš„åŸå› ï¼Œä¸­é€”ä¼šè¿æ¥ä¸ä¸Šgithubï¼Œå¯¼è‡´å®‰è£…å¤±è´¥ï¼Œè¿™æ ·å°±éœ€è¦é‡æ–°å°è¯•ï¼Œå…ˆæ¸…ç†ä¸‹ç¯å¢ƒå†å®‰è£…ï¼Œå¤šå°è¯•å‡ æ¬¡åº”è¯¥éƒ½ä¼šæˆåŠŸçš„ï¼Œä¸è¿‡ç¡®ä¿ç½‘ç»œè´¨é‡ä¹Ÿæ¯”è¾ƒé‡è¦ã€‚</p><p>å¦‚æœæ˜¯å› ä¸ºä¸‹è½½githubä¸ŠæŸä¸ªä¾èµ–åŒ…å¯¼è‡´çš„å¤±è´¥ï¼Œå¯ä»¥äº‹å…ˆå®‰è£…å¥½å¯¹åº”çš„ä¾èµ–ï¼Œä½¿ç”¨pipå‘½ä»¤ä¸‹è½½å³å¯</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">./unstack.sh<br>./clean.sh<br>FORCE=yes ./stack.sh<br></code></pre></td></tr></table></figure><ol start="16"><li><strong>è§è¯å¥‡è¿¹çš„æ—¶åˆ»</strong></li></ol><p>å½“ä½ çœ‹åˆ°å¦‚ä¸‹ä¿¡æ¯çš„æ—¶å€™ï¼Œæ­å–œä½ ï¼Œå®Œæˆå®‰è£…~</p><p><img src="https://cdn.jsdelivr.net/gh/2017zhangyuxuan/picture_backend@master//img/202110081954141.(null)" alt="æˆåŠŸæˆªå›¾" /></p><ol start="17"><li><strong>openstackç•Œé¢å±•ç¤º</strong></li></ol><p>å…·ä½“å¦‚ä½•ä½¿ç”¨openstackï¼Œè¿™é‡Œå°±ä¸å†è¯¦ç»†æ¼”ç¤ºï¼ŒopenstackåŠŸèƒ½å¤§å®¶å°±è‡ªè¡Œåœ°å¿«ä¹ç©è€å§~</p><p><img src="https://cdn.jsdelivr.net/gh/2017zhangyuxuan/picture_backend@master//img/202110081954271.(null)" alt="openstackç•Œé¢å±•ç¤º" /></p><h1 id="ç»“è¯­"><a class="markdownIt-Anchor" href="#ç»“è¯­"></a> ç»“è¯­</h1><p>åˆ°æ­¤ä¸ºæ­¢ï¼Œdevstackçš„å®‰è£…æ•™ç¨‹å°±åˆ°æ­¤ç»“æŸäº†ï¼Œå¦‚æœå®‰è£…ä¸Šé¢çš„æ­¥éª¤æˆåŠŸäº†ï¼Œæ­å–œä½ æˆ‘çš„æœ‹å‹ï¼</p><div align='center'><img src='https://cdn.jsdelivr.net/gh/2017zhangyuxuan/picture_backend@master//img/202110082121023.jpeg' width='30%' height='30%' > </div><p>å½“ç„¶å¦‚æœå‡ºç°äº†åˆ«çš„é—®é¢˜æ— æ³•è§£å†³çš„è¯ï¼Œå¯ä»¥è¯„è®ºç•™ä¸‹ä½ çš„é—®é¢˜ï¼Œæˆ–è€…ä¸æˆ‘è”ç³»ã€‚</p><hr /><p>å¦‚æœçœŸçš„å±±ç©·æ°´å°½äº†çš„è¯ï¼Œmicrostack å®˜ç½‘æ•™ç¨‹å€¼å¾—ä½ çš„æ‹¥æœ‰~</p><p><img src="https://cdn.jsdelivr.net/gh/2017zhangyuxuan/picture_backend@master//img/202110082124003.png" alt="" /></p><h1 id="å‚è€ƒ"><a class="markdownIt-Anchor" href="#å‚è€ƒ"></a> å‚è€ƒ</h1><p><a href="https://blog.csdn.net/hunjiancuo5340/article/details/85005995">https://blog.csdn.net/hunjiancuo5340/article/details/85005995</a></p><p><a href="https://blog.csdn.net/u013184378/article/details/84973629">https://blog.csdn.net/u013184378/article/details/84973629</a></p><p><a href="http://www.cnblogs.com/lianshuiwuyi/p/10955041.html">http://www.cnblogs.com/lianshuiwuyi/p/10955041.html</a></p>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºçŸ¥è¯†</category>
      
      <category>ç¯å¢ƒæ­å»ºç³»åˆ—</category>
      
    </categories>
    
    
    <tags>
      
      <tag>devstack</tag>
      
      <tag>ç¯å¢ƒæ­å»º</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ¸¸æˆç‹å°è¯æ”¶å½•</title>
    <link href="/2021/09/30/2021-09/2021-09-30%20%E6%B8%B8%E6%88%8F%E7%8E%8B%E5%8F%B0%E8%AF%8D%E6%94%B6%E5%BD%95/"/>
    <url>/2021/09/30/2021-09/2021-09-30%20%E6%B8%B8%E6%88%8F%E7%8E%8B%E5%8F%B0%E8%AF%8D%E6%94%B6%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<h1 id="æ¸¸æˆç‹"><a class="markdownIt-Anchor" href="#æ¸¸æˆç‹"></a> æ¸¸æˆç‹</h1><h2 id="å‡¯æ’’äº®"><a class="markdownIt-Anchor" href="#å‡¯æ’’äº®"></a> å‡¯æ’’äº®</h2><p>å› ä¸ºä¹‹å‰ä¹Ÿå…¥å‘è¿‡æ¸¸æˆç‹å†³æ–—é“¾æ¥å›½é™…æœï¼Œä¹Ÿå°±ç»„è¿‡æœˆå…‰ã€ä¸çŸ¥ç«ã€ç”µå­é¾™ä¸‰å¥—ç‰Œç»„ï¼Œç”µå­é¾™æ˜¯æˆ‘é€€å‘å‰æœ€åç»„çš„å¡ç»„ï¼Œå› æ­¤ä¹Ÿæœ‰ç€ç‰¹æ®Šçš„æ„Ÿæƒ…ã€‚ä¸ä¹…å‰å¬é—»ç”µå­é¾™è¢«å½»åº•å‰ŠåºŸäº†ï¼Œç›´æ¥å…¥åœŸä¸ºå®‰ï¼Œå¿ƒæƒ…ä¹Ÿæ˜¯äº”å‘³æ‚é™ˆï¼Œè¿˜èƒ½ç»§ç»­æŒ£æ‰å—ï¼Ÿ</p><div class="group-image-container"><div class="group-image-row"><div class="group-image-wrap"><img src="https://cdn.jsdelivr.net/gh/2017zhangyuxuan/picture_backend@master//img/202109301523396.jpg" alt="img" /></div><div class="group-image-wrap"><img src="https://cdn.jsdelivr.net/gh/2017zhangyuxuan/picture_backend@master//img/202109301531454.jpg" alt="img" /></div></div></div><p><a href="https://www.bilibili.com/video/BV12b4y1C7wC">ã€æ—¥è¯­æ¯æ—¥ä¸€å¥ã€‘å‡¯æ’’äº®ç»å…¸å°è¯æ•™å­¦</a></p><p>Ko re ga, i ki no ku ru ta me no, o re no a ga ki da !</p><img src="https://cdn.jsdelivr.net/gh/2017zhangyuxuan/picture_backend@master//img/202109301537861.png" width="50%" height="50%" align="middle" ><p>ä½ åˆæ˜¯å¦‚ä½•å‘¢ï¼Œä½ åˆæ˜¯ä¸ºäº†ä»€ä¹ˆè€Œå¥‹æˆ˜è‡³ä»Šï¼Ÿåªè¦ä¸ºäº†è¾¾åˆ°ç†æƒ³çš„ç»ˆç‚¹ï¼Œå°±ç®—æ˜¯å‘å¾®çš„æŒ£æ‰åˆå¦‚ä½•ï¼Œè¿™å°±æ˜¯æˆ‘æ‰€é€‰æ‹©çš„é“è·¯ï¼ï¼</p>]]></content>
    
    
    <categories>
      
      <category>å¨±ä¹</category>
      
      <category>åŠ¨æ¼«</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ¸¸æˆç‹</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hexo + Fluidä¸»é¢˜åšå®¢æ­å»º</title>
    <link href="/2021/09/28/2021-09/2021-09-28%20%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/"/>
    <url>/2021/09/28/2021-09/2021-09-28%20%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/</url>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a class="markdownIt-Anchor" href="#å‰è¨€"></a> å‰è¨€</h1><p>å…¶å®è¿™ä¸ªå‰è¨€åº”è¯¥å«åšâ€åè®°â€œäº†ï¼Œä¹‹å‰ä¸€ç›´è¿™ç¯‡æ–‡ç« ä¸€ç›´å¤„äºè‰ç¨¿çš„çŠ¶æ€ï¼Œå¿ƒæƒ³ç€ç­‰åšå®¢ç½‘ç«™æ­£å¼ä¸Šçº¿äº†å†æ”¹ä¹Ÿä¸è¿Ÿï¼Œè¿™ä¸€æ‹–å°±æ˜¯3ã€4ä¸ªæœˆï¼Œå±å®æ˜¯æƒ­æ„§ã€‚ä½†æ¬ ä¸‹çš„å€ºç»ˆå½’æ˜¯è¦å¿è¿˜çš„ï¼Œä¸æ˜¯å—ï¼Ÿ</p><h1 id="åšå®¢æ­å»º"><a class="markdownIt-Anchor" href="#åšå®¢æ­å»º"></a> åšå®¢æ­å»º</h1><p>å…¶å®ç½‘ä¸Šæ­å»ºhexoåšå®¢çš„æ•™ç¨‹å¾ˆå¤šï¼Œæ„Ÿè§‰è‡ªå·±å†é‡å¤é€ è½®å­ä¹Ÿæ²¡ä»€ä¹ˆå¿…è¦ï¼Œå› æ­¤è¿™é‡Œç»™å‡ºæˆ‘åœ¨å­¦ä¹ æ­å»ºåšå®¢è¿‡ç¨‹ä¸­å‚è€ƒçš„ä¸€äº›æ–‡ç« åšå®¢ï¼š</p><ul><li><p><a href="https://evenweiss.github.io/2021-08-02-blog-building/#%E4%B8%80%E3%80%81Github-Pages-%E4%BB%8B%E7%BB%8D%E5%8F%8A%E9%85%8D%E7%BD%AE">åšå®¢æ­å»ºæ•™ç¨‹</a></p></li><li><p><a href="https://www.cnblogs.com/mfrank/p/12829882.html">Hexoåšå®¢éƒ¨ç½²Github Pages</a></p></li><li><p><a href="https://blog.csdn.net/i_do_not_know_you/article/details/105594269">ç»‘å®šåŸŸåçš„é‡åˆ°å‘</a></p></li><li><p><a href="https://hexo.fluid-dev.com/posts/fluid-write/">æ­é… Fluid å¦‚ä½•ä¼˜é›…çš„å†™ä¸€ç¯‡æ–‡ç« </a></p></li></ul><h1 id="è¸©å‘è®°å½•"><a class="markdownIt-Anchor" href="#è¸©å‘è®°å½•"></a> è¸©å‘è®°å½•</h1><ol><li>ç»‘å®šé˜¿é‡Œäº‘çš„topåŸŸåï¼Œè§£ææˆåŠŸçš„é—®é¢˜æ˜¯ï¼šè®¿é—®é€Ÿåº¦å˜å¾—å·¨æ…¢ï¼Œå¹¶ä¸”é¡µé¢æ•ˆæœå¾ˆå·®ï¼Œå›¾ç‰‡å‡ ä¹å±•ç¤ºä¸å‡ºæ¥ï¼›å’Œverceléƒ¨ç½²å‡ºæ¥çš„æ•ˆæœä¸€è‡´ï¼ˆæ˜¯ä¸æ˜¯å­˜åœ¨ä»€ä¹ˆå…±æ€§ï¼Ÿï¼‰</li></ol><ul><li>è¿™ä¸ªé—®é¢˜åé¢ä¹Ÿæ²¡æœ‰è§£å†³ï¼Œä»¤äººæƒ­æ„§ï¼Œä½†æˆ‘æ„Ÿè§‰æ˜¯éƒ¨ç½²åœ¨å¢ƒå¤–æœåŠ¡å™¨çš„é—®é¢˜ï¼Ÿ</li></ul><hr /><ol start="2"><li>å½“åˆ é™¤é˜¿é‡Œäº‘åŸŸåè§£æç›¸å…³è®°å½•åï¼Œ<a href="http://xn--2017zhangyuxuan-1u97bj59g.github.io">è®¿é—®2017zhangyuxuan.github.io</a> ä¾ç„¶ä¼šè·³è½¬åˆ°æ³¨å†Œçš„åŸŸåä¸Škingofdark.topï¼Œç„¶åæŠ¥é”™HTTP 502</li></ol><ul><li>è¿‡äº†ä¸€å¤©ä¹‹åå¥½åƒæ­£å¸¸äº†ï¼Œåº”è¯¥æ˜¯DNSè§£æç¼“å­˜çš„é—®é¢˜ã€‚</li></ul><hr /><ol start="3"><li>å–æ¶ˆWalineè¯„è®ºæ—¶æ˜¾ç¤ºæµè§ˆå™¨å†…æ ¸ä¸æ“ä½œç³»ç»Ÿä¿¡æ¯</li></ol><ul><li>hexo-theme-fluid/source/css/main.styl è·¯å¾„ä¸‹æ·»åŠ ä»¥ä¸‹é…ç½® (ä¸è¿‡å¥½åƒåªæœ‰æœ¬åœ°é¢„è§ˆæœ‰æ•ˆï¼Œéƒ¨ç½²åˆ°Github pagesä¸Šä¾ç„¶ä¸ç”Ÿæ•ˆï¼›åœ¨Verceléƒ¨ç½²çš„ï¼ŒåŒæ ·ä¹Ÿå·²ç»ç”Ÿæ•ˆäº†)</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.vmeta</span> &#123;<br>  <span class="hljs-attribute">display</span>:none;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>æ›´å¥½çš„åšæ³•æ˜¯åœ¨æœåŠ¡ç«¯é…ç½® DISABLE_USERAGENT ç¯å¢ƒå˜é‡ä¸ºtrueï¼›é‡æ–°éƒ¨ç½²åå¾—åˆ°æ–°çš„server urlï¼Œä¸€å®šè¦è®°å¾—æŠŠè¿™ä¸ªserver urlå¡«å†™åˆ°_config.fluid.ymlæ–‡ä»¶ä¸­ï¼Œæ›´æ–°ï¼ï¼ è¿™é‡Œè¸©äº†ä¸ªå¤§å‘ï¼ï¼</li></ul><hr /><ol start="4"><li>å› ä¸ºæˆ‘æ˜¯ä½¿ç”¨typoraæ¥å†™æœ¬åœ°åšå®¢çš„ï¼Œå†™åšå®¢æ—¶ä¼šéœ€è¦æ’å…¥å›¾ç‰‡ï¼Œå› æ­¤é…ç½®å›¾åºŠè¿˜æ˜¯æŒºæœ‰å¿…è¦çš„ï¼Œä¸‹é¢æ¨èä¸¤ç¯‡æ•™ç¨‹ï¼š</li></ol><ul><li><a href="https://zhuanlan.zhihu.com/p/365829157">Typora+PicGo+Github = Markdownç¼–è¾‘å™¨+å›¾åºŠ</a></li><li><a href="https://www.jianshu.com/p/1059cc94d63d">picgo + gitee é…ç½®</a></li></ul><h1 id="è¿›é˜¶æ”¹åŠ¨"><a class="markdownIt-Anchor" href="#è¿›é˜¶æ”¹åŠ¨"></a> è¿›é˜¶æ”¹åŠ¨</h1><p>å½“èƒ½å¤Ÿæ­£å¸¸æ­å»ºèµ·æœ¬åœ°åšå®¢åï¼Œå¯ä»¥å°è¯•ä¸€äº›è¿›é˜¶æ”¹åŠ¨ï¼Œå¯ä»¥å‚è€ƒä¸‹é¢å‡ ç¯‡æ–‡ç« ï¼š</p><ul><li><p><a href="https://github.com/qixa/hexo-theme-fluid-mod#%E8%AF%A6%E7%BB%86%E4%BF%AE%E6%94%B9%E4%BF%A1%E6%81%AF">Fluidä¸»é¢˜è¿›é˜¶ä¿®æ”¹ç‰ˆ</a></p></li><li><p><a href="https://2017zhangyuxuan.github.io/2022/02/13/2022-02/2022-02-13%20%E9%98%BF%E9%87%8C%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AEHexo%E5%8D%9A%E5%AE%A2/">é˜¿é‡Œäº‘æœåŠ¡å™¨é…ç½®Hexoåšå®¢</a></p></li><li><p><a href="https://www.julydate.com/post/60859300/#%E6%80%BB%E7%BB%93">CDNåŠ é€Ÿ</a></p></li><li><p><a href="https://github.com/cjh0613/hexo-submit-urls-to-search-engine">ç½‘ç«™SEOä¼˜åŒ–</a></p></li></ul><hr /><p>æœ€åé™„ä¸Šæˆ‘å½“æ—¶çš„å¿ƒè·¯å†ç¨‹ï¼šå¿ƒæ€å´©äº†ï¼Œå¼„äº†å‡ å¤©ä¹Ÿæ²¡ç»‘å®šä¸Šè‡ªå·±çš„åŸŸåï¼Œç„¶åCDNåŠ é€Ÿä¹Ÿéœ€è¦é…ç½®è‡ªå·±çš„åŸŸåï¼Œåæ¥æƒ³æƒ³è¿˜æ˜¯ç®—äº†ï¼Œæ¯•ç«Ÿåšå®¢è¿˜æ˜¯å†…å®¹æœ€é‡è¦ï¼Œåƒæ˜¯é¡µé¢çš„ç¾è§‚æˆ–è€…æ˜¯ç½‘ç«™åŠ è½½é€Ÿåº¦éƒ½æ˜¯å…¶æ¬¡äº†ï¼Œä¸‹æ¬¡ä¸€å®šã€‚ï¼ˆä¹Ÿåªèƒ½è¿™æ ·å®‰æ…°è‡ªå·±äº†ï¼Œæµä¸‹äº†æ— èƒ½çš„æ³ªæ°´ï¼‰</p><center><img src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fww4.sinaimg.cn%2Fbmiddle%2F9150e4e5ly1fkonbtgn8aj20qo0qomyg.jpg&refer=http%3A%2F%2Fwww.sina.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1647397220&t=7ee46f97d55b16b2e4057e967d3fc105" alt="" style="zoom:67%;" /></center><p class='note note-primary' >  <font size='4'>     æœ€åæ€»ç»“æ¥è¯´ï¼Œå†™åšå®¢ï¼Œæœ€é‡è¦çš„è¿˜æ˜¯æŒä¹‹ä»¥æ’ï¼Œè¿˜æ˜¯äº§å‡ºå†…å®¹ï¼Œä¸èƒ½æœ¬æœ«å€’ç½®ï¼Œæ¡äº†èŠéº»ä¸¢äº†è¥¿ç“œã€‚  </font></p>]]></content>
    
    
    <categories>
      
      <category>è®¡ç®—æœºçŸ¥è¯†</category>
      
      <category>ç¯å¢ƒæ­å»ºç³»åˆ—</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åšå®¢æ­å»º</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/2021/09/25/2021-09/2021-09-25%20hello-world/"/>
    <url>/2021/09/25/2021-09/2021-09-25%20hello-world/</url>
    
    <content type="html"><![CDATA[<p>æœ€åˆçš„åšå®¢ï¼Œçºªå¿µé‚£ä»½æ¢ç´¢æ–°äº‹ç‰©çš„æ¿€åŠ¨ä¸å–œæ‚¦ï¼Œä¹Ÿæ˜¯å‘Šè¯‰è‡ªå·±ä¸å¿˜åˆå¿ƒã€‚</p><p>Hello world !</p><p>I will be the best animation lover who is able to save the world !</p>]]></content>
    
    
    <categories>
      
      <category>å…¶ä»–</category>
      
    </categories>
    
    
  </entry>
  
  
  
  
</search>
